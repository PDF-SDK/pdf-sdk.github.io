!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("hammerjs"),require("jquery-contextmenu"),require("eventemitter3"),require("dialog-polyfill"),require("i18next"),require("i18next-chained-backend"),require("i18next-localstorage-backend"),require("i18next-xhr-backend"),require("file-saver"),require("babel-polyfill")):"function"==typeof define&&define.amd?define(["jquery","hammerjs","jquery-contextmenu","eventemitter3","dialog-polyfill","i18next","i18next-chained-backend","i18next-localstorage-backend","i18next-xhr-backend","file-saver","babel-polyfill"],e):"object"==typeof exports?exports.PDFViewCtrl=e(require("jquery"),require("hammerjs"),require("jquery-contextmenu"),require("eventemitter3"),require("dialog-polyfill"),require("i18next"),require("i18next-chained-backend"),require("i18next-localstorage-backend"),require("i18next-xhr-backend"),require("file-saver"),require("babel-polyfill")):t.PDFViewCtrl=e(t.jQuery,t.Hammer,t["jquery-contextmenu"],t.EventEmitter,t.dialogPolyfill,t.i18next,t.i18nextChainedBackend,t.i18nextLocalStorageBackend,t.i18nextXHRBackend,t.saveAs,t["babel-polyfill"])}(self,(function(t,e,n,o,r,a,s,u,c,l,f){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=78)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.convertFromNumberToHex=function(t){if("number"!=typeof t)throw new TypeError("Unexpected color value:"+t);if(t<0)return-1;var e=t.toString(16),n=6;t>16777215&&(n=8);for(;e.length<n;)e="0"+e;return"#"+e},e.convertFromNumberToRGBA=function(t){var e=void 0;t<16777216?e=255:(e=t/r&255,t&=16777215);return{r:t>>16&255,g:t>>8&255,b:255&t,a:e}},e.colorConvertor=function(t){var e,n,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a="",s=void 0;"number"==typeof t&&(t=["int",t]);switch(t[0]){case"int":e=(16711680&t[1])>>16,n=(65280&t[1])>>8,o=255&t[1];break;case"T":e=0,n=0,o=0,i=0;break;case"G":e=n=o=255*t[1];break;case"RGB":e=255*t[1],n=255*t[2],o=255*t[3];break;case"CMYK":e=(1-t[4])*(1-t[1])*255,n=(1-t[4])*(1-t[2])*255,o=(1-t[4])*(1-t[3])*255;break;case"r":s=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/),e=+s[1],n=+s[2],o=+s[3];break;case"#":var u=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;s=t.match(u),e=parseInt(s[1],16),n=parseInt(s[2],16),o=parseInt(s[3],16);break;default:throw new Error("Unsupported color format")}switch(r){case"HTML":a=e===n&&n===o&&-1===o?"transparent":"rgba("+parseInt(e)+","+parseInt(n)+","+parseInt(o)+","+i+")";break;case"RGB":a=["RGB",e/255,n/255,o/255];break;case"#":a+=e<16?"#0"+e.toString(16):"#"+e.toString(16),a+=n<16?"0"+n.toString(16):n.toString(16),a+=o<16?"0"+o.toString(16):o.toString(16);break;case"int":a=0,a|=(i*=255)<<24,a|=e<<16,a|=n<<8,a|=o,a>>>=0}return a},e.standardColorAsARGBNumber=function(t){if(t<=16777215)return 4278190080+t;if(t>16777215)return t;if("string"==typeof t){if((t=t.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(t,16);if(t.match(/^[0-9A-F]{6}$/i))return 4278190080+parseInt(t,16);if(t.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){var e=t.split(/\D+/).map((function(t){return parseInt(t)})),n=o(e,4),r=n[1],i=n[2],a=n[3];return 4278190080+(r<<16)+(i<<8)+a}if(t.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){var s=t.split(/\D+/).map((function(t){return parseInt(t)})),u=o(s,5),c=u[1],l=u[2],f=u[3],d=u[4];return Math.floor(4278190080*d)+(c<<16)+(l<<8)+f}}throw new Error('incorrect color format: "'+t+'"')},e.convertFromNumberToJSColor=function(t){return["RGB",((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255]};var r=Math.pow(2,24)},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(3),i=(o=r)&&o.__esModule?o:{default:o};e.default=Object.assign({jrLicenseSuccess:"jr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",renderPageSuccess:"render-page-success",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActionAnnotation:"update-action-annotation",removeActionAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationFailed:"remove-action-annotation-failed",switchStateHandler:"switch-state-handler",redactAnnotRendered:"redact-annot-rendered",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",updateCreatingDistanceAnnot:"distance-creation-update",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",applicationOfInkSign:"application-of-ink-sign",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",disableScroll:"disable-scroll",enableScroll:"enable-scroll",selectText:"select-text",changeEnableJS:"change-enable-js"},i.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationAdd:"annotation-add",annotationImported:"annotation-imported",actionUpdated:"action-updated",actionAdd:"action-add",actionRemove:"action-remove",layerVisibleChange:"layer-visible-change",bookmarkAdded:"bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageRotationChange:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",importPages:"import-pages",applyRedaction:"apply-redaction",removeReviewState:"remove-review-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(179);Object.defineProperty(e,"MARKUP_ANNOTATION_STATE",{enumerable:!0,get:function(){return(t=o,t&&t.__esModule?t:{default:t}).default;var t}});e.BORDER_STYLE={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5},e.POINT_TYPE={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},e.Intents={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"};var r=e.LineEndingName={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"};e.LineEndingStyle=Object.keys(r).reduce((function(t,e){return t[r[e]]=Number(e),t}),{}),e.LINE_CAPTION_POSITION={POS_INLINE:0,POS_TOP:1},e.AnnotFlagsName={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},e.PDFDocPermission={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},e.MeasureType={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},e.STORE_NAMES={SELECTION_INFO:"viewer--store-selection-info"},e.CREATING_MEASUREMENT_CONTEXTMENU="creating-measurement-contextmenu",e.HIGHLIGHTING_MODE={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4}},function(t,e,n){"use strict";t.exports=n(146)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSmartScale=e.getWHByMatrix=e.pxDPRpt=e.ptDPRpx=e.multiDPR=e.px2pt=e.pt2px=void 0;var o=n(11),r=n(154),i=void 0;function a(t){return function(){if(!i){var t=(0,o.getDPI)();i=[t.x,t.y]}return i}()[t]}e.pt2px=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*a(e)/72},e.px2pt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 72*t/a(e)},e.multiDPR=function(t){return t*o.dpr},e.ptDPRpx=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.dpr*t*a(e)/72},e.pxDPRpt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t/o.dpr/a(e)*72},e.getWHByMatrix=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=(0,r.pageMatrix)(t,e,n,o);return[i[3]*t+i[5],i[3]*e+i[5]]},e.getSmartScale=function(t,e,n){return Math.min(Math.max(Math.ceil(4*t)/4,e),n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialPromise=e.DebounceAsyncTaskExecutor=e.DebouncePromiseQueue=void 0;var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(23),a=(o=i)&&o.__esModule?o:{default:o};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){},c=function(){function t(){s(this,t),this.queue=[],this.promise=Promise.resolve()}return t.prototype.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.queue.push([t,e]),this.exec()},t.prototype.exec=function(){var t=this;if(!this.execIng){var e=this.queue.pop();if(e){this.execIng=!0;for(var n=0,o=this.queue.length;n<o;n++)this.queue[n][1]();return this.queue=[],Promise.resolve(e[0]()).catch((function(){e[1]()})).finally((function(){t.execIng=!1,setTimeout((function(){t.exec()}),30)}))}}},t.prototype.end=function(){this.queue=[]},t}(),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;s(this,t),this.interval=e,this.status=t.STATUS_IDLE,this.defer=(0,a.default)(),this.lastTaskPromise=null,this.cancelLast=u}return r(t,null,[{key:"STATUS_IDLE",get:function(){return"idle"}},{key:"STATUS_RUNNING",get:function(){return"running"}},{key:"STATUS_READY",get:function(){return"ready"}}]),t.prototype.exec=function(e,n,o){var r=this;switch(this.status){case t.STATUS_IDLE:case t.STATUS_READY:this.cancelLast();var i=setTimeout((function(i){r.status=t.STATUS_RUNNING;var s=r.defer,u=s.resolve,c=s.reject,l=function(){r.status=t.STATUS_IDLE,r.defer=(0,a.default)()};try{var f=e.apply(o,n||[]);f instanceof Promise?f.finally(l).then(u,c):(u(f),l())}catch(t){c(t)}}),this.interval);this.cancelLast=function(){clearTimeout(i)};break;case t.STATUS_RUNNING:var s=function(){switch(r.status){case t.STATUS_IDLE:r.status=t.STATUS_READY}return r.exec(e,n,o)};return this.lastTaskPromise=this.defer.promise.then(s,s)}return this.lastTaskPromise=this.defer.promise},t.prototype.waitForLastTask=function(t){return this.lastTaskPromise||Promise.resolve(t)},t}(),f=function(){function t(){s(this,t),this.queue=[],this.continueExec=!0,this.deferred=(0,a.default)()}return t.prototype.serial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.queue=t,this.exec(),this.deferred.promise},t.prototype.push=function(){this.queue.push.apply(this.queue,arguments)},t.prototype.unshift=function(){this.queue.unshift.apply(this.queue,arguments)},t.prototype.concat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.queue.concat(t)},t.prototype.exec=function(){var t=this;if(!this.execIng){this.execIng=!0;var e=(this.queue.shift()||u)();return Promise.resolve(e).finally((function(){return t.execIng=!1,t.queue.length?t.continueExec?void setTimeout((function(){t.exec()}),30):(t.queue=[],t.deferred.resolve(e)):t.deferred.resolve(e)})),this.deferred.promise}},t.prototype.end=function(){return this.continueExec=!1,this.deferred.promise},t}();e.DebouncePromiseQueue=c,e.DebounceAsyncTaskExecutor=l,e.SerialPromise=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(17)),r=s(n(75)),i=s(n(3)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return r.groupElements=[],r.replies=[],r.markedStates=[],r.reviewStates=[],r}return u(e,t),e.prototype.getFlags=function(){return-2&t.prototype.getFlags.call(this)},e.prototype.reviseSummary=function(t){var e=this,n=this.info,o=[],r=n.groupElementsSummary.map((function(e){return Promise.resolve(t(e.id))})),i=Promise.all(r).then((function(t){e.groupElements=t}));o.push(i);var a=n.groupHeaderSummary;a&&o.push(Promise.resolve(t(a.id)).then((function(t){e.groupHeader=t})));var s=n.repliesSummary.map((function(e){return Promise.resolve(t(e.id))})),u=Promise.all(s).then((function(t){e.replies=t}));o.push(u);var c=n.markedStatesSummary.map((function(e){return Promise.resolve(t(e.id))})),l=Promise.all(c).then((function(t){e.markedStates=t}));o.push(l);var f=n.reviewStatesSummary.map((function(e){return Promise.resolve(t(e.id))})),d=Promise.all(f).then((function(t){e.reviewStates=t}));o.push(d);var p=n.popupSummary;return p&&o.push(Promise.resolve(t(p.id)).then((function(t){e.popup=t}))),Promise.all(o).then((function(){return e.reviseSummaryIsOK=!0,e}))},e.prototype.getBitmap=function(t,e,n){var o=this.getPDFPage(),r=o.getPDFDoc();return this.api.getAnnotBitmap(r.getId(),o.getId(),this.getId(),t,e,n)},e.prototype.getOpacity=function(){return this.info.opacity},e.prototype.setOpacity=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return t=+t,this.api.setAnnotOpacity(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(t){return Promise.all(t.map((function(t){return t._update()})))})).then((function(t){return e.eventEmitter.emit(i.default.annotationUpdated,t,n),e.eventEmitter.emit(i.default.annotationAppearanceUpdated,t,n),t}))},e.prototype.getSubject=function(){return this.info.subject},e.prototype.setSubject=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setSubject(o.getId(),n.getId(),this.getId(),t).then((function(){return e.update()}))},e.prototype.getTitle=function(){return this.info.title},e.prototype.setTitle=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setTitle(o.getId(),n.getId(),this.getId(),t).then((function(){return e.update()}))},e.prototype.isGrouped=function(){return this.info.isGrouped},e.prototype.isGroupHeader=function(){return this.info.isGroupHeader},e.prototype.getGroupElements=function(){return this.groupElements},e.prototype.getGroupHeader=function(){return this.groupHeader},e.prototype.getReplyCount=function(){return this.replies.length},e.prototype.getReply=function(t){return this.replies[t]},e.prototype.getReplies=function(){return this.replies},e.prototype.addReply=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc(),r=this.getGroupHeader()||this;return this.api.annotAddReply(o.getId(),n.getId(),this.getId(),t).then((function(t){r.info.repliesSummary.push({id:t.id,index:t.index});var o=e.engine.annotManager.get(t,n);return n.addReplyAnnot(o)})).then((function(t){return r.replies.push(t),e.engine.eventEmitter.emit(i.default.annotationReplyAdd,t,r),t}))},e.prototype.removeRepliesByIdLocaly=function(t){if(!Array.isArray(t)||t.length<1||this.replies.length<1)return t||[];var e=t.slice(0);return this.replies=this.replies.filter((function(t){var n=e.indexOf(t.getId());return n>-1&&e.splice(n,1),-1==n})),e},e.prototype.getMarkedStateCount=function(){return this.markedStates.length},e.prototype.getMarkedState=function(t){return this.markedStates[t]},e.prototype.getMarkedStates=function(){return this.markedStates},e.prototype.getReviewStateCount=function(){return this.reviewStates.length},e.prototype.getReviewState=function(t){return this.reviewStates[t]},e.prototype.getReviewStates=function(){return this.reviewStates},e.prototype.addReviewState=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc(),r=this.getGroupHeader()||this;return this.api.addAnnotReviewState(o.getId(),n.getId(),this.getId(),t).then((function(t){r.info.reviewStatesSummary.push({id:t.id,index:t.index});var o=e.engine.annotManager.get(t,n);return n.addAddonAnnot(o)})).then((function(t){return r.reviewStates.push(t),e.engine.eventEmitter.emit(i.default.annotationReviewStateAnnotAdd,t,r),t}))},e.prototype.removeReviewState=function(){var t=this,e=this.page,n=this.getReviewStates(),o=n[n.length-1];return e.removeAnnot(o).then((function(){t.reviewStates.pop(),t.engine.eventEmitter.emit(i.default.removeReviewState,t)}))},e.prototype.addMarkedState=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc(),r=this.getGroupHeader()||this;return this.api.addAnnotMarkedState(o.getId(),n.getId(),this.getId(),t).then((function(t){r.info.markedStatesSummary.push({id:t.id,index:t.index});var o=e.engine.annotManager.get(t,n);return n.addAddonAnnot(o)})).then((function(t){return r.markedStates.push(t),e.engine.eventEmitter.emit(i.default.annotationMarkedStateAnnotAdd,t,r),t}))},e.prototype.removeAllStateAnnots=function(){var t=this;this.checkModidyPerm();var e=this.getPDFPage(),n=e.getPDFDoc(),o=this.getGroupHeader()||this;return this.api.removeAllStateAnnots(n.getId(),e.getId(),this.getId()).then((function(n){return!!n&&(o.info.markedStatesSummary.forEach((function(t){var n=t.id;e.removeAddonAnnotById(n)})),o.info.reviewStatesSummary.forEach((function(t){var n=t.id;e.removeAddonAnnotById(n)})),o.info.markedStatesSummary=[],o.info.reviewStatesSummary=[],o.reviewStates=[],o.markedStates=[],t.engine.eventEmitter.emit(i.default.annotationStatesCleared,o),n)}))},e.prototype.getPopup=function(){return this.popup},e.prototype.getCreateDateTime=function(){return new Date(this.info.creationTimestamp)},e.prototype.setCreateDateTime=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setCreateDateTime(o.getId(),n.getId(),this.getId(),t).then((function(){return e.update()}))},e.prototype.getIntent=function(){return this.info.intent},e.prototype.setIntent=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotIntent(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(e){for(var n=0;n<e.length;n++)e[n].info.intent=t;return e})).then((function(t){return e.eventEmitter.emit(i.default.annotationUpdated,t,n),e.eventEmitter.emit(i.default.annotationAppearanceUpdated,t,n),t}))},e.prototype.getFillColor=function(){return this.info.fillColor},e.prototype.setFillColor=function(t){var e=this;t=0===t?0:(0,a.colorConvertor)(t,"int");var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotFillColor(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(){return e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],n),t})):t}))},e.prototype.update=function(){var t=this,e=this.getGroupElements();0==e.length&&(e=[this]);for(var n=[],o=0,r=e.length;o<r;o++){var a=e[o];n[o]=a._update()}return Promise.all(n).then((function(e){return t.eventEmitter.emit(i.default.annotationUpdated,e,t.getPDFPage()),e}))},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.opacity,o=(0,r.default)(new Date(this.info.creationTimestamp),"D:yyyyMMddhhmmssTZ","'"),i=this.info.intent,a=this.info.subject,s=this.info.title,u=this.info.IRT,c=this.info.RT;i=i.length>0?{IT:i,intent:i}:{};var l=Object.assign({},e,{opacity:n,creationdate:o,subject:a,title:s},i);return u&&c&&(l.inreplyto=u,l.replyType=c.toLowerCase()),this.popup&&(l.popup=this.popup.exportToJSON()),this.info.rotation&&(l.rotation=360-this.info.rotation),l},e.prototype.setContent=function(t){var e=this;return this.checkModidyPerm(),(this.getGroupHeader()||this)._setContent(t).then((function(t){return e.getPDFPage().getAnnotsByIdArray([t])})).then((function(n){var o=n[0];return o&&(o.info.content=t,o.info.modifiedTimestamp=(new Date).getTime()),e.eventEmitter.emit(i.default.annotationUpdated,n,e.getPDFPage()),n}))},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(122);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return i(e,t),e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=function(){var t=navigator.appVersion.match(/iphone/gi),e="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;return t&&(e=Math.min(2,e)),e}();var i=void 0,a=void 0,s=void 0;function u(){return i||(i=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);var e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),i}var c=void 0;e.getDPI=u,e.getPtPxRatio=function(){if(void 0===a){var t=u();a=t.x/72}return a},e.getPxPtRatio=function(){if(void 0===s){var t=u();s=72/t.x}return s},e.dpr=r,e.copyText=function(t){var e=c||((c=document.createElement("input")).type="text",c.style.opacity="0",c.style["z-index"]=-1,c.style.position="absolute",document.body.appendChild(c),c);e.value=t,e.select(),e.focus(),e.setSelectionRange(0,e.value.length);var n=document.execCommand("copy",!1,e.value);return e.blur(),n},e.eventPath=function(t){var e=t.composedPath&&t.composedPath()||t.path,n=t.target;return null!=e?e.indexOf(window)<0?e.concat(window):e:n===window?[window]:[n].concat(function t(e,n){n=n||[];var o=e.parentNode;return o?t(o,n.concat(o)):n}(n),window)},e.isIE10=function(){var t=navigator.userAgent.toLowerCase(),e=void 0;return!!("ActiveXObject"in self&&(e=t.match(/msie ([\d\.]+)/)))&&10===parseInt(e[1])},e.getCanvasPixelRatio=function(){if("object"!==("undefined"==typeof window?"undefined":o(window)))return 1;var t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=p(n(183)),i=p(n(32)),a=p(n(184)),s=n(26),u=n(50),c=p(n(96)),l=n(97),f=p(n(16)),d=p(n(185));function p(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=(0,l.identity)(!0),y=d.default.getLogger("ShapeControl"),v={};function m(t){var e=Object.keys(t).sort().map((function(e){return t[e]?1:0})).join("");if(e in v)return v[e].cloneNode(!0);var n=(new DOMParser).parseFromString((0,r.default)(t),"text/html").body.firstChild;return v[e]=n,n.cloneNode(!0)}var b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.start,o=void 0===n?i.default:n,r=e.update,a=void 0===r?i.default:r,s=e.interceptor,u=void 0===s?g:s,c=e.moving,l=void 0===c?i.default:c,f=e.end,d=void 0===f?i.default:f,p=e.rotate,y=void 0===p?i.default:p,v=e.rotateStart,b=void 0===v?i.default:v,w=e.rotateEnd,P=void 0===w?i.default:w,A=e.enableDiagonally,_=void 0!==A&&A,C=e.enableFrame,D=void 0===C||C,S=e.enableSizeBox,R=void 0!==S&&S,E=e.resizable,O=void 0===E||E,I=e.moveable,x=void 0===I||I,M=e.rotatable,T=void 0!==M&&M,F=e.previewer,k=void 0!==F&&F,j=e.enableUniform,V=void 0!==j&&j,B=e.minUniformSize,N=void 0===B?15:B,L=e.annotRender,U=void 0===L?null:L,q=e.expansion,H=void 0===q?{left:1,top:1,right:1,bottom:1}:q;h(this,t),this.ui=m({enableDiagonally:_,resizable:O,enableFrame:D,rotatable:T,moveable:x,previewer:k,enableSizeBox:R}),this.onStart=o,this.onUpdate=a,this.onMoving=l,this.interceptor=u,this.onEnd=d,this.rotate=y,this.rotateStart=b,this.rotateEnd=P,this.enableUniform=V,this.minUniformSize=N,this.rotatable=T,this.moveable=x,this.enablePreviewer=k,this.isDisabled=!1,this.enableDiagonally=_,this.enableFrame=D,this.enableSizeBox=R,this.resizable=O,this.annotRender=U,this.rotateCursorStyle="fv__cursor-rotation",this.rotateDegree=0,this.isRotateStarted=!1,this.expansion=H}return o(t,null,[{key:"ACTION_RESIZE",get:function(){return"resize"}},{key:"ACTION_MOVE",get:function(){return"move"}}]),t.prototype.init=function(){if(!this._isInitted){this._isInitted=!0;var t=this.ui.querySelector(".fv__shape-control-previewer");this.rotatingRod=this.ui.querySelector(".fv__shape-rotate"),this.shapeSizeBox=this.ui.querySelector(".fv__shape-size"),this.context=t.getContext("2d"),this.rotateDegreeBox=this.ui.querySelector(".fv-shape-rotate-degree"),this.updateRotateDegreeBox(this.rotateDegree),this.bindEvents()}},t.prototype.getPreviewerContext=function(){return this.context},t.prototype.bindEvents=function(){var t=this,e=this.ui.querySelectorAll(".fv__shape-controller");Array.prototype.slice.call(e).forEach((function(e){return t._bindControllerEvents(e)})),this.moveable&&this._bindMoveAreaEvents(),this.rotatable&&this._bindRotateEvents()},t.prototype._bindControllerEvents=function(e){var n=this,o=new s.Manager(e);o.add(new s.Pan({direction:s.DIRECTION_ALL}));var r=void 0,i=void 0;o.on("panmove",(function(t){var o=t.deltaX,a=t.deltaY;if(!n.isDisabled){var s=o-r,u=a-i;r=o,i=a,n.resize(e.getAttribute("direction"),s,u),n._resizeSizeBox()}})),o.on("panstart",(function(t){var o=t.deltaX,a=t.deltaY;n.isDisabled||(r=o,i=a,n.start(),n.resize(e.getAttribute("direction"),o,a,!0))})),o.on("panend",(function(e){n.isDisabled||n.end(t.ACTION_RESIZE)})),o.on("pancancel",(function(e){n.isDisabled||n.cancel(t.ACTION_RESIZE)}))},t.prototype._resizeSizeBox=function(){if(this.shapeSizeBox){var t=this.shape.getAdjustShape();t||(t=this.shape.shape);var e=parseInt(t.width),n=parseInt(t.height);this.shapeSizeBox.innerHTML=e<120?e+"px*"+n+"px":e<170?"W: "+e+"px, H: "+n+"px":"Width: "+e+"px, Height: "+n+"px",this.shapeSizeBox.style.top=n>100?"1px":"-22px"}},t.prototype._bindMoveAreaEvents=function(){var e=this,n=this.ui,o=new s.Manager(n.querySelector(".fv__shape-control-move-area"));o.add(new s.Pan({direction:s.DIRECTION_ALL}));var r=void 0,i=void 0;o.on("panstart",(function(t){var n=t.deltaX,o=t.deltaY;e.isDisabled||(r=n,i=o,e.start(),e.move(r,i,!0))})),o.on("panend",(function(n){e.isDisabled||e.end(t.ACTION_MOVE)})),o.on("pancancel",(function(n){e.isDisabled||e.cancel(t.ACTION_MOVE)})),o.on("panmove",(function(t){var n=t.deltaX,o=t.deltaY,a=t.center,s=t.direction;if(!e.isDisabled){var u=n-r,c=o-i;r=n,i=o;var l=e.ui.getBoundingClientRect(),f=l.left+l.width/2,d=l.top+l.height/2;a.x<f&&s&Hammer.DIRECTION_RIGHT&&(u=0),a.x>f&&s&Hammer.DIRECTION_LEFT&&(u=0),a.y<d&&s&Hammer.DIRECTION_DOWN&&(c=0),a.y>d&&s&Hammer.DIRECTION_UP&&(c=0),e.move(u,c)}}))},t.prototype.disable=function(){this.isDisabled=!0,this.ui.classList.add("disable")},t.prototype.enable=function(){this.isDisabled=!1,this.ui.classList.remove("disable")},t.prototype.start=function(){this.isDisabled||(this.ui.style.willChange="left, top, width, height",this.shape.process())},t.prototype.move=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isDisabled){var r=this.shape.getAdjustRect();this.shape.adjustPosition(e,n);var i=this.shape.getAdjustRect(),a=i.left-r.left,s=i.top-r.top;this.interceptor(this.shape.getAdjustShape())?(this.shape.applyAdjustingToDom(this.ui),o&&this.onStart(this.shape.getAdjustShape(),this.context,t.ACTION_MOVE),this.onMoving(this.shape.getAdjustShape(),this.context,{offsetLeft:a,offsetTop:s})):this.shape.undo()}},t.prototype.resize=function(e,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.isDisabled){switch(e){case u.DIR_EAST:case u.DIR_WEST:case u.DIR_NORTH:case u.DIR_SOUTH:case u.DIR_NORTH_EAST:case u.DIR_NORTH_WEST:case u.DIR_SOUTH_EAST:case u.DIR_SOUTH_WEST:break;default:throw new Error("Incorrect direction: "+e)}this._resize(e,n,o),this.interceptor(this.shape.getAdjustShape())?(this.shape.applyAdjustingToDom(this.ui),this._updatePreviewer(),r&&this.onStart(this.shape.getAdjustShape(),this.context,t.ACTION_RESIZE),this.onUpdate(this.shape.getAdjustShape(),this.context,{offsetLeft:n,offsetTop:o,direction:e})):this.shape.undo()}},t.prototype.end=function(t){this.isDisabled||(this.ui.style.willChange="auto",this.onEnd(this.shape.getAdjustShape(),this.context,t),this.shape.end(),this.shape.applyToDom(this.ui))},t.prototype.cancel=function(t){this.isDisabled||(this.shape.cancel(),this.shape.applyToDom(this.ui),this.onEnd(this.shape.getShape(),this.context,t))},t.prototype.moveDirectly=function(t,e){if(!this.isDisabled){this.start();try{this.move(t,e,!0)}catch(t){throw this.cancel(),t}this.end()}},t.prototype.resizeDirectly=function(t,e,n){if(!this.isDisabled){this.start();try{this.resize(t,e,n,!0)}catch(t){throw this.cancel(),t}this.end()}},t.prototype._updatePreviewer=function(){if(this.enablePreviewer){var t=this.ui.querySelector(".fv__shape-control-previewer");t.setAttribute("width",this.ui.offsetWidth),t.setAttribute("height",this.ui.offsetHeight)}},t.prototype.hidePreviewer=function(){},t.prototype.showPreviewer=function(){},t.prototype.hidden=function(){},t.prototype.show=function(){},t.prototype._resize=function(t,e,n){var o=this.ui,r=void 0;switch(r=this.enableUniform?a.default.ADJUST_MODE_UNIFORM:c.default.isShift?a.default.ADJUST_MODE_SQUARE:a.default.ADJUST_MODE_FREE,t){case u.DIR_NORTH:i(t,this.shape.adjustNorth(n,r));break;case u.DIR_SOUTH:i(t,this.shape.adjustSouth(n,r));break;case u.DIR_EAST:i(t,this.shape.adjustEast(e,r));break;case u.DIR_WEST:i(t,this.shape.adjustWest(e,r));break;case u.DIR_NORTH_WEST:i(t,this.shape.adjustNorthWest(e,n,r,this.minUniformSize));break;case u.DIR_NORTH_EAST:i(t,this.shape.adjustNorthEast(e,n,r,this.minUniformSize));break;case u.DIR_SOUTH_WEST:i(t,this.shape.adjustSouthWest(e,n,r,this.minUniformSize));break;case u.DIR_SOUTH_EAST:i(t,this.shape.adjustSouthEast(e,n,r,this.minUniformSize));break;default:throw new Error("Incorrect direction: "+t)}function i(t,e){if(t!==e){var n=o.querySelector("[direction="+e+"]"),r=o.querySelector("[direction="+t+"]");n.setAttribute("direction",t),r.setAttribute("direction",e)}}},t.prototype.active=function(t,e,n){this.init(),this._applyAnnotBoundary(e);var o=t instanceof Element?t:t.get(0);this.ui.parentElement!==o&&o.appendChild(this.ui),this.shape=new a.default({left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height,box:n,expansion:this.expansion}),this._updatePreviewer(),this._resizeSizeBox(),this.updateRotateDegreeBox(this.rotateDegree),this.rotatingRod&&(this.rotatingRod.style.transform="rotate("+this.rotateDegree+"deg)")},t.prototype.updateRotateDegreeBox=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(t=parseInt(t))>180&&(t-=360),t*=-1,this.rotateDegreeBox&&(this.rotateDegreeBox.innerHTML=t+"°",this.rotateDegreeBox.style.transform="rotate("+t+"deg)")},t.prototype.updateBoundary=function(t,e){Object.assign(this.shape.boundary,t),this._applyAnnotBoundary(this.shape.boundary),e&&this.updateBoundaryBox(e),this._updatePreviewer()},t.prototype.setMargin=function(t){t&&this.shape&&this.shape.setMargin(t)},t.prototype.updateBoundaryBox=function(t){this.shape.setBoundaryBox(t)},t.prototype.getCurrentShape=function(){return this.shape.getShape()},t.prototype.getAdjustingShape=function(){return this.shape.getAdjustShape()},t.prototype.getAdjustedOffset=function(){var t=this.getAdjustedRectDiff();return{offsetLeft:t.left,offsetTop:t.top}},t.prototype.getAdjustedRectDiff=function(){return f.default.subtract(this.shape.getAdjustRect(),this.shape.getRect())},t.prototype.deactive=function(){this.ui.parentNode&&this.ui.parentNode.removeChild(this.ui)},t.prototype.destroy=function(){this.disable(),this.ui.parentNode&&this.ui.parentNode.removeChild(this.ui)},t.prototype._applyAnnotBoundary=function(t){var e=t.left,n=t.top,o=t.width,r=t.height,i=this.expansion;this.ui.style.cssText+="\n            width: "+(o+(i.left+i.right))+"px;\n            height: "+(r+(i.top+i.bottom))+"px;\n            left: "+(e-i.left)+"px;\n            top: "+(n-i.top)+"px;\n            "},t.prototype._bindRotateEvents=function(){var t=this,e=this.ui,n=e.querySelector(".fv-shape-rotate-handle"),o=new s.Manager(n);o.add(new s.Pan({direction:s.DIRECTION_ALL}));var r=void 0,i=void 0,a={x:0,y:0},u=function(e,n){var o=r+e-a.x,s=i+n-a.y;return 90+180*Math.atan2(s,o)/Math.PI-t.rotateDegree};o.on("panstart",(function(n){if(!t.isDisabled){a.x=e.offsetLeft+e.offsetWidth/2,a.y=e.offsetTop+e.offsetHeight/2,r=a.x,i=e.offsetTop-.1*e.offsetHeight;var o=a.x+Math.sin(t.rotateDegree/180*Math.PI)*e.offsetHeight*.6,s=i+.6*e.offsetHeight-Math.cos(t.rotateDegree/180*Math.PI)*e.offsetHeight*.6;r=o,i=s,t.isRotateStarted=!0,t.rotateStart(t.rotateDegree,t.shape,t.context)}})),o.on("panend",(function(e){var n=e.deltaX,o=e.deltaY;if(!t.isDisabled){t.ui.style.transform="rotate(0deg)";var r=u(n,o);t.rotate(r),t.isRotateStarted=!1,t.rotateDegree+=r,t.rotatingRod.style.transform="rotate("+t.rotateDegree+"deg)",t.rotateEnd(t.rotateDegree,r,t.shape,t.context)}})),o.on("pancancel",(function(t){y.debug("rotate c")})),o.on("panmove",(function(e){var n=e.deltaX,o=e.deltaY;if(!t.isDisabled&&t.isRotateStarted){var r=u(n,o);t.ui.style.transform="rotate("+r+"deg)",t.updateRotateDegreeBox(t.rotateDegree+r)}}))},t}();e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={},r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.property=function(t,e,n){var r=o;Object.getOwnPropertyDescriptor(t,"__lazy__")||Object.defineProperty(t,"__lazy__",{value:{},enumerable:!1,configurable:!1});var i=t.__lazy__[e]||{};t.__lazy__[e]=i,i.initialized=!1,Object.defineProperty(t,e,{get:function(){return r===o&&(r=n(),i.initialized=!0),r},enumerable:!0,configurable:!0})},t.isPropertyIntialized=function(t,e){var n=t.__lazy__;return!!(n&&n[e]&&n[e].initialized)},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=y(n(28)),r=(y(n(25)),n(6),y(n(32))),i=y(n(1));n(44);var a=y(n(5)),s=n(47),u=y(n(48)),c=y(n(2)),l=y(n(38)),f=y(n(180)),d=y(n(93)),p=y(n(95)),h=n(0),g=y(n(49));function y(t){return t&&t.__esModule?t:{default:t}}function v(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var b=s.defaultAnnotComponentKey,w=(0,s.getCommonContextMenu)(".fv__pdf-page-annot-handler-rect"),P=void 0,A=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));s.name="markup",s.$ui.addClass("pdf-page-markup-annot-container"),s.$handler.addClass("pdf-page-markup-annot-handler-container"),s.apRenderer=s.generateApRenderer();var u=s.pdfViewer.i18n;return a.default.i18n=function(t){return u.t(t)},s}return m(e,t),e.getDefaultContextMenuConfig=function(){return w},e.setContextMenuConfig=function(t){P=t},e.prototype.generateApRenderer=function(){return new g.default(this)},e.prototype.getTileConfig=function(t,e){var n=this.pdfViewer,o=n.getSmartScale(t),r=n.config.tileSize,i=this.annot,a=i.getDeviceRect(1),s=i.getDeviceRect(o),u=s.right-s.left,c=s.bottom-s.top;return this.getAnnotFlag().checkNoZoom()&&(u=a.right-a.left,c=a.bottom-a.top),[Math.ceil(c/r),Math.ceil(u/r),u,c,r,o,t,e,a.left,a.top]},e.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,o=this.annot,r=this.getAnnotFlag();return this.scale=e,this.rotate=n,r.checkInvisible()||r.checkHidden()||o.isEmpty()||o.isDeleted()||o.rectIsEmpty()?(this.apRenderer.hide(),Promise.resolve()):(this.apRenderer.show(),this.$ui.removeClass("fv__annot-flags-nozoom"),this.apRenderer.render(e,n).then((function(){if(r.checkNoZoom()){t.$ui.addClass("fv__annot-flags-nozoom");var e=void 0,n=void 0;n=8&t.annot.getFlags()?(e=t.annot.getRect()).top-e.bottom:(e=o.getDeviceRect(1)).bottom-e.top;var i=e.right-e.left;t.$ui.css({width:i+"px",height:n+"px"}).find(".fv__tiles-canvas").css({width:"auto",height:"auto"})}var a=o.getPopup();a&&a.getOpenStatus&&a.getOpenStatus()?t.showPopup():t.hidePopup()})))},e.prototype.afterRender=function(t){t.transformed&&this.isActive&&this.active()},e.prototype.redraw=function(){return this.activeRect(),this.render()},e.prototype.active=function(){t.prototype.active.call(this),this.$handler.addClass("active")},e.prototype.activeMore=function(t,e){},e.prototype.activeMoreItem=function(){},e.prototype.unActive=function(){var e=this;this.isActive&&(t.prototype.unActive.call(this),this.$handler.removeClass("active"),this.getGroupRenders().map((function(t){t.component!=e&&t.component.unActive()})))},e.prototype.unActiveMore=function(){},e.prototype.renderDestroy=function(){this.apRenderer.destry(),this.$handler.remove()},e.prototype.showReplyDialog=function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateDeleteStatus(!0);var e=this.annot,n={},o=e.getGroupHeader()||e,r=n.content=o.getContent(),a=n.replies=[];this.iterationGetRepliesInfo(o,a);var s=a.length,c=(0,f.default)(n),l=(0,i.default)(c);this.$replyDialog=l;var h=l[0],g=l.find(".fv__btn-reply")[0],y=l.find(".reply-textarea")[0],v=!1;this.replyDisabled()?(l.find(".fv__btn-reply").addClass("fv__btn-replay-disabled"),l.find(".content-textarea").prop({disabled:!0}),l.find(".reply-textarea").prop({disabled:!0})):(l.find(".fv__btn-reply").removeClass("fv__btn-replay-disabled"),l.find(".content-textarea").prop({disabled:!1}),l.find(".reply-textarea").prop({disabled:!1})),l.on("click",".fv__btn-close",(function(){t.hideReplyDialog()})).on("change",".content-textarea",(function(e){var n=e.target,o=n.value;t.setContent(o).then((function(t){if(t)return r=o;n.value=r}))})).on("input",".reply-textarea",(function(t){g.disabled=!y.value})).on("click",".fv__btn-reply",(function(e){if(!t.replyDisabled()&&!v){g.disabled=!0,v=!0;var n=y.value;t.addReply(n).then((function(e){var n={content:e.getContent()},o=n.replies=[];t.iterationGetRepliesInfo(e,o),s?l.find(".fv__replies_list").first().append((0,p.default)(n)):l.find(".fv__dialog-replies-block").first().html((0,d.default)([n])),s=!0,y.value="",g.disabled=!1,v=!1}),(function(){g.disabled=!1}))}})),l.appendTo(document.body),u.default.registerDialog(h),h.showModal()},e.prototype.hideReplyDialog=function(){var t=this.$replyDialog;t&&(t[0].close(),t.remove(),this.$replyDialog=null),this.updateDeleteStatus(!1)},e.prototype.addReply=function(t){var e=this;return this.annot.addReply(t).then((function(t){return e.pdfViewer.eventEmitter.emit(c.default.updateActionAnnotation,e),t}))},e.prototype.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,h.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled()}},e.prototype.showPropertiesDialog=function(){this.$propertiesControl=new l.default(this),this.updateDeleteStatus(!0)},e.prototype.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.bindEvent(),this.updateDeleteStatus(!1)},e.prototype.updateRender=function(){return Promise.resolve()},e.prototype.setContent=function(t){var e=this;return this.annot.setContent(t).then((function(t){return t&&e.pdfViewer.eventEmitter.emit(c.default.updateActionAnnotation,e),t}))},e.prototype.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(c.default.updateActionAnnotation,e),t})):t}))},e.prototype.setOpacity=function(t){var e=this;return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(c.default.updateActionAnnotation,e),t})):t}))},e.prototype.destroy=function(){this.unBindEvent(),this.$propertiesControl=null,this.hideReplyDialog(),this.contextMenu&&this.contextMenu.destroy(),this.blankHammar&&this.blankHammar.destroy(),this.unActive(),this.unActiveMore(),t.prototype.destroy.call(this)},e.prototype.remove=function(){this.destroy()},e.prototype.iterationGetRepliesInfo=function(t,e){for(var n=t.getReplies(),o=0,r=n.length;o<r;o++){var i=n[o];if(!i.isDeleted()){var a={content:i.getContent(),replies:[]};this.iterationGetRepliesInfo(i,a.replies),e.push(a)}}},e.prototype.removeAnnot=function(){var t=this;if(this.deleteDisabled())return!1;var e=this.pdfViewer,n=e.eventEmitter,o=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||r.default)(this)).then((function(e){if(n.emit(c.default.removeActionAnnotationBefore,t),!1!==e)return o.getPDFPage().removeAnnot(o).then((function(e){if(e)return n.emit(c.default.removeActionAnnotationSuccess,t);n.emit(c.default.removeActionAnnotationFailed,t)}),(function(){n.emit(c.default.removeActionAnnotationFailed,t)}))}))},e.prototype.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},e.prototype.willRedraw=function(){t.prototype.willRedraw.call(this),this.apRenderer.willRender(),(this.$rect=this.$rect||this.rectInit()).get(0).willChange="left, top, width, height"},e.prototype.afterRedraw=function(){t.prototype.afterRedraw.call(this),this.apRenderer.afterRender(),(this.$rect=this.$rect||this.rectInit()).get(0).willChange="auto"},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceRect(n);e.css({left:o.left+"px",top:o.top+"px",width:o.right-o.left+"px",height:o.bottom-o.top+"px"})},e.prototype.rectInit=function(){var t=this,e=this.$handler,n=(0,i.default)(this.createRectDom());e.append(n);var o=n[0],r=this.rectHammer=new Hammer.Manager(o,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return r.add(new Hammer.Tap({event:"doubletap",taps:2})),r.add(new Hammer.Tap({event:"singletap"})),r.get("doubletap").recognizeWith("singletap"),r.get("singletap").requireFailure("doubletap"),r.on("doubletap",(function(e){!1!==t.onDoubleTap(e)&&t.rectDoubleTap()})),this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,e.get(0),this.getContextMenuConfig()),n.data(b,this),n},e.prototype.rectSingleTap=function(){},e.prototype.rectDoubleTap=function(t){this.showReplyDialog("comment")},e.prototype.createRectDom=function(){return(0,i.default)('<div class="fv__pdf-page-annot-handler-rect">')},e.prototype.doubleTapAnnot=function(){this.showReplyDialog("comment")},e.prototype.getContextMenuConfig=function(){if(P)return P;var t=this.constructor.getDefaultContextMenuConfig();for(var e in t)switch(e){case"items":var n=t[e],o=this.pdfViewer.i18n;for(var r in n){var i=n[r];i.nameI18nKey&&(i.name=o.t(i.nameI18nKey))}}return t},e.prototype.getRelevanceRenders=function(){var t=this.parent("annotsRender"),e=this.annot.getGroupHeader()||this.annot,n=[],o=e.getPopup(),r=[],i=[],a=[];!function(t,e){_(t,"getReplies",e)}(e,r),function(t,e){_(t,"getMarkedStates",e)}(e,i),function(t,e){_(t,"getReviewStates",e)}(e,a),o&&n.push(o.getId()),n.push.apply(n,r),n.push.apply(n,i),n.push.apply(n,a);var s=e.isGrouped()?e.getGroupElements():[e];return n.push.apply(n,v(s.map((function(t){return t.getId()})))),n.map((function(e){return t.getAnnotRender(e)})).filter((function(t){return!!t}))},e.prototype.getGroupRenders=function(){var t=this.parent("annotsRender"),e=this.annot;return((e=e.getGroupHeader()||e).isGrouped()?e.getGroupElements():[e]).map((function(e){return t.getAnnotRender(e.getId())}))},e.prototype.getGroupRect=function(){var t=this.getGroupRenders();if(t.length>1){var e=t.map((function(t){return t.component.getRect()}));return{left:Math.min.apply(Math,v(e.map((function(t){return t.left})))),right:Math.max.apply(Math,v(e.map((function(t){return t.right})))),top:Math.min.apply(Math,v(e.map((function(t){return t.top})))),bottom:Math.max.apply(Math,v(e.map((function(t){return t.bottom}))))}}var n=t[0].component.getRect();return Object.assign({},n)},e.prototype.showPopup=function(){},e.prototype.hidePopup=function(){},e.prototype.onDoubleTap=function(t){},e}(o.default);function _(t,e,n){var o=t[e](),r=o.length;if(!r)return n;for(var i=r;i--;){var a=o[i];_(a,e,n),n.push(a.getId())}return n}e.default=A},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=e.RectDiffer=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;o(this,t),this.top=e,this.left=n,this.bottom=r,this.right=i},i=(e.Rect=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,t),this.top=e,this.left=n,this.bottom=r,this.right=i},e.Boundary=function t(e,n,r,i){o(this,t),this.top=e,this.left=n,this.bottom=bottom,this.right=right},function(){function t(e){o(this,t),this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=e}return t.on=function(e){return new t(e)},t.subtract=function(t,e){return new r(t.top-e.top,t.left-e.left,t.bottom-e.bottom,t.right-e.right)},t.expandOffset=function(t,e){return new r(t.top-e.top,t.left-e.left,e.bottom-t.bottom,e.right-t.right)},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom},t.prototype.moveLeft=function(t){return this.offsetLeft+=t,this.offsetRight+=t,this},t.prototype.moveTop=function(t){return this.offsetTop+=t,this.offsetBottom+=t,this},t.prototype.move=function(t,e){return this.moveLeft(t).moveTop(e)},t.prototype.moveTo=function(t,e){return this.offsetLeft=this.offsetRight=this.target.left-t,this.offsetTop=this.offsetBottom=this.target.top-e,this},t.prototype.shrink=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new r(t,e,-n,-o))},t.prototype.expand=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new r(-t,-e,n,o))},t.prototype.zoom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",o=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),i=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),a=o*t,s=i*t,u=a-o,c=s-i,l=0,f=0,d=0,p=0;switch(e){case"right":l=-u;break;case"center":l=-u/2,f=u/2;break;case"left":default:f=u}switch(n){case"bottom":d=-c;break;case"center":d=-c/2,p=c/2;break;case"top":default:p=c}return this.add(new r(d,l,p,f))},t.prototype.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,n=void 0===e?0:e,o=t.left,r=void 0===o?n:o,i=t.bottom,a=void 0===i?n:i,s=t.right,u=void 0===s?r:s;return this.offsetLeft+=r,this.offsetRight+=u,this.offsetBottom+=a,this.offsetTop+=n,this},t.prototype.extract=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight;return{left:t,top:this.target.top+this.offsetTop,right:e,bottom:this.target.bottom+this.offsetBottom}},t.prototype.boundary=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:t,top:n,width:e-t,height:this.target.bottom+this.offsetBottom-n}},t.prototype.toPlainObject=function(){return{left:this.target.left,right:this.target.right,top:this.target.top,bottom:this.target.bottom}},t}());e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=c(n(75)),i=(c(n(128)),c(n(3))),a=n(0),s=c(n(299)),u=c(n(10));function c(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isEmpty=!e,this.info=e||{},this.page=n,this.api=n.api;var o=this.engine=n.engine;this.eventEmitter=o.eventEmitter,this.id=e.id}return t.prototype.checkModidyPerm=function(){if("widget"!=this.info.type){if(!this.page.doc.checkPermission(u.default.annotForm))throw new Error("Permission error")}else if(!this.page.doc.checkPermission(u.default.fillForm|u.default.annotForm))throw new Error("Permission error")},t.prototype.isEmpty=function(){return this._isEmpty},t.prototype.getInfo=function(){return this.info},t.prototype.getId=function(){return this.info.id},t.prototype.getUniqueID=function(){return this.getId()},t.prototype.setUniqueID=function(t){var e=this,n=this.getPDFPage(),o=n.getPDFDoc(),r=this.getId();return this.api.setUniqueId(o.getId(),n.getId(),r,t).then((function(o){return o?(e.info.id=t,e.id=t,n.changeAnnotId(r,t),e.update().then((function(){return e.eventEmitter.emit(i.default.annotationIDUpdated,t,r,e,n),o}))):o}))},t.prototype.getPDFPage=function(){return this.page},t.prototype.getPage=function(){return this.getPDFPage()},t.prototype.getType=function(){return this.info.type},t.prototype.getTitle=function(){return this.info.title},t.prototype.isMarkup=function(){return this.info.isMarkup},t.prototype.isDeleted=function(){return this.info.isDeleted},t.prototype.getRect=function(){var t=this.info.rect;return new s.default(t.left,t.bottom,t.right,t.top)},t.prototype._setRect=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.info.rect=t;var o=this.getPDFPage(),r=o.getPDFDoc();return this.api.setAnnotRect(r.getId(),o.getId(),this.getId(),t).then((function(t){return t&&n?e.update().then((function(){return e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},t.prototype.setRect=function(t){var e=this;this.info.rect=t;var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotRect(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(t){return e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],e.getPDFPage()),!0})):t}))},t.prototype.moveTo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,o=e.top,r=Object.assign({},this.info.rect),a=r.right,s=r.bottom,u=n-r.left,c=o-r.top;this.info.rect={left:n,top:o,right:a+u,bottom:s+c};var l=this.getPDFPage(),f=l.getPDFDoc(),d=f.getId(),p=l.getId(),h=this.getId();return this.api.moveAnnotTo(d,p,h,{left:n,top:o}).then((function(t){return l.getAnnotsByIdArray(t)})).then((function(e){return Promise.all(e.map((function(t){return t._update()}))).then((function(n){t.eventEmitter.emit(i.default.annotationUpdated,e,l),t.eventEmitter.emit(i.default.annotationMovedPosition,e,l,t)}))}))},t.prototype.getDeviceRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.page.getDeviceRect(this.getRect(),t,e);if(16&this.info.flag){var o=this.page.getDevicePoint([this.info.rect.left,this.info.rect.top],t);return{left:o[0],top:o[1],right:o[0]+n.right-n.left,bottom:o[1]+n.bottom-n.top}}return n},t.prototype.getDeviceInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.page.getDeviceRect(this.getInnerRect(),t,e)},t.prototype.getContent=function(){return this.info.content},t.prototype.setContent=function(t){var e=this;return this.checkModidyPerm(),this._setContent(t).then((function(n){return e.info.content=t,e.eventEmitter.emit(i.default.annotationUpdated,[e],e.getPDFPage()),e}))},t.prototype._setContent=function(t){var e=this.getPDFPage(),n=e.getPDFDoc();return this.api.setAnnotContent(n.getId(),e.getId(),this.getId(),t)},t.prototype.getBorderColor=function(){return this.info.borderColor},t.prototype.setBorderColor=function(t){var e=this;this.checkModidyPerm(),isNaN(t)&&(t=(0,a.colorConvertor)(t,"int",1));var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotBorderColor(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(){return e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],n),t})):t}))},t.prototype.getBorderStyle=function(){return this.info.borderInfo.style},t.prototype.getBorderStyleWithParam=function(){var t=this.info.borderInfo,e=t.style,n=t.cloudIntensity,r=t.dashes,i=void 0;switch(e){case o.BORDER_STYLE.SOLID:i=[];break;case o.BORDER_STYLE.CLOUDY:i=n;break;case o.BORDER_STYLE.DASHED:i=r}return{style:e,param:i}},t.prototype.getBorderInfo=function(){return Object.assign({},this.info.borderInfo)},t.prototype.setBorderInfo=function(t){var e=this;this.checkModidyPerm();var n=this.getType();if(this.getQuadPoints||"caret"===n||"text"===n)return Promise.resolve();this.info.borderInfo=t;var o=this.getPDFPage(),r=o.getPDFDoc();return 1===t.style&&0===t.dashes.length&&(t.dashes=[2,2]),this.api.setAnnotBorderInfo(r.getId(),o.getId(),this.getId(),t).then((function(t){if(5===e.info.borderInfo.style)return e._update()})).then((function(t){e.eventEmitter.emit(i.default.annotationUpdated,[e],o),e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],o)}))},t.prototype.setBorderStyle=function(t,e){var n=this,o=this.info.borderInfo;switch(o.style=t,t){case 1:o.dashes=e;break;case 5:o.cloudIntensity=e}var r=this.getPDFPage(),a=r.getPDFDoc();return this.api.setAnnotBorderStyle(a.getId(),r.getId(),this.getId(),t,e).then((function(t){return r.getAnnotsByIdArray(t)})).then((function(t){for(var e=[],n=t.length;n--;)e.push(t[n]._update());return Promise.all(e)})).then((function(t){n.eventEmitter.emit(i.default.annotationUpdated,t,r),n.eventEmitter.emit(i.default.annotationAppearanceUpdated,t,r)}))},t.prototype.getBorderDashes=function(){return Object.assign([],this.info.borderInfo.dashes)},t.prototype.getBorderWidth=function(){var t=this.info.borderInfo.width;return void 0===t?1:+t},t.prototype.setBorderWidth=function(t){var e=this,n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotBorderWidth(o.getId(),n.getId(),this.getId(),t).then((function(t){return e._update().then((function(e){return t}))})).then((function(t){return t&&(e.eventEmitter.emit(i.default.annotationUpdated,[e],n),e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],n)),t}))},t.prototype.getCloudIntensity=function(){return this.info.borderInfo.cloudIntensity||0},t.prototype.reviseSummary=function(t){return Promise.resolve(this)},t.prototype.rectIsEmpty=function(){return this.info.rectIsEmpty},t.prototype.update=function(){var t=this;return this._update().then((function(){return t.eventEmitter.emit(i.default.annotationUpdated,[t],t.getPDFPage()),t}))},t.prototype._update=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();return this.api.getAnnot(n.getId(),e.getId(),this.getId()).then((function(e){return t.updateInfo(e),t}))},t.prototype._updateMore=function(){},t.prototype.getFlags=function(){return this.info.flag},t.prototype.setFlags=function(t,e){var n=this;this.checkModidyPerm(),this.info.flag=t;var o=this.getPDFPage(),r=o.getPDFDoc();return this.api.setAnnotFlag(r.getId(),o.getId(),this.getId(),t).then((function(t){return t&&(e||(n.eventEmitter.emit(i.default.annotationUpdated,[n],o),n.eventEmitter.emit(i.default.annotationAppearanceUpdated,[n],o))),t}))},t.prototype.setFlagValue=function(t,e){return this.setFlags(t,e)},t.prototype.getModifiedDateTime=function(){var t=this.info.modifiedTimestamp;return t<0?null:new Date(t)},t.prototype.setModifiedDateTime=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setModifiedDateTime(o.getId(),n.getId(),this.getId(),t).then((function(t){return e.update()}))},t.prototype.exportToJSON=function(){var t=(0,a.colorConvertor)(16777215&this.info.borderColor,"#"),e=this.info.flag,n="";for(var i in o.AnnotFlagsName)e&1<<parseInt(i)&&(n+=o.AnnotFlagsName[i]+",");var s=(0,r.default)(new Date(this.info.modifiedTimestamp),"D:yyyyMMddhhmmssTZ","'"),u=this.info.id,c=this.page.getIndex(),l=this.info.rect,f=l.left+","+l.bottom+","+l.right+","+l.top,d=this.info.content,p=this.info.borderInfo,h={type:this.info.type,color:t,flags:n.substr(0,n.length-1),date:s,name:u,page:c,rect:f,contents:d,width:p.width};switch(p.style){case o.BORDER_STYLE.SOLID:h.style="solid";break;case o.BORDER_STYLE.DASHED:h.style="dashed",h.dashPhase=p.dashPhase,h.dashes=p.dashes.join(",");break;case o.BORDER_STYLE.UNDERLINE:h.style="underline";break;case o.BORDER_STYLE.BEVELED:h.style="beveled";break;case o.BORDER_STYLE.INSET:h.style="inset";break;case o.BORDER_STYLE.CLOUDY:h.style="cloudy",h.intensity=p.cloudIntensity}return h},t.prototype.updateInfo=function(t){this._isEmpty=!t,this.info=t,this._updateMore(),this.action&&t.action&&(this.action.info=t.action)},t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r(n(17));var o=r(n(3));r(n(136));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(e,n,o,r,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.info=e,this.factory=n,this.doc=o,this.api=r,this.host=a,this.eventEmitter=i,this.initSubAction()}return t.prototype.initSubAction=function(){var t=this;this.subAction=[],this.info.subAction&&this.info.subAction.forEach((function(e){t.subAction.push(t.factory.createAction(e,t.doc,t.api,t.eventEmitter))}))},t.prototype.getType=function(){return this.info.type},t.prototype.getSubActionCount=function(){return this.info.subActionCount},t.prototype.getSubAction=function(t){return this.subAction[t]},t.prototype.insertSubAction=function(t,e){var n=this;return this.api.insertSubAction(this.doc.getId(),this.info.objNumber,t,e).then((function(t){n.updateAction(t)}))},t.prototype.setSubAction=function(t,e){var n=this;return this.api.setSubAction(this.doc.getId(),this.info.objNumber,t,e).then((function(t){n.updateAction(t)}))},t.prototype.removeAllSubActions=function(){var t=this;return this.api.removeAllSubActions(this.doc.getId(),this.info.objNumber).then((function(e){t.updateAction(e)}))},t.prototype.removeSubAction=function(t){var e=this;return this.api.removeSubAction(this.doc.getId(),this.info.objNumber,t).then((function(t){e.updateAction(t)}))},t.prototype.setActionData=function(t){var e=this;return this.api.setActionData(this.doc.getId(),this.info.objNumber,t).then((function(t){e.updateAction(t)}))},t.prototype.updateAction=function(t){this.info=t,this.initSubAction(),this.host&&this.eventEmitter.emit(o.default.actionUpdated,this.host)},t.prototype.checkOutData=function(t){return!0},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t.prototype.addp=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtractp=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtract=function(e,n){return new t(this.x-e,this.y-n)},t.prototype.move=function(e,n){var o=n.x-this.x,r=n.y-this.y,i=e/Math.sqrt(o*o+r*r);return new t(this.x+o*i,this.y+r*i)},t.prototype.rotate=function(e,n){var o=this.x-n.x,r=this.y-n.y,i=Math.sqrt(o*o+r*r),a=Math.atan2(r,o)-e,s=i*Math.cos(a),u=i*Math.sin(a);return new t(n.x+s,n.y+u)},t.prototype.distanceTo=function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},t.prototype.slope=function(t){var e=this._dot(t);return Math.acos(e/(this._disp()*t._disp()))},t.prototype._dot=function(t){return this.x*t.x+this.y*t.y},t.prototype._disp=function(){return Math.sqrt(this._dot(this))},t.prototype.equalTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n=Math.abs(n),e instanceof t&&Math.abs(this.x-e.x)<=n&&Math.abs(this.y-e.y)<=n},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={ReadOnly:1,Required:2,NoExport:4,Hidden:8,ButtonNoToggleToOff:256,ButtonRadiosInUnison:512,TextMultiline:256,TextPassword:512,TextDoNotScroll:1024,TextComb:2048,ComboEdit:256,ChoiseMultiSelect:256,inUnison:function(t){return t&o.ButtonRadiosInUnison},isHidden:function(t){return t&o.Hidden},isReadOnly:function(t){return t&o.ReadOnly},isRequired:function(t){return t&o.Required},isNoExport:function(t){return t&o.NoExport},isMultiline:function(t){return t&o.TextMultiline},isPassword:function(t){return t&o.TextPassword},isComb:function(t){return t&o.TextComb},isNoScroll:function(t){return t&o.TextDoNotScroll},isComboEdit:function(t){return t&o.ComboEdit}},r={FlagExclude:1,FlagIncludeNoValueFields:2,FlagExportFormat:4,FlagGetMethod:8,FlagWithCoordinates:16,FlagAsXFDF:32,FlagIncludeAppendSaves:64,FlagIncludeAnnotations:128,FlagSubmitAsPDF:256,FlagCanonicalFormat:512,FlagExclNonUserAnnots:1024,FlagExclFKey:2048,FlagEmbedForm:8192,isExclude:function(t){return t&r.FlagExclude},isIncludeNoValueFields:function(t){return t&r.FlagIncludeNoValueFields},isHTML:function(t){return t&r.FlagExportFormat},isGetMethod:function(t){return t&r.FlagGetMethod},isXFDF:function(t){return t&r.FlagAsXFDF},isPDF:function(t){return t&r.FlagSubmitAsPDF},getType:function(t){var e=r.isHTML(t);if(e)return"HTML";var n=r.isXFDF(t);if(n)return"XFDF";var o=r.isXFDF(t);return o?"PDF":e||n||o?void 0:"FDF"}},i={Unknown:0,PushButton:1,CheckBox:2,RadioButton:3,Text:6,ListBox:5,ComboBox:4,Sign:7},a=o;e.FieldType=i,e.FieldFlag=a,e.FormActionFlags=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=e,this.annot=n,this.pdfViewer=n.pdfViewer,this.initSubAction()}return t.prototype.active=function(){this.subAction.forEach((function(t){t.active()}))},t.prototype.setSourceTarget=function(t,e){var n=this;this.source=t,this.target=e,this.action&&this.subAction.forEach((function(t){t.setSourceTarget(n.source,n.target)}))},t.prototype.initSubAction=function(){var t=this;this.subAction=[],this.action&&this.action.subAction.forEach((function(e){t.subAction.push(t.pdfViewer.actionManager.get(e,t.annot))}))},t.prototype.updateAction=function(t){this.action=t,this.initSubAction()},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(57),i=(o=r)&&o.__esModule?o:{default:o},a=n(35);function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return s(e,t),e.prototype.prepare=function(){this.prepared||(this.canvas=document.createElement("canvas"),this.container=this.component.$ui.get(0),this.container.append(this.canvas),t.prototype.prepare.call(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.canvas.remove()},e.prototype.doShow=function(){this.canvas.classList.remove("fv__ui-hide")},e.prototype.doHide=function(){this.canvas.classList.add("fv__ui-hide")},e.prototype.convertPointToPixel=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a.POINT.convertTo(t,a.PIXEL_HORIZONTAL)*e},e.prototype.willRender=function(){this.canvas.style.willChange="left, top, width, height",this.container.style.willChange="left; top"},e.prototype.afterRender=function(){this.canvas.style.willChange="auto",this.container.style.willChange="auto"},e.prototype.render=function(t,e){this.prepared||this.prepare();var n=this.component,o=n.annot,r=n.pdfViewer.getSmartScale(t);!n.getAnnotFlag().checkNoZoom()||(t=1);var i=n.getRect(),a=o.getDeviceRect(t),s=a;o.getInnerRect&&(s=o.getDeviceInnerRect(t),Object.assign(s,{width:s.right-s.left,height:s.bottom-s.top})),Object.assign(a,{width:a.right-a.left,height:a.bottom-a.top}),this.resetCanvasSize(a.width,a.height),this.container.style.cssText+="\n            left: "+i.left+"px;\n            top: "+i.top+"px;\n        ";try{return Promise.resolve(this.doRender({outerRect:a,innerRect:s,deviceRect:i,scale:t,smartScale:r,rotate:e}))}catch(t){console.error(t)}},e.prototype.doRender=function(t){t.outerRect,t.innerRect,t.deviceRect,t.scale,t.rotate},e.prototype.resetCanvasSize=function(t,e){this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e)},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,pdfViewer:null};o(this,t),this._parent=e,this._parentName=e.name,this.pdfViewer=e.pdfViewer}return t.prototype.parent=function(t){var e=this._parent;return t?e?t===this._parentName?e:e.parent(t):null:e},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(1),a=(o=i)&&o.__esModule?o:{default:o},s=n(7);n(11);var u="fv__hide",c=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getImageData=e;n=n?n.addClass("fv__tiles-container"):(0,a.default)('<div class="fv__tiles-container"><div class="fv__tiles-row fv__tiles-row-0" data-row="0"><div class="fv__tiles-col fv__tiles-col-0-0" data-col="0" data-index="0,0"><canvas class="fv__tiles-canvas fv__tiles-canvas-0-0" data-index="0,0"></canvas></div></div></div>'),this.$container=n,this.$cols=n.find(".fv__tiles-col"),this.$canvases=n.find(".fv__tiles-canvas");var r=n.find(".fv__tiles-row");this.rows=r.length,this.cols=r.eq(0).find(".fv__tiles-col").length,this.updateCanvasMore=function(){},this.isProgressive=o,o&&(this.tilingCache={},this.totalCanvas=0,this.renderedCanvas=0)}return t.prototype.redraw=function(t,e,n,o,r,i,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;return this.scale=a,this.updateDom(t,e,n,o,r,i,a,s,u,c),this.updateRenderCanvasSerial(t,e,n,o,r,i,u,c)},t.prototype.cleanCache=function(){this.tilingCache={}},t.prototype.clearCanvas=function(){this.$canvases.each((function(t,e){e.width=e.width,e.height=e.height}))},t.prototype.progressRender=function(t,e,n,o,r,i,a,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;return s!=this.scale&&(this.scale=s,this.tilingCache={},this.renderedCanvas=0,this.totalCanvas=t*e,this.showWidth=o/a*s,this.showHeight=r/a*s,this.updateDom(t,e,o,r,i,a,s,u,c,l)),this.progressRenderCanvasSerial(t,e,n,o,r,i,a,c,l)},t.prototype.progressRenderCanvasSerial=function(t,e,n,o,i,a,u,c,l){var f=this,d=this.renderContentImageSerial;if(d&&d.end().catch((function(){})),0==o)return Promise.resolve();d=this.renderContentImageSerial=new s.SerialPromise;var p=[],h=a+1,g=o%a;g=g||a;var y=i%a;return y=y||a,n.map((function(n){var o=r(n,2),i=o[0],s=o[1],d=h,v=h;i===t-1&&(v=y),s===e-1&&(d=g),f.tilingCache[i]&&f.tilingCache[i][s]||p.push(function(t,e,n,o,r,i){return function(){return f.tilingCache[t]=f.tilingCache[t]||{},f.tilingCache[t][e]=1,f.renderedCanvas+=1,f.updateCanvas(t,e,n,o,r,i,c,l)}}(i,s,d,v,a,u))})),d.serial(p)},t.prototype.isRenderingDone=function(t,e){return t===this.scale&&e===this.$container.width()&&this.totalCanvas===this.renderedCanvas},t.prototype.updateDom=function(t,e,n,o,r,i,a,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(0!=n){var f=this.$container,d="px",p={left:c*a+d,top:l*a+d},h=a/i;this.isProgressive||(p.width=n*h+d,p.height=o*h+d),f.css(p);var g=!1;if(e>this.cols){for(var y=this.rows;y--;){for(var v=[],m=this.cols,b=e;m<b;m++)v.push('<div class="fv__tiles-col fv__tiles-col-'+[y,m].join("-")+'" data-col="'+m+'" data-index="'+[y,m].join(",")+'">'),v.push('<canvas class="fv__tiles-canvas fv__tiles-canvas-'+[y,m].join("-")+'" data-index="'+[y,m].join(",")+'"></canvas>'),v.push("</div>");f.find(".fv__tiles-row-"+y).append(v.join(""))}this.cols=e,g=!0}if(t>this.rows){for(var w=[],P=this.rows,A=t;P<A;P++){w.push('<div class="fv__tiles-row fv__tiles-row-'+P+'" data-row="'+P+'">');for(var _=0,C=this.cols;_<C;_++)w.push('<div class="fv__tiles-col fv__tiles-col-'+[P,_].join("-")+'" data-col="'+_+'" data-index="'+[P,_].join(",")+'">'),w.push('<canvas class="fv__tiles-canvas fv__tiles-canvas-'+[P,_].join("-")+'" data-index="'+[P,_].join(",")+'"></canvas>'),w.push("</div>");w.push("</div>")}f.append(w.join("")),this.rows=t,g=!0}g&&(this.$canvases=f.find(".fv__tiles-canvas"),this.$cols=f.find(".fv__tiles-col"));var D=this.rows,S=this.cols,R=r*h+d,E=n%r;E=E||r,E*=h,E+=d;var O=o%r;O=O||r,O*=h,O+=d;for(var I=this.$cols,x=D;x--;){var M=x*S;if(x>=t)for(var T=S;T--;)I.eq(M+T).addClass(u);else if(x===t-1)for(var F=S;F--;)F>=e?I.eq(M+F).addClass(u):F===e-1?I.eq(M+F).removeClass(u).css({width:E,height:O}):I.eq(M+F).removeClass(u).css({width:R,height:O});else for(var k=S;k--;)k>=e?I.eq(M+k).addClass(u):k===e-1?I.eq(M+k).removeClass(u).css({width:E,height:R}):I.eq(M+k).removeClass(u).css({width:R,height:R})}}},t.prototype.updateRenderCanvasSerial=function(t,e,n,o,r,i,a,u){var c=this,l=this.renderContentImageSerial;if(l&&l.end().catch((function(){})),0==n)return Promise.resolve();l=this.renderContentImageSerial=new s.SerialPromise;var f=[],d=r+1,p=n%r;p=p||r;var h=o%r;h=h||r;for(var g=0,y=t;g<y;g++)for(var v=0,m=e;v<m;v++){var b=d,w=d;g===t-1&&(w=h),v===e-1&&(b=p),f.push(function(t,e,n,o,r,i){return function(){return c.updateCanvas(t,e,n,o,r,i,a,u)}}(g,v,b,w,r,i))}return l.serial(f)},t.prototype.updateCanvas=function(t,e,n,o,i,a,s,u){var c=this;return this.getImageData(t,e,n,o,i,a,s,u).then((function(n){var o=n.width,r=n.height,l=n.buffer,f=n.image,d=(n.type,c.$canvases[c.cols*t+e]),p=d.getContext("2d");if(0==o||0==r)return d.width=0,[p,t,e,o,r,i,a,s,u];d.width=o,d.height=r;var h=o*c.scale/a,g=r*c.scale/a;if(d.style.width=h+"px",d.style.height=g+"px",f)return new Promise((function(n,c){try{var l=new Image;l.onload=function(){p.drawImage(l,0,0),URL.revokeObjectURL(l.src),n([p,t,e,o,r,i,a,s,u])},l.src=URL.createObjectURL(f)}catch(t){console.log(t)}}));var y=new(Uint8ClampedArray||Uint8Array)(l),v=p.createImageData(o,r);return v.data.set(y),c.isProgressive&&c.$container.css({width:c.showWidth,height:c.showHeight}),p.putImageData(v,0,0),[p,t,e,o,r,i,a,s,u]})).then((function(t){var e=r(t,6),n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5];c.updateCanvasMore(n,o,i,a,s,u)}))},t.prototype.hideContainer=function(){this.$container.hide()},t.prototype.showContainer=function(){var t=this.$container;t.is(":visible")||t.show()},t.prototype.setUpdateCanvasMore=function(t){this.updateCanvasMore=t},t.prototype.destroy=function(){delete this.getImageData,delete this.$cols,delete this.$canvases,this.$container.remove(),delete this.$container},t}();e.default=c},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r,i=e.isTouchDevice=(r=" -webkit- -moz- -o- -ms- ".split(" "),!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)||(o=["(",r.join("touch-enabled),("),"heartz",")"].join(""),!!window.matchMedia&&window.matchMedia(o).matches)),a=navigator.userAgent.toLowerCase(),s=e.isIOS=/ipad|iphone|ipod/.test(a),u=e.isIPHONE=/iphone/.test(a),c=e.isIPAD=/ipad/.test(a),l=e.isIPOD=/ipod/.test(a),f=e.isAndroid=/android/.test(a),d=e.isBlackBerry=/blackberry/.test(a),p=e.isWebOS=/webos/.test(a),h=e.isKindle=/silk|kindle/.test(a),g=e.isTablet=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(a),y=e.isMobile=!g&&(/mobile/.test(a)||s||f||d||p||h),v=e.isDesktop=!(y||g||f||u||c||l||h||p),m=e.isMiPad=/(MI(.*|\s*)PAD).*/i.test(a),b=e.isXiaomi=!m&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(a),w=e.isHuawei=/HUAWEI/.test(navigator.userAgent);e.DEVICE_DETACTION={ios:s,iphone:u,ipad:c,ipod:l,android:f,blackberry:d,webos:p,kindle:h,tablet:g,mobile:y,desktop:v,xiaomi:b,huawei:w,touch:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=p(n(24)),i=p(n(1)),a=p(n(26)),s=p(n(2)),u=n(31),c=p(n(12)),l=n(177),f=n(92),d=p(n(55));function p(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var g=function(t){function e(n,o,r,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,u));c.docRender=c.parent("pdfDocRender"),c.name="annot",c.eUi=o;var d=c.$ui=(0,i.default)(o);d.addClass("fv__pdf-page-annot-container").data(l.annotZIndexComponentKey,c),c.eHandler=r,(c.$handler=(0,i.default)(r)).addClass("fv__pdf-page-annot-handler-container"),c.$page=u.$page,c.annot=n,c.isActive=!1,c.$$isUIVisible=!0,d.data("component",c),c.deleteStatus=0,c.id=n.getId();var p=c.annotsRender=u.parent("annotsRender"),h=c.pdfViewer.getEventEmitter(),g=c.uiHammer=new a.default.Manager(o,{recognizers:[[a.default.Pan,{direction:a.default.DIRECTION_ALL}]]});return g.add(new a.default.Tap({event:"doubletap",taps:2})),g.add(new a.default.Tap({event:"singletap"})),g.get("doubletap").recognizeWith("singletap"),g.get("singletap").requireFailure("doubletap"),g.on("singletap",(function(t){p.unActiveAnnot(),h.emit(s.default.tapAnnotation,u,t),c.tapAnnot(t)})),g.on("doubletap",(function(t){p.unActiveAnnot();var e=c.getModel().getId();h.emit(s.default.doubleTapAnnotation,u,t),p.doubleTapAnnot(e)})),g.on("press",(function(t){p.unActiveAnnot();var e=c.getModel().getId();h.emit(s.default.pressAnnotation,u,t),p.showContextMenu(e,t.center.x,t.center.y)})),(0,f.attachContextMenuEvent)(o,(function(t){p.showContextMenu(c.getId(),t.clientX,t.clientY),t.stopPropagation(),t.preventDefault()})),c}return h(e,t),e.prototype.getModel=function(){return this.annot},e.prototype.tapAnnot=function(t){var e=this.getModel().getId();this.annotsRender.activeAnnot(e)},e.prototype.getId=function(){return this.id},e.prototype.setId=function(t){var e=this;return this.annot.setUniqueID(t).then((function(){e.annotsRender.updateAnnotRendersId(e.id,t),e.id=t}))},e.prototype.isHidden=function(){var t=new d.default(this.annot.getFlags());if(t.checkHidden()||t.checkInvisible())return!0;var e=this.pdfViewer.getAnnotManager().getAnnotFlag(this.annot);return!(!e.checkHidden()&&!e.checkNoView())},e.prototype._hideUI=function(){this.$$isUIVisible=!1,this.$ui.addClass("fv__ui-hide"),this.$handler.addClass("fv__ui-hide")},e.prototype._showUI=function(){this.$$isUIVisible=!0,this.$ui.removeClass("fv__ui-hide"),this.$handler.removeClass("fv__ui-hide")},e.prototype.hideUI=function(){return this.isUIVisible()?(this._hideUI(),Promise.resolve(this.redraw())):Promise.resolve()},e.prototype.showUI=function(){return this.isUIVisible()?Promise.resolve():(this._showUI(),Promise.resolve(this.redraw()))},e.prototype.isUIVisible=function(){return this.$$isUIVisible},e.prototype.render=function(t,e){this.scale=t,this.rotate=e},e.prototype.afterRender=function(){},e.prototype.add=function(t,e){return this.render(t,e)},e.prototype.redraw=function(){},e.prototype.willRedraw=function(){},e.prototype.afterRedraw=function(){},e.prototype.active=function(){this.pdfViewer.setActiveElement(this),this._undoSwitchKbBinder&&this._undoSwitchKbBinder(),this._undoSwitchKbBinder=this.pdfViewer.switchKeyboardEventBinder(u.ACTIVATION_ANNOTATION_BINDER),this.isActive=!0,this.bindEvent()},e.prototype.unActive=function(){this.isActive=!1,this.unBindEvent(),this._undoSwitchKbBinder&&this._undoSwitchKbBinder()},e.prototype.destroy=function(){this.isActive=!1,this.$ui.remove(),this.$handler.remove(),this.unBindEvent()},e.prototype.remove=function(){this.destroy()},e.prototype.showContextMenu=function(){},e.prototype.zIndexDown=function(){this.$ui.addClass("fv__zindex-down"),this.zIndexDownFlag=!0},e.prototype.checkZIndexDown=function(){return!this.zIndexDownFlag},e.prototype.zIndexRecover=function(){this.$ui.removeClass("fv__zindex-down"),this.zIndexDownFlag=!1},e.prototype.moveTo=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!n)return this.$ui.css({left:t,top:e}),Promise.resolve(!0);this.scale;var r=this.getPDFPage(),i=this.annot.getDeviceRect(this.scale),a=t-i.left,s=e-i.top,u=r.reverseDeviceOffset([a,s],this.scale),c=o(u,2),l=c[0],f=c[1],d=this.annot.getRect();return this.annot.moveTo({left:d.left+l,top:d.top+f})},e.prototype.move=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.annot.getDeviceRect(this.scale);return this.moveTo(o.left+t,o.top+e,n)},e.prototype.moved=function(){var t=this.annot.getDeviceRect(this.scale);this.$ui.css({left:t.left+"px",top:t.top+"px"})},e.prototype.movedByOther=function(t){},e.prototype.setRectInPDF=function(t,e){var n=this;return this.annot._setRect(t,e).then((function(t){return t?n.updateRender().then((function(){return e&&n.pdfViewer.eventEmitter.emit(s.default.updateActionAnnotation,n),t})):t}))},e.prototype.setRect=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,o=e.top,r=e.width,i=e.height,a=this.scale,u=this.getPDFPage(),c=u.reverseDeviceRect({left:n,top:o,right:n+r,bottom:o+i},a);return this.annot.setRect(c).then((function(e){return e?t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(s.default.updateActionAnnotation,t),e})):e}))},e.prototype.getRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),o=this.annot.getRect();return n.getDeviceRect(o,t,e)},e.prototype.getBoundary=function(){var t=this.annot.getDeviceRect(this.scale,this.rotate),e=this.annot.getRect(),n=t.right-t.left,o=t.bottom-t.top;return 8&this.annot.getFlags()&&(n=e.right-e.left,o=e.top-e.bottom),{left:t.left,top:t.top,width:n,height:o}},e.prototype.getPosition=function(){var t=this.getPDFPage(),e=this.annot.getRect(),n=t.getDevicePoint([e.left,e.top],this.scale),r=o(n,2);return{left:r[0],top:r[1]}},e.prototype.getDimension=function(){var t=this.getPDFPage(),e=this.annot.getRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{width:n.right-n.left,height:n.bottom-n.top}},e.prototype.removeAnnot=function(){return this.getAnnotFlag().then((function(t){return t.checkLocked()||t.checkReadOnly()?Promise.reject():Promise.resolve()}))},e.prototype.deleteDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},e.prototype.replyDisabled=function(){return!(32&this.docRender.getUserPermission().getValue())||this.getAnnotFlag().checkReadOnly()},e.prototype.propertyDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},e.prototype.moveDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},e.prototype.bindEvent=function(){var t=this;this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=this.pdfViewer.getKeyboardEventBinder(u.ACTIVATION_ANNOTATION_BINDER).on(u.KEY_MAP_DELETE_ANNOTATION,(function(e){var n=e.native.target.tagName.toLowerCase();"input"===n||"div"===n&&"string"==typeof e.native.target.getAttribute("contenteditable")||"body"===n&&(t.removeAnnot(),e.stopPropagation())})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=this.pdfViewer.getKeyboardEventBinder(u.ACTIVATION_ANNOTATION_BINDER).on(u.KEY_MAP_UNACTIVE_ANNOTATION,(function(e){t.annotsRender.unActiveAnnot(!0)}))},e.prototype.unBindEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=c.default,this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=c.default},e.prototype.updateDeleteStatus=function(t){t?++this.deleteStatus:--this.deleteStatus,this.deleteStatus>0?this.unBindEvent():this.bindEvent()},e.prototype.getPDFAnnot=function(){return this.annot},e.prototype.getPDFPage=function(){return this.getPDFAnnot().getPDFPage()},e.prototype.getAnnotFlag=function(){return this.pdfViewer.annotManager.getAnnotFlag(this.annot)},e.prototype.groupMoveDisabled=function(){var t=!1;return this.annot&&this.annot.isGrouped&&this.annot.isGrouped()&&this.annot.groupElements.map((function(e){var n=e.getType();"strikeout"!==n&&"highlight"!==n&&"squiggly"!==n&&"underline"!==n||(t=!0)})),t},e}(r.default);e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildVertexesByPoints=e.buildRectByPoints=e.buildGesturesByArrays=e.default=void 0;var o=C(n(260)),r=C(n(261)),i=C(n(262)),a=C(n(263)),s=C(n(264)),u=C(n(265)),c=C(n(266)),l=C(n(267)),f=C(n(268)),d=C(n(269)),p=C(n(270)),h=C(n(271)),g=C(n(272)),y=C(n(273)),v=C(n(274)),m=C(n(275)),b=C(n(122)),w=n(0),P=n(53),A=n(4),_=C(n(1));function C(t){return t&&t.__esModule?t:{default:t}}function D(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var S={line:c.default,circle:r.default,square:p.default,highlight:s.default,squiggly:h.default,underline:m.default,strikeout:y.default,freetext:a.default,caret:o.default,ink:u.default,stamp:g.default,polyline:l.default,polygon:f.default,text:v.default,fileattachment:i.default,sound:d.default},R=function(t){var e=[];return t.map((function(t){var n=t[0];if(Array.isArray(n))t.map((function(t,n){var o={};o.type=0===n?1:2,o.x=t[0],o.y=t[1],e.push(o)}));else for(var o=Math.floor(t.length/2),r=t,i=0;i<o;i++){var a=r.slice(2*i,2*i+2),s={};s.type=0===i?1:2,s.x=a[0],s.y=a[1],e.push(s)}})),e},E=function(t){for(var e=Math.floor(t.length/2),n=[],o=[],r=t,i=0;i<2*e;i++)[i]%2==0?o.push(r[i]):n.push(r[i]);return{left:Math.min.apply(Math,o),bottom:Math.min.apply(Math,n),right:Math.max.apply(Math,o),top:Math.max.apply(Math,n)}},O={getAnnotClass:function(t){var e=S[t];return e||b.default},getAnnots:function(t,e,n,o){var r=void 0;return r=e===P.ANFB_ShouldPrint?t.filter((function(t){return t.print})):e===P.ANFB_ShouldView?t.filter((function(t){return!t.noView})):e===P.ANFB_ShouldEdit?t.filter((function(t){return!t.readOnly})):[].concat(D(t)),n===P.ANSB_Author?r.sort((function(t,e){var n=t.author,o=e.author;return n.localeCompare(o)})):n===P.ANSB_ModDate&&r.sort((function(t,e){var n=t.modDate,o=e.modDate;if(null===n&&null===o)return 0;if(null!==n&&null===o)return 1;if(null===n&&null!==o)return-1;var r=n.getTime(),i=o.getTime();return r>i?1:r<i?-1:0})),n===P.ANSB_Type&&r.sort((function(t,e){var n=t.type,o=e.type;return n.localeCompare(o)})),o?r.reverse():r},getAnnot:function(t,e){var n=t.getType(),o=O.getAnnotClass(n);return o===b.default?null:new o(t,e)},addAnnot:function(t,e){var n=t.type=t.type.toLowerCase(),o=null;switch(n){case"line":o=O.buildLineJson(t);break;case"stamp":o=O.buildStampJson(t);break;case"fileattachment":case"text":o=O.buildIconShapeJson(t);break;case"freetext":o=O.buildFreeTextJson(t);break;case"circle":case"caret":case"square":o=O.buildSimpleShapeJson(t);break;case"polyline":case"polygon":case"ink":case"highlight":case"underline":case"strikeout":case"squiggly":o={type:t.type,date:new Date};break;case"sound":o=O.buildScreenShapeJson(t)}if(!o)return null;o=O.buildJsonKeyValue(t,o);var r=O.getAnnotClass(n);return new Promise((function(n,i){e.currentPDFDoc.addAnnot(t.page,o).then((function(i){var a=i[0],s=e.getPDFPageRender(t.page).annotsRender.getAnnotRender(a.getId()).component,u=s.annot;u.info.author=o.author,O.doUpdatePropsAfterAdd(u,t,(function(e){e&&s.redraw(),t.open&&s.showReplyDialog("comment");var o=new r(u,t.page);s.parent("annotsRender").activeAnnot(s.getId()),n(o)}))}))}))},showFileDialog:function(t){return new Promise((function(e){(0,_.default)("#jsFileAttachment").length>0&&(0,_.default)("#jsFileAttachment").remove(),(0,_.default)("body").append('<input id="jsFileAttachment" type="file" style="display: none;"/>'),(0,_.default)("#jsFileAttachment").off("change").on("change",(function(n){var o=n.target.files[0];if(o){var r=new FileReader;r.readAsArrayBuffer(o),r.onload=function(){var n=new Uint8Array(r.result);t.contentType=o.type,t.buffer=n,t.fileName=o.name;var i=O.addAnnot(t);e(i)}}})),(0,_.default)("#jsFileAttachment").click()}))},doUpdatePropsAfterAdd:function(t,e,n){if("freetext"===e.type){if(e.textSize&&(e.textSize>=4||e.textSize<=144)){var o=t.getDefaultAppearance();return o.textSize=e.textSize,void t.setDefaultAppearance(o).then((function(t){n&&n(!0)}))}}else if("text"===e.type&&e.noteIcon)return void t.setIconName(e.noteIcon).then((function(t){n&&n(!0)}));n&&n()},buildRectByPoint:function(t){var e=t[0],n=t[1];return{left:e,bottom:n-20,right:e+20,top:n}},buildSimpleShapeJson:function(t){var e=E(t.rect),n=e.left,o=e.bottom,r=e.right,i=e.top;return{type:t.type,date:new Date,rect:{left:n,bottom:o,right:r,top:i}}},buildIconShapeJson:function(t){return{type:t.type,date:new Date,rect:O.buildRectByPoint(t.point)}},buildScreenShapeJson:function(t){var e=void 0;return e=t.point?O.buildRectByPoint(t.point):E(t.rect),{type:"screen",date:new Date,rect:e}},buildStampJson:function(t){var e=E(t.rect),n=e.left,o=e.bottom,r=e.right,i=(e.top,.3*(r-n));return{type:t.type,date:new Date,rect:{left:n,bottom:o,right:r,top:o+i}}},buildFreeTextJson:function(t){var e={type:t.type,date:new Date};"FreeTextCallout"===t.intent&&(e.intent=t.intent,t.callout&&(e.calloutLinePoints=AnnotManage.buildVertexesByPoints(t.callout)));var n=[].concat(D(t.rect));return e.calloutLinePoints&&n.push.apply(n,D(t.callout)),e.rect=E(n),e.innerRect=E(t.rect),e},buildLineJson:function(t){var e=t.points[0],n=t.points[1],o=e[0],r=e[1],i=n[0],a=n[1],s={type:"line",date:new Date,rect:{left:o,bottom:r,right:i,top:a},startStyle:A.LineEndingStyle.None,endStyle:A.LineEndingStyle.None};return t.arrowBegin&&(s.startStyle=A.LineEndingStyle[t.arrowBegin]),t.arrowEnd&&(s.endStyle=A.LineEndingStyle[t.arrowEnd]),s},buildCoords:function(t,e){for(var n=Math.floor(t.quads.length/8),o=t.quads,r=[],i=0;i<n;i++){var a=o.slice(8*i,8*i+8),s=Math.min.apply(Math,[a[0],a[2],a[4],a[6]]),u=Math.max.apply(Math,[a[1],a[3],a[5],a[7]]),c=Math.max.apply(Math,[a[0],a[2],a[4],a[6]]),l=Math.min.apply(Math,[a[1],a[3],a[5],a[7]]);r.push({left:s,top:u,right:c,bottom:l,rotation:0})}return e.coords=r,e},calcRectByVertices:function(t){var e={},n=0,o=0,r=0,i=0;return t.map((function(t,e){var a=t.x,s=t.y;0===e?(n=a,o=a,r=s,i=s):(n=a<n?a:n,o=a>o?a:o,r=s<r?s:r,i=s>i?s:i)})),e.left=n,e.right=o,e.bottom=r,e.top=i,e},buildVertices:function(t,e){if(!t.vertices)return e;if("polygon"===t.type||"polyline"===t.type){for(var n=[],o=Math.floor(t.vertices.length/2),r=t.vertices,i=0;i<o;i++){var a=r.slice(2*i,2*i+2);n.push({x:a[0],y:a[1]})}e.vertexes=n,e.rect=O.calcRectByVertices(n)}return e},buildFillColor:function(t,e){return t.fillColor?("circle"!==t.type&&"square"!==t.type&&"line"!==t.type&&"polygon"!==t.type&&"polyline"!==t.type&&"freetext"!==t.type||(e["interior-color"]=(0,w.colorConvertor)(t.fillColor,"int",0).toString(16)),e):e},buildGestures:function(t,e){if("ink"!==t.type||!t.gestures)return e;var n=R(t.gestures);return e.inkList=n,e.rect={left:0,right:0,top:0,bottom:0},e},buildStampAP:function(t,e){if("stamp"!==t.type||!t.AP)return e;var n=void 0;switch(t.AP.toLowerCase()){case"approved":n="Approved";break;case"confidential":n="Confidential";break;case"draft":n="Draft";break;case"expired":n="Expired";break;case"final":n="Final";break;default:n="Approved"}return e.icon=n,e.iconCatagory="Static",e},buildJsonKeyValue:function(t,e){return t.strokeColor&&(e.color=(0,w.colorConvertor)(t.strokeColor,"int",0).toString(16)),t.popupOpen&&"freetext"!==t.type&&"sound"!==t.type&&"fileattachment"!==t.type&&(e.open="yes"),t.contents&&(e.contents=t.contents),t.name&&(e.name=t.name),t.opacity&&(e.opacity=t.opacity),"highlight"!==t.type&&"strikeout"!==t.type&&"underline"!==t.type&&"squiggly"!==t.type||((e=O.buildCoords(t,e)).rect={left:0,right:0,top:0,bottom:0}),"fileattachment"===t.type?(t.buffer&&(e.buffer=t.buffer,e.fileName=t.fileName),t.attachIcon&&(e.icon=t.attachIcon)):"sound"===t.type&&t.buffer&&(e.multiBuffer=t.buffer,e.fileName=t.fileName,e.contentType=t.contentType),e=O.buildFillColor(t,e),e=O.buildGestures(t,e),e=O.buildStampAP(t,e),e=O.buildVertices(t,e)}};e.default=O,e.buildGesturesByArrays=R,e.buildRectByPoints=E,e.buildVertexesByPoints=function(t){for(var e=[],n=Math.floor(t.length/2),o=t,r=0;r<n;r++){var i=o.slice(2*r,2*r+2);e.push({x:i[0],y:i[1]})}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={PageOpened:0,PageClosed:1,DocWillClose:2,DocWillSave:3,DocSaved:4,DocWillPrint:5,DocPrinted:6,FieldKeyStroke:7,FieldWillFormat:8,FieldValueChanged:9,FieldRecalculateValue:10,AnnotCursorEnter:11,AnnotCursorExit:12,AnnotMouseButtonPressed:13,AnnotMouseButtonReleased:14,AnnotReceiveInputFocus:15,AnnotLoseInputFocus:16,AnnotPageOpened:17,AnnotPageClosed:18,AnnotPageVisible:19,AnnotPageInvisible:20}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KEY_MAP_SELECT_ALL_ANNOTATIONS="selectAllAnnotations",e.KEY_MAP_POLYLINE_DELETE_LAST_POINT="createPolyline_DeleteLastPoint",e.KEY_MAP_DOCUMENT_UNDO="undo",e.KEY_MAP_DOCUMENT_REDO="redo",e.KEY_MAP_ZOOM_IN="pageZoomIn",e.KEY_MAP_ZOOM_OUT="pageZoomOut",e.KEY_MAP_DELETE_ANNOTATION="delete-annotation",e.KEY_MAP_ESC_CREATING_DRAWING="cancel-creating-drawing-annot",e.KEY_MAP_UNACTIVE_ANNOTATION="unactive-annotation",e.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT="unfocus-from-editting-text-object",e.KEY_MAP_FIELD_TAB_NEXT="FIELD_TAB_ACTION",e.GLOBAL_BINDER="global-keyboard-event-binder",e.VIEWER_BINDER="pdf-viewer-keyboard-event-binder",e.ANNOTATION_PROPERTIES_BINDER="annotation-properties-keyboard-event-binder",e.ACTIVATION_ANNOTATION_BINDER="activation-annotation-keyboard-event-binder",e.DOCUMENT_PROPERTIES_BINDER="document-properties-keyboard-event-binder",e.FOCUS_ELEMENT_BINDER="focus-element-keyboard-event-binder",e.EDIT_TEXT_OBJECT_BINDER="focus-text-object-event-binder",e.ANNOTATION_CREATING_BINDER="create-annotation-keyboard-event-binder"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LEVEL_DEBUG=0,e.LEVEL_INFO=2,e.LEVEL_WARN=4,e.LEVEL_ERROR=8},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=g(n(26)),i=g(n(15)),a=g(n(2)),s=n(7),u=n(6),c=g(n(1)),l=n(11),f=n(181),d=g(n(182)),p=g(n(13)),h=g(n(14));function g(t){return t&&t.__esModule?t:{default:t}}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var v=(0,f.getDefaultConfig)(f.defaultAnnotComponentKey,".fv__pdf-page-annot-handler-rect"),m=(0,d.default)({direction:"left"}),b=(0,d.default)({direction:"right"}),w=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="textmarkup",a.$ui.addClass("fv__pdf-page-textmarkup-annot-container"),a.$handler.addClass("fv__pdf-page-textmarkup-annot-handler-container"),a.annot.isArea()&&a.createShapeControl(),a}return y(e,t),e.getDefaultContextMenuConfig=function(){return v},e.prototype.createShapeControl=function(){var t=this;this.shapeControl||h.default.property(this,"shapeControl",(function(){var e=new p.default({start:function(){return t.onStartUpdateShape()},update:function(e,n){return t.onShapeUpdating(e,n)},moving:function(e,n){return t.onShapeMoving(e,n)},end:function(e,n){return t.onShapeUpdateEnd(e,n)},enableDiagonally:!0});return t.moveDisabled()&&e.disable(),e}))},e.prototype.active=function(){if(t.prototype.active.call(this),this.annot.isArea()){this.activeRect(),this.$rect.addClass("active");var e=this._getShapeControllerBoundaryBox();!this.shapeControl&&this.createShapeControl(),this.shapeControl.active(this.$handler,this.getBoundary(),e),this.moveDisabled()&&this.shapeControl.disable()}else this.activeTextBoundary(),this.moveDisabled()&&this.boundaryDisabled()},e.prototype.unActive=function(){var e=this;t.prototype.unActive.call(this),this.annot.isArea()&&this.$rect&&this.$rect.removeClass("active"),this.annot.isGrouped()&&this.annot.groupElements.map((function(t){var n=e.pdfViewer.getAnnotRender(t.getPDFPage().getIndex(),t.getId()),o=n&&n.component;o&&o.isActive&&o.unActive&&o.unActive(),o&&o.deactive&&o.deactive()}))},e.prototype.afterRender=function(t){if(t.transformed&&this.isActive)if(this.annot.isArea()){this.activeRect();var e=this._getShapeControllerBoundaryBox();!this.shapeControl&&this.createShapeControl(),this.shapeControl.active(this.$handler,this.getBoundary(),e)}else this.activeTextBoundary()},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,u.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.createRectDom=function(){return this.annot.isArea()?(!this.shapeControl&&this.createShapeControl(),this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui):t.prototype.createRectDom.call(this)},e.prototype.copyText=function(){var t=this.annot.getContinuousText(),e=(0,l.copyText)(t);return e?this.pdfViewer.eventEmitter.emit(a.default.copyTextSuccess,t):this.pdfViewer.eventEmitter.emit(a.default.copyTextFailed,t),e},e.prototype.getBoundaryCss_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCharQuadPoints_(t),o=this.getCssTransform_(t),r=(0,u.pt2px)(this.getQuadPointsHeight_(n))/window.devicePixelRatio,i=this.getPDFPage(),a=this.scale,s=i.getDeviceMatrix();s.scale(a,a);var c=s.transformPoint(n[e].x,n[e].y);return{transform:o,height:r,left:c[0],top:c[1]}},e.prototype.getCssTransform_=function(t){return"rotate("+90*(t.rotation+this.annot.getPDFPage().getRotation())+"deg)"},e.prototype.getCharQuadPoints_=function(t){return(0,this.annot.engine.getUtils().getQuadPointsFromRect)(t,t.rotation)},e.prototype.getQuadPointsHeight_=function(t){return Math.sqrt(Math.pow(t[2].x-t[0].x,2)+Math.pow(t[2].y-t[0].y,2))},e.prototype.activeTextBoundary=function(){var t=this.$leftTextBoundary=this.$leftTextBoundary||this.leftTextBoundaryInit(),e=this.$rightTextBoundary=this.$rightTextBoundary||this.rightTextBoundaryInit(),n=this.annot,o=this.getBoundaryCss_(n.getStartCharInfo());t.css({height:o.height+"px",transform:o.transform,top:o.top+"px",left:o.left+"px"});var r=this.getBoundaryCss_(n.getEndCharInfo(),1);e.css({height:r.height+"px",transform:r.transform,top:r.top+"px",left:r.left+"px"}),this.activeRect(n)},e.prototype.leftTextBoundaryInit=function(){var t=this,e=this.$handler,n=(0,c.default)(m),i=n[0],u=new r.default(i);u.get("pan").set({direction:r.default.DIRECTION_ALL});var l=void 0,f=void 0,d=void 0,p=void 0;return u.on("panstart",(function(e){!1!==t.onLeftPanStart(e)&&(p=t.scale,l={left:parseFloat(n.css("left")),top:parseFloat(n.css("top")),height:parseFloat(n.css("height")),transform:n.css("transform")},d=l,t.textBoundaryStart())})),u.on("panmove",(function(e){if(!1!==t.onLeftPanMove(e)){var r=e.deltaX,i=e.deltaY;if(t.pdfViewer.config.highPerformance){var u=l.height;Math.abs(i)<=u&&(i=u/2);var c=t.getPDFPage().reverseDevicePoint([l.left+r,l.top+i],p),h=t.annot,g=t.editDebouncePromise=t.editDebouncePromise||new s.DebouncePromiseQueue;g.push((function(){return t.getPDFPage().getCharInfoAtPoint(c,8).then((function(e){if(!e)return[!1];var n=e.charIndex,o=h.getEndCharIndex();if(n>o)return Promise.resolve([!1]);var r={left:(f=t.getBoundaryCss_(e)).left+"px",top:f.top+"px",height:f.height+"px",transform:f.transform};return Promise.all([h.updateQuadPointsByCharIndex(n,o),e,r])})).then((function(e){var r=o(e,3),i=r[0],s=r[1],u=r[2];if(i)return n.css(u),f&&(d=f),t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,t),t.onLeftChangeSuccess(s)}));n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:d.transform})}),(function(){n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:d.transform})}))})),g.exec()}else n.css({left:d.left+r+"px",top:d.top+i+"px"})}})),u.on("panend",(function(e){if(!1!==t.onLeftPanEnd(e)){var r=e.deltaX,i=e.deltaY,u=l.height;Math.abs(i)<=u&&(i=u/2);var c=t.getPDFPage().reverseDevicePoint([l.left+r,l.top+i],p),h=t.annot,g=t.editDebouncePromise=t.editDebouncePromise||new s.DebouncePromiseQueue;g.push((function(){return t.getPDFPage().getCharInfoAtPoint(c,8).then((function(e){if(!e)return[!1];var o=e.charIndex,r=h.getEndCharIndex();return o>r?Promise.resolve([!1]):(f=t.getBoundaryCss_(e),n.css({left:f.left+"px",top:f.top+"px",height:f.height+"px",transform:f.transform}),Promise.all([h.updateQuadPointsByCharIndex(o,r),e]))})).then((function(e){var r=o(e,2),i=r[0],s=r[1];if(i)return f&&(d=f),t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,t),t.onLeftChangeSuccess(s)}));n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:d.transform})}),(function(){n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:d.transform})}))})),g.exec(),t.textBoundaryEnd()}})),this.leftHammer=u,e.append(n),n},e.prototype.rightTextBoundaryInit=function(){var t=this,e=this.$handler,n=(0,c.default)(b),i=n[0],u=new r.default(i);u.get("pan").set({direction:r.default.DIRECTION_ALL});var l=void 0,f=void 0,d=void 0,p=void 0;return u.on("panstart",(function(e){!1!==t.onRightPanStart(e)&&(p=t.scale,l={left:parseFloat(n.css("left")),top:parseFloat(n.css("top")),height:parseFloat(n.css("height")),transform:n.css("transform")},d=l,t.textBoundaryStart())})),u.on("panmove",(function(e){if(!1!==t.onRightPanMove(e)){var r=e.deltaX,i=e.deltaY;if(t.pdfViewer.config.highPerformance){var u=l.height;Math.abs(i)<=u&&(i=u/2);var c=t.getPDFPage().reverseDevicePoint([l.left+r,l.top+i],p),h=t.annot,g=t.editDebouncePromise=t.editDebouncePromise||new s.DebouncePromiseQueue;g.push((function(){return t.getPDFPage().getCharInfoAtPoint(c,8).then((function(e){if(!e)return[!1];var o=h.getStartCharIndex(),r=e.charIndex;return o>r?Promise.resolve([!1]):(f=t.getBoundaryCss_(e,1),n.css({left:f.left+"px",top:f.top+"px",height:f.height+"px",transform:f.transform}),Promise.all([h.updateQuadPointsByCharIndex(o,r),e]))})).then((function(e){var r=o(e,2),i=r[0],s=r[1];if(i)return f&&(d=f),t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,t),t.onRightChangeSuccess(s)}));n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:f.transform})}),(function(){n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:f.transform})}))})),g.exec()}else n.css({left:d.left+r+"px",top:d.top+i+"px"})}})),u.on("panend",(function(e){if(!1!==t.onRightPanEnd(e)){var r=e.deltaX,i=e.deltaY,u=l.height;Math.abs(i)<=u&&(i=u/2);var c=t.getPDFPage().reverseDevicePoint([l.left+r,l.top+i],p),h=t.annot,g=t.editDebouncePromise=t.editDebouncePromise||new s.DebouncePromiseQueue;g.push((function(){return t.getPDFPage().getCharInfoAtPoint(c,8).then((function(e){if(!e)return[!1];var o=h.getStartCharIndex(),r=e.charIndex;return o>r?Promise.resolve([!1]):(f=t.getBoundaryCss_(e,1),n.css({left:f.left+"px",top:f.top+"px",height:f.height+"px",transform:f.transform}),Promise.all([h.updateQuadPointsByCharIndex(o,r),e]))})).then((function(e){var r=o(e,2),i=r[0],s=r[1];if(i)return f&&(d=f),t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,t),t.onRightChangeSuccess(s)}));n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:d.transform})}),(function(){n.css({left:d.left+"px",top:d.top+"px",height:d.height+"px",transform:d.transform})}))})),g.exec(),t.textBoundaryEnd()}})),this.rightHammer=u,e.append(n),n},e.prototype.textBoundaryStart=function(){},e.prototype.textBoundaryEnd=function(){},e.prototype.boundaryDisabled=function(){this.$leftTextBoundary.addClass("ban"),this.$rightTextBoundary.addClass("ban"),this.leftHammer.get("pan").set({enable:!1}),this.rightHammer.get("pan").set({enable:!1})},e.prototype.onStartUpdateShape=function(){this.pdfViewer.config.highPerformance&&this.annot.isArea()&&(this.editAreaDebouncePromise=new s.DebouncePromiseQueue)},e.prototype.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.annot.isArea()&&this.editAreaDebouncePromise.push((function(){return n.setRect(t)}))},e.prototype.onShapeMoving=function(t,e){this.$ui.css({left:t.left,top:t.top})},e.prototype.onShapeUpdateEnd=function(t,e){var n=this;this.editAreaDebouncePromise=this.editAreaDebouncePromise||new s.DebouncePromiseQueue,this.editAreaDebouncePromise.push((function(){return n.setRect(t)})),this.editAreaDebouncePromise.end()},e.prototype.onLeftPanStart=function(t){},e.prototype.onLeftPanMove=function(t){},e.prototype.onLeftChangeSuccess=function(){},e.prototype.onLeftPanEnd=function(t){},e.prototype.onRightPanStart=function(t){},e.prototype.onRightPanMove=function(t){},e.prototype.onRightChangeSuccess=function(){return Promise.resolve()},e.prototype.onRightPanEnd=function(t){},e}(i.default);e.default=w},function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.PIXEL_VERTICAL=e.PIXEL_HORIZONTAL=e.PICA=e.MILLIMETER=e.CENTIMETER=e.METER=e.KILOMETER=e.YARD=e.FOOT=e.POINT=e.MILE=e.CUSTOM=e.INCH=void 0,e.getUnitByName=function(t){return b[t]};var r=n(100),i=n(101);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=e.INCH=new r.Unit(1,"inch"),u=e.CUSTOM=new r.Unit(1,"custom"),c=e.MILE=new r.Unit(1/63360,"mi"),l=e.POINT=new r.Unit(72,"pt"),f=e.FOOT=new r.Unit(1/12,"ft"),d=e.YARD=new r.Unit(1/36,"yd"),p=e.KILOMETER=new r.Unit(.0254/1e3,"km"),h=e.METER=new r.Unit(.0254,"m"),g=e.CENTIMETER=new r.Unit(2.54,"cm"),y=e.MILLIMETER=new r.Unit(25.4,"mm"),v=e.PICA=new r.Unit(6,"pica"),m=e.PIXEL_HORIZONTAL=new r.PixelUnit(i.ORIENTATION_HORIZONTAL),b=(e.PIXEL_VERTICAL=new r.PixelUnit(i.ORIENTATION_VERTICAL),a(o={},s.name,s),a(o,u.name,u),a(o,c.name,c),a(o,l.name,l),a(o,f.name,f),a(o,d.name,d),a(o,p.name,p),a(o,h.name,h),a(o,g.name,g),a(o,y.name,y),a(o,v.name,v),a(o,m.name,m),o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(8)),r=a(n(3)),i=a(n(10));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return s(e,t),e.prototype.getQuadPoints=function(){return this.info.quadPoints||[]},e.prototype.getDeviceQuadPoints=function(){for(var t=this.getPDFPage(),e=(t.getHeight(),t.getWidth()),n=this.getQuadPoints(),o=[],r=n.length;r--;){var i=n[r];o[r]=[{x:i[0].x,y:e-i[0].y},{x:i[1].x,y:e-i[1].y},{x:i[2].x,y:e-i[2].y},{x:i[3].x,y:e-i[3].y}]}return o},e.prototype.getStartCharIndex=function(){return this.info.startCharIndex},e.prototype.getStartCharInfo=function(){return this.info.startCharInfo},e.prototype.getEndCharIndex=function(){return this.info.endCharIndex},e.prototype.getEndCharInfo=function(){return this.info.endCharInfo},e.prototype.getText=function(){if(!this.page.doc.checkPermission(i.default.extract||i.default.extractAccess))throw new Error("Permission error");return this.info.text||""},e.prototype.getContinuousText=function(){if(!this.page.doc.checkPermission(i.default.extract||i.default.extractAccess))throw new Error("Permission error");return this.info.text||""},e.prototype.updateQuadPointsByCharIndex=function(t,e){var n=this;this.checkModidyPerm();var o=this.getPDFPage(),i=o.getPDFDoc();return this.api.updateAnnotQuadPointsByCharIndex(i.getId(),o.getId(),this.getId(),t,e).then((function(t){if(t)return n.update().then((function(e){return n.eventEmitter.emit(r.default.annotationAppearanceUpdated,e,n.getPDFPage()),t}))}))},e.prototype.isArea=function(){return this.info.isArea},e.prototype.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.getQuadPoints(),o="",r=0;r<n.length;r++){var i=n[r];o+=i[0].x+","+i[0].y+",",o+=i[1].x+","+i[1].y+",",o+=i[2].x+","+i[2].y+",",o+=i[3].x+","+i[3].y+","}return o=o.substr(0,o.length-1),Object.assign({},e,{coords:o})},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=navigator.userAgent.toLowerCase(),r=/opera|opr/.test(o),i=/msie/.test(o),a=/trident/.test(o),s=/\sapplewebkit\//.test(o),u=/chrome/.test(o),c=/safari/.test(o),l=/firefox/.test(o),f=e.isIE=(a||i)&&!r&&"msSaveBlob"in navigator,d=e.isIEAtLeast11=!i&&a&&!r,p=e.isEdge=o.indexOf("edge")>-1,h=e.isOpera=r,g=e.isWebkit=s,y=e.isChrome=!h&&u&&!!window.chrome,v=e.isSafari=!/huawei/.test(o)&&!h&&c&&!u,m=e.isGecko="Gecko"==navigator.product&&!g&&!h,b=e.isFirefox=!y&&!h&&!v&&l,w=e.isMaxthon=/maxthon/.test(o),P=e.isQuirksMode="BackCompact"==document.CompactMode,A=e.isQQ=/tencenttraveler/.test(o)||/qqbrowser/.test(o),_=e.isSougou=/metasr/.test(o)||/sogou/.test(o),C=e.isBaidu=/baidubrowser/.test(o),D=e.isUC=/ucbrowser/.test(o),S=e.isLiebao=/liebao/.test(o),R=e.isMiuiBrowser=/miuibrowser/.test(o),E=e.isHuaweiBrowser=/huaweibrowser/.test(o)||/huaweialp/.test(o),O=e.is360=function(){if(A||D||_||R||S||w)return!1;if(-1===o.indexOf("chrome"))return!1;var t=function(t,e){var n=navigator.mimeTypes;for(var o in n)if(n[o][t]==e)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");return!window.chrome||t}();e.isIE8=!!document.documentMode&&document.documentMode<8,e.isIE8Compact=8==document.documentMode,e.isIE9Compact=9==document.documentMode,e.isIE10Compact=10==document.documentMode,e.BROWSER_DETECTION={ie:f,ieAtLeast11:d,edge:p,opera:h,webkit:g,chrome:y,safari:v,gecko:m,firefox:b,maxthon:w,quirksMode:P,"quirks-mode":P,qq:A,sougou:_,baidu:C,liebao:S,uc:D,miui:R,huawei:E,360:O}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(178)),r=s(n(48)),i=s(n(1)),a=n(4);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerComponent=e;var s=this.viewerComponent.getModel();a=a||this.viewerComponent.getPropertyOptions();var u=(0,o.default)(a);n&&n!==document.body||(u='<dialog class="fv__dialog fv__annot-properties-dialog">'+u+"</dialog>");var c=(0,i.default)(u);this.$propertiesDialog=c,this.$fillColor=c.find("#fillcolor-input"),this.$txThickness=c.find("#thickness-input-tx"),this.updateBorderInfo(s,a),this.bindChangeEvent();var l=n||document.body;if(c.appendTo(l),!n||n===document.body){var f=c[0];r.default.registerDialog(f),f.showModal()}}return t.prototype.toggle=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.$propertiesDialog.find("input,select").removeAttr("disabled"):this.$propertiesDialog.find("input,select").attr("disabled","true")},t.prototype.updateBorderInfo=function(t,e){var n=this.$propertiesDialog;if(e.lineEndStyle&&n.find("#endstyle-select [value="+t.getEndingStyle()+"]").attr("selected",!0),e.lineStartStyle)switch(t.getType()){case"freetext":n.find("#startstyle-select [value="+t.getCalloutLineEndingStyle()+"]").attr("selected",!0);break;default:n.find("#startstyle-select [value="+t.getStartStyle()+"]").attr("selected",!0)}if(void 0!==e.highlightingMode&&n.find("#highlighting-select [value="+t.getHighlightingMode()+"]").attr("selected",!0),void 0!==e.rotation&&n.find("#rotation-select [value="+t.getRotation()+"]").attr("selected",!0),!1!==e.borderStyle){var o=t.getBorderDashes();if(1==t.getBorderStyle()&&o.length>0){var r=Math.max.apply(Math,o),i=Math.min.apply(Math,o);i==r?i>3?n.find("#borderStyle-select [value=3]").attr("selected",!0):i>2?n.find("#borderStyle-select [value=2]").attr("selected",!0):i<2||2==i?n.find("#borderStyle-select [value=1]").attr("selected",!0):n.find("#borderStyle-select [value=3]").attr("selected",!0):r>8?n.find("#borderStyle-select [value=6]").attr("selected",!0):r>4?n.find("#borderStyle-select [value=5]").attr("selected",!0):n.find("#borderStyle-select [value=4]").attr("selected",!0)}else if(t.getBorderStyle()==a.BORDER_STYLE.CLOUDY){switch(t.getCloudIntensity()){case 1:n.find("#borderStyle-select [value=7]").attr("selected",!0);break;case 2:n.find("#borderStyle-select [value=8]").attr("selected",!0)}}}},t.prototype.bindChangeEvent=function(){var t=this;this.$propertiesDialog.on("click",".fv__btn-close",(function(){t.viewerComponent.hidePropertiesDialog?t.viewerComponent.hidePropertiesDialog():t.close()})).on("change","#color-input",(function(e){var n=e.target,o=parseInt(n.value.replace("#",""),16);t.viewerComponent.setColor(o)})).on("change","#opacity-input",(function(e){var n=e.target.value;t.viewerComponent.setOpacity(+n)})).on("change","#thickness-input",(function(t){return o("#thickness-input","#thickness-input-tx")})).on("blur","#thickness-input",(function(t){return o("#thickness-input","#thickness-input-tx")})).on("blur","#thickness-input-tx",(function(t){return o("#thickness-input-tx","#thickness-input")})).on("change","#thickness-input-tx",(function(t){return o("#thickness-input-tx","#thickness-input")})).on("change","#borderStyle-select",(function(e){var n=e.target.value,o=a.BORDER_STYLE.DASHED;switch(n){case"0":n=[],o=a.BORDER_STYLE.SOLID;break;case"1":n=[2,2,2,2];break;case"2":n=[3,3,3,3];break;case"3":n=[4,4,4,4];break;case"4":n=[4,3,2,3];break;case"5":n=[8,4,4,4];break;case"6":n=[4,3,16,3];break;case"7":n=1,o=a.BORDER_STYLE.CLOUDY;break;case"8":n=2,o=a.BORDER_STYLE.CLOUDY}t.viewerComponent.setBorderStyle(o,n)})).on("change","#fillcolor-input",(function(e){var n=e.target,o=parseInt(n.value.replace("#",""),16);t.viewerComponent.setFillColor(o)})).on("change","#fillColor-transparent-input",(function(e){e.target.checked?(t.$fillColor.val("#ffffff"),t.$fillColor.attr("disabled",!0),t.viewerComponent.setFillColor(0)):t.$fillColor.removeAttr("disabled")})).on("change","#startstyle-select",(function(e){var n=e.target.value;t.viewerComponent.setEndingStyle(!0,n)})).on("change","#endstyle-select",(function(e){var n=e.target.value;t.viewerComponent.setEndingStyle(!1,n)})).on("change","#hasCap-input",(function(e){var n=e.target.checked;t.viewerComponent.enableCaption(n)})).on("change","#highlighting-select",(function(e){var n=e.target.value;t.viewerComponent.setHighlightingMode(n)})).on("change","#rotation-select",(function(e){var n=e.target.value;t.viewerComponent.setRotation(90*+n)}));var e=this,n=!1;function o(t,o){if(!n){n=!0;var r=e.$propertiesDialog,i=r.find(t).val();e.viewerComponent.getModel().getBorderWidth()!=i?(e.viewerComponent.setBorderWidth(+i),n=!1,r.find(o).val(i)):n=!1}}},t.prototype.close=function(){var t=this.$propertiesDialog;t&&(t[0].close(),t.remove(),this.$propertiesDialog=null)},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new Error("Method not implemented")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.STATE_HANDLER_HAND="hand",e.STATE_HANDLER_CHECK_THE_SEARCH="checkTheSearch",e.STATE_HANDLER_CREATE_CARET="createCaret",e.STATE_HANDLER_CREATE_ARROW="createArrow",e.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT="createAreaHighlight",e.STATE_HANDLER_CREATE_CIRCLE="createCircle",e.STATE_HANDLER_CREATE_FILE_ATTACHMENT="createFileAttachment",e.STATE_HANDLER_CREATE_HIGHLIGHT="createHighlight",e.STATE_HANDLER_CREATE_IMAGE="createImage",e.STATE_HANDLER_CREATE_EDIT_IMAGE="createEditImage",e.STATE_HANDLER_CREATE_LINK="createLink",e.STATE_HANDLER_CREATE_LINE="createLine",e.STATE_HANDLER_CREATE_PENCIL="createPencil",e.STATE_HANDLER_CREATE_POLYGON_CLOUD="createPolygonCloud",e.STATE_HANDLER_CREATE_POLYGON="createPolygon",e.STATE_HANDLER_CREATE_POLYLINE="createPolyline",e.STATE_HANDLER_CREATE_REPLACE="createReplace",e.STATE_HANDLER_CREATE_SQUARE="createSquare",e.STATE_HANDLER_CREATE_SQUIGGLY="createSquiggly",e.STATE_HANDLER_CREATE_STAMP="createStamp",e.STATE_HANDLER_CREATE_STRIKE_OUT="createStrikeOut",e.STATE_HANDLER_CREATE_TEXT="createText",e.STATE_HANDLER_CREATE_UNDERLINE="createUnderline",e.STATE_HANDLER_MARQUEE="marquee",e.STATE_HANDLER_ERASER="eraser",e.STATE_HANDLER_LOUPE="loupe",e.STATE_HANDLER_SELECT_TEXT_ANNOTATION="select-text-annotation"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n(28)),r=c(n(25)),i=n(6),a=n(20),s=c(n(1)),u=c(n(30));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));r=u.$handler,u.name="pdfControlRender",o.classList.add("fv__pdf-form-control-container"),u.formRender=u.parent("pdfDocRender").getFormRender();var c=n.getField(),l=u.$foreground=(0,s.default)('<div class="fv__ui-form-foreground"></div>'),f=u.pdfViewer.highlightControls()?"block":"none",d="";(u.checkReadOnly()||7==c.getType()||1==c.getType())&&(f="none",d+="form-field-readonly"),u.checkInvisible()&&(r.hide(),u.$ui.hide());var p=u.pdfViewer.getDisplayHighlightColor();return c&&a.FieldFlag.isRequired(c.getFlags())&&(p=u.pdfViewer.getDisplayHighlightColor(.5)),l.addClass(d),l.css({display:f,"background-color":p,position:"absolute",width:"100%",height:"100%",left:0,top:0}),r.addClass("fv__pdf-form-control-handler-container").append(l).attr("fieldName",c&&c.getName()),n.setRenderNotifier((function(t){return u.updateUI(t)})),u.bindControlEvent(),u}return f(e,t),e.prototype.bindControlEvent=function(){var t=this,e=this.$handler;e.on("mouseenter",(function(e){return t.handleEvnet(u.default.AnnotCursorEnter,e)})),e.on("mouseleave",(function(e){return t.handleEvnet(u.default.AnnotCursorExit,e)}));var n=void 0;e.on("mousedown",(function(e){e&&e.stopPropagation(),n=e,t.handleEvnet(u.default.AnnotMouseButtonPressed,e)})),this.pdfViewer.addListenAnnotMouseEvent((function(e){n&&t.handleEvnet(u.default.AnnotMouseButtonReleased,e),n=null})),e.on("focus",(function(e){return t.handleEvnet(u.default.AnnotReceiveInputFocus,e)})),e.on("blur",(function(e){return t.handleEvnet(u.default.AnnotLoseInputFocus,e)}))},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.formRender.blurControl()},e.prototype.getTileConfig=function(t,e){var n=this.pdfViewer,o=n.getSmartScale(t),r=n.config.tileSize,i=this.annot,a=i.getDeviceRect(1),s=i.getDeviceRect(o),u=s.right-s.left,c=s.bottom-s.top;return[Math.ceil(c/r),Math.ceil(u/r),u,c,r,o,t,e,a.left,a.top,s]},e.prototype.updateForgroundAndHandler=function(t){var e=this.annot.getDeviceRect(t),n={width:e.right-e.left,height:e.bottom-e.top,left:e.left,top:e.top};return this.$handler.addClass("active").css(n),e},e.prototype.render=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;t.prototype.render.call(this,n,o);var a=this.annot;if(this.updateForgroundAndHandler(n),this.checkInvisible()||a.isEmpty()||a.isDeleted()||a.rectIsEmpty())return this.$handler.hide(),Promise.resolve();var s=this.getTileConfig(n,o),u=this.tileCanvas;return u||(u=this.tileCanvas=new r.default((function(t,e,n,o,r,s,u,c){return a.getPDFPage().getAnnotBitmap(a.getId(),(0,i.pt2px)(s),0,{x:u*s+e*r,y:c*s+t*r,width:n,height:o})}),this.$handler)),(e=u).redraw.apply(e,l(s))},e.prototype.doubleTapAnnot=function(){},e.prototype.checkReadOnly=function(){var t=!1;this.formRender.isReadOnly()&&(t=!0);var e=this.annot.getField();return!e||((this.getAnnotFlag().checkReadOnly()||a.FieldFlag.isReadOnly(e.getFlags()))&&(t=!0),t)},e.prototype.checkInvisible=function(){var t=this.getAnnotFlag();return!(!t.checkHidden()&&!t.checkNoView())},e.prototype.handleEvnet=function(t,e){var n=this;if(this.checkReadOnly())return t!=u.default.AnnotMouseButtonReleased&&t!=u.default.AnnotReceiveInputFocus&&t!=u.default.AnnotMouseButtonReleased||this.formRender.blurControl(),!0;var o=this.annot.getField();switch(t){case u.default.AnnotMouseButtonPressed:this.formRender.focusControl(this);break;case u.default.AnnotMouseButtonReleased:2!=o.getType()&&3!=o.getType()||(this.annot.switchAS(),this.formRender.calculate()),setTimeout((function(){var t=n.annot.getAction();n.formRender.execAction("Field",t,o,o)}),0)}this.performAction(t)},e.prototype.updateUI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t.type,n=t.value,o=this.annot.getField(),r=this.$ui,i=this.$handler,s=this.$foreground;switch(e){case"rect":this.render();break;case"readonly":n?s.hide():!this.pdfViewer.highlightControls()||7==o.getType()||1==o.getType()||this.checkReadOnly()||this.checkInvisible()||s.show();break;case"required":var u=n?.5:.25,c=this.pdfViewer.getDisplayHighlightColor(u);s.css({"background-color":c});break;case"hidden":n?(r.hide(),i.hide()):a.FieldFlag.isReadOnly(this.annot.getField().getFlags())||(r.show(),i.show());break;case"focus":this.formRender.focusControl(this);break;case"display":var l=this.annot.getFlags();2&l||32&l?(r.hide(),i.hide()):(r.show(),i.show());break;case"textColor":this.$input&&this.$input.css("color",n)}this.updateUIMore({type:e,value:n})},e.prototype.updateUIMore=function(t){t.type,t.value;this.render(this.scale,this.rotate)},e.prototype.focus=function(){var t=this,e=this.annot.getField();setTimeout((function(){t.$foreground.hide(),5!==e.getType()&&t.$handler.addClass("fv__control_focus")}),50);var n=this.annot.getAdditionalAction(u.default.AnnotReceiveInputFocus);n&&this.formRender.execAction("Field",n,null,e)},e.prototype.blur=function(){var t=this.annot.getField();7!=t.getType()&&1!=t.getType()&&this.pdfViewer.highlightControls()&&this.$foreground.show(),5!==t.getType()&&this.$handler.removeClass("fv__control_focus");var e=this.annot.getAdditionalAction(u.default.AnnotLoseInputFocus);e&&this.formRender.execAction("Field",e,null,t,"Blur")},e.prototype.performAction=function(t,e){this.formRender.execAction("Field",this.annot.getAdditionalAction(t),null,this.annot.getField(),t,e)},e.prototype.autoFontSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.annot.getField();if(n){var o=4*n.getDAFontSize()/3*this.scale;if(!o&&!a.FieldFlag.isMultiline(n.getFlags())){o=.7*this.$textInput.outerHeight();var r=(0,s.default)(".fwr-font-auto");0==r.length&&(r=(0,s.default)('<div class="fwr-font-auto" style="position: absolute;top:0;width: fit-content;opacity: 0;"></div>')).appendTo(this.pdfViewer.$ui),r.css("font-size",o+"px").html(t);for(var i=r.outerHeight(),u=this.$textInput.parent().height();i>u&&o>11;)o--,r.css("font-size",o+"px"),i=r.outerHeight();for(var c=r.outerWidth(),l=this.$textInput.parent().width();c>l-e&&o>11;)o--,r.css("font-size",o+"px"),c=r.outerWidth();this.$textInput.css("font-size",o+"px")}}},e}(o.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(3)),r=n(11),i=a(n(10));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.page=n,this.doc=n.doc,this.engine=o,this.info=e}return t.prototype.getId=function(){return this.info.id},t.prototype.getPDFPage=function(){return this.page},t.prototype.getBitmap=function(t){var e=this.getPDFPage();return e.api.getGraphicsObjectBitmap(e.getPDFDoc().getId(),e.getId(),this.getId(),t*(0,r.getPtPxRatio)())},t.prototype.getRect=function(){return this.info.rect},t.prototype.setMatrix=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.rect=t,n.api.setGraphicsObjectMatrix(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(o.default.graphicsUpdated,n)}))},t.prototype.getType=function(){return this.info.type},t.prototype.getBorderDashes=function(){return this.info.graphState.dashes},t.prototype.getBorderStyle=function(){return this.info.graphState.dashes.length>0?1:0},t.prototype.setBorderStyle=function(t,e){var n=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var r=this.getPDFPage();return this.info.graphState.dashes=e,r.api.setGraphicsObjectBorderStyle(r.getPDFDoc().getId(),r.getId(),this.getId(),t,e).then((function(t){n.info=t,n.engine.eventEmitter.emit(o.default.graphicsUpdated,r)}))},t.prototype.getBorderWidth=function(){return this.info.graphState.lineWidth},t.prototype.setBorderWidth=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.graphState.lineWidth=t,n.api.setGraphicsObjectBorderWidth(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(o.default.graphicsUpdated,n)}))},t.prototype.getBorderColor=function(){return this.info.strokeColor},t.prototype.setBorderColor=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.strokeColor=t,n.api.setGraphicsObjectBorderColor(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.engine.eventEmitter.emit(o.default.graphicsUpdated,n)}))},t.prototype.getFillColor=function(){return this.info.fillColor},t.prototype.setFillColor=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.fillColor=t,n.api.setGraphicsObjectFillColor(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.engine.eventEmitter.emit(o.default.graphicsUpdated,n)}))},t.prototype.getOpacity=function(){return((4278190080&this.info.strokeColor)>>>0)/4278190080},t.prototype.setOpacity=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=parseInt(255*t)<<24>>>0;this.info.strokeColor=16777215&this.info.strokeColor|n;var r=this.getPDFPage();return r.api.setGraphicsObjectOpacity(r.getPDFDoc().getId(),r.getId(),this.getId(),t).then((function(t){e.engine.eventEmitter.emit(o.default.graphicsUpdated,r)}))},t.prototype.remove=function(){var t=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var e=this.getPDFPage();return e.api.removeGraphicsObject(e.getPDFDoc().getId(),e.getId(),this.getId()).then((function(n){t.engine.eventEmitter.emit(o.default.graphicsUpdated,e)}))},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileSpec=e}return t.prototype.getChecksum=function(){return this.fileSpec.checksum},t.prototype.getCreationDateTime=function(){return this.fileSpec.creationDateTime},t.prototype.getDescription=function(){return this.fileSpec.description},t.prototype.getDict=function(){return this.fileSpec.dict},t.prototype.getFileData=function(){return this.fileSpec.fileData},t.prototype.getFileName=function(){return this.fileSpec.fileName},t.prototype.getFileSize=function(){return this.fileSpec.fileSize},t.prototype.getModifiedDateTime=function(){return this.fileSpec.modifiedDateTime},t.prototype.getSubtype=function(){return this.fileSpec.subtype},t.prototype.isEmbedded=function(){return this.fileSpec.isEmbedded},t}();e.default=o},function(t,e){t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return[t||"",o,r++].join("_")};var o="unique_"+Date.now(),r=0},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data("annotComponent").showReplyDialog("reply")},disabled:function(){return this.data("annotComponent").replyDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,o){this.data("annotComponent").showPropertiesDialog(t,e,n,o)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};e.getCommonContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:o,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e){t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(25)),r=n(6);function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return u(e,t),e.prototype.prepare=function(){var t=this.component,e=t.annot;this.tileCanvas=new o.default((function(n,o,i,a,s,u,c,l){return t.getPDFPage().getAnnotBitmap(e.getId(),(0,r.pt2px)(u),0,{x:c*u+o*s,y:l*u+n*s,width:i,height:a})}),t.$ui)},e.prototype.doHide=function(){this.tileCanvas.hideContainer()},e.prototype.doShow=function(){this.tileCanvas.showContainer()},e.prototype.doRender=function(t,e){var n,o=this.component.getTileConfig(t,e);return(n=this.tileCanvas).redraw.apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(o))},e.prototype.willRender=function(){this.tileCanvas.$container.get(0).style.willChange="left, top, width, height"},e.prototype.afterRender=function(){this.tileCanvas.$container.get(0).style.willChange="auto"},e.prototype.destroy=function(){this.prepared&&(t.prototype.destroy.call(this),this.tileCanvas.destroy(),this.tileCanvas=null)},e}(i(n(57)).default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DIR_NORTH="north",e.DIR_SOUTH="south",e.DIR_EAST="east",e.DIR_WEST="west",e.DIR_NORTH_WEST="north-west",e.DIR_NORTH_EAST="north-east",e.DIR_SOUTH_WEST="south-west",e.DIR_SOUTH_EAST="south-east"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=b(n(15)),i=b(n(2)),a=b(n(1)),s=b(n(13)),u=n(6),c=n(7),l=b(n(194)),f=b(n(16)),d=n(0),p=n(100),h=n(35),g=b(n(96)),y=b(n(14)),v=b(n(62)),m=b(n(195));function b(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var P=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="line",y.default.property(a,"shapeControl",(function(){var t=new s.default({start:function(){return a.onStartUpdateShape()},update:function(t,e){return a.onShapeUpdating(t,e)},moving:function(t,e,n){return a.onShapeMoving(t,e,n)},end:function(t,e){return a.onShapeUpdateEnd(t,e)},resizable:!1});return(a.groupMoveDisabled()||a.moveDisabled())&&t.disable(),t})),a}return w(e,t),e.prototype.generateApRenderer=function(){return this.annot.getType()===v.default.line?new m.default(this):t.prototype.generateApRenderer.call(this)},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(),this.activeMore();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin(),this.updateHandlerPosition()},e.prototype.movedByOther=function(){if(this.isActive){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin(),this.updateHandlerPosition()}},e.prototype.unActive=function(){t.prototype.unActive.call(this),y.default.isPropertyIntialized(this,"shapeControl")&&this.shapeControl.deactive()},e.prototype.afterRender=function(t){if(t.transformed&&this.isActive){this.activeRect(),this.activeMore();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin(),this.updateHandlerPosition()}},e.prototype.activeMore=function(){this.$handler.addClass("fv__annot-line-container");var t=2;0!==this.annot.getLeaderLineLength()&&(t=4),this.hammerInited=this.hammerInited||this.initHammer(t)},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,u.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype.onStartUpdateShape=function(t,e){this.editDebouncePromise=this.editDebouncePromise||new c.DebouncePromiseQueue,this.willRedraw()},e.prototype.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){return n.moveTo(t.left,t.top).then((function(t){return n._updateShapeControllerBoundaryBox()}))}))},e.prototype.onShapeUpdateEnd=function(t,e,n){var o=this;this.pdfViewer.config.highPerformance||this.editDebouncePromise.push((function(){return o.moveTo(t.left,t.top).then((function(e){return o.setRect(t)})).then((function(t){return o._updateShapeControllerBoundaryBox()})).then((function(t){o.afterRedraw()}))}))},e.prototype._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},e.prototype.getPropertyOptions=function(){var t=this.annot,e=(0,d.colorConvertor)(t.getBorderColor(),"#"),n=t.getOpacity(),o=t.getBorderWidth(),r=t.getStyleFillColor(),i=this.propertyDisabled();return{color:e,opacity:n,borderWidth:o,lineStartStyle:t.getStartStyle(),lineEndStyle:t.getEndingStyle(),hasCap:t.hasCaption(),fillColor:r,disabled:i}},e.prototype.redraw=function(){var e=this;return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this).then((function(){"line"==e.name&&e.annot.calculateLeaderLine(),e.updateHandlerPosition(),e.setMargin()}))},e.prototype.updateRender=function(){return this.redraw()},e.prototype.initHammer=function(t){var e=this,n=this.$handler,r=(0,l.default)({anchorCount:t}),i=(0,a.default)(r);n.append(i);var s=this.annot.getType(),u=n.find(".fv__pdf-annot-line-point");function c(t,e){if("line"!==s||!g.default.isShift)return[t,e];var n=u.eq(1^index),o=parseFloat(n.css("left")),r=parseFloat(n.css("top")),i=startPointer.x+t,a=startPointer.y+e,c=Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2)),l=Math.atan2(a-r,i-o),f=.25*Math.PI,d=Math.round(l/f)*f,p=c*Math.cos(d),h=r+c*Math.sin(d);return[o+p-startPointer.x,h-startPointer.y]}return u.each((function(t,n){var r=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),i=void 0,s=void 0;r.on("panstart",(function(t){e.moveDisabled()||(s=(0,a.default)(t.target),i={x:parseFloat(s.css("left")),y:parseFloat(s.css("top"))},e.backupProperty(n),e.boundaryChangeStart(t),e.willRedraw())})).on("panmove",(function(t){if(!e.moveDisabled()){var r=c(t.deltaX,t.deltaY),a=o(r,2),u=a[0],l=a[1];e.pdfViewer.config.highPerformance?e.updatePoint(u,l,n):s.css({left:i.x+u+"px",top:i.y+l+"px"})}})).on("panend",(function(t){if(!e.moveDisabled()){var r=c(t.deltaX,t.deltaY),i=o(r,2),a=i[0],s=i[1];e.updatePoint(a,s,n).then((function(n){e.boundaryChangeEnd(t),e.afterRedraw()}))}}))})),!0},e.prototype.boundaryChangeStart=function(t){},e.prototype.boundaryChangeEnd=function(t){},e.prototype.updateHandlerPosition=function(){var t=this.$handler,e=this.scale,n=[],o=this.annot.getStartPoint();n.push(this.annot.page.getDevicePoint([o.x,o.y],e));var r=this.annot.getEndPoint();if(n.push(this.annot.page.getDevicePoint([r.x,r.y],e)),0!=this.annot.getLeaderLineLength()){var i=this.annot.getLeaderLinePoints();n.push(this.annot.page.getDevicePoint([i.start.x,i.start.y],e)),n.push(this.annot.page.getDevicePoint([i.end.x,i.end.y],e))}for(var a=0;a<n.length;a++){t.find("[data-index="+a+"]").css({left:n[a][0]+"px",top:n[a][1]+"px"})}},e.prototype.moved=function(){t.prototype.moved.call(this),this.updateHandlerPosition(),this.setMargin()},e.prototype.setContent=function(t){return t===this.annot.getContent()?Promise.resolve(!0):this.annot.setContent(t)},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.annot.update().then((function(t){return!0})):t})).then((function(t){return t?e.updateRender().then((function(){var n=e._getShapeControllerBoundaryBox();return e.shapeControl.active(e.$handler,e.getBoundary(),n),e.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,e),t})):t}))},e.prototype.setFillColor=function(t){var e=this,n=this.annot.setStyleFillColor;return n||(n=this.annot.setFillColor),n.call(this.annot,t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,e),t})):t}))},e.prototype.setEndingStyle=function(t,e){var n=this;return this.annot.setEndingStyle(t,e).then((function(t){return n.annot.update()})).then((function(){return n.redraw().then((function(){var t=n._getShapeControllerBoundaryBox();n.shapeControl.active(n.$handler,n.getBoundary(),t),n.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,n)}))}))},e.prototype.setMeasureUnit=function(t){var e=this;return t instanceof p.Unit&&(t=t.name),this.annot.setMeasureUnit(t).then((function(){return e.updateRender()})).then((function(){e.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,e)}))},e.prototype.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,o=void 0===n?1:n,r=e.userSpaceUnit,a=void 0===r?h.INCH.name:r,s=e.realValue,u=void 0===s?1:s,c=e.realUnit,l=void 0===c?h.INCH.name:c;return a instanceof p.Unit&&(a=a.name),l instanceof p.Unit&&(l=l.name),this.annot.setMeasureRatio({userSpaceValue:o,userSpaceUnit:a,realValue:u,realUnit:l}).then((function(){return t.updateRender()})).then((function(){t.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,t)}))},e.prototype.getMeasureRatio=function(){var t=this.annot.info.measureRatio,e=/(\d+(\.\d+)?)(?:\s+)(\w+)(?:\s+\=\s+)(\d+(\.\d+)?)(?:\s+)(\w+)/.exec(t),n=o(e,7),r=n[1],i=n[3],a=n[4],s=n[6];return{userSpaceValue:Number(r),userSpaceUnit:i,realValue:Number(a),realUnit:s}},e.prototype.enableCaption=function(t){var e=this;return this.annot.enableCaption(t).then((function(){return e.redraw().then((function(){e.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,e)}))}))},e.prototype.hasCaption=function(){return this.annot.hasCaption()},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender()})).then((function(){n.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,n)}))},e.prototype.backupProperty=function(t){switch(t?(0,a.default)(t).data("index"):""){default:return this.oldRect=Object.assign({},this.annot.getRect());case 1:return this.oldEndPoint=Object.assign({},this.annot.getEndPoint());case 0:return this.oldStartPoint=Object.assign({},this.annot.getStartPoint());case 3:case 2:return this.oldLeaderEndPoint=Object.assign({},this.annot.leaderEndPoint)}},e.prototype.updateLeaderLineLength=function(t,e,n){var o=this.oldLeaderEndPoint,r=this.annot.getEndPoint(),i=this.annot.getStartPoint(),a=this.annot.Eb;n&&(o=this.oldLeaderEndPoint,r=this.annot.getEndPoint(),i=this.annot.getStartPoint(),a=this.annot.Eb);var s=o.x+t,u=o.y+e,c=(this.annot.k*(u-a)+s)/(this.annot.k*this.annot.k+1),l=c,f=this.annot.k*c+a,d=!0;(r.x-i.x)*(u-r.y)-(s-r.x)*(r.y-i.y)>0&&(d=!1);var p=l-r.x,h=f-r.y,g=Math.sqrt(p*p+h*h);return d&&(g=-g),this.annot.setLeaderLineLength(g)},e.prototype.updatePoint=function(t,e,n){var r=this,s=(0,a.default)(n).data("index"),u=void 0,c=this.annot.page.reverseDeviceOffset([t,e],this.scale),l=o(c,2),f=l[0],d=l[1];switch(s){case 1:u=this.annot.setEndPoint({x:this.oldEndPoint.x+f,y:this.oldEndPoint.y+d});break;case 0:u=this.annot.setStartPoint({x:this.oldStartPoint.x+f,y:this.oldStartPoint.y+d});break;case 2:u=this.updateLeaderLineLength(f,d,!1);break;case 3:u=this.updateLeaderLineLength(f,d,!0)}return u.then((function(){return r.updateRender().then((function(){var t=r._getShapeControllerBoundaryBox();r.shapeControl.active(r.$handler,r.getBoundary(),t),r.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,r)}))}))},e.prototype.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(f.default.expandOffset(e,t))},e}(r.default);e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.download=function(t,e,n,r,u){if(i.isHuaweiBrowser)return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream",o=t instanceof Blob?t:new Blob(t,{type:n});function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createElement("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}a(o,n).then((function(t){var n=document.createElement("a");n.href=t,n.download=e,n.rel="noopener",n.target="_blank",document.body.appendChild(n),setTimeout((function(t){n.parentNode.removeChild(n)}),4e30),setTimeout((function(t){return r(n)}),0)}))}(t,e,n);var c=n||"attachment/file";i.isHuaweiBrowser&&c.indexOf("json")>-1&&(c="attachment/file");void 0===n&&(n="application/octet-stream");var l=t instanceof Blob?t:new Blob(t,{type:n});if(s())return void function(t,e,n,o){(function(t,e,n,o){return new Promise((function(r,i){if(n||e.usingDataURI)r(a(t,o));else{var s=URL.createObjectURL(t);setTimeout((function(){URL.revokeObjectURL(s)}),6e4),r(s)}}))})(t,e,n,o).then((function(t){e.windowOpen.document.location.href=t}))}(l,r,u,c);(0,o.saveAs)(l,e)},e.getDownloadEnv=function(){if(s())return{windowOpen:window.open("about:blank"),usingDataURI:i.isSafari&&r.isMobile||i.isHuaweiBrowser};return null};var o=n(207),r=n(27),i=n(37);function a(t,e){return new Promise((function(n){var o=new FileReader;o.readAsDataURL(t),o.onloadend=function(){e&&n(o.result.replace(/^data:[^;]*;/,"data:"+e+";"))}}))}function s(){return i.isSafari}},function(t,e,n){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){var e=o.getEvent();if(!e.isSensitiveCheck){var n=e.target.value,i=d(n,t);if(!n||!i){e.rc=!1;var a=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return a+=' "'+t+'" ',void r.alert(a)}var s=f(n,t);s||(s=new Date),e.value=l(t,s),e.rc=!0}},a=function(t,e,n,i,a,s){var u=o.getEvent(),c=e;if((c<0||c>3)&&(c=0),!u.value){u.rc=!1;var l=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return l+=' "Number" ',void r.alert(l)}var f=u.value;if(!/^[0-9\.\-]+$/.test(f))//!(IsNumber(wstrChange) &&
{u.rc=!1;var d=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return d+=' "Number" ',void r.alert(d)}var p=u.change,h=f;if(u.willCommit){var g=h.trimLeft();if(0==g.length){u.rc=!0;var y=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return y+=' "Number" ',void r.alert(y)}var v=g;if(v=v.replace(/,/g,"."),!/^[0-9\.\-]+$/.test(v))//!(IsNumber(wstrChange) &&
{var m=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return m+=' "Number" ',r.alert(m),void(u.rc=!1)}u.rc=!0}else{var b=h,w=p||"",P=(h.substr(u.selStart,u.selEnd-u.selStart),"-"===h[0]);if(P&&0==u.selStart){u.rc=!1;var A=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return A+=' "Number" ',r.alert(A),TRUE}var _=".";switch(c){case 0:case 1:_=".";break;case 2:case 3:_=","}for(var C=-1!=b.indexOf(_),D=0;D<w.length;D++)if(w[D]!=_)if("-"!=w[D]){if(!/[0-9\.]/.test(w[D]))return void(u.rc=!1)}else{if(P)return void(u.rc=!1);if(0!=D)return void(u.rc=!1);if(0!=u.selStart)return void(u.rc=!1);P=!0}else{if(C){u.rc=!1;var S=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return S+=' "Number" ',void r.alert(S)}C=!0}var R=b.substr(0,u.selStart),E=void 0;u.selEnd<b.length&&(E=b.substr(u.selEnd)||""),f=h=b=R+w+E,u.rc=!0}};function s(t,e,n,o){var r=".",i=",",a="";switch(n){case 0:break;case 1:i="";break;case 2:r=",",i=".";break;case 3:r=",",i=""}var s=t.length%3;a=t.substr(0,s);for(var u=s;u<t.length;u+=3)0!==a.length&&(a+=i),a+=t.substr(u,3);if(o>0){for(e=e.substring(0,o);e.length<o;)e+="0";a=a+r+e}return a}function u(t){var e=t.toString().split(".",2);return null==e||e.length<2?(e=null,0):e[1].length}function c(t){var e=new RegExp("(\\w+)\\["+t+"\\]").exec("January[1]February[2]March[3]April[4]May[5]June[6]July[7]August[8]September[9]October[10]Movember[11]December[12]Jan[1]Feb[2]Mar[3]Apr[4]Jun[6]Jul[7]Aug[8]Sep[9]Oct[10]Mov[11]Dec[12]");return e?e[1]:null}var l=function(t,e){t=t.replace(/%/g,"%69");var n=[],o=e.getFullYear().toString();return o="0000"+o,t=(t=t.replace(/([^y])y{4}(?!y)|(^)y{4}(?!y)/g,"$1"+o.substr(o.length-4,4))).replace(/([^y])y{2}(?!y)|(^)y{2}(?!y)/g,"$1"+o.substr(o.length-2,2)),o=c(e.getMonth()+1),n["%mmmm"]=o,t=t.replace(/([^m])m{4}(?!m)|(^)m{4}(?!m)/g,"$1%mmmm"),n["%mmm"]=o.substr(0,3),t=(t=t.replace(/([^m])m{3}(?!m)|(^)m{3}(?!m)/g,"$1%mmm")).replace(/([^m])m{1}(?!m)|(^)m{1}(?!m)/g,"$1"+(e.getMonth()+1)),1===(o=(e.getMonth()+1).toString()).length&&(o="0"+o),t=t.replace(/([^m])m{2}(?!m)|(^)m{2}(?!m)/g,"$1"+o),o=function(t){var e=new RegExp("(\\w+)\\["+t+"\\]").exec("Sunday[0]Monday[1]Tuesday[2]Wednesday[3]Thursday[4]Friday[5]Saturday[6]");return e?e[1]:null}(e.getDay()),n["%dddd"]=o,t=t.replace(/([^d])d{4}(?!d)|(^)d{4}(?!d)/g,"$1%dddd"),n["%ddd"]=o.substr(0,3),t=(t=t.replace(/([^d])d{3}(?!d)|(^)d{3}(?!d)/g,"$1%ddd")).replace(/([^d])d{1}(?!d)|(^)d{1}(?!d)/g,"$1"+e.getDate()),1===(o=e.getDate().toString()).length&&(o="0"+o),t=(t=t.replace(/([^d])d{2}(?!d)|(^)d{2}(?!d)/g,"$1"+o)).replace(/([^H])H{1}(?!H)|(^)H{1}(?!H)/g,"$1"+e.getHours()),1===(o=e.getHours().toString()).length&&(o="0"+o),t=(t=t.replace(/([^H])H{2}(?!H)|(^)H{2}(?!H)/g,"$1"+o)).replace(/([^h])h{1}(?!h)|(^)h{1}(?!h)/g,"$1"+(e.getHours()>12?e.getHours()-12:e.getHours())),1===(o=(e.getHours()>12?e.getHours()-12:e.getHours()).toString()).length&&(o="0"+o),t=(t=t.replace(/([^h])h{2}(?!h)|(^)h{2}(?!h)/g,"$1"+o)).replace(/([^M])M{1}(?!M)|(^)M{1}(?!M)/g,"$1"+e.getMinutes()),1===(o=e.getMinutes().toString()).length&&(o="0"+o),t=(t=t.replace(/([^M])M{2}(?!M)|(^)M{2}(?!M)/g,"$1"+o)).replace(/([^s])s{1}(?!s)|(^)s{1}(?!s)/g,"$1"+e.getSeconds()),1===(o=e.getSeconds().toString()).length&&(o="0"+o),t=t.replace(/([^s])s{2}(?!s)|(^)s{2}(?!s)/g,"$1"+o),o=e.getHours()>11?"PM":"AM",t=t.replace(/([^t])t{2}(?!t)|(^)t{2}(?!t)/g,"$1"+o),1===o.length&&(o=o.charAt(0)),t=(t=(t=(t=(t=t.replace(/([^t])t{1}(?!t)|(^)t{1}(?!t)/g,"$1"+o)).replace(/%mmmm/g,n["%mmmm"])).replace(/%mmm/g,n["%mmm"])).replace(/%dddd/g,n["%dddd"])).replace(/%ddd/g,n["%ddd"]),n=null,t=t.replace(/%69/g,"%")},f=function(t,e){return d(t,e)};function d(t,e){var n=function(t,e){var n=new Date,o=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),a=n.getHours(),s=n.getMinutes(),u=n.getSeconds(),l=!1,f=!1,d=!1,p=0,y=0;for(;p<e.length&&!f;){var v=e.charAt(p);switch(v){case"y":case"m":case"d":case"H":case"h":case"M":case"s":case"t":var m=y,b=0,w=null;if(e.charAt(p+1)!==v)switch(v){case"y":p++,y++;break;case"m":w=h(t,y,2),r=w.nRet,b=w.nSkip,p++,y+=b;break;case"d":w=h(t,y,2),i=w.nRet,b=w.nSkip,p++,y+=b;break;case"H":case"h":w=h(t,y,2),a=w.nRet,b=w.nSkip,p++,y+=b;break;case"M":w=h(t,y,2),s=w.nRet,b=w.nSkip,p++,y+=b;break;case"s":w=h(t,y,2),u=w.nRet,b=w.nSkip,p++,y+=b;break;case"t":l="p"===t.charAt(p),p++,y++}else if(e.charAt(p+1)===v&&e.charAt(p+2)!==v)switch(v){case"y":w=h(t,y,4),o=w.nRet,b=w.nSkip,p+=2,y+=b;break;case"m":w=h(t,y,2),r=w.nRet,b=w.nSkip,p+=2,y+=b;break;case"d":w=h(t,y,2),i=w.nRet,b=w.nSkip,p+=2,y+=b;break;case"H":case"h":w=h(t,y,2),a=w.nRet,b=w.nSkip,p+=2,y+=b;break;case"M":w=h(t,y,2),s=w.nRet,b=w.nSkip,p+=2,y+=b;break;case"s":w=h(t,y,2),u=w.nRet,b=w.nSkip,p+=2,y+=b;break;case"t":l="p"===t.charAt(y)&&"m"===t.charAt(y+1),p+=2,y+=2}else if(e.charAt(p+1)===v&&e.charAt(p+2)===v&&e.charAt(p+3)!==v)switch(v){case"m":w=g(t,y),b=w.nSkip;for(var P=w.swRet,A=!1,_=0;_<12;_++)if(P.toLowerCase()===c(_+1).substr(0,3).toLowerCase()){r=_+1,p+=3,y+=b,A=!0;break}A||(w=h(t,y,3),r=w.nRet,b=w.nSkip,p+=3,y+=b);break;case"y":break;default:p+=3,y+=3}else if(e.charAt(p+1)===v&&e.charAt(p+2)===v&&e.charAt(p+3)===v&&e.charAt(p+4)!==v)switch(v){case"y":w=h(t,y,4),o=w.nRet,b=w.nSkip,y+=b,p+=4;break;case"m":A=!1;w=g(t,y),b=w.nSkip,P=(P=w.swRet).toLowerCase();for(_=0;_<12;_++){var C=c(_+1);if((C=C.toLowerCase()).indexOf(P,0)>=0){r=_+1,p+=4,y+=b,A=!0;break}}A||(w=h(t,y,4),r=w.nRet,b=w.nSkip,p+=4,y+=b);break;default:p+=4,y+=4}else e.charAt(p)!==t.charAt(y)&&(d=!0,f=!0),p++,y++;m===y&&(d=!0,f=!0);break;default:t.length<=y?f=!0:e.charAt(p)!==t.charAt(y)&&(d=!0,f=!0),p++,y++}}l&&(a+=12);o>=0&&o<=99&&(o+=2e3);(r<1||r>12)&&(d=!0);(i<1||i>31)&&(d=!0);(a<0||a>24)&&(d=!0);(s<0||s>60)&&(d=!0);(u<0||u>60)&&(d=!0);if(!d)return new Date(o,r-1,i,a,s,u);return null}(t,e);return null==n&&(n=function(t){for(var e=new Date,n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),i=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=[],c=0;c<6;c++)u[c]=0;var l=!1,f=0,d=0,g=t.length;for(;d<g&&!(f>5);){var m=t.charAt(d);if(p(m)){var b,w=h(t,d,4);u[f++]=w.nRet,b=w.nSkip,d+=b}else":"===m&&(l=!0),d++}var P=!0;if(l){if(f<=3)(A=v(f,u[0],u[1],u[2],i,a,s))&&(i=A.h,a=A.M,s=A.s,P=!1);else if(4===f){(A=y(2,u[0],u[1],0,n,o,r))&&(n=A.y,o=A.m,r=A.d,(A=v(2,u[2],u[3],0,i,a,s))&&(i=A.h,a=A.M,s=A.s,P=!1))}else if(5===f){if((A=y(3,u[0],u[1],u[2],n,o,r))&&(n=A.y,o=A.m,r=A.d,(A=v(2,u[3],u[4],0,i,a,s))&&(i=A.h,a=A.M,s=A.s,P=!1)),P)(A=y(2,u[0],u[1],0,n,o,r))&&(n=A.y,o=A.m,r=A.d,(A=v(3,u[2],u[3],u[4],i,a,s))&&(i=A.h,a=A.M,s=A.s,P=!1))}else if(6===f){(A=y(3,u[0],u[1],u[2],n,o,r))&&(n=A.y,o=A.m,r=A.d,(A=v(3,u[3],u[4],u[5],i,a,s))&&(i=A.h,a=A.M,s=A.s,P=!1))}}if(P){var A;(A=y(f,u[0],u[1],u[2],n,o,r))&&(n=A.y,o=A.m,r=A.d,P=f>3)}if(P)return null;return new Date(n,o-1,r,i,a,s)}(t)),n}function p(t){return t>="0"&&t<="9"}function h(t,e,n){var o=[];o.nRet=0,o.nSkip=0;for(var r=e,i=t.length;r<i&&!(r-e>10);r++){var a=t.charAt(r);if(!p(a))break;if(o.nRet=10*o.nRet+(a-"0"),o.nSkip=r-e+1,o.nSkip>=n)break}return o}function g(t,e){var n=[];n.swRet="",n.nSkip=0;for(var o=e,r=t.length;o<r;o++){var i=t.charAt(o);if(!(i>="a"&&i<="z"||i>="A"&&i<="Z"))break;n.swRet+=i,n.nSkip=o-e+1}return n}function y(t,e,n,o,r,i,a){var s=[];if(s.y=r,s.m=i,s.d=a,2===t){if(e>=1&&e<=12&&n>=1&&n<=31)return s.m=e,s.d=n,s;if(e>=1&&e<=31&&n>=1&&n<=12)return s.m=n,s.d=e,s}else if(t>=3){if(e>12&&n>=1&&n<=12&&o>=1&&o<=31)return s.y=e,s.m=n,s.d=o,s;if(e>=1&&e<=12&&n>=1&&n<=31&&o>31)return s.y=o,s.m=e,s.d=n,s;if(e>=1&&e<=31&&n>=1&&n<=12&&o>31)return s.y=o,s.m=n,s.d=e,s}return null}function v(t,e,n,o,r,i,a){var s=[];if(s.h=r,s.M=i,s.s=a,2===t){if(e>=0&&e<=23&&n>=0&&n<=59)return s.h=e,s.M=n,s.s=0,s}else if(3===t&&e>=0&&e<=23&&n>=0&&n<=59&&o>=0&&o<=59)return s.h=e,s.M=n,s.s=o,s;return null}var m=function(t,e,n){for(var o="",r=0,i=0;i<e.length;i++)switch(e[i]){case"9":for(;r<t.length;){var a=r;if(r++,t[a]>="0"&&t[a]<="9"){o+=t[a];break}}if(r>=t.length&&n)return o;break;case"A":if(!(r<t.length))return o;o+=t[r++];break;default:o+=e[i]}return o},b=function(t,e){switch(e){case"9":var n=parseInt(t);return 0<=n&&n<=9;case"A":return/[a-zA-Z]/.test(t);case"O":var o=parseInt(t);return 0<=o&&o<=9||/[a-zA-Z]/.test(t);case"X":case" ":return!0;default:return t===e}},w=function(t){var e=o.getEvent(),n=e.value;if(0!=n.length){if(e.willCommit){var i=0;if((n=m(n,t,!0)).length==t.length)for(var a=0;a<n.length&&b(n[a],t[i]);a++)i++;if(i!=t.length||i!=n.length&&t.length>0){e.rc=!1;var s=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return s+=' "'+t+'" ',void r.alert(s)}return e.change=n,n}var u=e.change;if(u&&0!=u.length){e.selStart;var c=void 0;if((c=e.selStart<e.selEnd?n.replace(n.substr(e.selStart,e.selEnd),u):n.substr(0,e.selStart)+u+n.substr(e.selEnd)).length>t.length){var l=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return l+=' "'+t+'" ',r.alert(l),void(e.rc=!1)}var f=m(c,t);if(f.length>t.length){e.rc=!1;var d=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return d+=' "'+t+'" ',void r.alert(d)}return e.rc=!0,f}e.rc=!0}else e.rc=!0};e.default={AFSimple_Calculate:function(t,e){var n=o.getEvent();if(!n.isSensitiveCheck){var r="",i=0,a=NaN;switch(t){case"AVG":for(var s=0;s<e.length;s++){var c=parseFloat(o.getFieldValue(e[s]));if(!isNaN(c)){var l=u(c);i=i>l?i:l,isNaN(a)&&(a=0),a+=c}}r=isNaN(a)?"":a/e.length;break;case"SUM":for(var f=0;f<e.length;f++){var d=parseFloat(o.getFieldValue(e[f]));if(!isNaN(d)){var p=u(d);i=i>p?i:p,isNaN(a)&&(a=0),a+=d}}r=isNaN(a)?"0":a;break;case"PRD":for(var h=NaN,g=0;g<e.length;g++){var y=parseFloat(o.getFieldValue(e[g]));if(!isNaN(y)){var v=u(y);i=i>v?i:v,isNaN(h)&&(h=1),h*=y}}r=isNaN(h)?"":h;break;case"MIN":for(var m=NaN,b=0;b<e.length;b++){var w=parseFloat(o.getFieldValue(e[b]));if(!isNaN(w)){var P=u(w);i=i>P?i:P,isNaN(m)&&(m=w),m>w&&(m=w)}}r=isNaN(m)?"":m;break;case"MAX":for(var A=NaN,_=0;_<e.length;_++){var C=parseFloat(o.getFieldValue(e[_]));if(!isNaN(C)){var D=u(C);i=i>D?i:D,isNaN(A)&&(A=C),A<C&&(A=C)}}r=isNaN(A)?"":A}n.value=r,n.rc=!0}},AFRange_Validate:function(t,e,n,i){var a=o.getEvent();if(!a.isSensitiveCheck){var s,u=a.target,c="",l=a.value;s=parseFloat(l),isNaN(s)?a.value=u.value:(t&&n?(s<e||s>i)&&(c="Value should be greater than "+e+" and less than "+i+"."):t?s<e&&(c="Value should be greater than "+e+"."):n&&s>i&&(c="Value should be less than "+i+"."),""!==c?(r.alert(c),a.value=u.value,a.rc=!1):a.rc=!0)}},AFNumber_Format:function(t,e,n,i,a,u){var c=o.getEvent();if(!c.isSensitiveCheck){var l=c.value;if(""!==l){if(isNaN(l)){c.value="",c.rc=!1;var f=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return f+=' "Number" ',void r.alert(f)}var d=(l=parseFloat(l))<0?-1:1;if(isNaN(l)){c.value=l,c.rc=!1;var p=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return p+=' "Number" ',void r.alert(p)}var h="";h=(2===n||3===n)&&d<0?"(":"",u&&(h+=a);var g=(l*=d).toString().split(".",2),y=g[0],v="";g.length>1&&(v=g[1]),h+=s(y,v,e,t),u||(h+=a),(2===n||3===n)&&d<0&&(h+=")"),(0!==n||u)&&(l=Math.abs(l)),d<0&&u&&0===n&&(h="-"+h),c.value=h,c.rc=!0}else c.value=""}},AFTime_Format:function(t){var e=new Array("HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt");i(e[t])},AFTime_FormatEx:i,AFDate_FormatEx:function(t){var e=o.getEvent();if(e.format=t,!e.isSensitiveCheck){t&&0!=t.length||(t="mm/dd/yyyy");var n=e.target.value;if(!n){e.rc=!1;var i=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return i+=' "'+t+'" ',void r.alert(i)}var a=f(n,t);a||(a=new Date),e.value=l(t,a),e.rc=!0}},AFPercent_Format:function(t,e){var n=o.getEvent();if(!n.isSensitiveCheck){var i=n.target.value;if(i=parseFloat(100*i),isNaN(i)){n.value=n.target.value,n.rc=!0;var a=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return a+=' "'+Percent+'" ',void r.alert(a)}var u=(i+=.005).toString().split(".",2),c=u[0],l="";u.length>1&&(l=u[1]);var f=s(c,l,e,t)+"%";n.value=f,n.rc=!0}},AFMergeChange:function(t){var e,n,o=t.value;return t.willCommit?t.value:(e=t.selStart>=0?o.substring(0,t.selStart):"",n=t.selEnd>=0&&t.selEnd<=o.length?o.substring(t.selEnd,o.length):"",e+t.change+n)},AFNumber_Keystroke:a,AFParseDateEx:f,AFMakeNumber:function(t){return parseFloat(t)},AFDate_KeystrokeEx:function(t){var e=o.getEvent();if(!e.isSensitiveCheck){var n=e.target.value;if(n){var i=f(n,t);if(!i){e.rc=!1;var a=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return a+=' "'+t+'" ',void r.alert(a)}e.value=l(t,i),e.rc=!0}else e.rc=!0}},setJE:function(t,e){o=t,r=e},setJSEvent:function(t){return jsEvent=t},AFSpecial_Format:function(t){var e=o.getEvent(),n=e.value;if(!n||n.length<1)e.rc=!0;else{n=""+n;var i=void 0;switch(t){case 0:i="99999";break;case 1:i="99999-9999";break;case 2:i=n.length>=10?"(999) 999-9999":"999-9999";break;case 3:i="999-99-9999"}var a=m(n,i);if(a.length!=i.length){e.rc=!1;var s=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return s+=' "'+i+'" ',void r.alert(s)}e.value=a,e.rc=!0}},FXFormatDate:l,AFSpecial_Keystroke:function(t){var e=o.getEvent(),n=e.value;if(!(n.length<1)){var i=e.change,a=void 0;switch(t){case 0:a="99999";break;case 1:a="999999999";break;case 2:var s=n;if(0==s.length&&0==i.length)return void(e.rc=!0);if(e.willCommit){var u=s.match(/^(\(\d{3}\)\s?)?\d{3}-?\d{4}$|^(\d{3}\s?)?\d{3}-?\d{4}$/);if(e.rc=!!u,!u){var c=o.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");c+=' "/^((d{3})s?)?d{3}-?d{4}$|^(d{3}s?)?d{3}-?d{4}$/" ',r.alert(c)}return}var l=e.selStart,f=e.selEnd;if(f<0&&(f=strSrc.length-1),(s=s.substr(0,l)+i+s.substr(f)).length-14>0)return void(e.rc=!1);var d=s.match(/^\(?\d*\)?\s?\d*-?\d*$/);return void(e.rc=!!d);case 3:a="999999999"}return w(a)}e.rc=!0},AFPercent_Keystroke:function(){return a.apply(void 0,arguments)},AFSpecial_KeystrokeEx:function(t){var e=o.getEvent(),n=w(t);void 0!==n&&(e.target.value=n)},ANSB_None:0,ANSB_Page:1,ANSB_Author:2,ANSB_ModDate:3,ANSB_Type:4,ANFB_ShouldNone:7,ANFB_ShouldPrint:0,ANFB_ShouldView:1,ANFB_ShouldEdit:2,ANFB_ShouldAppearInPanel:3,ANFB_ShouldSummarize:4,ANFB_ShouldExport:5}},function(t,e,n){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.destroyHooks=[],this.isDestroyed=!1}return t.prototype.addDestroyHook=function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=this.destroyHooks).push.apply(t,o(n.filter((function(t){if("function"!=typeof t)throw new Error("[Illegal Argument] Invalid destroy hook:"+t+", It's not a function!");return!0}))))},t.prototype.destroy=function(){this.destroyHooks.forEach((function(t){return t()})),this.destroyHooks=[],this.isDestroyed=!0},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(84),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flag=e}return t.prototype.getValue=function(){return this.flag},t.prototype.checkInvisible=function(){return this.flag&i.default.invisible},t.prototype.checkHidden=function(){return this.flag&i.default.hidden},t.prototype.checkPrint=function(){return this.flag&i.default.print},t.prototype.checkNoZoom=function(){return this.flag&i.default.noZoom},t.prototype.checkNoRotate=function(){return this.flag&i.default.noRotate},t.prototype.checkNoView=function(){return this.flag&i.default.noView},t.prototype.checkReadOnly=function(){return this.flag&i.default.readOnly},t.prototype.checkLocked=function(){return this.flag&i.default.locked},t.prototype.checkToggleNoView=function(){return this.flag&i.default.toggleNoView},t.prototype.checkLockedContents=function(){return this.flag&i.default.lockedContents},t.prototype.and=function(t){return this.flag=this.flag&t,this},t.prototype.or=function(t){return this.flag=this.flag|t,this},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$handler=e,this.render=n,this.states=[]}return t.prototype.active=function(){},t.prototype.destroy=function(){},t.prototype.intoState=function(){},t.prototype.outState=function(){},t.prototype.resetState=function(){},t.prototype.setStates=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.states;this.states=t},t.prototype.getStates=function(){return this.states},t.prototype.clearStates=function(){},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e,this.prepared=!1}return t.prototype.prepare=function(){this.prepared||(this.prepared=!0,this.doPrepare())},t.prototype.doPrepare=function(){},t.prototype.show=function(){this.prepared&&this.doShow()},t.prototype.doShow=function(){},t.prototype.hide=function(){this.prepared&&this.doHide()},t.prototype.doHide=function(){},t.prototype.destroy=function(){this.prepared=!1},t.prototype.willRender=function(){},t.prototype.afterRender=function(){},t.prototype.render=function(t,e){return this.prepared||this.prepare(),this.doRender(t,e)},t.prototype.doRender=function(t,e){return Promise.resolve()},t.prototype.numberToRGBAString=function(t){var e=(0,o.convertFromNumberToRGBA)(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logOff=e.logAppenders=e.logLayout=e.logLevel=void 0,e.setLogLevel=function(t){switch(t){case o.LEVEL_DEBUG:case o.LEVEL_INFO:case o.LEVEL_WARN:case o.LEVEL_ERROR:e.logLevel=t}};var o=n(33);e.logLevel="warn",e.logLayout="complex",e.logAppenders=["console"],e.logOff=!1},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(39),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.print=function(t,e){(0,i.default)(t,e)},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(34));r(n(191));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="strikeout",a.$ui.addClass("fv__pdf-page-strikeout-annot-container"),a.$handler.addClass("fv__pdf-page-strikeout-annot-handler-container"),a}return i(e,t),e.prototype.updateRender=function(){var t=this.annot,e=[],n=[],o=this.parent("annotsRender");if(t.isGrouped())for(var r=t.getGroupElements(),i=r.length;i--;){var a=r[i];n[i]=o.getAnnotRender(a.getId()).component,e[i]=a.update()}else n=[this],e=[t.update()];return Promise.all(e).then((function(){for(var t=[],e=n.length;e--;)t[e]=n[e].render();return Promise.all(t)}))},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(22);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return c(e,t),e.prototype.convertToCanvasBasedPoint=function(t,e,n,o){var i=this.component.annot.page.getDevicePoint([t,e],o),a=r(i,2),s=a[0],u=a[1];return{x:s-n.left,y:u-n.top}},e.prototype.doRender=function(t){var e=this,n=this.component.annot,o=n.info,r=o.startCharInfo,i=o.endCharInfo,s=t.outerRect,u=t.scale,c=n.getQuadPoints();if(!r){var l=c[0];r={left:l[0].x,top:l[0].y,right:l[1].x,bottom:l[2].y}}if(!i){var f=c[c.length-1];i={left:f[0].x,top:f[0].y,right:f[1].x,bottom:f[2].y}}var d=this.convertToCanvasBasedPoint(r.left,r.top,s,u),p=(this.convertToCanvasBasedPoint(r.right,r.bottom,s,u),this.convertToCanvasBasedPoint(i.left,i.top,s,u),this.convertToCanvasBasedPoint(i.right,i.bottom,s,u)),h=c.length-1,g=c.map((function(t,n){var o=t.map((function(t){return e.convertToCanvasBasedPoint(t.x,t.y,s,u)})),r=o.map((function(t){return t.x})),i=o.map((function(t){return t.y})),c=Math.min.apply(Math,a(r)),l=Math.max.apply(Math,a(r)),f=Math.max.apply(Math,a(i)),g=Math.min.apply(Math,a(i));return 0===n&&(c=d.x),n===h&&(l=p.x),{left:c,right:l,bottom:f,top:g,width:l-c,height:f-g,textBlockHeight:f-g}}));t.quadRects=g},e}(((o=i)&&o.__esModule?o:{default:o}).default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={unKnownType:"unknowntype",text:"text",link:"link",freeText:"freetext",line:"line",square:"square",circle:"circle",polygon:"polygon",polyLine:"polyline",polyline:"polyline",highlight:"highlight",underline:"underline",squiggly:"squiggly",strikeOut:"strikeout",stamp:"stamp",caret:"caret",ink:"ink",psInk:"psink",fileAttachment:"fileattachment",sound:"sound",movie:"movie",widget:"widget",screen:"screen",printerMark:"printermark",trapNet:"trapnet",watermark:"watermark",threeD:"3d",popup:"popup",redact:"redact"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=c(n(51)),i=c(n(2)),a=c(n(1)),s=n(0),u=c(n(197));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var f=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="polyline",a}return l(e,t),e.prototype.generateApRenderer=function(){return new u.default(this)},e.prototype.activeMore=function(){this.$handler.addClass("fv__pdf-annot-polyLine-container");var t=this.annot.getVertexes().length;this.hammerInited=this.hammerInited||this.initHammer(t)},e.prototype.getPropertyOptions=function(){var t=this.annot,e=(0,s.colorConvertor)(t.getBorderColor(),"#"),n=t.getOpacity(),o=t.getBorderWidth(),r=t.getFillColor(),i=this.propertyDisabled();return{color:e,opacity:n,fillColor:r,borderWidth:o,lineStartStyle:t.getStartStyle(),lineEndStyle:t.getEndingStyle(),disabled:i}},e.prototype.backupProperty=function(t){if(!t)return this.oldRect=Object.assign({},this.annot.getRect());this.oldVertex=Object.assign({},this.annot.getVertexes())},e.prototype.updatePoint=function(t,e,n){var o=this,r=(0,a.default)(n).data("index");return this.movePointAt(r,{offsetX:t,offsetY:e}).then((function(){o.pdfViewer.eventEmitter.emit(i.default.updateActionAnnotation,o)}))},e.prototype.movePointAt=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.offsetX,i=void 0===r?0:r,a=n.offsetY,s=void 0===a?0:a,u=this.annot.page.reverseDeviceOffset([i,s],this.scale),c=o(u,2),l=c[0],f=c[1],d=this.oldVertex||this.annot.getVertexes(),p={x:d[t].x+l,y:d[t].y+f},h=this.getPDFPage(),g=h.getWidth(),y=h.getHeight(),v=h.getRotationAngle(),m=0==(v/90&1)?g:y,b=0==(v/90&1)?y:g;return p.x=Math.max(p.x,0),p.y=Math.max(p.y,0),p.x=Math.min(p.x,m),p.y=Math.min(p.y,b),this.annot.updateVertexes(t,p).then((function(){return e.updateRender()})).then((function(){e.shapeControl.active(e.$handler,e.getBoundary(),e._getShapeControllerBoundaryBox())}))},e.prototype.setLastPoint=function(t,e){var n=this.annot.getVertexes().slice(0),r=n[n.length-1],i=this.annot.page.getDevicePoint([r.x,r.y],this.scale),a=o(i,2),s=a[0],u=a[1];t="number"==typeof t?t:s,e="number"==typeof e?e:u;var c=this.annot.page.reverseDevicePoint([t,e],this.scale),l=o(c,2),f=l[0],d=l[1];return r.x=f,r.y=d,this.setVertexes(n)},e.prototype.addPoint=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.annot.page.reverseDevicePoint([t,e],this.scale),r=o(n,2),i=r[0],a=r[1],s=this.annot.getVertexes().concat({x:i,y:a});return this.setVertexes(s)},e.prototype.setVertexes=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getVertexes();return this.annot.setVertexes(e).then((function(){return t.updateRender()})).then((function(){t.shapeControl.active(t.$handler,t.getBoundary(),t._getShapeControllerBoundaryBox())}))},e.prototype.getVertexes=function(){return this.annot.getVertexes()},e.prototype.deleteVertex=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getVertexes().length-1,e=this.annot.getVertexes().filter((function(e,n){return n!==t}));return this.setVertexes(e)},e.prototype.updateHandlerPosition=function(){for(var t=this.$handler,e=this.scale,n=this.annot.getVertexes(),o=0;o<n.length;o++){var r=t.find("[data-index="+o+"]"),i=n[o];i=this.annot.page.getDevicePoint([i.x,i.y],e),r.css({left:i[0]+"px",top:i[1]+"px"})}},e}(r.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SolidPathSegment=void 0;var o,r=n(65),i=n(19);(o=i)&&o.__esModule;function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,e);var r=s(this,t.call(this));return r.closing=o,n.reduce((function(t,e,n){return r.addSegment(new l(t,e,1===n)),e})),r}return u(e,t),e.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),this.closing&&t.closePath()},e}(r.Path);e.default=c;var l=e.SolidPathSegment=function(t){function e(n,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(this,e);var i=s(this,t.call(this,n,o));return i.atTheStart=r,i}return u(e,t),e.prototype.render=function(t){this.atTheStart&&t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)},e}(r.PathSegment)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PathGenerator=e.PathSegment=e.Path=void 0;var o=r(n(39));r(n(19));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.Path=function(){function t(){i(this,t),this.segments=[]}return t.prototype.addSegment=function(t){t instanceof a&&this.segments.push(t)},t.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),t.closePath()},t}();var a=e.PathSegment=function(){function t(e,n){i(this,t),this.from=e,this.to=n}return t.prototype.render=function(t){(0,o.default)()},t.prototype.isJoinedBefore=function(t){return this.to.equalTo(t.from)},t.prototype.isJoinedAfter=function(t){return t.to.equalTo(this.from)},t.prototype.isJoinedWith=function(t){return this.isJoinedBefore(t)||this.isJoinedAfter(t)},t}();e.PathGenerator=function(){function t(){i(this,t)}return t.prototype.generate=function(){(0,o.default)()},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(2)),r=n(4),i=n(0),a=u(n(63)),s=u(n(198));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="polygon",a}return c(e,t),e.prototype.generateApRenderer=function(){return new s.default(this,!0)},e.prototype.activeMore=function(){this.$handler.addClass("fv__pdf-annot-polygon-container");var t=this.annot.getVertexes().length;this.hammerInited=this.hammerInited||this.initHammer(t)},e.prototype.updateRender=function(){var e=this;return this.annot.update().then((function(){var t=e._getShapeControllerBoundaryBox();e.shapeControl.active(e.$handler,e.getBoundary(),t)})).then((function(n){return t.prototype.updateRender.call(e)}))},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,i.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled()}},e.prototype.updateBorderProperty=function(t){switch(this.annot.getCloudIntensity()){case 1:t.find("#borderStyle-select [value=6]").attr("selected",!0);break;case 2:t.find("#borderStyle-select [value=7]").attr("selected",!0)}},e.prototype.backupProperty=function(t){if(!t)return this.oldRect=Object.assign({},this.annot.getRect());this.oldVertex=Object.assign({},this.annot.getVertexes())},e.prototype.setCloudyIntensity=function(t){var e=this;this.annot.setBorderStyle(r.BORDER_STYLE.CLOUDY,t).then((function(){return e.updateRender().then((function(){e.pdfViewer.eventEmitter.emit(o.default.updateActionAnnotation,e)}))}))},e}(a.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CloudyPathGenerator=e.CloudyStartSegment=e.CloudyPathSegment=void 0;var o,r=n(65),i=(n(11),n(19)),a=(o=i)&&o.__esModule?o:{default:o};n(105);function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var f=e.CloudyPathSegment=function(t){function e(n,o,r){u(this,e);var i=c(this,t.call(this,null,r));return i.controlPoint1=n,i.controlPoint2=o,i}return l(e,t),e.prototype.render=function(t){t.bezierCurveTo(this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.to.x,this.to.y)},e}(r.PathSegment),d=e.CloudyStartSegment=function(t){function e(n){return u(this,e),c(this,t.call(this,n))}return l(e,t),e.prototype.render=function(t){t.moveTo(this.from.x,this.from.y)},e}(r.PathSegment),p=3.14159265358979;e.CloudyPathGenerator=function(t){function e(n,o,r){u(this,e);var i=c(this,t.call(this));return i.points=n,i.innerRect=o,i.outerRect=r,i}return l(e,t),e.prototype.generate=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=(arguments[1],new r.Path),o=this.points.map((function(e){return e.y=t.innerRect.height-e.y,e})),i=o.length,a=i*e,u=o.map((function(t,e){return t.distanceTo(o[(e+1)%i])})).reduce((function(t,e){return t+e})),c={left:o[0].x,right:o[0].x,top:o[0].y,bottom:o[0].y},l=u/a;if(0==l)return n;for(var f=[],d=0,g=o[0],y=o[1],v=g.distanceTo(y),m=0,b=1;m<a;m++){for(;d>v;)d-=v,b++,g=y,y=o[b%i],v=g.distanceTo(y);f.push(g.move(d,y)),d+=l}var w=f.length,P=!0,A=5*l/8;return f.forEach((function(e,o){_(f[0==o?w-1:o-1],e,f[(o+1)%w]).forEach((function(e){var o=function(e){e&&(e.x+=t.innerRect.left-t.outerRect.left,e.y=t.innerRect.height-e.y+(t.innerRect.top-t.outerRect.top))};o(e.from),o(e.to),o(e.controlPoint1),o(e.controlPoint2),n.addSegment(e)}))})),n.rect=c,n;function _(t,e,n){var o=t.subtractp(e),r=n.subtractp(e),i=[],a=Math.atan2(o.y,o.x),u=Math.atan2(r.y,r.x);a+=Math.acos(t.distanceTo(e)/(2*A))-p/9,(u-=Math.acos(n.distanceTo(e)/(2*A)))<a&&(u+=2*p);var c={left:e.x-A,right:e.x+A,bottom:e.y-A,top:e.y+A},l=h(c,a,u,P);i.push.apply(i,s(l.arrAp)),P=!1;var f=e.subtractp(n);return a=Math.atan2(f.y,f.x),u=(a+=Math.acos(n.distanceTo(e)/(2*A)))-p/9,l=h(c={left:n.x-A,right:n.x+A,bottom:n.y-A,top:n.y+A},a,u,P),i.push.apply(i,s(l.arrAp)),i}},e}(r.PathGenerator);function h(t,e,n,o){var r,i,s,u,c,l,h,g,y,v,m,b,w,P,A,_,C,D,S,R,E,O,I,x,M={};if(t.left>=t.right||t.bottom>=t.top)return{arrAp:[],pdfRect:M};if(Math.abs(n-e)<=1e-4)return{arrAp:[],pdfRect:M};var T=[];r=(t.right+t.left)/2,i=(t.top+t.bottom)/2,s=Math.abs(t.right-t.left)/2,u=Math.abs(t.top-t.bottom)/2,I=e,E=r+(m=s*Math.cos(I)),O=i+(b=u*Math.sin(I)),M.left=M.right=E,M.bottom=M.top=O,o&&T.push(new d(new a.default(E,O)));var F=1;n<e&&(F=-1);var k=Math.floor(2*e/p);F>0&&(k+=1),k*=p/2;for(var j=!1;x=k,F>0?n<=k&&(x=n,j=!0):n>=k&&(x=n,j=!0),m=s*Math.cos(I),b=u*Math.sin(I),C=s*Math.cos(x),y=v=-s*s*u*u,w=m+.5522847498308*(E=(S=((h=s*s*b)*v-(g=s*s*(D=u*Math.sin(x)))*y)/((c=u*u*m)*g-(l=u*u*C)*h))-m),P=b+.5522847498308*(O=(R=(l*y-c*v)/(c*g-l*h))-b),A=C+.5522847498308*(E=S-C),_=D+.5522847498308*(O=R-D),w=E=r+w,P=O=i+P,M.left>w&&(M.left=w),M.bottom>P&&(M.bottom=P),M.right<w&&(M.right=w),M.top<P&&(M.top=P),A=E=r+A,_=O=i+_,M.left>A&&(M.left=A),M.bottom>_&&(M.bottom=_),M.right<A&&(M.right=A),M.top<_&&(M.top=_),C=E=r+C,D=O=i+D,M.left>C&&(M.left=C),M.bottom>D&&(M.bottom=D),M.right<C&&(M.right=C),M.top<D&&(M.top=D),T.push(new f(new a.default(w,P),new a.default(A,_),new a.default(C,D))),!j;)I=x,k+=F*p/2;return{arrAp:T,pdfRect:M}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=u(n(200));n(201);var i=u(n(48)),a=u(n(1)),s=u(n(2));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e,n,s){var u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.annotRender=e,this.annot=this.annotRender.annot,this.pdfViewer=this.annotRender.pdfViewer;var c={};if(s)switch(c.type=s.getType(),c.type){case"TypeURI":c.uri=s.getURI();break;case"TypeGoto":c.destination=s.getDestination()}var l=(0,r.default)(c);n||(l='<dialog class="fv__dialog fv__annot-properties-dialog">'+l+"</dialog>");var f=(0,a.default)(l);this.$actionsDialog=f;var d=n||document.body;if(f.appendTo(d),this.bindChangeEvent(),this.update(c),!n||n===document.body){var p=f[0];i.default.registerDialog(p),p.showModal()}this.$gotoInput=f.find("#goto-input"),this.$gotoLeftValue=f.find(".fv__action-dialog-goto-left-value"),this.$gotoTopValue=f.find(".fv__action-dialog-goto-top-value"),this.$urlInput=f.find("#url-input");var h=this.pdfViewer.getPDFDocRender().getPDFDoc().getPageCount();if(this.$gotoInput.attr({max:h}),c&&c.type)switch(c.type){case"TypeURI":this.$urlInput.val(c.uri);break;case"TypeGoto":this.$gotoInput.val(c.destination.pageIndex+1);var g=this.pdfViewer.getPDFPageRender(c.destination.pageIndex);g.getPDFPage().then((function(t){var e=t.getDevicePoint([c.destination.left,c.destination.top],g.getScale()),n=o(e,2),r=n[0],i=n[1];u.$gotoLeftValue.html(r.toFixed(2)),u.$gotoTopValue.html(i.toFixed(2))}))}}return t.prototype.update=function(t){var e=this.$actionsDialog;t&&t.type&&(e.find("#select-action [value="+t.type+"]").attr("selected",!0),e.find(".fv__action-dialog-box").css("display","none"),e.find("[data-type="+t.type+"]").css("display","block"))},t.prototype.bindChangeEvent=function(){var t=this,e=this.$actionsDialog,n=this.pdfViewer.getPDFDocRender(),r=n.viewerRender.scrollWrap;this.pdfViewer.eventEmitter.on(s.default.zoomToSuccess,(function(t,e){u()})),this._unwatchScrollEvent=r.addScrollEventListener(u);var i=this;function u(){var t=function(t){for(var e=t.$container.find(".fv__pdf-view-mode-item"),n=t.viewerRender.scrollWrap,o=n.getScrollTop(),r=(n.getHeight(),n.getScrollLeft()),i=(n.getWidth(),0),s=0,u=0,c=0;c<e.length;c++){var l=e[c],f=(0,a.default)(l).width(),d=(0,a.default)(l).height(),p=l.offsetTop,h=p+d,g=l.offsetLeft,y=g+f;if(h>o&&y>r){i=c,u=o-p,s=r-g;break}}return{pageIndex:i,left:s,top:u}}(n);i.$gotoInput.val(t.pageIndex+1),i.$gotoLeftValue.html(t.left.toFixed(2)),i.$gotoTopValue.html(t.top.toFixed(2))}e.on("click",".fv__action-btn-cancel",(function(){t.annotRender.hideActionsDialog()})).on("click",".fv__action-dialog-close-icon",(function(){t.annotRender.hideActionsDialog()})).on("change","#select-action",(function(t){var n=t.target.value;e.find(".fv__action-dialog-box").css("display","none"),e.find("[data-type="+n+"]").css("display","block")})).on("click",".fv__action-btn-ok",(function(n){var r=e.find("#select-action").val();if("TypeURI"===r){var a=e.find("#url-input").val();t.annot.setAction(r).then((function(){t.annot.setActionData({uri:a}).then((function(){t.annotRender.hideActionsDialog()}))}))}else if("TypeGoto"===r){var s=t.pdfViewer.getPDFDocRender().getScale();t.annot.setAction(r).then((function(){var e={};e.pageIndex=t.$gotoInput.val()-1;var n=i.pdfViewer.getPDFPageRender(e.pageIndex);n.getPDFPage().then((function(r){var i=r.reverseDevicePoint([Number(t.$gotoLeftValue.html()),Number(t.$gotoTopValue.html())],n.getScale()),a=o(i,2),u=a[0],c=a[1];e.left=u,e.top=c,"fitWidth"===s?e.type="ZoomFitHorz":"fitHeight"===s?e.type="ZoomFitPage":(e.type="ZoomXYZ",e.zoomFactor=t.pdfViewer.getPDFPageRender(e.pageIndex).getScale()),t.annot.setActionData(e).then((function(){t.annotRender.hideActionsDialog()}))}))}))}})).on("input","#goto-input",(function(e){var n=e.target.value;t.pdfViewer.getPDFDocRender().goToPage(n-1,{x:0,y:0})}))},t.prototype.close=function(){var t=this.$actionsDialog;this._unwatchScrollEvent&&this._unwatchScrollEvent(),t&&(t[0].close(),t.remove(),this.$actionsDialog=null)},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=g(n(15)),i=g(n(13)),a=n(47),s=g(n(209)),u=g(n(2)),c=n(6),l=g(n(16)),f=n(0),d=n(7),p=g(n(14)),h=g(n(107));function g(t){return t&&t.__esModule?t:{default:t}}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var v=(0,a.getCommonContextMenu)(),m=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return p.default.property(s,"shapeControl",(function(){var t=new i.default({start:function(t,e,n){return s.onStartUpdateShape(t,e,n)},moving:function(t,e){return s.onShapeMoving(t,e)},update:function(t,e){return s.onShapeUpdating(t,e)},end:function(t,e,n){return s.onShapeUpdateEnd(t,e,n)},resizable:!0,enableDiagonally:!0});return(s.groupMoveDisabled()||s.moveDisabled())&&t.disable(),t})),s}return y(e,t),e.getDefaultContextMenuConfig=function(){return v},e.prototype.generateApRenderer=function(){return new h.default(this)},e.prototype.onStartUpdateShape=function(t,e,n){this.editDebouncePromise=this.editDebouncePromise||new d.DebouncePromiseQueue},e.prototype.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){var e=n.getRect(),o=n.getInnerRect(),r=e.left-o.left,i=e.top-o.top;return n.moveTo(t.left+r,t.top+i).then((function(t){n._updateShapeControlMargin(),n._updateShapeControllerBoundaryBox()}))}))},e.prototype.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){return n.setRect(n._transformShapeOfInnerRectToOuterRect(t)).then((function(t){n._updateShapeControlMargin(),n._updateShapeControllerBoundaryBox()}))}))},e.prototype.onShapeUpdateEnd=function(t,e,n){var o=this;this.pdfViewer.config.highPerformance||this.editDebouncePromise.push((function(){var e=o.getRect(),n=o.getInnerRect(),r=e.left-n.left,i=e.top-n.top;return o.moveTo(t.left+r,t.top+i).then((function(e){return o.setRect(o._transformShapeOfInnerRectToOuterRect(t))})).then((function(t){o._updateShapeControlMargin(),o._updateShapeControllerBoundaryBox()}))}))},e.prototype._transformShapeOfInnerRectToOuterRect=function(t){var e={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},n=l.default.subtract(this.getRect(),this.getInnerRect()),o=l.default.on(e).add(n).extract();return{left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top}},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(this.annot),this._applyShapeChange();var e=this.shapeControl.getPreviewerContext();this._previewUpdatedShape(this.shapeControl.getCurrentShape(),e)},e.prototype.movedByOther=function(){this.isActive&&this._applyShapeChange()},e.prototype._applyShapeChange=function(){var t=this.getInnerBoundary(),e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,t,e),this._updateShapeControlMargin()},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceInnerRect(n),r="px";e.css({left:o.left+r,top:o.top+r,width:o.right-o.left+r,height:o.bottom-o.top+r})},e.prototype._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,c.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2),r=n[0],i=n[1],a=this.getInnerRect(),s=this.getRect(),u=l.default.subtract(a,s);return l.default.on({left:0,top:0,right:r,bottom:i}).add(u).extract()},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},e.prototype.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return t.prototype.render.call(this,e,n)},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,f.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled()}},e.prototype._previewUpdatedShape=function(t,e){e.clearRect(0,0,t.width,t.height),e.strokeStyle="#759DB8",e.lineWidth=1,(0,s.default)(e,0,0,t.width,t.height),e.stroke()},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return e._handlerRerender(t)}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return n._handlerRerender(t)}))},e.prototype.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return e._handlerRerender(t)}))},e.prototype.getInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),o=this.annot.getInnerRect(),r=n.getDeviceRect(o,t,e);return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}},e.prototype.getInnerBoundary=function(){var t=this.getPDFPage(),e=this.annot.getInnerRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},e.prototype._handlerRerender=function(t){var e=this;return t?this.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(u.default.updateActionAnnotation,e),t})):t},e.prototype._updateShapeControlMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(l.default.expandOffset(e,t))},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e}(r.default);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=f(n(71)),i=f(n(13)),a=n(115),s=n(6),u=f(n(16)),c=n(7),l=f(n(14));function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var p=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return s.name="typewritter",l.default.property(s,"shapeControl",(function(){var t=new i.default(s.getShapeOptions());return(s.groupMoveDisabled()||s.moveDisabled())&&t.disable(),t})),s.$ui.addClass("fv__pdf-page-typewritter-annot-container"),s.$handler.addClass("fv__pdf-page-typewritter-annot-handler-container"),s}return d(e,t),e.prototype.getShapeOptions=function(){var t=this;return{resizable:!1,start:function(){return t.onStartUpdateShape()},update:function(e,n){return t.onShapeUpdating(e,n)},moving:function(e,n,o){return t.onShapeMoving(e,n,o)},end:function(e,n){return t.onShapeUpdateEnd(e,n)},enableDiagonally:!0}},e.prototype.afterRender=function(t){t.transformed&&this.isActive&&(this.activeRect(),this.$rect&&this.$rect.show(),this.tooltip&&this.tooltip.tooltipComponent.isVisible&&this.showTooltip())},e.prototype.onStartUpdateShape=function(t,e,n){},e.prototype.onShapeUpdating=function(t,e){t.height<26*this.scale||t.width<26*this.scale||(this.setRect(t),this.setMargin())},e.prototype.onShapeMoving=function(t,e,n){var o=this;(this.hideTooltip(),this.pdfViewer.config.highPerformance)&&(this.isCallout||(this.editDebouncePromise=this.editDebouncePromise||new c.DebouncePromiseQueue).push((function(){return o.moveTo(t.left,t.top)})))},e.prototype.onShapeUpdateEnd=function(t,e,n){var o=this,r=Promise.resolve();switch(n){case a.ACTION_MOVE:r=this.moveTo(t.left,t.top);break;case a.ACTION_RESIZE:this.isCallout||(r=this.setRect(t))}return r.then((function(t){return o.showTooltip()}))},e.prototype.active=function(e){t.prototype.active.call(this,e),this._applyShapeChange(e)},e.prototype._applyShapeChange=function(t){var e=this._getShapeControllerBoundaryBox(),n=void 0;n=this.isCallout?this.getInnerBoundary():this.getBoundary(),!0!==t&&this.shapeControl.active(this.$handler,n,e),this.setMargin()},e.prototype.movedByOther=function(){this.isActive&&this._applyShapeChange()},e.prototype.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);var e=this.annot;return{opacity:e.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled(),fontColor:e.getFontColor(),fontSize:e.getDefaultAppearance().textSize}},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,s.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.isCallout||this.shapeControl.setMargin(u.default.expandOffset(e,t))},e.prototype.redraw=function(){return this.moveDisabled()||this.groupMoveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e.prototype.setHeight=function(e,n,o){var r=this;if("typewritter"!==this.name)return t.prototype.setHeight.call(this,e);var i=this.parent("pdfPageRender").getScale()*this.annot.page.getPxWidth(),a=e.width(),s=13==n,u=e.position().left*this.fontSizeScale;if(!o){if(!s&&a-i+u<5){for(;0!=e[0].scrollTop;){if(!(u+1.2*a<i)){e.width(i-u);break}e.width(1.2*a),a=1.2*e.width()}if(0==e.scrollTop())return Promise.resolve()}e[0].style.height=e[0].scrollTop+e[0].scrollHeight+"px";var c=this.annot.getBorderWidth()*this.scale*4/3,l=e.height()*this.fontSizeScale+2*c,f={left:u-c,top:e.position().top*this.fontSizeScale-c,right:u+e.width()+c,bottom:e.position().top*this.fontSizeScale+e.height()+c,width:e.width()*this.fontSizeScale+2*c,height:e.height()*this.fontSizeScale+2*c};return Math.abs(l-f.height)<4?Promise.resolve():this.setRect(f).then((function(t){r.redraw()})).then((function(t){var n=r.getInnerBoundary(!0);style.left/=r.fontSizeScale,style.top/=r.fontSizeScale,style.width/=r.fontSizeScale,style.height/=r.fontSizeScale,e.css(n)}))}for(e[0].style.height=e[0].scrollTop+e[0].scrollHeight+"px";Math.abs(e.height()-o.height)>2;){if(!(u+1.2*a<i)){e.width(i-u);break}e.width(1.2*a),e.height(o.height),a*=1.2}},e.prototype.beforeBlur=function(){return this.$textInput.val().length<1?(this.$ui.hide(),this.removeAnnot(),!0):t.prototype.beforeBlur.call(this)},e.prototype.postBlur=function(){var t=this;return this.annot.update().then((function(e){0==t.annot.getContent().length?t.removeAnnot():t.redraw()}))},e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(n(15)),r=n(4),i=l(n(1)),a=n(0),s=n(216),u=n(217),c=n(31);function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=(0,u.getDefaultConfig)(".fv__pdf-page-annot-handler-rect"),p=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));s.name="freetext",s.$ui.addClass("fv__pdf-page-freetext-annot-container"),s.$handler.addClass("fv__pdf-page-freetext-annot-handler-container");var u;return s.$textInput=(0,i.default)("<textarea class='fv__ui-freetext-editor "+s.annot.getIntent()+"'></textarea>"),u=s.$textInput,s.$handler.append(u),s.bindTextInputEvent(u),s}return f(e,t),e.getDefaultContextMenuConfig=function(){return d},e.prototype.active=function(e){t.prototype.active.call(this),this.activeRect(),this.$rect&&this.$rect.show()},e.prototype.showTooltip=function(){},e.prototype.hideTooltip=function(){},e.prototype.showContextMenu=function(e,n){return this.hideTooltip(),t.prototype.showContextMenu.call(this,e,n)},e.prototype.getPropertyOptions=function(){return this.hideTooltip(),t.prototype.getPropertyOptions.call(this)},e.prototype.hidePropertiesDialog=function(){this.showTooltip()},e.prototype.setContent=function(t){return this.annot.setContent(t)},e.prototype.getInnerBoundary=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getPDFPage(),n=void 0;if(n=this.annot.getIntent()!==r.Intents.FREETEXT_TYPEWRITER?JSON.parse(JSON.stringify(this.annot.getInnerRect())):JSON.parse(JSON.stringify(this.annot.getRect())),t&&this.annot.getIntent()!=r.Intents.FREETEXT_TYPEWRITER){var o=this.annot.getBorderWidth();n.left+=o,n.right-=o,n.top-=o,n.bottom+=o}var i=e.getDeviceRect(n,this.scale,this.rotate);return{left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top}},e.prototype.setInnerRect=function(t){return this.annot.setInnerRectNoAction(t)},e.prototype.setCalloutLinePoints=function(t){return this.annot._setCalloutLinePoints(t)},e.prototype.showReplyDialog=function(){var t=this.getAnnotFlag();return t.checkLockedContents()||t.checkReadOnly()||t.checkLocked()||(this.shapeControl&&this.shapeControl.deactive(),this.backup(),this.enableEditMode()),!1},e.prototype.backup=function(){this.backupProperty={rect:Object.assign({},this.annot.getRect()),innerRect:Object.assign({},this.annot.getInnerRect())}},e.prototype.enableEditMode=function(){this.tooltip&&this.tooltip.hide();var t=this.annot,e=t.getFillColor(),n=t.getDefaultAppearance(),o=n.textColor,i=4*n.textSize/3*this.scale;this.fontSizeScale=i/12,this.fontSizeScale>1&&(this.fontSizeScale=1);var u=i,c=(0,a.colorConvertor)(16777215&e,"#");0!=e&&"typewritter"!==this.name||(c="white");var l=(0,a.colorConvertor)(16777215&o,"#");0==o&&(l="black");var f=this.getInnerBoundary(!0),d=n.font||{},p=this.annot.getAlignment();switch(p){case 0:p="left";break;case 1:p="center";break;case 2:p="right"}u=Math.min(u,f.height)+"px";var h=Object.assign({"text-align":p,color:l,background:c,display:"block","font-size":i,"min-height":f.height,fontFamily:'"'+[d.baseName,d.familyName,d.nameKey,d.name,"FoxitPDFSDKForWeb"].join('","')+'"',lineHeight:u},f);this.fontSizeScale>=1?this.$handler.css("transform","scale(1)"):(this.$handler.css("transform","scale("+this.fontSizeScale+")"),h.left/=this.fontSizeScale,h.top/=this.fontSizeScale,h.width/=this.fontSizeScale,h.height/=this.fontSizeScale,h.lineHeight="12px"),this.status="editing",this.$textInput.css(h).val(t.getContent()).focus(),n.font&&(0,s.addFont)(d.nameKey||d.name,t.getWoff.bind(t)).catch((function(){})),this.annot.getIntent()==r.Intents.FREETEXT_TYPEWRITER&&this.setHeight(this.$textInput,13,h)},e.prototype.bindEvent=function(){var e=this;t.prototype.bindEvent.call(this);var n=function(t){27==t.keyCode&&t.preventDefault()};this.$textInput.on("keyup",n).on("keydown",n),this.__off__before_delete_event&&this.__off__before_delete_event(),this.__off__before_delete_event=this.pdfViewer.getKeyboardEventBinder(c.ACTIVATION_ANNOTATION_BINDER).before(c.KEY_MAP_DELETE_ANNOTATION,(function(t){document.activeElement==e.$textInput.get(0)&&t.stop()})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=this.pdfViewer.getKeyboardEventBinder(c.ACTIVATION_ANNOTATION_BINDER).on(c.KEY_MAP_UNACTIVE_ANNOTATION,(function(t){e.unActive()}))},e.prototype.unActive=function(){t.prototype.unActive.call(this),document.activeElement==this.$textInput&&this.$textInput.blur(),this.$rect&&this.$rect.hide(),this.tooltip&&this.tooltip.hide()},e.prototype.unBindEvent=function(){t.prototype.unBindEvent.call(this),this.__off__before_delete_event&&this.__off__before_delete_event(),this.__off__esc__event__&&this.__off__esc__event__()},e.prototype.bindTextInputEvent=function(t){var e=this;t.on("focus",(function(t){e.oldInnerRect=e.annot.getInnerRect(),e.oldRect=e.annot.getRect(),e.oldCalloutLinePoints=e.annot.getCalloutLinePoints&&e.annot.getCalloutLinePoints()})).on("keyup",(function(t){return e.setHeight(e.$textInput,t.keyCode)})).on("blur",(function(t){if("editing"==e.status&&!e.beforeBlur()){var n=e.annot.getBorderWidth()*e.scale*4/3,o=parseFloat(t.target.style.left)*e.fontSizeScale,a=parseFloat(t.target.style.top)*e.fontSizeScale,s=parseFloat(t.target.style.width)*e.fontSizeScale,u=parseFloat(t.target.style.height)*e.fontSizeScale,c={left:o,top:a,right:o+s,bottom:a+u,width:s,height:u},l=e.annot.page.reverseDeviceRect(c,e.scale);e.annot.getIntent()!=r.Intents.FREETEXT_TYPEWRITER&&(l.left-=n,l.right+=n,l.top+=n,l.bottom-=n);var f=void 0;switch(e.annot.getIntent()){case r.Intents.FREETEXT_CALLOUT:f=e.setInnerRectProperty(l);break;case r.Intents.FREETEXT_TYPEWRITER:f=e.setRectInPDF(l,!1);break;default:f=e.setInnerRect(l)}f.then((function(n){return e.setContent(t.target.value)})).then((function(n){e.pdfViewer.setActiveElement(),(0,i.default)(t.target).css({display:"none"}).removeAttr("contenteditable")})).then((function(t){return e.$textInput.css("display","none"),e.status="viewing",e.oldInnerRect=null,e.oldRect=null,e.oldCalloutLinePoints=null,e.$handler.css("transform","scale(1)"),e.postBlur()})).then((function(t){return e.redraw()}))}}))},e.prototype.beforeBlur=function(){return!1},e.prototype.postBlur=function(){},e.prototype.setHeight=function(t){var e=this;if(this.$textInput.is(":visible")){var n={left:parseFloat(t.css("left"))*this.fontSizeScale,top:parseFloat(t.css("top"))*this.fontSizeScale};t[0].style.height=t[0].scrollTop+t[0].scrollHeight+"px";this.annot.getBorderWidth(),this.scale;n.height=t.height()*this.fontSizeScale,n.width=t.width()*this.fontSizeScale,n.right=n.left+n.width,n.bottom=n.top+n.height;var o=this.getInnerBoundary(!0);return Math.abs(n.height-o.height)<4&&Math.abs(n.width-o.width)<4?Promise.resolve():this.setInnerRectHeight(this.getPDFPage().reverseDeviceRect(n,this.scale)).then((function(t){e.redraw()})).then((function(n){var o=e.getInnerBoundary(!0);o.left/=e.fontSizeScale,o.top/=e.fontSizeScale,o.width/=e.fontSizeScale,o.height/=e.fontSizeScale,t.css(o)}))}},e.prototype.setDefaultAppearance=function(t,e){var n=this;"textColor"==t&&(e=(0,a.colorConvertor)(e,"int",1));var o=this.annot.getDefaultAppearance();return o[t]=e,this.annot.setDefaultAppearance(o).then((function(t){n.activeRect(),n.activeRect(),n.shapeControl.adjustPointControl&&n.shapeControl.adjustPointControl(),n._applyShapeChange&&n._applyShapeChange()}))},e}(o.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(73),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e,n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctrlKey=e,this.shiftKey=n,this.altKey=o,this.metaKey=r,this.keyCode=i}return t.prototype.equals=function(t){return this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode},t.prototype.toString=function(){var t=[];return this.ctrlKey&&t.push("ctrl"),this.shiftKey&&t.push("shift"),this.altKey&&t.push("alt"),this.metaKey&&t.push("meta"),t.join("+")+"+"+i.default.toString(this.keyCode)},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.userSettingsMap=e.uiMap=void 0;var o=n(286),r=n(125);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.toString=function(t){return a.keyCodeToStr(t)},t.fromString=function(t){return a.strToKeyCode(t)},t}();e.default=i;var a=e.uiMap=new o.KeyCodeStrMap,s=e.userSettingsMap=new o.KeyCodeStrMap;!function(){var t=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.forEach((function(e){a.define(t,e),s.define(t,e)}))};t(r.KeyCodes.Unknown,"unknown"),t(r.KeyCodes.Backspace,"Backspace"),t(r.KeyCodes.Tab,"Tab"),t(r.KeyCodes.Enter,"Enter"),t(r.KeyCodes.Shift,"Shift"),t(r.KeyCodes.Ctrl,"Ctrl"),t(r.KeyCodes.Alt,"Alt"),t(r.KeyCodes.PauseBreak,"PauseBreak"),t(r.KeyCodes.CapsLock,"CapsLock"),t(r.KeyCodes.Escape,"Escape"),t(r.KeyCodes.Space,"Space"),t(r.KeyCodes.PageUp,"PageUp"),t(r.KeyCodes.PageDown,"PageDown"),t(r.KeyCodes.End,"End"),t(r.KeyCodes.Home,"Home"),t(r.KeyCodes.LeftArrow,"LeftArrow","Left"),t(r.KeyCodes.UpArrow,"UpArrow","Up"),t(r.KeyCodes.RightArrow,"RightArrow","Right"),t(r.KeyCodes.DownArrow,"DownArrow","Down"),t(r.KeyCodes.Insert,"Insert"),t(r.KeyCodes.Delete,"Delete"),t(r.KeyCodes.KEY_0,"0"),t(r.KeyCodes.KEY_1,"1"),t(r.KeyCodes.KEY_2,"2"),t(r.KeyCodes.KEY_3,"3"),t(r.KeyCodes.KEY_4,"4"),t(r.KeyCodes.KEY_5,"5"),t(r.KeyCodes.KEY_6,"6"),t(r.KeyCodes.KEY_7,"7"),t(r.KeyCodes.KEY_8,"8"),t(r.KeyCodes.KEY_9,"9"),t(r.KeyCodes.KEY_A,"A"),t(r.KeyCodes.KEY_B,"B"),t(r.KeyCodes.KEY_C,"C"),t(r.KeyCodes.KEY_D,"D"),t(r.KeyCodes.KEY_E,"E"),t(r.KeyCodes.KEY_F,"F"),t(r.KeyCodes.KEY_G,"G"),t(r.KeyCodes.KEY_H,"H"),t(r.KeyCodes.KEY_I,"I"),t(r.KeyCodes.KEY_J,"J"),t(r.KeyCodes.KEY_K,"K"),t(r.KeyCodes.KEY_L,"L"),t(r.KeyCodes.KEY_M,"M"),t(r.KeyCodes.KEY_N,"N"),t(r.KeyCodes.KEY_O,"O"),t(r.KeyCodes.KEY_P,"P"),t(r.KeyCodes.KEY_Q,"Q"),t(r.KeyCodes.KEY_R,"R"),t(r.KeyCodes.KEY_S,"S"),t(r.KeyCodes.KEY_T,"T"),t(r.KeyCodes.KEY_U,"U"),t(r.KeyCodes.KEY_V,"V"),t(r.KeyCodes.KEY_W,"W"),t(r.KeyCodes.KEY_X,"X"),t(r.KeyCodes.KEY_Y,"Y"),t(r.KeyCodes.KEY_Z,"Z"),t(r.KeyCodes.Meta,"Meta"),t(r.KeyCodes.ContextMenu,"ContextMenu"),t(r.KeyCodes.F1,"F1"),t(r.KeyCodes.F2,"F2"),t(r.KeyCodes.F3,"F3"),t(r.KeyCodes.F4,"F4"),t(r.KeyCodes.F5,"F5"),t(r.KeyCodes.F6,"F6"),t(r.KeyCodes.F7,"F7"),t(r.KeyCodes.F8,"F8"),t(r.KeyCodes.F9,"F9"),t(r.KeyCodes.F10,"F10"),t(r.KeyCodes.F11,"F11"),t(r.KeyCodes.F12,"F12"),t(r.KeyCodes.F13,"F13"),t(r.KeyCodes.F14,"F14"),t(r.KeyCodes.F15,"F15"),t(r.KeyCodes.F16,"F16"),t(r.KeyCodes.F17,"F17"),t(r.KeyCodes.F18,"F18"),t(r.KeyCodes.F19,"F19"),t(r.KeyCodes.NumLock,"NumLock"),t(r.KeyCodes.ScrollLock,"ScrollLock"),t(r.KeyCodes.US_SEMICOLON,";",";","OEM_1"),t(r.KeyCodes.US_EQUAL,"=","=","OEM_PLUS"),t(r.KeyCodes.US_COMMA,",",",","OEM_COMMA"),t(r.KeyCodes.US_MINUS,"-","-","OEM_MINUS"),t(r.KeyCodes.US_DOT,".",".","OEM_PERIOD"),t(r.KeyCodes.US_SLASH,"/","/","OEM_2"),t(r.KeyCodes.US_BACKTICK,"`","`","OEM_3"),t(r.KeyCodes.ABNT_C1,"ABNT_C1"),t(r.KeyCodes.ABNT_C2,"ABNT_C2"),t(r.KeyCodes.US_OPEN_SQUARE_BRACKET,"[","[","OEM_4"),t(r.KeyCodes.US_BACKSLASH,"\\","\\","OEM_5"),t(r.KeyCodes.US_CLOSE_SQUARE_BRACKET,"]","]","OEM_6"),t(r.KeyCodes.US_QUOTE,"'","'","OEM_7"),t(r.KeyCodes.OEM_8,"OEM_8"),t(r.KeyCodes.OEM_102,"OEM_102"),t(r.KeyCodes.NUMPAD_0,"NumPad0"),t(r.KeyCodes.NUMPAD_1,"NumPad1"),t(r.KeyCodes.NUMPAD_2,"NumPad2"),t(r.KeyCodes.NUMPAD_3,"NumPad3"),t(r.KeyCodes.NUMPAD_4,"NumPad4"),t(r.KeyCodes.NUMPAD_5,"NumPad5"),t(r.KeyCodes.NUMPAD_6,"NumPad6"),t(r.KeyCodes.NUMPAD_7,"NumPad7"),t(r.KeyCodes.NUMPAD_8,"NumPad8"),t(r.KeyCodes.NUMPAD_9,"NumPad9"),t(r.KeyCodes.NUMPAD_MULTIPLY,"NumPad_Multiply"),t(r.KeyCodes.NUMPAD_ADD,"NumPad_Add"),t(r.KeyCodes.NUMPAD_SEPARATOR,"NumPad_Separator"),t(r.KeyCodes.NUMPAD_SUBTRACT,"NumPad_Subtract"),t(r.KeyCodes.NUMPAD_DECIMAL,"NumPad_Decimal"),t(r.KeyCodes.NUMPAD_DIVIDE,"NumPad_Divide")}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(46)),r=(s(n(54)),n(124)),i=s(r),a=s(n(126));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this,t),this.registry=new i.default,this.name=n,this.target=e,this.priority=r,this.isActive=!0,this.nextBinders=[],this.emitter=new o.default,this.beforeEventEmitter=new o.default}return t.prototype.setKeyboard=function(t){this.keyboard=t},t.prototype.registerKeybinding=function(t,e){var n=a.default.parseKeybinding(e);this.registry.registerKeyBindingRule(new r.KeyBindingRule(t,n,0))},t.prototype.getCommandOfKeybinding=function(t){return this.registry.getCommandOfKeybinding(t)},t.prototype.hasKeybinding=function(t){return!!this.getCommandOfKeybinding(t)},t.prototype.attach=function(t){this.nextBinders.push(t)},t.prototype.before=function(t,e){var n=this;return this.beforeEventEmitter.on(t,e),function(){n.beforeEventEmitter.off(t,e)}},t.prototype.on=function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;return o&&(r=this.before(t,(function(t){t.preventDefault()}))),this.emitter.on(t,e),function(){r&&r(),n.emitter.off(t,e)}},t.prototype.emit=function(t,e){this.emitter.emit(t,e)},t.prototype.acceptElement=function(t){return t===this.target},t.prototype.handleKeydownEvent=function(t,e){var n=this.getCommandOfKeybinding(t);return n?(this.beforeEventEmitter.emit(n,e),!0):this.nextBinders.some((function(n){return n.handleKeydownEvent(t,e)}))},t.prototype.handleEvent=function(t,e){var n=this.getCommandOfKeybinding(t);return n?(this.emit(n,e),!0):this.nextBinders.some((function(n){return n.handleEvent(t,e)}))},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};if(/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(TZ)/.test(e)){var r=-parseInt(t.getTimezoneOffset()/60);r=r>9?"+"+r:"+0"+r,r+=n+"00"+n,e=e.replace("TZ",r)}for(var i in o)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(39),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hiddenCallbacks=[],this.shownCallbacks=[],this.isDisabled=!1}return t.prototype.setCurrentTarget=function(t){this.currentTarget=t},t.prototype.showAt=function(t,e){var n=this;this.shownCallbacks.forEach((function(t){return t.call(n)}))},t.prototype.disable=function(){this.isDisabled=!0},t.prototype.enable=function(){this.isDisabled=!1},t.prototype.destroy=function(){(0,i.default)()},t.prototype.onHidden=function(t){"function"==typeof t&&this.hiddenCallbacks.push(t)},t.prototype.onShown=function(t){"function"==typeof t&&this.shownCallbacks.push(t)},t}();e.default=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(o(this,t),e instanceof t){var u=e;e=u.a,n=u.b,r=u.c,i=u.d,a=u.e,s=u.f}else if(e instanceof Array){var c=e;e=c[0],n=c[1],r=c[2],i=c[3],a=c[4],s=c[5]}this.a=e,this.b=n,this.c=r,this.d=i,this.e=a,this.f=s}return t.Concat2mt=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.e*n.a+e.f*n.c+n.e,e.e*n.b+e.f*n.d+n.f)},t.prototype.set=function(t,e,n,o,r,i){this.a=t,this.b=e,this.c=n,this.d=o,this.e=r,this.f=i},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},t.prototype.reverse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=e.a*e.d-e.b*e.c;if(0==n)return e;var o=-n,r=e.d/n,i=e.b/o,a=e.c/o,s=e.a/n,u=(e.c*e.f-e.d*e.e)/n,c=(e.a*e.f-e.b*e.e)/o;return new t(r,i,a,s,u,c)},t.prototype.setReverse=function(t){var e=this.reverse(t);this.set(e.a,e.b,e.c,e.d,e.e,e.f)},t.prototype.rotate=function(e,n){var o=Math.cos(e),r=Math.sin(e),i=new t(o,r,-r,o,0,0),a=void 0;a=n?t.Concat2mt(i,this):t.Concat2mt(this,i),this.set(a.a,a.b,a.c,a.d,a.e,a.f)},t.prototype.rotateAt=function(t,e,n,o){this.translate(t,e,o),this.rotate(n,o),this.translate(-t,-e,o)},t.prototype.translate=function(t,e,n){n?(this.e+=t*this.a+e*this.c,this.f+=e*this.d+t*this.b):(this.e+=t,this.f+=e)},t.prototype.concat=function(e,n,o,r,i,a,s){var u=void 0;e instanceof t?(u=e,s=n):u=new t(e,n,o,r,i,a);var c=void 0;c=s?t.Concat2mt(u,this):t.Concat2mt(this,u),this.set(c.a,c.b,c.c,c.d,c.e,c.f)},t.prototype.is90Rotated=function(){var t=1e3*this.a;t<0&&(t*=-1);var e=1e3*this.d;e<0&&(e*=-1);var n=this.b;n<0&&(n*=-1);var o=this.c;return o<0&&(o*=-1),t<n&&e<o},t.prototype.isScaled=function(){var t=1e3*this.b;t<0&&(t*=-1);var e=1e3*this.c;e<0&&(e*=-1);var n=this.a;n<0&&(n*=-1);var o=this.d;return o<0&&(o*=-1),t<n&&e<o},t.prototype.getA=function(){return this.a},t.prototype.getB=function(){return this.b},t.prototype.getC=function(){return this.c},t.prototype.getD=function(){return this.d},t.prototype.getE=function(){return this.e},t.prototype.getF=function(){return this.f},t.prototype.scale=function(t,e,n){this.a*=t,this.d*=e,n?(this.b*=t,this.c*=e):(this.b*=e,this.c*=t,this.e*=t,this.f*=e)},t.prototype.transformXDistance=function(t){var e=this.a*t,n=this.b*t;return Math.sqrt(e*e+n*n)},t.prototype.transformYDistance=function(t){var e=this.c*t,n=this.d*t;return Math.sqrt(e*e+n*n)},t.prototype.transformDistance=function(t,e){var n=this.a*t+this.c*e,o=this.b*t+this.d*e;return Math.sqrt(n*n+o*o)},t.prototype.transformPoint=function(t,e){return[this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f]},t.prototype.transformRect=function(t,e,n,o){for(var r=[t,t,n,n],i=[e,o,e,o],a=void 0,s=0;s<4;s++)a=this.transformPoint(r[s],i[s]),r[s]=a[0],i[s]=a[1];for(var u=[r[0],r[0],i[0],i[0]],c=1;c<4;c++)u[0]>r[c]&&(u[0]=r[c]),u[1]<r[c]&&(u[1]=r[c]),u[2]>i[c]&&(u[2]=i[c]),u[3]<i[c]&&(u[3]=i[c]);return[u[0],u[2],u[1],u[3]]},t.prototype.getXUnit=function(){var t=this.a,e=this.b;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(t*t+e*e)},t.prototype.getYUnit=function(){var t=this.c,e=this.d;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(t*t+e*e)},t.prototype.getUnitRect=function(){return this.transformRect(0,0,1,1)},t.prototype.matchRect=function(t,e){var n=e[0]-e[2];this.a=Math.abs(n)<.001?1:(t[0]-t[2])/n,n=e[3]-e[1],this.d=Math.abs(n)<.001?1:(t[3]-t[1])/n,this.e=t[0]-e[0]*this.a,this.f=t[3]-e[3]*this.d,this.b=0,this.c=0},t.prototype.getAngle=function(){return Math.atan2(this.b,this.a)},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDF=e.Log=e.UserPermission=e.shared=e.STATE_HANDLER_NAMES=e.SnapshotServer=e.SoundComponent=e.StrikeOutTextEditComponent=e.ScreenComponent=e.FreeTextBoxComponent=e.FreeTextCalloutComponent=e.FreeTextTypeWritterComponent=e.PolygonCloudAnnotComponent=e.InkComponent=e.StampComponent=e.FreeTextComponent=e.SquareComponent=e.CaretComponent=e.FileAttachmentComponent=e.NoteComponent=e.CircleComponent=e.LinkAnnotComponent=e.PolygonComponent=e.PolyLineComponent=e.LineComponent=e.SquigglyComponent=e.UnderlineComponent=e.StrikeOutComponent=e.HighlightComponent=e.TextMarkupAnnotComponent=e.MarkupAnnotComponent=e.AnnotComponent=e.PageCustomRender=e.PDFPageRendering=e.DocCustomRender=e.PDFDocRendering=e.PDFViewerRendering=e.ScrollWrap=e.RetryPasswordComponent=e.IContextMenu=e.Matrix=e.ViewerEvents=e.Events=e.stateHandler=e.IStateHandler=e.viewMode=e.IViewMode=e.PDFViewer=e.Consts=e.BrowserInfo=e.DeviceInfo=e.vendors=e.Deps=e.PropertiesControl=e.ShapeControl=e.TileJREngineApRenderer=e.LocalCanvasApRenderer=e.AnnotationApRenderer=e.ui=void 0;var o=Ct(n(142)),r=Ct(n(91)),i=Ct(n(123)),a=Ct(n(2)),s=Ct(n(77)),u=Ct(n(90)),c=Ct(n(89)),l=Ct(n(79)),f=Ct(n(86)),d=Ct(n(87)),p=Ct(n(81)),h=Ct(n(83)),g=Ct(n(28)),y=Ct(n(15)),v=Ct(n(34)),m=Ct(n(99)),b=Ct(n(60)),w=Ct(n(102)),P=Ct(n(103)),A=Ct(n(51)),_=Ct(n(63)),C=Ct(n(66)),D=Ct(n(106)),S=Ct(n(108)),R=Ct(n(109)),E=Ct(n(110)),O=Ct(n(111)),I=Ct(n(69)),x=Ct(n(71)),M=Ct(n(112)),T=Ct(n(113)),F=Ct(n(114)),k=Ct(n(70)),j=Ct(n(116)),V=Ct(n(117)),B=Ct(n(118)),N=Ct(n(119)),L=Ct(n(120)),U=Ct(n(127)),q=Ct(n(13)),H=Ct(n(38)),W=Ct(n(76)),K=Ct(n(88)),Y=_t(n(4)),G=_t(n(40)),z=_t(n(27)),$=_t(n(37)),J=_t(n(11)),Q=_t(n(52)),Z=_t(n(35)),X=_t(n(33)),tt=n(58),et=Ct(n(26)),nt=Ct(n(46)),ot=Ct(n(1)),rt=Ct(n(308)),it=Ct(n(10)),at=Ct(n(84)),st=Ct(n(62)),ut=n(20),ct=Ct(n(3)),lt=Ct(n(309)),ft=_t(n(310));n(134);var dt=n(363),pt=Ct(n(132)),ht=Ct(n(130)),gt=Ct(n(129)),yt=Ct(n(131)),vt=Ct(n(133)),mt=n(7),bt=Ct(n(141)),wt=Ct(n(22)),Pt=Ct(n(57)),At=Ct(n(49));function _t(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Ct(t){return t&&t.__esModule?t:{default:t}}var Dt=a.default,St={Hammer:et.default,EventEmitter:nt.default,jQuery:ot.default},Rt=St,Et={browser:J,units:Z,download:Q,createClass:dt.createClass,DebounceAsyncTaskExecutor:mt.DebounceAsyncTaskExecutor},Ot={LEVELS:X,setLogLevel:tt.setLogLevel},It={IStateHandler:i.default},xt={IViewMode:r.default},Mt={IFloatingTooltip:pt.default,IViewerUI:ht.default,IContextMenu:W.default,TinyViewerUI:gt.default,TinyFloatingTooltip:yt.default,TextSelectionTool:vt.default},Tt={constant:Object.assign({Cipher_Type:rt.default,User_Permissions:it.default},ft),annots:{constant:{Annot_Flags:at.default,Annot_Type:st.default,MARKUP_ANNOTATION_STATE:Y.MARKUP_ANNOTATION_STATE}},form:{constant:{Field_Flag:ut.FieldFlag,Field_Type:ut.FieldType}},HeaderFooter:bt.default,DataEvents:ct.default,Error_Code:lt.default};e.ui=Mt,e.AnnotationApRenderer=Pt.default,e.LocalCanvasApRenderer=wt.default,e.TileJREngineApRenderer=At.default,e.ShapeControl=q.default,e.PropertiesControl=H.default,e.Deps=St,e.vendors=Rt,e.DeviceInfo=z,e.BrowserInfo=$,e.Consts=Y,e.PDFViewer=o.default,e.IViewMode=r.default,e.viewMode=xt,e.IStateHandler=i.default,e.stateHandler=It,e.Events=a.default,e.ViewerEvents=Dt,e.Matrix=s.default,e.IContextMenu=W.default,e.RetryPasswordComponent=u.default,e.ScrollWrap=c.default,e.PDFViewerRendering=l.default,e.PDFDocRendering=f.default,e.DocCustomRender=d.default,e.PDFPageRendering=p.default,e.PageCustomRender=h.default,e.AnnotComponent=g.default,e.MarkupAnnotComponent=y.default,e.TextMarkupAnnotComponent=v.default,e.HighlightComponent=m.default,e.StrikeOutComponent=b.default,e.UnderlineComponent=w.default,e.SquigglyComponent=P.default,e.LineComponent=A.default,e.PolyLineComponent=_.default,e.PolygonComponent=C.default,e.LinkAnnotComponent=D.default,e.CircleComponent=S.default,e.NoteComponent=R.default,e.FileAttachmentComponent=E.default,e.CaretComponent=O.default,e.SquareComponent=I.default,e.FreeTextComponent=x.default,e.StampComponent=M.default,e.InkComponent=T.default,e.PolygonCloudAnnotComponent=F.default,e.FreeTextTypeWritterComponent=k.default,e.FreeTextCalloutComponent=j.default,e.FreeTextBoxComponent=V.default,e.ScreenComponent=B.default,e.StrikeOutTextEditComponent=N.default,e.SoundComponent=L.default,e.SnapshotServer=U.default,e.STATE_HANDLER_NAMES=G,e.shared=Et,e.UserPermission=K.default,e.Log=Ot,e.PDF=Tt},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(148)),r=i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$ui=(0,r.default)(e),this.pdfViewerRender=n,this.pdfViewer=n.pdfViewer}return t.prototype.rendering=function(){this.$ui.html(o.default)},t.prototype.rendered=function(){this.$ui.empty()},t}();e.default=a},function(t,e){t.exports="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSIjZGRkIj4KICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyKSIgZD0iTTAgMTIgVjIwIEg0IFYxMnoiPiAKICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImQiIHZhbHVlcz0iTTAgMTIgVjIwIEg0IFYxMno7IE0wIDQgVjI4IEg0IFY0ejsgTTAgMTIgVjIwIEg0IFYxMno7IE0wIDEyIFYyMCBINCBWMTJ6IiBkdXI9IjEuMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMCIga2V5dGltZXM9IjA7LjI7LjU7MSIga2V5U3BsaW5lcz0iMC4yIDAuMiAwLjQgMC44OzAuMiAwLjYgMC40IDAuODswLjIgMC44IDAuNCAwLjgiIGNhbGNNb2RlPSJzcGxpbmUiICAvPgogIDwvcGF0aD4KICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4KSIgZD0iTTAgMTIgVjIwIEg0IFYxMnoiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgdmFsdWVzPSJNMCAxMiBWMjAgSDQgVjEyejsgTTAgNCBWMjggSDQgVjR6OyBNMCAxMiBWMjAgSDQgVjEyejsgTTAgMTIgVjIwIEg0IFYxMnoiIGR1cj0iMS4ycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjIiIGtleXRpbWVzPSIwOy4yOy41OzEiIGtleVNwbGluZXM9IjAuMiAwLjIgMC40IDAuODswLjIgMC42IDAuNCAwLjg7MC4yIDAuOCAwLjQgMC44IiBjYWxjTW9kZT0ic3BsaW5lIiAgLz4KICA8L3BhdGg+CiAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQpIiBkPSJNMCAxMiBWMjAgSDQgVjEyeiI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJkIiB2YWx1ZXM9Ik0wIDEyIFYyMCBINCBWMTJ6OyBNMCA0IFYyOCBINCBWNHo7IE0wIDEyIFYyMCBINCBWMTJ6OyBNMCAxMiBWMjAgSDQgVjEyeiIgZHVyPSIxLjJzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuNCIga2V5dGltZXM9IjA7LjI7LjU7MSIga2V5U3BsaW5lcz0iMC4yIDAuMiAwLjQgMC44OzAuMiAwLjYgMC40IDAuODswLjIgMC44IDAuNCAwLjgiIGNhbGNNb2RlPSJzcGxpbmUiIC8+CiAgPC9wYXRoPgogIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwKSIgZD0iTTAgMTIgVjIwIEg0IFYxMnoiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgdmFsdWVzPSJNMCAxMiBWMjAgSDQgVjEyejsgTTAgNCBWMjggSDQgVjR6OyBNMCAxMiBWMjAgSDQgVjEyejsgTTAgMTIgVjIwIEg0IFYxMnoiIGR1cj0iMS4ycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjYiIGtleXRpbWVzPSIwOy4yOy41OzEiIGtleVNwbGluZXM9IjAuMiAwLjIgMC40IDAuODswLjIgMC42IDAuNCAwLjg7MC4yIDAuOCAwLjQgMC44IiBjYWxjTW9kZT0ic3BsaW5lIiAvPgogIDwvcGF0aD4KICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNikiIGQ9Ik0wIDEyIFYyMCBINCBWMTJ6Ij4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImQiIHZhbHVlcz0iTTAgMTIgVjIwIEg0IFYxMno7IE0wIDQgVjI4IEg0IFY0ejsgTTAgMTIgVjIwIEg0IFYxMno7IE0wIDEyIFYyMCBINCBWMTJ6IiBkdXI9IjEuMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC44IiBrZXl0aW1lcz0iMDsuMjsuNTsxIiBrZXlTcGxpbmVzPSIwLjIgMC4yIDAuNCAwLjg7MC4yIDAuNiAwLjQgMC44OzAuMiAwLjggMC40IDAuOCIgY2FsY01vZGU9InNwbGluZSIgLz4KICA8L3BhdGg+Cjwvc3ZnPgo="},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(82)),r=i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}var a=(0,o.default)(),s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$ui=(0,r.default)(e),this.pageRender=n,this.docRender=n.docRender,this.viewerRender=this.docRender.viewerRender,this.pdfViewer=this.viewerRender.pdfViewer}return t.prototype.rendering=function(){this.$ui.html(a)},t.prototype.rendered=function(){this.$ui.empty()},t}();e.default=s},function(t,e,n){n(5);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__rendering-container">\r\n    <img class="fv__rendering-svg" ',e+='src="'+n(80)+'"',e+=">\r\n</div>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eCustom=e,this.pdfPageRender=n}return t.prototype.render=function(t,e){},t.prototype.destroy=function(){},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={invisible:1,hidden:2,print:4,noZoom:8,noRotate:16,noView:32,readOnly:64,locked:128,toggleNoView:256,lockedContents:512}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClientX=function(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}},e.getClientY=function(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(82)),r=i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}var a=(0,o.default)(),s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$ui=(0,r.default)(e),this.docRender=n,this.viewerRender=n.viewerRender,this.pdfViewer=this.viewerRender.pdfViewer}return t.prototype.rendering=function(){this.$ui.html(a)},t.prototype.rendered=function(){this.$ui.empty()},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eCustom=e,this.pdfDocRender=n,this.doc=n.doc}return t.prototype.render=function(t){},t.prototype.destroy=function(){},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(10),i=(o=r)&&o.__esModule?o:{default:o};function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4294967292;a(this,t),this.permissions=e}return t.prototype.getValue=function(){return this.permissions},t.prototype.checkPrint=function(){return this.permissions&i.default.print},t.prototype.checkModify=function(){return this.permissions&i.default.modify},t.prototype.checkExtract=function(){return this.permissions&i.default.extract},t.prototype.checkAnnotForm=function(){return this.permissions&i.default.annotForm},t.prototype.checkFillForm=function(){return this.permissions&i.default.fillForm},t.prototype.checkExtractAccess=function(){return this.permissions&i.default.extractAccess},t.prototype.checkAssemble=function(){return this.permissions&i.default.assemble},t.prototype.checkPrintHigh=function(){return this.permissions&i.default.printHigh},t.prototype.checkCannotModifyAny=function(){return 0==(1323&this.permissions)},t.prototype.putCannotModifyAny=function(){return this.and(-1324)},t.prototype.checkCannotModifyExcludeAssemble=function(){return 0==(299&this.permissions)},t.prototype.putCannotModifyExcludeAssemble=function(){return this.and(-300)},t.prototype.and=function(t){return this.permissions=this.permissions&t,this},t.prototype.or=function(t){return this.permissions=this.permissions|t,this},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerRender=e}return t.prototype.getScrollHost=function(){return window},t.prototype.scrollBy=function(t,e){window.scrollBy(t,e)},t.prototype.scrollTo=function(t,e){window.scrollTo(t,e)},t.prototype.getScrollOffsetTop=function(){return this.viewerRender.$ui[0].offsetTop},t.prototype.getScrollOffsetLeft=function(){return this.viewerRender.$ui[0].offsetLeft},t.prototype.getScrollY=function(){return window.scrollY||window.pageYOffset||0},t.prototype.getScrollX=function(){return window.scrollX||window.pageXOffset||0},t.prototype.getWidth=function(){return window.innerWidth-30},t.prototype.getHeight=function(){return window.innerHeight-30},t.prototype.getScrollTop=function(){return window.scrollY||window.pageYOffset||0},t.prototype.getScrollLeft=function(){return window.scrollX||window.pageXOffset||0},t.prototype.addScrollEventListener=function(t){var e=this.getScrollHost();function n(n){t(n,e)}return e.addEventListener("scroll",n),function(){return e.removeEventListener("scroll",n)}},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(23),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.prototype.getPassword=function(){var t=this,e=(0,i.default)();return setTimeout((function(){var n=prompt(t.pdfViewer.i18n.t("viewer_:tip.inputPassword"),"");if(null===n)return e.reject();e.resolve(n)}),0),e.promise},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.docRender=e,e.$ui.addClass("fv__view-mode")}return t.getName=function(){},t.prototype.into=function(){},t.prototype.renderViewMode=function(t,e,n,o,r){},t.prototype.jumpToPage=function(t,e){e.x,e.y},t.prototype.getFitHeight=function(t){},t.prototype.getFitWidth=function(t){},t.prototype.getVisibleIndexes=function(){},t.prototype.out=function(){},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.attachContextMenuEvent=function(t,e,n){if(r.isMobile&&(o.isSafari||r.isXiaomi||o.isUC)||r.isIPAD&&o.isSafari){var i=null,a=!1,s=void 0,u=0,c=function(t){a=!1,t.touches&&1!==t.touches.length||(u=0,s={x:t.touches[0].pageX,y:t.touches[0].pageY},i=setTimeout((function(){a=!0}),600))},l=function(t){if((!t.touches||1===t.touches.length)&&s&&a){var e=t.touches[0],n=Math.pow(e.pageX-s.x,2)+Math.pow(e.pageY-s.y,2);(u=Math.max(u,n))>Math.pow(15,2)&&(clearTimeout(i),a=!1)}},f=function(n){if(s=null,a){if(!n.changedTouches||1!==n.changedTouches.length)return clearTimeout(i),void(a=!1);var o=n.changedTouches[0],r=new Event("contextmenu"),u=["target","currentTarget","clientX","clientY","pageX","pageY","offsetX","offsetY","path"].reduce((function(t,e){return t[e]={value:o[e]},t}),{});u.stopPropagation={value:function(){n.stopPropagation()}},u.preventDefault={value:function(){n.preventDefault()}};var c=Object.create(r,u);e.call(t,c)}a=!1,clearTimeout(i)};return t.addEventListener("touchstart",c,n),t.addEventListener("touchend",f,!0),t.addEventListener("touchmove",l,!0),function(){t.removeEventListener("touchstart",c,n),t.removeEventListener("touchmove",l),t.removeEventListener("touchend",f)}}return t.addEventListener("contextmenu",e,n),function(){t.removeEventListener("contextmenu",e,n)}};var o=n(37),r=n(27)},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",r=o.$escape,i=(arguments[1],function(t){return e+=t});return t.length&&(e+='\n<label class="fv__label-block-text">',e+=r(o.i18n("viewer_:dialog.replies")),e+="</label>\n",i(n(94)(t)),e+="\n"),e}},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",r=o.$each,i=(t.$value,t.$index,arguments[1],function(t){return e+=t});return t.length&&(e+='\n<ul class="fv__replies_list">\n    ',r(t,(function(t,o){e+="\n    ",i(n(95)(t)),e+="\n    "})),e+="\n</ul>\n"),e}},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",r=o.$escape,i=(arguments[1],function(t){return e+=t});return e+='<li class="fv__replies_item"><span class="fv__replies_content">',e+=r(t.content),e+="</span>\n    ",i(n(94)(t.replies)),e+="\n</li>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();e.default=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ctrl=!1,this._shift=!1,this._win=!1,this.alt=!1,this._bindEvent()}return t.prototype._bindEvent=function(){var t=this;window.addEventListener("keydown",(function(e){t._ctrl=e.ctrlKey,t._shift=e.shiftKey,t._alt=e.altKey,t._win=e.metaKey}),!1),window.addEventListener("keyup",(function(e){t._shift=16!==e.keyCode&&t._shift,t._alt=18!==e.keyCode&&t._alt,t._ctrl=17!==e.keyCode&&t._ctrl,t._win=91!==e.keyCode&&t._win}),!1),window.addEventListener("blur",(function(e){t._ctrl=!1,t._shift=!1,t._alt=!1,t._win=!1}))},o(t,[{key:"isCtrl",get:function(){return this._ctrl}},{key:"isCtrlDown",get:function(){return this._ctrl}},{key:"isShift",get:function(){return this._shift}},{key:"isShiftDown",get:function(){return this._shift}},{key:"isWin",get:function(){return this._win}},{key:"isWinDown",get:function(){return this._win}},{key:"isAlt",get:function(){return this._alt}},{key:"isAltDown",get:function(){return this._alt}}]),t}())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return function(){return t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(33),i=n(59);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return c(e,t),e.prototype.print=function(t,e){var n,o,i,s,u,c=t.map((function(t){return"string"!==t.type?" %o":" %c"+t.value})).join("").trim(),l=t.map((function(t){switch(t.type){case"string":return t.style;default:return t.value}}));switch(l.splice(0,0,c),e){case r.LEVEL_DEBUG:(n=console).debug.apply(n,a(l));break;case r.LEVEL_INFO:(o=console).info.apply(o,a(l));break;case r.LEVEL_WARN:(i=console).warn.apply(i,a(l));break;case r.LEVEL_ERROR:(s=console).error.apply(s,a(l));break;default:(u=console).log.apply(u,a(l))}},e}(((o=i)&&o.__esModule?o:{default:o}).default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(34)),r=i(n(190));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="highlight",a.$ui.addClass("fv__pdf-page-highlight-annot-container"),a.$handler.addClass("fv__pdf-page-highlight-annot-handler-container"),a}return a(e,t),e.prototype.generateApRenderer=function(){return new r.default(this)},e.prototype.onShapeUpdating=function(t){},e.prototype.onShapeMoving=function(t){},e.prototype.updateRender=function(){return this.redraw()},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PixelUnit=e.Unit=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(101),i=n(11);function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=e.Unit=function(){function t(e,n){s(this,t),this.fromInchRate=e,this.name=n}return t.prototype.convertTo=function(t,e){return t/this.fromInchRate*e.fromInchRate},o(t,[{key:"isPixel",get:function(){return!1}}]),t}();e.PixelUnit=function(t){function e(n){s(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,0,"px"));return o.orientation=n,Object.defineProperty(o,"fromInchRate",{get:function(){var t=(0,i.getDPI)();switch(n){case r.ORIENTATION_HORIZONTAL:return t.x;case r.ORIENTATION_VERTICAL:return t.y}}}),o}return a(e,t),o(e,[{key:"isPixel",get:function(){return!0}}]),e}(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ORIENTATION_VERTICAL="vertical",e.ORIENTATION_HORIZONTAL="horizontal",e.ORIENTATION_ALL="all"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(34));r(n(192));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="Underline",a.$ui.addClass("fv__pdf-page-Underline-annot-container"),a.$handler.addClass("fv__pdf-page-Underline-annot-handler-container"),a}return i(e,t),e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(34));r(n(193));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="strikeout",a.$ui.addClass("fv__pdf-page-squiggly-annot-container"),a.$handler.addClass("fv__pdf-page-squiggly-annot-handler-container"),a}return i(e,t),e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(19),i=(o=r)&&o.__esModule?o:{default:o},a=n(4),s=n(0);var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e}return t.prototype.numberToRGBAString=function(t){var e=(0,s.convertFromNumberToRGBA)(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},t.prototype.renderLineEnd=function(t,e,n,o,r,i){if(0!==o){var s=this.component.annot,u=s.getFillColor()||s.getStyleFillColor?s.getStyleFillColor():void 0,c=n.scale,l=Math.atan2(i.y-r.y,i.x-r.x);switch(t.save(),t.lineJoin="miter",t.beginPath(),o){case a.LineEndingStyle.Square:this.renderSquareEnding(t,i,l,c,e);break;case a.LineEndingStyle.Circle:this.renderCircleEnding(t,i,l,c,e);break;case a.LineEndingStyle.Diamond:this.renderDiamondEnding(t,i,l,c,e);break;case a.LineEndingStyle.OpenArrow:this.renderOpenArrowEnding(t,i,l,c,e);break;case a.LineEndingStyle.ClosedArrow:this.renderClosedArrowEnding(t,i,l,c,e);break;case a.LineEndingStyle.Butt:this.renderButtEnding(t,i,l,c,e);break;case a.LineEndingStyle.ROpenArrow:this.renderROpenArrowEnding(t,i,l,c,e);break;case a.LineEndingStyle.RClosedArrow:this.renderRClosedArrowEnding(t,i,l,c,e);break;case a.LineEndingStyle.Slash:this.renderSlashEnding(t,i,l,c,e)}switch(o){case a.LineEndingStyle.ClosedArrow:case a.LineEndingStyle.RClosedArrow:case a.LineEndingStyle.Diamond:case a.LineEndingStyle.Square:case a.LineEndingStyle.Circle:u&&(t.fillStyle=this.numberToRGBAString(u),t.fill())}t.stroke(),t.restore()}},t.prototype.renderSquareEnding=function(t,e,n,o,r){var i=4.6*r,a=i/2;t.translate(e.x,e.y),t.rotate(n),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},t.prototype.renderCircleEnding=function(t,e,n,o,r){var i=2.3*r;t.translate(e.x,e.y),t.rotate(n),t.moveTo(i,0),t.arc(0,0,i,0,2*Math.PI)},t.prototype.renderDiamondEnding=function(t,e,n,o,r){var i=4.6*r,a=i/2;t.translate(e.x,e.y),t.rotate(n+Math.PI/4),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},t.prototype.renderOpenArrowEnding=function(t,e,n,o,r){var i=30/180*Math.PI;this.renderArrow(t,e,n,o,r,i,!1)},t.prototype.renderClosedArrowEnding=function(t,e,n,o,r){var i=30/180*Math.PI;this.renderArrow(t,e,n,o,r,i,!0)},t.prototype.renderButtEnding=function(t,e,n,o,r){var a=Math.PI/2,s=4.6*r,u=new i.default(e.x+s/2,e.y).rotate(Math.PI-n+a,e),c=u.rotate(Math.PI,e);t.moveTo(u.x,u.y),t.lineTo(c.x,c.y)},t.prototype.renderROpenArrowEnding=function(t,e,n,o,r){var i=150/180*Math.PI;this.renderArrow(t,e,n,o,r,i,!1)},t.prototype.renderRClosedArrowEnding=function(t,e,n,o,r){var i=150/180*Math.PI;this.renderArrow(t,e,n,o,r,i,!0)},t.prototype.renderArrow=function(t,e,n,o,r,a){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=4.6*r,c=new i.default(e.x+u,e.y),l=c.rotate(Math.PI-n+a,e),f=c.rotate(Math.PI-n-a,e);t.moveTo(l.x,l.y),t.lineTo(e.x,e.y),t.lineTo(f.x,f.y),s&&t.closePath()},t.prototype.renderSlashEnding=function(t,e,n,o,r){var a=60/180*Math.PI,s=4.6*r,u=new i.default(e.x+s/2,e.y).rotate(Math.PI-n+a,e),c=u.rotate(Math.PI,e);t.moveTo(u.x,u.y),t.lineTo(c.x,c.y)},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashedPathGenerator=e.DashedPathSegment=e.DashedPath=void 0;var o,r=n(65),i=n(19);(o=i)&&o.__esModule;function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=e.DashedPath=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return u(e,t),e.prototype.render=function(t){try{t.save(),t.beginPath(),this.segments.filter((function(t){return t.isOn})).forEach((function(e){e.render(t)})),t.closePath()}finally{t.restore()}},e}(r.Path),l=e.DashedPathSegment=function(t){function e(n,o){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a(this,e);var i=s(this,t.call(this,n,o));return i.isOn=r,i}return u(e,t),e.prototype.render=function(t){this.isOn&&(t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y))},e}(r.PathSegment);e.DashedPathGenerator=function(t){function e(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];a(this,e);var u=s(this,t.call(this));return u.contour=n,u.dashes=o,u.phase=r,u.continuous=i,u.dashSum=o.reduce((function(t,e){return t+e}),0),u}return u(e,t),e.prototype.generate=function(){var t=this,e=new c;if(0==this.dashes.length)this.contour.reduce((function(t,n){e.addSegment(new l(t,n))}));else{var n=this.phase<this.dashSum?this.phase:this.phase%this.dashSum,o=0,r=0,i=!0;n>0&&this.dashes.reduce((function(t,e,a){var s=t+e;return s>n&&(r=s-n,o=a,i=a%2==0),s}),0);var a=function(){return(o+1)%t.dashes.length};this.contour.reduce((function(s,u){var c=s.distanceTo(u),f=s;for(r>0&&(e.addSegment(new l(f,f=f.move(r,u),i)),i=!i,c-=r,o=a());;){var d=t.dashes[o];if(!(c>=d)){e.addSegment(new l(f,u,i)),t.continuous?(r=d-c,c=0):(r=n,o=0,i=!0);break}e.addSegment(new l(f,f=f.move(d,u),i)),c-=d,o=a(),i=!i}return u}))}return e},e}(r.PathGenerator)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=b(n(28)),i=(b(n(25)),n(6)),a=b(n(1)),s=b(n(5)),u=b(n(13)),c=n(199),l=b(n(38)),f=b(n(2)),d=n(0),p=b(n(32)),h=b(n(68)),g=n(40),y=b(n(14)),v=b(n(202)),m=n(27);function b(t){return t&&t.__esModule?t:{default:t}}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var P=(0,c.getLinkContextMenu)(A,".fv__pdf-page-annot-handler-rect"),A=c.defaultAnnotComponentKey,_=void 0,C=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));y.default.property(a,"shapeControl",(function(){var t=new u.default({start:function(t,e,n){return a.onStartUpdateShape(t,e,n)},update:function(t,e){return a.onShapeUpdating(t,e)},moving:function(t,e){return a.onShapeMoving(t,e)},end:function(t,e,n){return a.onShapeUpdateEnd(t,e,n)},resizable:!0,enableDiagonally:!0});return a.moveDisabled()&&t.disable(),t})),a.apRenderer=a.generateApRenderer(),a.name="link",a.highlightModeIsActive=!1,a.$ui.addClass("pdf-page-link-annot-container"),a.$handler.addClass("pdf-page-link-annot-handler-container");var c=a.pdfViewer.i18n;s.default.i18n=function(t){return c.t(t)},n.action&&(a.actionViewer=a.pdfViewer.actionManager.get(n.action,a));var l=m.isTouchDevice?"touchstart":"mousedown";return a.$ui.on(l,(function(t){a.highlightModeIsActive=!0,a.render();var e=m.isTouchDevice?"touchend":"mouseup";window.addEventListener(e,(function(){a.highlightModeIsActive=!1,a.render()}),{capture:!0,once:!0})})),a}return w(e,t),e.getDefaultContextMenuConfig=function(){return P},e.setContextMenuConfig=function(t){_=t},e.prototype.actionsDisabled=function(){return!(32&this.docRender.getUserPermission().getValue())},e.prototype.addAction=function(t){this.actionViewer=this.pdfViewer.actionManager.get(t,this)},e.prototype.removeAction=function(){this.actionViewer=null},e.prototype.onStartUpdateShape=function(t,e,n){},e.prototype.onShapeUpdating=function(t){t.width<1||t.height<1||this.setRect(t)},e.prototype.onShapeMoving=function(t,e){this.$ui.css({left:t.left,top:t.top})},e.prototype.onShapeUpdateEnd=function(t,e,n){switch(n){case u.default.ACTION_MOVE:this.moveTo(t.left,t.top);break;case u.default.ACTION_RESIZE:if(t.width<1||t.height<1)return;this.setRect(t)}},e.prototype.getTileConfig=function(t,e){var n=this.pdfViewer,o=n.getSmartScale(t),r=n.config.tileSize,i=this.annot,a=i.getDeviceRect(1),s=i.getDeviceRect(o),u=s.right-s.left,c=s.bottom-s.top;return[Math.ceil(c/r),Math.ceil(u/r),u,c,r,o,t,e,a.left,a.top]},e.prototype.generateApRenderer=function(){return new v.default(this)},e.prototype.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.annot;return this.scale=t,this.rotate=e,n.isEmpty()||n.isDeleted()||n.rectIsEmpty()?(this.renderDestroy(),Promise.resolve()):this.apRenderer.render(t,e)},e.prototype.active=function(){t.prototype.active.call(this),this.$handler.addClass("active"),this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)},e.prototype.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()))},e.prototype.doAction=function(){this.actionViewer&&this.actionViewer.active()},e.prototype.afterRender=function(t){if(t.transformed&&this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)}},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,i.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.activeMore=function(t,e){},e.prototype.activeMoreItem=function(){},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active"),this.shapeControl.deactive()},e.prototype.unActiveMore=function(){},e.prototype.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.$handler.remove()},e.prototype.updateBorderProperty=function(){},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,d.colorConvertor)(t.getBorderColor(),"#"),borderWidth:t.getBorderWidth(),highlightingMode:t.getHighlightingMode(),actionType:this.$action&&this.$action.getType(),disabled:this.propertyDisabled(),minBorderWidth:0}},e.prototype.showPropertiesDialog=function(){this.$propertiesControl=new l.default(this,document.body),this.updateDeleteStatus(!0)},e.prototype.hidePropertiesDialog=function(){this.$propertiesControl.close(),this.updateDeleteStatus(!1)},e.prototype.showActionsDialog=function(){this.$actionsControl=new h.default(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},e.prototype.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},e.prototype.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(f.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(f.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(f.default.updateActionAnnotation,n)}))}))},e.prototype.setHighlightingMode=function(t){var e=this;return this.annot.setHighlightingMode(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(f.default.updateActionAnnotation,e),t})):t}))},e.prototype.redraw=function(){return this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},e.prototype.updateRender=function(){return Promise.resolve()},e.prototype.destroy=function(){this.$propertiesControl=null,this.contextMenu&&this.contextMenu.destroy(),t.prototype.destroy.call(this)},e.prototype.showContextMenu=function(t,e){this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},e.prototype.removeAnnot=function(){var t=this;if(this.deleteDisabled())return!1;var e=this.pdfViewer,n=e.eventEmitter,o=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||p.default)(this)).then((function(e){if(n.emit(f.default.removeActionAnnotationBefore,t),!1!==e)return o.getPDFPage().removeAnnot(o).then((function(e){if(e)return n.emit(f.default.removeActionAnnotationSuccess,t);n.emit(f.default.removeActionAnnotationFailed,t)}),(function(){n.emit(f.default.removeActionAnnotationFailed,t)}))}))},e.prototype.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceRect(n);e.css({left:o.left+"px",top:o.top+"px",width:o.right-o.left+"px",height:o.bottom-o.top+"px"})},e.prototype.rectInit=function(){var t=this.$handler,e=(0,a.default)(this.createRectDom());t.append(e);var n=e[0],o=this.rectHammer=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return o.add(new Hammer.Tap({event:"doubletap",taps:2})),o.add(new Hammer.Tap({event:"singletap"})),o.get("doubletap").recognizeWith("singletap"),o.get("singletap").requireFailure("doubletap"),t.on("contextmenu",(function(t){t.preventDefault()})),t.on("mouseup",(function(t){t.stopPropagation()})),this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,t.get(0),this.getContextMenuConfig()),e.data(A,this),e},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype.getContextMenuConfig=function(){if(_)return _;var t=this.constructor.getDefaultContextMenuConfig();for(var e in this.updateContextMenuConfig(t),t)switch(e){case"items":var n=t[e],o=this.pdfViewer.i18n;for(var r in n){var i=n[r];i.nameI18nKey&&(i.name=o.t(i.nameI18nKey))}}return t},e.prototype.doubleTapAnnot=function(){},e.prototype.updateContextMenuConfig=function(t){},e.prototype.tapAnnot=function(e){return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===g.STATE_HANDLER_HAND?this.doAction():t.prototype.tapAnnot.call(this,e)},e}(r.default);e.default=C},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(22)),r=n(4),i=u(n(19)),a=n(67),s=u(n(16));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=function(t){function e(){return c(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},e.prototype.doRender=function(t){var e=this.component.annot.info,n=e.borderInfo||{},o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height);var i=this.convertPointToPixel(n.width,t.scale);o.save(),t.lineWidth=i,o.globalAlpha=e.opacity,o.strokeStyle=0===i?"transparent":this.numberToRGBAString(e.borderColor),o.lineWidth=i;try{switch(n.style){case r.BORDER_STYLE.BEVELED:case r.BORDER_STYLE.UNDERLINE:case r.BORDER_STYLE.SOLID:this.renderSolid(o,e,t);break;case r.BORDER_STYLE.DASHED:this.renderDashed(o,e,t);break;case r.BORDER_STYLE.CLOUDY:this.renderCloud(o,e,t)}var a=e.fillColor;a&&(o.fillStyle=this.numberToRGBAString(a),o.fill()),o.stroke()}finally{o.restore()}},e.prototype.shrinkRect=function(t,e){var n=s.default.on(t).shrink(e).extract();return Object.assign(n,{width:n.right-n.left,height:n.bottom-n.top})},e.prototype.renderCloud=function(t,e,n){e.fillColor;var o=e.borderInfo.cloudIntensity,r=.5*n.lineWidth,s=this.shrinkRect(n.innerRect,r),u=this.shrinkRect(n.outerRect,r),c=s.width,l=s.height;new a.CloudyPathGenerator([new i.default(r,l-r),new i.default(c,l-r),new i.default(c,r),new i.default(r,r)],s,u).generate(8/o).render(t)},e.prototype.renderDashed=function(t,e,n){var o=this,r=e.borderInfo,i=r.dashes||[],a=r.dashPhase||0,s=n.scale;t.save(),t.setLineDash(i.map((function(t){return o.convertPointToPixel(t,s)}))),t.lineDashOffset=this.convertPointToPixel(a,s),this.renderSolid(t,e,n)},e.prototype.renderSolid=function(t,e,n){var o=n.lineWidth,r=n.outerRect.width,i=n.outerRect.height,a=.5*o;t.beginPath(),t.rect(a,a,r-o,i-o),t.closePath()},e}(o.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=y(n(15)),i=y(n(13)),a=y(n(203)),s=n(205),u=y(n(2)),c=n(4),l=y(n(16)),f=n(6),d=n(7),p=n(0),h=y(n(14)),g=y(n(206));function y(t){return t&&t.__esModule?t:{default:t}}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var m=(0,s.getCircleContextMenu)(),b=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return h.default.property(s,"shapeControl",(function(){var t=new i.default({start:function(){return s.onStartUpdateShape()},update:function(t,e){return s.onShapeUpdating(t,e)},moving:function(t,e){return s.onShapeMoving(t,e)},end:function(t,e,n){return s.onShapeUpdateEnd(t,e,n)}});return(s.groupMoveDisabled()||s.moveDisabled())&&t.disable(),t})),s.$ui.addClass("circle-ui"),s.editDebouncePromise=new d.DebouncePromiseQueue,s}return v(e,t),e.getDefaultContextMenuConfig=function(){return m},e.prototype.generateApRenderer=function(){return new g.default(this)},e.prototype.movedByOther=function(){this.isActive&&this._applyShapeChange()},e.prototype._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox(),e=this.getInnerBoundary();this.shapeControl.active(this.$handler,e,t),this._updateShapeControlMargin()},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(this.annot),this._applyShapeChange();var e=this.shapeControl.getPreviewerContext();this._previewUpdatedShape(this.shapeControl.getCurrentShape(),e)},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceInnerRect(n),r="px";e.css({left:o.left+r,top:o.top+r,width:o.right-o.left+r,height:o.bottom-o.top+r})},e.prototype._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox()),this._updateShapeControlMargin()},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,f.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2),r=n[0],i=n[1],a=this.getInnerRect(),s=this.getRect(),u=l.default.subtract(a,s);return l.default.on({left:0,top:0,right:r,bottom:i}).add(u).extract()},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},e.prototype.onStartUpdateShape=function(t,e){},e.prototype.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&(this._previewUpdatedShape(t,e),this.editDebouncePromise.push((function(){return n.setRect(n._transformShapeOfInnerRectToOuterRect(t)).then((function(t){n._updateShapeControllerBoundaryBox()}))})))},e.prototype.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){var e=n.getRect(),o=n.getInnerRect(),r=e.left-o.left,i=e.top-o.top;return n.moveTo(t.left+r,t.top+i).then((function(t){n._updateShapeControllerBoundaryBox()}))}))},e.prototype.onShapeUpdateEnd=function(t,e,n){var o=this;this._previewUpdatedShape(t,e),this.pdfViewer.config.highPerformance||this.editDebouncePromise.push((function(){var e=o.getRect(),n=o.getInnerRect(),r=e.left-n.left,i=e.top-n.top;return o.moveTo(t.left+r,t.top+i).then((function(e){return o.setRect(o._transformShapeOfInnerRectToOuterRect(t))})).then((function(t){o._updateShapeControllerBoundaryBox()}))}))},e.prototype._transformShapeOfInnerRectToOuterRect=function(t){var e={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},n=l.default.subtract(this.getRect(),this.getInnerRect()),o=l.default.on(e).add(n).extract();return{left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top}},e.prototype._previewUpdatedShape=function(t,e){e.clearRect(0,0,t.width,t.height);var n=t.width/2,o=t.height/2,r=n,i=o;e.strokeStyle="#759DB8",e.lineWidth=1,(0,a.default)(e,n,o,r,i),e.stroke()},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,p.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled()}},e.prototype.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return t.prototype.render.call(this,e,n)},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return e._handlerRerender(t)}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return n._handlerRerender(t)}))},e.prototype.setCloudIntencity=function(t){return this.setBorderStyle(c.BORDER_STYLE.CLOUDY,t)},e.prototype.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return e._handlerRerender(t)}))},e.prototype.getInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),o=this.annot.getInnerRect(),r=n.getDeviceRect(o,t,e);return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}},e.prototype.getInnerBoundary=function(){var t=this.getPDFPage(),e=this.annot.getInnerRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},e.prototype._handlerRerender=function(t){var e=this;return t?this.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(u.default.updateActionAnnotation,e),t})):t},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shapeControl.destroy()},e.prototype._updateShapeControlMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(l.default.expandOffset(e,t))},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e}(r.default);e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=f(n(15)),i=f(n(13)),a=n(6),s=f(n(16)),u=n(11),c=f(n(14)),l=n(7);function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var p=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return s.name="note",s.$ui.addClass("fv__pdf-page-note-annot-container"),s.$handler.addClass("fv__pdf-page-note-annot-handler-container"),c.default.property(s,"shapeControl",(function(){var t=new i.default({start:function(){return s.onStartUpdateShape()},moving:function(t,e,n){return s.onShapeMoving(t,e,n)},end:function(t,e){return s.onShapeUpdateEnd(t,e)},resizable:!1});return t.ui.classList.add("fv__pdf-page-annot-handler-rect"),(s.groupMoveDisabled()||s.moveDisabled())&&t.disable(),t})),s.editDebouncePromiseQueue=new l.DebouncePromiseQueue,s}return d(e,t),e.prototype.active=function(){t.prototype.active.call(this),this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin()},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceRect(n),r=void 0,i=void 0;if(8&this.annot.getFlags()){var a=this.annot.getRect();r=a.right-a.left,i=a.top-a.bottom}else{var s=this.annot.getDeviceRect(1);r=s.right-s.left,i=s.bottom-s.top}e.css({left:o.left,top:o.top,width:r,height:i})},e.prototype.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()),this.setMargin())},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,a.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},e.prototype.setIconName=function(t){return this.annot.setIconName(t).then((function(t){return t}))},e.prototype.createRectDom=function(){return this.shapeControl.ui},e.prototype.onStartUpdateShape=function(){},e.prototype.onShapeMoving=function(t,e,n){var o=this;if(this.pdfViewer.config.highPerformance)this.editDebouncePromiseQueue.push((function(){return o.moveTo(t.left,t.top).then((function(t){o.setMargin(),o._updateShapeControllerBoundaryBox()}))}));else{var r=this._moveOffset||{},i=r.offsetLeft||0,a=r.offsetTop||0;this._moveOffset={offsetLeft:i+n.offsetLeft,offsetTop:a+n.offsetTop}}},e.prototype.onShapeUpdateEnd=function(t,e){var n=this;this.pdfViewer.config.highPerformance||this.editDebouncePromiseQueue.push((function(){return n.moveTo(t.left,t.top).then((function(t){n.setMargin(),n._updateShapeControllerBoundaryBox()}))}))},e.prototype.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(s.default.expandOffset(e,t))},e.prototype._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e.prototype.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(t.prototype.render.call(this,e,n),1!=u.dpr&&this.tileCanvas){var o=this.getTileConfig(e,n),r=Math.max(.5,e*u.dpr/o[5]);this.tileCanvas.$container.css({transform:"scale("+r+")"})}},e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=d(n(15)),i=d(n(13)),a=d(n(2)),s=n(6),u=d(n(16)),c=n(7),l=n(52),f=d(n(14));function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var h=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return s.name="file",s.$ui.addClass("fv__pdf-page-file-annot-container"),s.$handler.addClass("fv__pdf-page-file-annot-handler-container"),f.default.property(s,"shapeControl",(function(){var t=new i.default({start:function(){return s.onStartUpdateShape()},moving:function(t,e,n){return s.onShapeMoving(t,e,n)},end:function(t,e){return s.onShapeUpdateEnd(t,e)},resizable:!1});return t.ui.classList.add("fv__pdf-page-annot-handler-rect"),(s.groupMoveDisabled()||s.moveDisabled())&&t.disable(),t})),s}return p(e,t),e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},e.prototype._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},e.prototype.movedByOther=function(){this.isActive&&this._applyShapeChange()},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,s.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},e.prototype.setIconName=function(t){var e=this;return this.annot.setIconName(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,e),t})):t}))},e.prototype.createRectDom=function(){return this.shapeControl.ui},e.prototype.onStartUpdateShape=function(t,e){this.editDebouncePromise=this.editDebouncePromise||new c.DebouncePromiseQueue},e.prototype.onShapeMoving=function(t,e,n){var o=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){return o.moveTo(t.left,t.top).then((function(t){o.setMargin()}))}))},e.prototype.onShapeUpdateEnd=function(t,e){var n=this;this.pdfViewer.config.highPerformance||this.editDebouncePromise.push((function(){return n.moveTo(t.left,t.top).then((function(t){n.setMargin()}))}))},e.prototype.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(u.default.expandOffset(e,t))},e.prototype.doubleTapAnnot=function(){this.rectDoubleTap()},e.prototype.rectDoubleTap=function(){this.download()},e.prototype.download=function(){var t=this,e=(0,l.getDownloadEnv)();this.annot.getFileattachmentStream().then((function(n){(0,l.download)(n,t.annot.getFileSpec().getFileName(),"application/octet-stream",e)}))},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e}(r.default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(15));r(n(208));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="caret",a.$ui.addClass("fv__pdf-page-caret-annot-container"),a.$handler.addClass("fv__pdf-page-caret-annot-handler-container"),a}return i(e,t),e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(),this.$rect.addClass("active")},e.prototype.afterRender=function(t){t.transformed&&this.isActive&&this.activeRect()},e.prototype.unActive=function(){t.prototype.unActive.call(this);var e=this.$rect;e&&e.removeClass("active")},e.prototype.isReplace=function(){return"replace"===(this.annot.getIntent()||"").toLowerCase()},e.prototype.showUI=function(){var e=this;if(this.isReplace()){var n=this.annot.getGroupElements().filter((function(t){return t!==e.annot}))[0],o=this.parent("annotsRender").getAnnotRender(n.getId());return t.prototype.showUI.call(this).then((function(){return o.component.showUI()}))}return t.prototype.showUI.call(this)},e.prototype.hideUI=function(){var e=this;if(this.isReplace()){var n=this.annot.getGroupElements().filter((function(t){return t!==e.annot}))[0],o=this.parent("annotsRender").getAnnotRender(n.getId());return t.prototype.hideUI.call(this).then((function(){return o.component.hideUI()}))}return t.prototype.hideUI.call(this)},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(69)),r=u(n(13)),i=n(0),a=u(n(14)),s=u(n(49));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n,o,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,i,s));return a.default.property(u,"shapeControl",(function(){var t=new r.default({start:function(t,e,n){return u.onStartUpdateShape(t,e,n)},moving:function(t,e){return u.onShapeMoving(t,e)},update:function(t,e){return u.onShapeUpdating(t,e)},end:function(t,e,n){return u.onShapeUpdateEnd(t,e,n)},resizable:!0,degree:0,enableDiagonally:!0,enableFrame:!1,previewer:!1,enableUniform:!0});return(u.groupMoveDisabled()||u.moveDisabled())&&t.disable(),t})),u}return c(e,t),e.prototype.generateApRenderer=function(){return new s.default(this)},e.prototype.getInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.getRect(t,e)},e.prototype.getPropertyOptions=function(){var t=this.annot;(0,i.colorConvertor)(t.getBorderColor(),"#");return{opacity:t.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled(),rotation:(this.annot.getRotation()+360)%360}},e.prototype.setBitmap=function(t,e){var n=this;return this.annot.setBitmap(t,e).then((function(t){return n.render(n.scale,n.rotate)}))},e.prototype.updateRender=function(){return this.render()},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e.prototype.setRotation=function(t){var e=this;return this.annot.setRotation(t).then((function(t){return t?e.updateRender().then((function(){var n=e.getInnerBoundary(),o=e._getShapeControllerBoundaryBox();return e.shapeControl.active(e.$handler,n,o),t})):t}))},e}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=h(n(15)),i=h(n(13)),a=h(n(2)),s=n(6),u=h(n(16)),c=n(7),l=n(0),f=h(n(14)),d=h(n(210)),p=h(n(49));function h(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var y=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return s.name="ink",s.$ui.addClass("pdf-page-ink-annot-container"),s.$handler.addClass("pdf-page-ink-annot-handler-container"),f.default.property(s,"shapeControl",(function(){var t=new i.default({start:function(){return s.onStartUpdateShape()},update:function(t,e){return s.onShapeUpdating(t,e)},moving:function(t,e,n){return s.onShapeMoving(t,e,n)},end:function(t,e){return s.onShapeUpdateEnd(t,e)},enableDiagonally:!0});return(s.groupMoveDisabled()||s.moveDisabled())&&t.disable(),t})),s}return g(e,t),e.prototype.generateApRenderer=function(){return this.getInkList().length<1e3?new d.default(this):new p.default(this)},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin()},e.prototype.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()),this.setMargin())},e.prototype.afterRender=function(t){if(t.transformed&&this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin()}},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,s.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.onStartUpdateShape=function(){this.editDebouncePromise=this.editDebouncePromise||new c.DebouncePromiseQueue},e.prototype.onShapeUpdating=function(t,e){this.pdfViewer.config.highPerformance&&(t.width<10&&(t.width=10),this.setRect(t),this.setMargin())},e.prototype.onShapeMoving=function(t,e,n){var o=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){return o.moveTo(t.left,t.top).then((function(){o.setMargin()}))}))},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,s.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2),r=n[0],i=n[1];return u.default.on({left:0,top:0,right:r,bottom:i}).extract()},e.prototype.onShapeUpdateEnd=function(t,e){var n=this;t.width<10&&(t.width=10),this.pdfViewer.config.highPerformance||this.editDebouncePromise.push((function(){return n.moveTo(t.left,t.top).then((function(t){n.setMargin()}))})),this.setMargin()},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,l.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),borderStyle:!1,disabled:this.propertyDisabled()}},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,e),t})):t}))},e.prototype.getInkList=function(){return this.annot.getInkList()},e.prototype.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(u.default.expandOffset(e,t)),this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e}(r.default);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(66),i=(o=r)&&o.__esModule?o:{default:o};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=(0,n(47).getCommonContextMenu)(),u=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="polygonCloud",a}return a(e,t),e.getDefaultContextMenuConfig=function(){return s},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getShapeController=e.ACTION_TEXT=e.ACTION_AREA=e.ACTION_POINT=void 0;var o=l(n(218)),r=l(n(32)),i=n(97),a=l(n(219)),s=n(26),u=l(n(1)),c=n(92);function l(t){return t&&t.__esModule?t:{default:t}}var f=(0,i.identity)(!0),d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=new DOMParser;this.whole=e.parseFromString((0,o.default)({}),"text/html").body.firstChild,this.calloutController=this.ui=this.whole.querySelector(".fv__shape-control"),this.bindMovingEvent(),this.calloutShape=new a.default}return t.prototype.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=void 0===e?r.default:e,o=t.update,i=void 0===o?r.default:o,a=t.interceptor,s=void 0===a?f:a,u=t.moving,c=void 0===u?r.default:u,l=t.end,d=void 0===l?r.default:l,p=arguments[1];this.start=n,this.update=i,this.move=c,this.interceptor=s,this.end=d,this.annot=p,this.calloutShape.init(p,this.calloutController.querySelector(".fv__shape-control-previewer"))},t.prototype.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.annot.getBoundary(),n=arguments[2];t.append(this.calloutController),(0,u.default)(this.calloutController).css(e),this.box=n,this.adjustPointControl(),this.calloutController.style.display="block"},t.prototype.disable=function(){this.isDisabled=!0},t.prototype.enable=function(){this.isDisabled=!1},t.prototype.deactive=function(){this.calloutController.style.display="none"},t.prototype.destroy=function(){this.calloutController.parentNode&&this.calloutController.parentNode.removeChild(this.calloutController)},t.prototype.bindMovingEvent=function(){var t=this;this._bindMoveAreaEvents("area"),this._bindMoveAreaEvents("text");var e=this.ui.querySelectorAll(".fv__shape-controller");Array.prototype.slice.call(e).forEach((function(e){return t._bindMovePointEvents(e)})),(0,c.attachContextMenuEvent)(this.calloutController,(function(e){t.annot.showContextMenu(e.clientX,e.clientY),e.stopPropagation(),e.preventDefault()}));var n=this.ui,o=new s.Manager(n);o.add(new Hammer.Tap({event:"doubletap",taps:2})),o.on("doubletap",(function(e){t.deactive(),t.annot.showReplyDialog(e)}))},t.prototype._bindMoveAreaEvents=function(t){var e=this,n=this.ui,o=".fv__shape-control-move-area";"text"==t&&(o=".fv__shape-control-text-area");var r=new s.Manager(n.querySelector(o));r.add(new s.Pan({direction:s.DIRECTION_ALL}));var i=void 0,a=void 0;r.on("panstart",(function(n){var o=n.deltaX,r=n.deltaY;e.isDisabled||(i=o,a=r,e.showShape(),e.start(t))})),r.on("panend",(function(n){e.isDisabled||(e.calloutShape.hide(),e.end(t))})),r.on("pancancel",(function(n){e.isDisabled||e.cancel(t)})),r.on("panmove",(function(n){var o=n.deltaX,r=n.deltaY;n.center,n.direction;if(!e.isDisabled){var s=o-i,c=r-a;e.move(t,-1,s,c).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n){(0,u.default)(e.calloutController).css(e.annot.getBoundary());var o=n.rect,r=n.innerRect,i=n.points;"text"==t&&e.adjustPointControl(i,o,r),e.showShape(i,o,r)}}))}}))},t.prototype._bindMovePointEvents=function(t){var e=this,n=new s.Manager(t),o=void 0,r=void 0;switch(t.classList[2]){case"calloutStart":n.add(new s.Pan({direction:s.DIRECTION_ALL}));break;case"calloutKnee":var i=s.DIRECTION_HORIZONTAL;n.add(new s.Pan({direction:i}));break;case"left":n.add(new s.Pan({direction:s.DIRECTION_HORIZONTAL}));break;case"top":n.add(new s.Pan({direction:s.DIRECTION_VERTICAL}));break;case"right":n.add(new s.Pan({direction:s.DIRECTION_HORIZONTAL}));break;case"bottom":n.add(new s.Pan({direction:s.DIRECTION_VERTICAL}))}n.on("panmove",(function(n){var i=n.deltaX,a=n.deltaY;n.center,n.direction;if(!e.isDisabled){var s=i-o,c=a-r;return e.move("resize",t.classList[2],s,c).then((function(t){if(t){(0,u.default)(e.calloutController).css(e.annot.getBoundary());var n=t.rect,o=t.innerRect,r=t.points;e.adjustPointControl(r,n,o),e.showShape(r,n,o)}})),!1}})),n.on("panstart",(function(t){var n=t.deltaX,i=t.deltaY;if(!e.isDisabled)return o=n,r=i,e.showShape(),e.start("resize"),!1})),n.on("pancancel",(function(t){if(!e.isDisabled)return e.cancel("resize"),!1})),n.on("panend",(function(t){if(!e.isDisabled)return e.calloutShape.hide(),e.end("resize"),!1}))},t.prototype.showShape=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getCalloutPointers(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.annot.getRect(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.annot.getInnerBoundary();this.calloutShape.show(t,e,n)},t.prototype.adjustPointControl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getCalloutPointers(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.annot.getRect(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.annot.getInnerBoundary(),o=this.ui,r={left:n.left-e.left,top:n.top-e.top,width:n.width,height:n.height},i=o.querySelector(".fv__shape-control-text-area");(0,u.default)(i).css(r);var a=o.querySelector(".fv__shape-control-inner-area");if((0,u.default)(a).css(r),t.length>1){var s=o.querySelector(".fv__shape-controller.calloutStart");(0,u.default)(s).css({display:"block",left:t[0][0]-e.left-4,top:t[0][1]-e.top-4}),s=o.querySelector(".fv__shape-controller.calloutKnee"),(0,u.default)(s).css({display:"block",left:t[1][0]-e.left-4,top:t[1][1]-e.top-4})}else{var c=o.querySelector(".fv__shape-controller.calloutStart");(0,u.default)(c).css({display:"none"}),c=o.querySelector(".fv__shape-controller.calloutKnee"),(0,u.default)(c).css({display:"none"})}},t}(),p=void 0;e.ACTION_POINT="resize",e.ACTION_AREA="area",e.ACTION_TEXT="text",e.getShapeController=function(){return p||(p=new d)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=d(n(71)),i=n(115),a=n(6),s=d(n(2)),u=n(0),c=d(n(220)),l=d(n(14)),f=n(7);function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var h=["left","bottom","right","top"],g=function(t){function e(n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a));return s.annot=n,s.name="callout",s.$ui.removeClass("fv__pdf-page-textbox-annot-container"),s.$handler.removeClass("fv__pdf-page-textbox-annot-handler-container"),s.$ui.addClass("fv__pdf-page-callout-annot-container"),s.$handler.addClass("fv__pdf-page-callout-annot-handler-container"),l.default.property(s,"shapeControl",(function(){var t=(0,i.getShapeController)();return s.moveDisabled()&&t.disable(),t})),s.editDebouncePromiseQueue=new f.DebouncePromiseQueue,s}return p(e,t),e.prototype.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},e.prototype.active=function(e){var n=this;t.prototype.active.call(this,e);var o,r=this._getShapeControllerBoundaryBox();o=this.getBoundary(),this.shapeControl.init({start:function(t){return n.onStartUpdateShape(t)},moving:function(t,e,o,r){return n.onShapeMoving(t,e,o,r)},end:function(t){return n.onShapeUpdateEnd(t)}},this),!0!==e&&this.shapeControl.active(this.$page,o,r)},e.prototype.movedByOther=function(){if(this.isActive){this.activeRect();var t=this._getShapeControllerBoundaryBox(),e=this.getBoundary();this.shapeControl.active(this.$page,e,t),this.shapeControl.adjustPointControl()}},e.prototype.afterRender=function(t){t.transformed&&this.isActive&&(this.movedByOther(),this.tooltip&&this.tooltip.tooltipComponent.isVisible&&this.showTooltip())},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,a.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.backup=function(){var t=this,e=this.annot.getCalloutLinePoints();if(this.backupProperty={points:JSON.parse(JSON.stringify(e)),rect:Object.assign({},this.annot.getRect()),innerRect:Object.assign({},this.annot.getInnerRect())},e.length<3){var n=this.annot.getBorderStyle(),o=c.default.calcCalloutPosition({start:[0,0],end:[this.backupProperty.innerRect.left,(this.backupProperty.innerRect.top+this.backupProperty.innerRect.bottom)/2],width:this.getPDFPage().getWidth(),height:this.getPDFPage().getHeight(),rotate:this.getPDFPage().getRotation(),borderStyle:n,endingStyle:this.annot.getCalloutLineEndingStyle()});this.setCalloutLinePoints(o.calloutLinePoints).then((function(e){var n,o=t._getShapeControllerBoundaryBox();n=t.getBoundary(),t.shapeControl.active(t.$rect,n,o)}))}},e.prototype.onStartUpdateShape=function(t){this.backup()},e.prototype.onShapeMoving=function(t,e,n,r){var a=this;this.hideTooltip();var s=this.annot.page.reverseDeviceOffset([n,r],this.scale),u=o(s,2),c=u[0],l=u[1];return this.updatePromise=this.updatePromise||Promise.resolve(),this.updatePromise=this.updatePromise.then((function(){switch(t){case i.ACTION_TEXT:return a.updateTextRect(c,l);case i.ACTION_AREA:return a.updateRect(c,l);case i.ACTION_POINT:return a.updatePoint(e,c,l)}})).then((function(t){if(a.annot.isGrouped()){var e=a.annot.info.rect,n=a.annot.info.innerRect,o=a.annot.info.calloutLinePoints;a.editDebouncePromiseQueue.push((function(){return a._flushEdit(e,n,o)}))}return t}))},e.prototype.onShapeUpdateEnd=function(t){var e=this.annot.info.rect,n=this.annot.info.innerRect,o=this.annot.info.calloutLinePoints;return this._flushEdit(e,n,o)},e.prototype._flushEdit=function(t,e,n){var o=this,r=Promise.resolve();return this.annot.isGrouped()&&(r=this.annot.moveTo({left:t.left,top:t.top})),r.then((function(){return o.setRectInPDF(t,!1)})).then((function(t){return o.activeRect(),o.setInnerRect(e)})).then((function(t){return o.setCalloutLinePoints(n)})).then((function(t){o.redraw(),o.showTooltip()}))},e.prototype.updateRect=function(t,e){var n=Object.assign({},this.backupProperty.rect);if(n.left+=t,n.right+=t,n.bottom+=e,n.top+=e,!this.checkRect(n,!0))return Promise.resolve(!1);if(t=n.left-this.backupProperty.rect.left,e=n.top-this.backupProperty.rect.top,0==t&&0==e)return Promise.resolve();var o=Object.assign({},this.backupProperty.innerRect);o.left+=t,o.right+=t,o.top+=e,o.bottom+=e;var r=JSON.parse(JSON.stringify(this.backupProperty.points));return r[0].x+=t,r[0].y+=e,r[1].x+=t,r[1].y+=e,r[2].x+=t,r[2].y+=e,this.annot.info.rect=n,this.annot.info.innerRect=o,this.annot.info.calloutLinePoints=r,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})},e.prototype.updateTextRect=function(t,e){var n=Object.assign({},this.backupProperty.innerRect),o=this.annot.getCalloutLinePoints();if(n.left+=t,n.right+=t,n.top+=e,n.bottom+=e,!this.checkRect(n,!0))return Promise.resolve(!1);if(!(o=c.default.checkKneePoint(0,o,n)))return Promise.resolve(!1);var r=this.getPDFPage(),i=c.default.recalculateRect({points:o,innerRect:n,width:r.getWidth(),height:r.getHeight(),rotate:r.getRotation(),borderInfo:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});return this.annot.info.rect=i,this.annot.info.innerRect=n,this.annot.info.calloutLinePoints=o,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})},e.prototype.updatePoint=function(t,e,n){var o=this.annot.page,r=this.backupProperty.points,i=JSON.parse(JSON.stringify(this.annot.getCalloutLinePoints())),a=!0,s=Object.assign({},this.backupProperty.innerRect);switch(t){case"calloutStart":i[0].x=r[0].x+e,i[0].y=r[0].y+n;if(s.left-20<i[0].x&&i[0].x<s.right+20&&s.bottom-20<i[0].y&&i[0].y<s.top+20)return Promise.resolve();break;case"calloutKnee":if(i[1].x==i[2].x){if(e=0,r[1].y<r[2].y&&r[1].y+n>=r[2].y)return Promise.resolve();if(r[1].y>r[2].y&&r[1].y+n<=r[2].y)return Promise.resolve()}else if(i[1].y==i[2].y){if(n=0,r[1].x<r[2].x&&r[1].x+e>=r[2].x)return Promise.resolve();if(r[1].x>r[2].x&&r[1].x+e<=r[2].x)return Promise.resolve()}if(r[1].x+e<0||r[1].y+n<0)return Promise.resolve();a=!1,i[1].x=r[1].x+e,i[1].y=r[1].y+n;break;default:for(var u=[].concat(h),l=0;l<this.annot.page.getRotation();l++){var f=u.shift();u.push(f)}switch(t){case"left":s[u[0]]+=y(u[0],e,n);break;case"bottom":s[u[1]]+=y(u[1],e,n);break;case"right":s[u[2]]+=y(u[2],e,n);break;case"top":s[u[3]]+=y(u[3],e,n)}}if(a&&!(i=c.default.checkKneePoint(0,i,s)))return Promise.resolve(!1);var d=c.default.recalculateRect({points:i,innerRect:s,width:o.getWidth(),height:o.getHeight(),rotate:o.getRotation(),borderStyle:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});return this.checkRect(d)?(this.annot.info.rect=d,this.annot.info.innerRect=s,this.annot.info.calloutLinePoints=i,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})):Promise.resolve()},e.prototype.setEndingStyle=function(t,e){var n=this;return this.annot.setCalloutLineEndingStyle(+e).then((function(){return n.annot.update()})).then((function(){n.activeRect(),n.redraw()}))},e.prototype.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(s.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(s.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(s.default.updateActionAnnotation,n)}))}))},e.prototype.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);var e=this.annot,n=(0,u.colorConvertor)(e.getBorderColor(),"#"),o=e.getOpacity(),r=this.annot.getFillColor(),i=e.getBorderWidth(),a=this.propertyDisabled(),s=e.getFontColor(),c=e.getDefaultAppearance().textSize;return{color:n,opacity:o,fillColor:r,lineStartStyle:e.getCalloutLineEndingStyle(),borderWidth:i,cloudy:!0,disabled:a,fontColor:s,fontSize:c}},e.prototype.getCalloutPointers=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getCalloutLinePoints(),e=[],n=0;n<t.length;n++){var o=this.annot.page.getDevicePoint([t[n].x,t[n].y],this.scale);e.push(o)}return e},e.prototype.setInnerRectHeight=function(t){var e=Object.assign({},this.backupProperty.innerRect),n={left:t.left-e.left,right:t.right-e.right,top:t.top-e.top,bottom:t.bottom-e.bottom},o=0;if(Math.abs(n.left)<3&&(o++,n.left=0),Math.abs(n.right)<3&&(o++,n.right=0),Math.abs(n.top)<3&&(o++,n.top=0),Math.abs(n.bottom)<3&&(o++,n.bottom=0),4!=o)return this.setInnerRectProperty({left:e.left+n.left,bottom:e.bottom+n.bottom,top:e.top+n.top,right:e.right+n.right})},e.prototype.setInnerRectProperty=function(t){var e=this,n=JSON.parse(JSON.stringify(this.backupProperty.points));if(!(n=c.default.checkKneePoint(0,n,t)))return Promise.resolve(!1);var o=this.annot.page,r=c.default.recalculateRect({points:n,innerRect:t,width:o.getWidth(),height:o.getHeight(),rotate:o.getRotation(),borderStyle:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});Promise.resolve(),this.annot.getRect();return this.setRectInPDF(r,!1).then((function(n){return e.setInnerRect(t)})).then((function(t){e.setCalloutLinePoints(n)}))},e.prototype.checkRect=function(t,e){var n=this.annot.page.getWidth(),o=this.annot.page.getHeight();switch(this.annot.page.getRotation()){case 1:case 3:var r=n;n=o,o=r}if(e){var i=void 0;return t.left<2?(i=2-t.left,t.left+=i,t.right+=i):t.right>n-2&&(i=n-2-t.right,t.left+=i,t.right+=i),t.bottom<2?(i=2-t.bottom,t.bottom+=i,t.top+=i):t.top>o-2&&(i=o-2-t.top,t.bottom+=i,t.top+=i),!0}return!(t.left<0||t.bottom<0||t.top>o||t.right>n)},e.prototype.redraw=function(){return this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this)},e}(r.default),y=function(t,e,n){return"left"===t||"right"==t?e:n};e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(70)),r=a(n(2)),i=n(0);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="textbox",a.$ui.removeClass("fv__pdf-page-typewritter-annot-container"),a.$handler.removeClass("fv__pdf-page-typewritter-annot-handler-container"),a.$ui.addClass("fv__pdf-page-textbox-annot-container"),a.$handler.addClass("fv__pdf-page-textbox-annot-handler-container"),a}return s(e,t),e.prototype.getShapeOptions=function(){var e=t.prototype.getShapeOptions.call(this);return e.resizable=!0,e},e.prototype.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);var e=this.annot,n=(0,i.colorConvertor)(e.getBorderColor(),"#"),o=e.getOpacity(),r=e.getBorderWidth();return{color:n,opacity:o,fillColor:e.getFillColor(),borderWidth:r,cloudy:!0,disabled:this.propertyDisabled(),fontColor:e.getFontColor(),fontSize:e.getDefaultAppearance().textSize}},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(r.default.updateActionAnnotation,e),t})):t}))},e.prototype.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(r.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(r.default.updateActionAnnotation,n)}))}))},e.prototype.setInnerRectHeight=function(t){var e=this,n=Object.assign({},this.backupProperty.innerRect),o={left:t.left-n.left,right:t.right-n.right,top:t.top-n.top,bottom:t.bottom-n.bottom},i=0;if(Math.abs(o.left)<3&&(i++,o.left=0),Math.abs(o.right)<3&&(i++,o.right=0),Math.abs(o.top)<3&&(i++,o.top=0),Math.abs(o.bottom)<3&&(i++,o.bottom=0),4==i)return Promise.resolve();var a=Object.assign({},this.backupProperty.rect);return a={left:a.left+o.left,right:a.right+o.right,top:a.top+o.top,bottom:a.bottom+o.bottom},this.annot.setInnerRect(t).then((function(t){return e.annot.setRect(a)})).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(r.default.updateActionAnnotation,e),t})):t}))},e.prototype.beforeBlur=function(){},e.prototype.postBlur=function(){},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=_(n(28)),i=_(n(25)),a=n(6),s=n(52),u=_(n(1)),c=_(n(13)),l=n(232),f=n(7),d=_(n(2)),p=_(n(32)),h=n(0),g=_(n(38)),y=_(n(68)),v=n(40),m=n(50),b=_(n(5)),w=_(n(14)),P=n(37),A=n(27);function _(t){return t&&t.__esModule?t:{default:t}}function C(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function R(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var E=void 0,O=void 0,I=(0,l.getImageContextMenu)(".fv__pdf-page-annot-handler-rect"),x=(0,l.getMultiMediaContextMenu)(".fv__pdf-page-annot-handler-rect"),M=function(t){function e(){return D(this,e),S(this,t.apply(this,arguments))}return R(e,t),e.prototype._resize=function(e,n,o){e==m.DIR_NORTH||e==m.DIR_SOUTH||e==m.DIR_EAST||e==m.DIR_WEST?this.enableUniform=!1:this.enableUniform=!0,t.prototype._resize.call(this,e,n,o)},e}(c.default),T=function(t){function e(n,o,r,i){D(this,e);var a=S(this,t.call(this,n,o,r,i));a.name="screen",a.$ui.addClass("fv__pdf-page-screen-annot-container"),a.$handler.addClass("fv__pdf-page-screen-annot-handler-container"),a.fileExt="",n.action&&(a.actionViewer=a.pdfViewer.actionManager.get(n.action,a)),a.isVideoAudio=n.info.isAudioVideo,w.default.property(a,"shapeControl",(function(){var t=new M({start:function(t,e,n){return a.onStartUpdateShape(t,e,n)},update:function(t,e){return a.onShapeUpdating(t,e)},moving:function(t,e,n){return a.onShapeMoving(t,e,n)},end:function(t,e,n){return a.onShapeUpdateEnd(t,e,n)},resizable:!0,enableDiagonally:!0,annotRender:i});return(a.groupMoveDisabled()||a.moveDisabled())&&t.disable(),t}));var s=a.pdfViewer.i18n;return b.default.i18n=function(t){return s.t(t)},a}return R(e,t),e.getDefaultContextMenuConfig=function(){return I},e.getMultiMediaContextMenuConfig=function(){return x},e.setContextMenuConfig=function(t){E=t},e.setMultiMediaContextMenuConfig=function(t){O=t},e.prototype.isMultiMedia=function(){return this.isVideoAudio},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},e.prototype.getTileConfig=function(t,e){var n=this.pdfViewer,o=n.getSmartScale(t),r=n.config.tileSize,i=this.annot,a=i.getDeviceRect(1),s=i.getDeviceRect(o),u=s.right-s.left,c=s.bottom-s.top;return[Math.ceil(c/r),Math.ceil(u/r),u,c,r,o,t,e,a.left,a.top]},e.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,o=this.annot;this.scale=e,this.rotate=n;var r=this.getAnnotFlag();if(r.checkInvisible()||r.checkHidden()||o.isEmpty()||o.isDeleted()||o.rectIsEmpty())return this.tileCanvas&&this.tileCanvas.hideContainer(),Promise.resolve();this.tileCanvas&&this.tileCanvas.showContainer();var s,u,c=this.getTileConfig(e,n),l=this.tileCanvas;return l?(s=l).redraw.apply(s,C(c)):(l=this.tileCanvas=new i.default((function(e,n,r,i,s,u,c,l){return t.getPDFPage().getAnnotBitmap(o.getId(),(0,a.pt2px)(u),0,{x:c*u+n*s,y:l*u+e*s,width:r,height:i})}),this.$ui),this.isMultiMedia()&&this.$ui.append('<div class="fv__pdf-page-multi-media-annot-container"></div>'),(u=l).redraw.apply(u,C(c)))},e.prototype.afterRender=function(t){if(t.transformed){if(this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)}if(this.isMultiMedia()&&this.$player&&this.$player.is(":visible")){var n=this.annot.getDeviceRect(this.scale);this.$player.css({left:n.left+"px",top:n.top+"px",width:n.right-n.left+"px",height:n.bottom-n.top+"px"})}}},e.prototype.onShapeRotated=function(t){t<0&&(t+=360),t<=45||t>315?t=0:t>45&&t<=135?t=270:t>135&&t<=225?t=180:t>225&&t<=315||t>-135&&t<=-45?t=90:console.warn("degree error: "+t);var e=this.annot.getRotation();return(e+=t)>=360&&(e-=360),this.setRotation(e)},e.prototype.onStartUpdateShape=function(t,e,n){},e.prototype.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&(this.editDebouncePromise=this.editDebouncePromise||new f.DebouncePromiseQueue).push((function(){return n.setRect(t)}))},e.prototype.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&(this.editDebouncePromise=this.editDebouncePromise||new f.DebouncePromiseQueue).push((function(){return n.moveTo(t.left,t.top)}))},e.prototype.onShapeUpdateEnd=function(t,e,n){var o=this;(this.editDebouncePromise=this.editDebouncePromise||new f.DebouncePromiseQueue).push((function(){return o.setRect(t)}))},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active"),this._applyShapeChange()},e.prototype._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)},e.prototype.movedByOther=function(){this.isActive&&this._applyShapeChange()},e.prototype.getMultiMediaUrl=function(){var t=this;return this.annot.getActionPromise().then((function(e){var n=e.info;if(t.multiMediaUrl)return t.multiMediaUrl;if(n&&"TypeRendition"==n.type)for(var o=0;o<n.renditions.length;o++){var r=n.renditions[o].fileName,i=n.renditions[o].contentType;if(r){var a=r.substr(r.lastIndexOf(".")).toLowerCase();if(t.fileExt=a,[".mp4",".mp3",".wav",".ogg",".m4a",".mov",".avi"].indexOf(a)>-1){t.isMultiMediaAnnot=!0;var s=n.renditions[o].buffer,u=new Blob([s.buffer],{type:i}),c=URL.createObjectURL(u);t.multiMediaUrl=c,t.multiMediaFilename=r,t.actionBlob=u;break}}}return t.multiMediaUrl}))},e.prototype.play=function(){this.doAction()},e.prototype.doAction=function(){var t=this;this.isMultiMedia()?this.getMultiMediaUrl().then((function(e){if(e){if(t.$handler.addClass("active"),t.$player)t.$player.show();else{if([".mp3",".wav",".ogg"].indexOf(t.fileExt)>-1){A.isMobile||P.isSafari?t.$handler.append('<div class="fv__pdf-player" style="position:absolute;" ><audio class="player" src="'+e+'" poster="#" style="width:50px" width="100%" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>'):t.$handler.append('<div class="fv__pdf-player fv__hide" style="position:absolute;" ><audio class="player" src="'+e+'" poster="#" width="100%" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>')}else t.$handler.append('<div class="fv__pdf-player" style="position:absolute;" ><video class="player" src="'+e+'" poster="#" width="100%" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</video><button><i class="fv__close-video"></i></button></div>');t.$player=t.$handler.find(".fv__pdf-player"),t.player=t.$handler[0].querySelector(".fv__pdf-player .player"),(P.isIE||P.isEdge)&&t.player.addClass("IE-player"),t.$handler[0].querySelector(".fv__close-video").addEventListener("click",(function(e){t.player&&t.player.pause&&t.player.pause(),t.$player.hide()}))}var n=t.annot.getDeviceRect(t.scale);t.$player.css({left:n.left+"px",top:n.top+"px",width:n.right-n.left+"px",height:n.bottom-n.top+"px"}),t.$rect&&t.$rect.css({left:"-100px",top:"-100px",width:0,height:0});var o=t.player.play();void 0!==o&&o.then((function(){P.isSafari&&t.player.play()})).catch((function(e){if(!P.isSafari){var n=t.pdfViewer.i18n.t("viewer_:contextmenu.annot.noSptPlayPlsDownload");t.$player.remove(),t.pdfViewer.viewerUI.alert(n)}}))}})):this.actionViewer&&this.actionViewer.active()},e.prototype.download=function(){var t=this;if(this.isMultiMedia()){var e=(0,s.getDownloadEnv)();this.getMultiMediaUrl().then((function(n){(0,s.download)(t.actionBlob,t.multiMediaFilename,t.actionBlob.type,e)}))}},e.prototype.addAction=function(t){this.actionViewer=this.pdfViewer.actionManager.get(t,this)},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceRect(n);e.css({left:o.left+"px",top:o.top+"px",width:o.right-o.left+"px",height:o.bottom-o.top+"px"})},e.prototype.rectInit=function(){var t=this,e=this.$handler,n=(0,u.default)(this.createRectDom());e.append(n);var o=n[0],r=this.rectHammer=new Hammer.Manager(o,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return r.add(new Hammer.Tap({event:"doubletap",taps:2})),r.add(new Hammer.Tap({event:"singletap"})),r.get("doubletap").recognizeWith("singletap"),r.get("singletap").requireFailure("doubletap"),r.on("singletap",(function(e){t.rectSingleTap(e)})),e.on("contextmenu",(function(t){t.preventDefault()})),e.on("mouseup",(function(t){t.stopPropagation()})),this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,e.get(0),this.getContextMenuConfig()),n.data(l.defaultAnnotComponentKey,this),n},e.prototype.showContextMenu=function(t,e){this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,a.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.getContextMenuConfig=function(){var t=void 0;if(this.isMultiMedia()){if(O)return O;t=this.constructor.getMultiMediaContextMenuConfig()}else{if(E)return E;t=this.constructor.getDefaultContextMenuConfig()}for(var e in t)switch(e){case"items":var n=t[e],o=this.pdfViewer.i18n;for(var r in n){var i=n[r];i.nameI18nKey&&(i.name=o.t(i.nameI18nKey))}}return this.isMultiMedia()?this.constructor.setMultiMediaContextMenuConfig(t):this.constructor.setContextMenuConfig(t),t},e.prototype.updateRender=function(){return Promise.resolve()},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active")},e.prototype.unActiveMore=function(){},e.prototype.rectSingleTap=function(t){},e.prototype.removeAnnot=function(){var t=this;if(this.deleteDisabled())return!1;var e=this.pdfViewer,n=e.eventEmitter,o=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||p.default)(this)).then((function(e){if(n.emit(d.default.removeActionAnnotationBefore,t),!1!==e)return o.getPDFPage().removeAnnot(o).then((function(e){if(e)return n.emit(d.default.removeActionAnnotationSuccess,t);n.emit(d.default.removeActionAnnotationFailed,t)}),(function(){n.emit(d.default.removeActionAnnotationFailed,t)}))}))},e.prototype.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},e.prototype.removeAction=function(){this.actionViewer=null},e.prototype.getPropertyOptions=function(){var t=this.annot,e=(0,h.colorConvertor)(t.getBorderColor(),"#");-1==e&&(e=0);var n=t.getBorderWidth(),o=t.getBorderStyle(),r=t.getRotation();return{color:e,opacity:t.getOpacity(),borderWidth:n,borderStyle:o,disabled:this.propertyDisabled(),rotation:r}},e.prototype.updateContextMenu=function(){var t=this.getContextMenuConfig();this.isMultiMedia()&&(this.player.paused?delete t.items.pause:delete t.items.play),this.$handler.contextMenu(t)},e.prototype.playOrPause=function(){var t=this.player;t.paused?t.play():t.pause()},e.prototype.showPropertiesDialog=function(){this.$propertiesControl=new g.default(this,document.body),this.updateDeleteStatus(!0)},e.prototype.hidePropertiesDialog=function(){this.$propertiesControl.close(),this.updateDeleteStatus(!1)},e.prototype.showActionsDialog=function(){this.$actionsControl=new y.default(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},e.prototype.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(d.default.updateActionAnnotation,e),t})):t}))},e.prototype.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(d.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return t?n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(d.default.updateActionAnnotation,n)})):t}))},e.prototype.setOpacity=function(t){var e=this;return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(d.default.updateActionAnnotation,e),t})):t}))},e.prototype.setRotation=function(t){var e=this,n=this.annot.getRotation(),o=Math.abs(t-n);if(0==o)return!0;var r=this.annot.getRect(),i=r.right-r.left,a=r.top-r.bottom;if(90==o||270==o){var s=(i-a)/2;r.left+=s,r.right-=s,r.top+=s,r.bottom-=s}return this.annot.setRect(r).then((function(n){return n?e.annot.setRotation(t).then((function(t){return t?e.updateRender().then((function(){return e.active(),e.pdfViewer.eventEmitter.emit(d.default.updateActionAnnotation,e),t})):t})):n}))},e.prototype.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.tileCanvas&&this.$handler.remove()},e.prototype.doubleTapAnnot=function(){return!1},e.prototype.tapAnnot=function(e){return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===v.STATE_HANDLER_HAND?this.doAction():t.prototype.tapAnnot.call(this,e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.contextMenu&&this.contextMenu.destroy()},e}(r.default);e.default=T},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(60);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i)),s=n.getGroupHeader();return s&&"Replace"===s.getIntent()&&(a.isReplace=!0,a.caretAnnot=s),a}return i(e,t),e.prototype.onRightChangeSuccess=function(t){if(this.isReplace)return this.caretAnnot.moveRectByCharIndex(t.charIndex)},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=D(n(15)),i=(D(n(28)),D(n(13))),a=D(n(2)),s=n(6),u=n(0),c=n(7),l=n(50),f=D(n(25)),d=n(52),p=n(234),h=D(n(32)),g=D(n(38)),y=D(n(68)),v=n(40),m=D(n(5)),b=n(235),w=D(n(14)),P=D(n(1)),A=n(27),_=n(37),C=D(n(16));function D(t){return t&&t.__esModule?t:{default:t}}function S(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var I=void 0,x=(0,p.getSoundContextMenu)(".fv__pdf-page-annot-handler-rect"),M=function(t){function e(){return R(this,e),E(this,t.apply(this,arguments))}return O(e,t),e.prototype._resize=function(e,n,o){e==l.DIR_NORTH||e==l.DIR_SOUTH||e==l.DIR_EAST||e==l.DIR_WEST?this.enableUniform=!1:this.enableUniform=!0,t.prototype._resize.call(this,e,n,o)},e}(i.default),T=function(t){function e(n,o,r,i){R(this,e);var a=E(this,t.call(this,n,o,r,i));a.name="sound",a.$ui.addClass("fv__pdf-page-sound-annot-container"),a.$handler.addClass("fv__pdf-page-sound-annot-handler-container"),n.action&&(a.actionViewer=a.pdfViewer.actionManager.get(n.action,a)),a.isVideoAudio=n.info.isAudioVideo,a.audioUrl="",a.audioBlobData=null,a.multiMediaFilename="",w.default.property(a,"shapeControl",(function(){var t=new M({start:function(t,e,n){return a.onStartUpdateShape(t,e,n)},update:function(t,e){return a.onShapeUpdating(t,e)},moving:function(t,e,n){return a.onShapeMoving(t,e,n)},end:function(t,e,n){return a.onShapeUpdateEnd(t,e,n)},resizable:!1,enableDiagonally:!0,moveable:!1,rotatable:!1,annotRender:i,enableSizeBox:!a.isMultiMedia()});return(a.groupMoveDisabled()||a.moveDisabled())&&t.disable(),t}));var s=a.pdfViewer.i18n;return m.default.i18n=function(t){return s.t(t)},a}return O(e,t),e.getDefaultContextMenuConfig=function(){return x},e.setContextMenuConfig=function(t){I=t},e.prototype.isMultiMedia=function(){return this.isVideoAudio},e.prototype.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},e.prototype.getTileConfig=function(t,e){var n=this.pdfViewer,o=n.getSmartScale(t),r=n.config.tileSize,i=this.annot,a=i.getDeviceRect(1),s=i.getDeviceRect(o),u=s.right-s.left,c=s.bottom-s.top;return[Math.ceil(c/r),Math.ceil(u/r),u,c,r,o,t,e,a.left,a.top]},e.prototype.swapLowHighBit=function(t){for(var e=new Int8Array(t).length,n=new DataView(t),o=new Int8Array(e),r=0;r<e;r+=2)o[r]=n.getInt8(r+1),o[r+1]=n.getInt8(r);return o},e.prototype.getMultiMediaUrl=function(){var t=this.annot;if(!this.audioBlobData){var e=t.info.soundObj,n=e.data;this.multiMediaFilename=t.info.title;var o=e.sampleRate,r=e.sampleBits,i=e.channel,a=this.swapLowHighBit(n),s=(a.length,(0,b.encodeWAV)(a,i,o,r)),u=new Blob([new Int8Array(s.buffer)],{type:"audio/wav"});this.audioBlobData=u}return this.audioUrl=URL.createObjectURL(this.audioBlobData,{type:"audio/wav"}),this.audioUrl},e.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,o=this.annot;this.scale=e,this.rotate=n;var r=this.getAnnotFlag();if(r.checkInvisible()||r.checkHidden()||o.isEmpty()||o.isDeleted()||o.rectIsEmpty())return this.tileCanvas&&this.tileCanvas.hideContainer(),Promise.resolve();this.tileCanvas&&this.tileCanvas.showContainer();var i,a,u=this.getTileConfig(e,n),c=this.tileCanvas;return c?(i=c).redraw.apply(i,S(u)):(c=this.tileCanvas=new f.default((function(e,n,r,i,a,u,c,l){return t.getPDFPage().getAnnotBitmap(o.getId(),(0,s.pt2px)(u),0,{x:c*u+n*a,y:l*u+e*a,width:r,height:i})}),this.$ui),this.isMultiMedia()&&this.$ui.append('<div class="fv__pdf-page-sound-annot-container"></div>'),(a=c).redraw.apply(a,S(u)))},e.prototype.afterRender=function(t){if(t.transformed){if(this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)}if(this.isMultiMedia()&&this.$player&&this.$player.is(":visible")){var n=this.annot.getDeviceRect(this.scale);this.$player.css({left:n.left+"px",top:n.top+"px",width:n.right-n.left+"px",height:n.bottom-n.top+"px"})}}},e.prototype.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,o=t.getDeviceRect(n);e.css({left:o.left+"px",top:o.top+"px",width:o.right-o.left+"px",height:o.bottom-o.top+"px"})},e.prototype.rectInit=function(){var t=this,e=this.$handler,n=(0,P.default)(this.createRectDom());e.append(n);var o=n[0],r=this.rectHammer=new Hammer.Manager(o,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return r.add(new Hammer.Tap({event:"doubletap",taps:2})),r.add(new Hammer.Tap({event:"singletap"})),r.get("doubletap").recognizeWith("singletap"),r.get("singletap").requireFailure("doubletap"),r.on("doubletap",(function(e){!1!==t.onDoubleTap(e)&&t.rectDoubleTap()})),this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,e.get(0),this.getContextMenuConfig()),n.data(p.defaultAnnotComponentKey,this),n},e.prototype.getContextMenuConfig=function(){if(I)return I;var t=this.constructor.getDefaultContextMenuConfig();for(var e in t)switch(e){case"items":var n=t[e],o=this.pdfViewer.i18n;for(var r in n){var i=n[r];i.nameI18nKey&&(i.name=o.t(i.nameI18nKey))}}return this.constructor.setContextMenuConfig(t),t},e.prototype.onShapeRotated=function(t){t<0&&(t+=360),t<=45||t>315?t=0:t>45&&t<=135?t=270:t>135&&t<=225?t=180:t>225&&t<=315||t>-135&&t<=-45?t=90:console.warn("degree error: "+t);var e=this.annot.getRotation();return(e+=t)>=360&&(e-=360),this.setRotation(e)},e.prototype.onStartUpdateShape=function(t,e,n){this.editDebouncePromise=this.editDebouncePromise||new c.DebouncePromiseQueue},e.prototype.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){return n.setRect(t)}))},e.prototype.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise.push((function(){return n.moveTo(t.left,t.top).then((function(t){n.setMargin()}))}))},e.prototype.onShapeUpdateEnd=function(t,e,n){var o=this;this.pdfViewer.config.highPerformance||this.editDebouncePromise.push((function(){return o.moveTo(t.left,t.top).then((function(e){return o.setRect(t)})).then((function(t){o.setMargin()}))}))},e.prototype.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(C.default.expandOffset(e,t))},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active")},e.prototype.play=function(){this.doAction()},e.prototype.doAction=function(){var t=this;if(this.isMultiMedia()){var e=this.getMultiMediaUrl();if(!e)return;if(this.$handler.addClass("active"),this.$player)this.player?this.player.src=e:(this.player=this.$handler[0].querySelector(".fv__pdf-player audio"),this.player&&(this.player.src=e)),this.$player.show();else{if(_.isIE&&!_.isEdge){var n=this.pdfViewer.i18n.t("viewer_:contextmenu.annot.noSptPlayPlsDownload");return this.pdfViewer.viewerUI.alert(n),!1}this.$handler.append('<div class="fv__pdf-player fv__hide" style="position:absolute;" ><audio style="width: 200px" src="'+e+'" poster="#" width="100px" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>'),this.$player=this.$handler.find(".fv__pdf-player"),this.player=this.$handler[0].querySelector(".fv__pdf-player audio"),(_.isIE||_.isEdge)&&this.player.addClass("IE-player"),(A.isMobile||A.isTablet)&&this.player.removeAttribute("controls"),this.$handler[0].querySelector(".fv__close-video").addEventListener("click",(function(e){URL.revokeObjectURL(t.audioUrl),t.player&&t.player.pause&&t.player.pause(),t.$player.hide()}))}var o=this.annot.getDeviceRect(this.scale);this.$player.css({left:o.left+"px",top:o.top+"px",width:o.right-o.left+"px",height:o.bottom-o.top+"px"}),this.$rect&&this.$rect.css({left:"-100px",top:"-100px",width:0,height:0}),this.player&&this.player.play&&this.player.play()}else this.actionViewer&&this.actionViewer.active()},e.prototype.download=function(){var t=(0,d.getDownloadEnv)(),e=(this.getMultiMediaUrl(),this.audioBlobData);_.isIE&&!_.isEdge&&(this.multiMediaFilename=this.multiMediaFilename+".wav"),(0,d.download)(e,this.multiMediaFilename,{type:"audio/wav"},t)},e.prototype.addAction=function(t){this.actionViewer=this.pdfViewer.actionManager.get(t,this)},e.prototype.showContextMenu=function(t,e){this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,s.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.updateRender=function(){return Promise.resolve()},e.prototype.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active")},e.prototype.removeAnnot=function(){var t=this;if(this.deleteDisabled&&"function"==typeof this.deleteDisabled&&this.deleteDisabled()||!this.deleteDisabled)return!1;var e=this.pdfViewer,n=e.eventEmitter,o=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||h.default)(this)).then((function(e){if(n.emit(a.default.removeActionAnnotationBefore,t),!1!==e)return o.getPDFPage().removeAnnot(o).then((function(e){if(e)return n.emit(a.default.removeActionAnnotationSuccess,t);n.emit(a.default.removeActionAnnotationFailed,t)}),(function(){n.emit(a.default.removeActionAnnotationFailed,t)}))}))},e.prototype.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},e.prototype.removeAction=function(){this.actionViewer=null},e.prototype.getPropertyOptions=function(){var t=this.annot,e=(0,u.colorConvertor)(t.getBorderColor(),"#");-1==e&&(e=0);var n=t.getBorderWidth(),o=t.getBorderStyle();return{color:e,opacity:t.getOpacity(),borderWidth:n,borderStyle:o,disabled:this.propertyDisabled()}},e.prototype.updateContextMenu=function(){var t=this.getContextMenuConfig();this.isMultiMedia()&&(this.player.paused?delete t.items.pause:delete t.items.play),this.$handler.contextMenu(t)},e.prototype.playOrPause=function(){var t=this.player;t.paused?t.play():t.pause()},e.prototype.showPropertiesDialog=function(){this.$propertiesControl=new g.default(this,document.body),this.updateDeleteStatus(!0)},e.prototype.hidePropertiesDialog=function(){this.$propertiesControl.close(),this.updateDeleteStatus(!1)},e.prototype.showActionsDialog=function(){this.$actionsControl=new y.default(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},e.prototype.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},e.prototype.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,e),t})):t}))},e.prototype.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,e),t})):t}))},e.prototype.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return t?n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,n)})):t}))},e.prototype.setOpacity=function(t){var e=this;return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,e),t})):t}))},e.prototype.setRotation=function(t){var e=this,n=this.annot.getRotation(),o=Math.abs(t-n);if(0==o)return!0;var r=this.annot.getRect(),i=r.right-r.left,s=r.top-r.bottom;if(90==o||270==o){var u=(i-s)/2;r.left+=u,r.right-=u,r.top+=u,r.bottom-=u}return this.annot.setRect(r).then((function(n){return n?e.annot.setRotation(t).then((function(t){return t?e.updateRender().then((function(){return e.active(),e.pdfViewer.eventEmitter.emit(a.default.updateActionAnnotation,e),t})):t})):n}))},e.prototype.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.tileCanvas&&this.$handler.remove()},e.prototype.doubleTapAnnot=function(){return!1},e.prototype.tapAnnot=function(e){return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===v.STATE_HANDLER_HAND?this.doAction():t.prototype.tapAnnot.call(this,e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.contextMenu&&this.contextMenu.destroy()},e}(r.default);e.default=T},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=JSON.parse('{"yellow":["CMYK",0,0,1,0],"white":["G",1],"transparent":["T"],"red":["RGB",1,0,0],"magenta":["CMYK",0,1,0,0],"ltGray":["G",0.75],"green":["RGB",0,1,0],"gray":["G",0.5],"dkGray":["G",0.25],"cyan":["CMYK",1,0,0,0],"blue":["RGB",0,0,1],"black":["G",0]}');o.equal=function(t,e){},o.convert=function(t,e){var n,o,r;if(e==t[0])return[].concat(t);switch(t[0]){case"T":n=-1,o=-1,r=-1;break;case"G":n=o=r=t[1];break;case"RGB":n=t[1],o=t[2],r=t[3];break;case"CMYK":n=(1-t[4])*(1-t[1]),o=(1-t[4])*(1-t[2]),r=(1-t[4])*(1-t[3])}switch(e){case"T":return;case"G":return["G",(n+r+o)/3];case"RGB":return["RGB",n,o,r];case"CMYK":var i=1-n,a=1-o,s=1-r,u=Math.min(Math.min(i,a),s);return 0!=u?(temp2=Math.round(rep_v/100*u),Math.round(100*temp2),Math.round(100*(i-temp2)),Math.round(100*(a-temp2)),Math.round(100*(s-temp2))):(Math.round(100*i),Math.round(100*a),Math.round(100*s),0),["CMYK",n,o,r]}},e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(0);var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.delayValue=!1,this.changePropsQueue=[],this.annot=e,this.pageIndex=n}return t.prototype._delayOrExec=function(t){this.delay?this.changePropsQueue.push(t):t()},t.prototype.destroy=function(){var t=this;this.annot.getPage().removeAnnotById(this.annot.getId()).then((function(){t.annot=null}))},t.prototype.getProps=function(){var t=this,e={},n=[],o=Object.getOwnPropertyNames(this.constructor.prototype),r=this;return o.map((function(e){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);o&&!o.get||n.push(e)})),Object.getOwnPropertyNames(this.constructor.prototype.__proto__.__proto__).map((function(e){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype.__proto__.__proto__,e);o&&!o.get||n.push(e)})),console.log("key:",n),n.map((function(t){var n=r[t];void 0!==n?(e[t]=n,console.log("this."+t+"=",e[t])):console.log("this."+t+'="undefined"')})),e},t.prototype.setProps=function(t){var e=this,n=[];Object.getOwnPropertyNames(this.constructor.prototype).map((function(t){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);o&&!o.set||n.push(t)}));var o=Object.getOwnPropertyNames(this.constructor.prototype.__proto__.__proto__);for(var r in o.map((function(t){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype.__proto__.__proto__,t);o&&!o.set||n.push(t)})),console.log("key:",n),this.delay=!0,t)this[r]=t[r],console.log("this."+r+"=",t[r]);this.delay=!1},t.prototype.getStateInModel=function(t){if("text"===this.annot.info.type)return"Marked"===t?[this.annot.getMarkedState(0)]:"Review"===t?[this.annot.getReviewState(0)]:void 0},o(t,[{key:"type",get:function(){return"Annotation"}},{key:"component",get:function(){return PDFJSGlobal.doc.jsEngine.PDFViewer.getPDFPageRender(this.pageIndex).annotsRender.getAnnotRender(this.name).component}},{key:"author",get:function(){return this.annot.getTitle()},set:function(t){var e=this;this._delayOrExec((function(){e.annot.setTitle(t)}))}},{key:"borderEffectIntensity",get:function(){return this.annot.getCloudIntensity()},set:function(t){var e=this;this._delayOrExec((function(){e.annot.setBorderStyle(5,t)}))}},{key:"borderEffectStyle",get:function(){return 5===this.annot.getBorderStyle()?"C":""},set:function(t){var e=this;this._delayOrExec((function(){if(""!==t&&"C"!==t)throw new TypeError('effectStyle either empty string or "C"');"C"===t?e.annot.setBorderStyle(5,1):e.annot.setBorderStyle(0,[])}))}},{key:"contents",get:function(){return this.annot.getContent()},set:function(t){var e=this;this._delayOrExec((function(){e.annot.setContent(t)}))}},{key:"creationDate",get:function(){return this.annot.getCreateDateTime()}},{key:"delay",get:function(){return this.delayValue},set:function(t){!1===t?(this.delayValue=!1,this.changePropsQueue.forEach((function(t){t&&t()})),this.changePropsQueue=[]):!0===t&&(this.delayValue=!0)}},{key:"doc",get:function(){return this.annot.page.doc}},{key:"hidden",get:function(){return 2===(this.annot.getFlags()&&2)},set:function(t){var e=this;this._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=2:n&=-3,e.annot.setFlags(n)}))}},{key:"inReplyTo",get:function(){return this.annot.info.IRT},set:function(t){}},{key:"intent",get:function(){return this.annot.getIntent()},set:function(t){var e=this;this._delayOrExec((function(){e.annot.setIntent(t)}))}},{key:"lock",get:function(){return 128===(this.annot.getFlags()&&128)},set:function(t){var e=this;this._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=128:n&=-129,e.annot.setFlags(n)}))}},{key:"modDate",get:function(){return this.annot.getModifiedDateTime()},set:function(t){var e=this;this._delayOrExec((function(){e.annot.setModifiedDateTime(t)}))}},{key:"name",get:function(){return this.annot.id},set:function(t){var e=this;this._delayOrExec((function(){e.annot.id=t}))}},{key:"noView",get:function(){return 32===(this.annot.getFlags()&&32)},set:function(t){var e=this;this._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=32:n&=-33,e.annot.setFlags(n)}))}},{key:"opacity",get:function(){return this.annot.getOpacity()},set:function(t){var e=this;this._delayOrExec((function(){if(Object.prototype.toString.call(t).indexOf("Number")<0)throw new Error("only accept Number");if(t<0||t>1)throw new Error("opacity range: 0 - 1");e.annot.setOpacity(t)}))}},{key:"page",get:function(){return this.annot.getPage().getIndex()},set:function(t){}},{key:"print",get:function(){return 4===(this.annot.getFlags()&&4)},set:function(t){var e=this;this._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=4:n&=-5,e.annot.setFlags(n)}))}},{key:"rect",get:function(){var t=this.annot.getRect(),e=t.left,n=t.right,o=t.top;return[e,t.bottom,n,o]},set:function(t){var e=this;this._delayOrExec((function(){if(!Array.isArray(t))throw new Error("only accept Array");e.annot.setRect({left:t[0],right:t[2],top:t[3],bottom:t[1]})}))}},{key:"readOnly",get:function(){return 64===(this.annot.getFlags()&&64)},set:function(t){var e=this;this._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=64:n&=-65,e.annot.setFlags(n)}))}},{key:"refType",get:function(){this.annot.info.RT},set:function(t){var e=this;this._delayOrExec((function(){if("R"!==t&&"Group"!==t)throw new TypeError('refType should be "R" or "Group"');e.annot.info.RT=t}))}},{key:"richContents",get:function(){if("Sound"===this.type||"FileAttachment"===this.type)return null},set:function(t){var e=this;this._delayOrExec((function(){"Sound"!==e.type&&e.type}))}},{key:"seqNum",get:function(){return this.annot.info.objNumber}},{key:"strokeColor",get:function(){return(0,r.convertFromNumberToJSColor)(this.annot.info.borderColor)},set:function(t){var e=this;this._delayOrExec((function(){var n=(0,r.colorConvertor)(t,"int",0);e.annot.setBorderColor(n)}))}},{key:"style",get:function(){return this.annot.getBorderStyle()},set:function(t){var e=this;this._delayOrExec((function(){var n=t.borderStyle,o=t.styleParam;e.annot.setBorderStyle(n,o)}))}},{key:"subject",get:function(){return this.annot.getSubject()},set:function(t){var e=this;this._delayOrExec((function(){e.annot.setSubject(t)}))}},{key:"toggleNoView",get:function(){return 256===(this.annot.getFlags()&&256)},set:function(t){var e=this;this._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=256:n&=-257,e.annot.setFlags(n)}))}},{key:"popupOpen",get:function(){if("freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type)return this.annot.getPopup().getOpenStatus()},set:function(t){var e=this;"freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type&&this._delayOrExec((function(){e.annot.getPopup().setOpenStatus(t).then((function(){t&&e.component.showReplyDialog("comment")}))}))}},{key:"popupRect",get:function(){if("freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type){var t=this.annot.getPopup().getRect(),e=t.left,n=t.right,o=t.top;return[e,t.bottom,n,o]}},set:function(t){var e=this;"freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type&&this._delayOrExec((function(){if(!Array.isArray(t))throw new Error("only accept Array");e.annot.getPopup().setRect({left:t[0],right:t[2],top:t[3],bottom:t[1]})}))}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.getStateName=function(){throw"You must provide a string name."},t.getKeyboardBinderName=function(){return null},t.prototype.docHandler=function(t){var e=this.constructor.getKeyboardBinderName();e&&this.pdfViewer.switchKeyboardEventBinder(e)},t.prototype.destroyDocHandler=function(){},t.prototype.pageHandler=function(t){},t.prototype.destroyPageHandler=function(){},t.prototype.out=function(){this.pdfViewer.keyboard.activeDefaultBinder()},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyBindingRule=void 0;var o,r=n(72);(o=r)&&o.__esModule;function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.KeyBindingRule=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.command=e,this.keybinding=n,this.priority=o}return t.prototype.equals=function(t){return this.keybinding.equals(t.keybinding)},t}();var a=function(){function t(){i(this,t),this._keybindingRules=[]}return t.prototype.registerKeyBindingRule=function(t){var e=this._keybindingRules.filter((function(e){return e.equals(t)}));if(e.length>0){var n=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(s.equals(t)){if(s.command===t.command)return void(s.priority=t.priority);throw new Error("shortcut conflict: "+s.command+" and "+t.command+" has the same keybindings: "+t.keybinding.toString())}}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}this._keybindingRules.push(t)},t.prototype.getKeyBindings=function(t){return this._keybindingRules.filter((function(e){return e.command===t})).sort((function(t,e){return t.priority>e.priority?-1:1})).reduce((function(t,e){var n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){if(i.value.equals(e))return}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return t.push(e),t}),[]).map((function(t){return t.keybinding}))},t.prototype.getCommandOfKeybinding=function(t){var e=this._keybindingRules.filter((function(e){return t.equals(e.keybinding)}));if(e.length>0)return e[0].command},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KeyCodes={Unknown:0,Backspace:8,Tab:9,Enter:13,Shift:65,Ctrl:17,Alt:18,PauseBreak:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,Meta:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,NumLock:144,ScrollLock:145,US_SEMICOLON:186,US_EQUAL:187,US_COMMA:188,US_MINUS:189,US_DOT:190,US_SLASH:191,US_BACKTICK:192,US_OPEN_SQUARE_BRACKET:219,US_BACKSLASH:220,US_CLOSE_SQUARE_BRACKET:221,US_QUOTE:222,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SEPARATOR:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,KEY_IN_COMPOSITION:112,ABNT_C1:113,ABNT_C2:114}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(73)),r=i(n(72));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t._readModifiers=function(t){t=t.trim().toLowerCase();var e=!1,n=!1,o=!1,r=!1,i=void 0;do{i=!1,/^ctrl[\+\-]/.test(t)&&(e=!0,t=t.substring("ctrl-".length),i=!0),/^shift[\+\-]/.test(t)&&(n=!0,t=t.substring("shift-".length),i=!0),/^alt[\+\-]/.test(t)&&(o=!0,t=t.substring("alt-".length),i=!0),/^meta[\+\-]/.test(t)&&(r=!0,t=t.substring("meta-".length),i=!0),/^win[\+\-]/.test(t)&&(r=!0,t=t.substring("win-".length),i=!0),/^cmd[\+\-]/.test(t)&&(r=!0,t=t.substring("cmd-".length),i=!0)}while(i);var a=void 0,s=t.indexOf(" ");return s>0?(a=t.substring(0,s),t=t.substring(s)):(a=t,t=""),{remains:t,ctrl:e,shift:n,alt:o,meta:r,key:a}},t.parseKeybinding=function(t){var e=this._readModifiers(t),n=o.default.fromString(e.key);return new r.default(e.ctrl,e.shift,e.alt,e.meta,n)},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(23),i=(o=r)&&o.__esModule?o:{default:o};function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.render,o=void 0===n?function(t){return t}:n,r=e.payloadFieldName,i=void 0===r?"file":r,s=e.origin,u=void 0===s?"":s,c=e.uploadSnapshotAPIPath,l=e.method,f=void 0===l?"POST":l;a(this,t),this.render=o,this.payloadFieldName=i,this.origin=u,this.uploadSnapshotAPIPath=c,this.method=f}return t.prototype.uploadImage=function(t){var e=new XMLHttpRequest,n=(0,i.default)();return e.addEventListener("readystatechange",(function(t){4==e.readyState&&(e.status>=200&&e.status<300||304==e.status?n.resolve(e.responseText):n.reject(e))})),e.open(this.method,this.origin+"/"+this.uploadSnapshotAPIPath+"?filefield="+this.payloadFieldName,!0),e.setRequestHeader("Content-Type","image/png"),e.setRequestHeader("X_File_Name","snapshot.png"),e.send(t),n.promise},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(4);function i(t){return{unknowntype:"UnKnownType",text:"Text",link:"Link",freetext:"FreeText",line:"Line",square:"Square",circle:"Circle",polygon:"Polygon",polyline:"PolyLine",highlight:"Highlight",underline:"Underline",squiggly:"Squiggly",strikeout:"StrikeOut",stamp:"Stamp",caret:"Caret",ink:"Ink",psink:"PsInk",fileattachment:"FileAttachment",sound:"Sound",movie:"Movie",widget:"Widget",screen:"Screen",printermark:"PrinterMark",trapnet:"TrapNet",watermark:"Watermark","3d":"3D",popup:"Popup",redact:"Redact"}[t.toString().toLowerCase()]}var a="WRRRRRRRRWWRWWRRRRRRRRRRRRRRRRRRWRRRRDRRDDRNRNNDNNNNNNNNNNRRDRDRRRRRRRRRRRRRRRRRRRRRRRRRRRRDRDRRRRRRRRRRRRRRRRRRRRRRRRRRRRRDRDRRWRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRW";function s(t){var e=t.length,n=0,o=void 0;for(o=0;o<e;o++){var r=t.charCodeAt(o);r>=128||"W"==a[r]||"#"==t[o]||"D"==a[r]?n+=3:n++}if(n==e)return t;var i="";for(o=0;o<e;o++){var s=t.charCodeAt(o);if(s>=128||"W"==a[s]||"#"==t[o]||"D"==a[s]){if("W"==a[s]&&0==s)continue;i+="#",i+="0123456789ABCDEF"[parseInt(s/16)],i+="0123456789ABCDEF"[s%16]}else i+=t[o]}return i}function u(t){var e=void 0;for(e=0;e<t.length&&!(t.charCodeAt(e)>255);e++);if(e===t.length)return"("+t+")";var n="<FEFF";for(e=0;e<t.length;e++){for(var o=t.charCodeAt(e).toString(16);o.length<4;)o="0"+o;n+=o}return n+">"}function c(t){for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return new Uint8Array(e)}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.JSONToFDF=function(e){for(var n={next:2,annotRef:[],file:"%FDF-1.2\n1 0 obj<</FDF<</Annots[{annotsRefArray}]>>/Type/Catalog>>endobj\n"},o=0,r=e.length;o<r;o++){var i=e[o];i.type&&t.singleAnnotJSONToFDF(n,i,!1)}return new Blob([c(n.file.replace(/\{annotsRefArray\}/,n.annotRef.join(" "))+"trailer\n<</Root 1 0 R>>\n%%EOF")],{type:"application/fdf"})},t.singleAnnotJSONToFDF=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=void 0,c=e.next;if(o?a="Popup":o="popup"==(a=i(n&&n.type&&n.type.toLowerCase()||"")).toLowerCase(),!a||"link"==a.toLowerCase()||"screen"==a.toLowerCase()||"sound"==a.toLowerCase())return 0;var l=n.style||"S";l=l.toUpperCase()[0];var d=n.width,h=n.color||"",g="C"==l?"C":"S",y=n.intensity,v=0===n.opacity?0:n.opacity||1,m=u(n.contents||""),b=n.flags||"print",w=b.split(",");for(var P in b=0,r.AnnotFlagsName)-1!=w.indexOf(r.AnnotFlagsName[P])&&(b|=1<<parseInt(P));var A=n.creationdate,_=n.date,C=n.name||"",D=n.page,S=(n.rect||"").replace(/,/g," "),R=u(n.subject||"subject"),E=u(n.title||"title"),O=n["interior-color"],I=c+" 0 obj\n<</Rect ["+S+"]/Subtype /"+a+"/NM ("+C+")";if(e.annotRef.push(c+" 0 R "),e.next++,!o){if(I+="/M ("+_+")/CA "+v+"/Contents "+m+"/CreationDate ("+A+")/F "+b+"/Page "+D+"/Subj "+R+"/T "+E+"/Type /Annot",n.replyType){var x=void 0;I+="/RT /"+((x="string"==typeof n.replyType&&n.replyType||"Group")[0].toUpperCase()+x.substr(1))}n.inreplyto&&(I+="/IRT ("+n.inreplyto+")")}if(l||d){l=l||"S",d=d||"0",y=y||"0",g=g||"S";var M=(n.dashes||"").replace(","," ");I+="/BS <</S /"+l+" /W "+d+" /D ["+M+"]>>/BE <</S /"+g+" /I "+y+">>"}"FreeText"!=a?(h&&(I+="/C "+p(h)),O&&(I+="/IC "+p(O))):(O&&(I+="/C "+p(O)),h&&(I+="/IC "+p(h),I+="/DS (color:"+n.fontColor+")")),void 0!==n.rotation&&(I+="/Rotate "+n.rotation);var T="";switch(a){case"Text":case"Note":I=I.replace(/\/Subtype\s?\/Note/,"/Subtype /Text"),n.icon&&(I+="/Name/"+s(n.icon));var F=void 0;(F=n.state)&&(I+="/State("+F+")/StateModel("+n.statemodel+")");break;case"Link":return"";case"FreeText":I=I.replace(/\/C\s?\[[\s\S]*?\]/,""),O&&(I+="/C "+p(O));var k=n.defaultappearance,j=n.justification,V=n.intent||n.IT,B="/DA ("+k+")/Q "+j;if(V&&(B+="/IT /"+V),n.callout){var N=n.callout.replace(/,/g," ");B+="/CL  ["+N+"]";var L=n.fringe.replace(/,/g," ");B+="/RD ["+L+"]",B+="/LE/"+n.head}T=B;break;case"Line":var U="yes"===n.caption,q=n.head,H=n.tail,W="[/"+q+"/"+H+"]",K=n.leaderLength,Y=n.start.replace(/,/g," "),G=n.end.replace(/,/g," "),z=Y+" "+G,$=n.leaderExtend,J=n.intent,Q="/Cap "+U+"/LE "+W+"/LL "+K+"/L ["+z+"]/LLE "+$;J&&(Q+="/IT /"+J),T=Q;break;case"Square":case"Circle":var Z=n.fringe.replace(/,/g," "),X="/RD ["+Z+"]";T=X;break;case"Polygon":case"PolyLine":var tt=n.vertices.replace(/[,|;]/g," "),et=n.intent,nt="/Vertices ["+tt+"]";if(et&&(nt+="/IT /"+et),"PolyLine"==a){var ot=n.head,rt=n.tail,it="[/"+ot+"/"+rt+"]";nt+="/LE "+it}T=nt;break;case"StrikeOut":case"Highlight":case"Squiggly":case"Underline":var at=n.coords.replace(/,/g," ");T="/QuadPoints ["+at+"]";break;case"Caret":var st=n.fringe.replace(/,/g," "),ut="/RD ["+st+"]";T=ut;break;case"Stamp":n.icon&&(T="/Name/"+s(n.icon));var ct=f(e,n.raw,n.raw.N);T+="/AP<</N "+ct+" 0 R>>\n";break;case"Ink":if("["===n.inklist[0]){var lt=n.inklist.substr(1,n.inklist.length-2).split("],["),ft="";lt.map((function(t){ft+="["+t.replace(/[,|;]/g," ")+"]"}));var dt="/InkList ["+ft+"]";T=dt}else T="/InkList [["+n.inklist.replace(/[,|;]/g," ")+"]]";break;case"Popup":T="/Open "+("yes"==n.open?"true":"false");break;case"Sound":var pt=f(e,n,{Filter:"/ASCIIHexDecode",R:n.rate,Type:"/Sound",stream:n.soundStream});T+="/Sound "+pt+" 0 R";case"FileAttachment":if(n.raw){var ht=f(e,n.raw,n.raw.FS);T+="/FS "+ht+" 0 R "}}if(n.popup){var gt=t.singleAnnotJSONToFDF(e,n.popup,!0);T+="/Popup "+gt+" 0 R"}return e.file+=I+T+">>\nendobj\n",c},t}(),f=function(t,e,n){var o=t.next;t.next++;var r="";if(r+=o+" 0 obj\n","string"==typeof n)r+=n;else if(n instanceof Array)r+="["+n.map((function(n){return d(t,e,n)})).join(" ")+"]";else{r+="<<\n";for(var i in n)"stream"!=i&&(r+="/"+i+" "+d(t,e,n[i]));if(r+=">>",n.stream){for(var a="",s=0;s<n.stream.length;s+=2){var u=parseInt(n.stream[s],16),c=parseInt(n.stream[s+1],16);a+=String.fromCharCode((u<<4)+c)}r+="stream\n"+a+"\nendstream"}}return r+="\nendobj\n",t.file+=r,o},d=function t(e,n,r){if(null===r)return"null";var i=void 0===r?"undefined":o(r);if("number"==i)return r;if("string"==i){if("/"==r[0])return r.replace(/ /g,"#20");if("<"==r[0])return r;var a;return(a=r.match(/^(\d*)R$/))?f(e,n,n[a[1]])+" 0 R":"("+r+")"}if("boolean"==i)return r?"true":"false";if(r instanceof Array)return"["+r.map((function(o){return t(e,n,o)})).join(" ")+"]";var s="<<";for(var u in r)s+="/"+u+" "+t(e,n,r[u]);return s+">>"},p=function(t){var e=t.match(/\#?(\w{2})(\w{2})(\w{2})/),n=parseInt(e[1],16)/255,o=parseInt(e[2],16)/255,r=parseInt(e[3],16)/255;return"["+n.toFixed(2)+" "+o.toFixed(2)+" "+r.toFixed(2)+"]"};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(1)),r=u(n(130)),i=u(n(76)),a=u(n(2)),s=u(n(131));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=new(function(t){function e(){return c(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.destroy=function(){},e}(i.default)),p=function(t){function e(){return c(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.prepare=function(e){var n=this;t.prototype.prepare.call(this,e);var o={},r={},i=function(t,i){if(i){var a=i.getStateName(),s=r[a];s&&s.destroy()}var u=t.getStateName(),c=o[u]||(t.getDefaultContextMenuConfig?t.getDefaultContextMenuConfig():void 0);r[u]=n.createContextMenu(u,e.$ui.get(0),c)};e.eventEmitter.on(a.default.switchStateHandler,i),e.eventEmitter.once(a.default.openFileSuccess,(function(){i(e.getStateHandlerManager().currentStateHandler)}))},e.prototype.createContextMenu=function(t,e,n){if(!n||!n.items)return d;var r=n.items,a=this.pdfViewer.i18n;for(var s in r){var u=r[s];u.nameI18nKey&&(u.name=a.t(u.nameI18nKey))}var p=new(function(t){function r(){return c(this,r),l(this,t.apply(this,arguments))}return f(r,t),r.prototype.destroy=function(){(0,o.default)(e).contextMenu("destroy")},r.prototype.showAt=function(t,n){(0,o.default)(e).contextMenu()},r.prototype.disable=function(){t.prototype.disable.call(this),(0,o.default)(e).contextMenu("destroy")},r.prototype.enable=function(){t.prototype.enable.call(this),this.createRealContextmenu()},r.prototype.createRealContextmenu=function(){(0,o.default)(e).contextMenu(n)},r}(i.default));return(0,o.default)(e).on("contextmenu:hide",(function(){p.hiddenCallbacks.forEach((function(t){return t.call(p)}))})),p.createRealContextmenu(),p},e.prototype.alert=function(t){return t=this.pdfViewer.i18n.t(t)||t,window.alert(t),Promise.resolve()},e.prototype.confirm=function(t){t=this.pdfViewer.i18n.t(t)||t;var e=window.confirm(t);return null==e?Promise.reject():Promise.resolve(e)},e.prototype.prompt=function(t,e){e=this.pdfViewer.i18n.t(e)||e;var n=window.prompt(e,t);return null==n?Promise.reject():Promise.resolve(n)},e.prototype.createFreeTextTooltip=function(t){},e.prototype.createTextSelectionTooltip=function(t){return new s.default(this.pdfViewer,t)},e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(39));r(n(304)),r(n(76));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.prepare=function(t){this.pdfViewer=t},t.prototype.showReply=function(t){(0,o.default)()},t.prototype.showPropertiesInfo=function(t){(0,o.default)()},t.prototype.createContextMenu=function(t,e,n){(0,o.default)()},t.prototype.alert=function(t){},t.prototype.confirm=function(t){},t.prototype.prompt=function(t,e,n){},t.prototype.createFreeTextTooltip=function(t){},t.prototype.createTextSelectionTooltip=function(t){},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(132)),r=a(n(305)),i=(n(4),n(11),a(n(2)),a(n(133)));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=[{iconClass:"fv__icon-popup-copy",name:"copy_selected_text"},{iconClass:"fv__icon-toolbar-text-highlight",name:"create-text-highlight"},{iconClass:"fv__icon-toolbar-strikeout",name:"create-strikeout"},{iconClass:"fv__icon-toolbar-underline",name:"create-underline"}],c=(0,r.default)({actions:u}),l=(new DOMParser).parseFromString(c,"text/html").body.firstElementChild,f=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return r.selectionTool=new i.default(n,o),r.init(),r}return s(e,t),e.prototype.init=function(){var t=this;this.dom=l.cloneNode(!0),this.pageRender.$ui.get(0).appendChild(this.dom),this.dom.addEventListener("click",(function(e){if(!e.target.classList.contains("disabled")){var n=e.target.getAttribute("action");n&&t[n]&&t[n]().then((function(){t.hide()}))}}))},e.prototype.copy_selected_text=function(){return this.selectionTool.copy()},e.prototype["create-text-highlight"]=function(){return this.selectionTool.createTextHighlight()},e.prototype["create-strikeout"]=function(){return this.selectionTool.createStrikeout()},e.prototype["create-underline"]=function(){return this.selectionTool.createUnderline()},e.prototype.showAt=function(e,n){var o=this;t.prototype.showAt.call(this,e,n),this.dom.style.cssText+="\n            left: "+e+"px;\n            top: "+n+"px;\n        ",Promise.resolve(this.pageRender.docRender.getUserPermission().getValue()).then((function(t){32&t?o.dom.querySelector("div>div:not(.fv__icon-popup-copy)").classList.remove("disabled"):o.dom.querySelector("div>div:not(.fv__icon-popup-copy)").classList.add("disabled"),16&t?o.dom.querySelector("div>div.fv__icon-popup-copy").classList.remove("disabled"):o.dom.querySelector("div>div.fv__icon-popup-copy").classList.add("disabled"),o.dom.classList.add("fv__active")}))},e.prototype.hide=function(){t.prototype.hide.call(this),this.dom.classList.remove("fv__active")},e.prototype.destroy=function(){this.dom.remove(),this.selectionTool.destroy()},e}(o.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(46));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.pdfViewer=n,i.pageRender=r,i.isDisabled=!1,i.eventEmitter=new o.default,i}return i(e,t),e.prototype.on=function(t,e){var n=this;return this.eventEmitter.on(t,e),function(){return n.eventEmitter.off(t,e)}},e.prototype.showAt=function(t,e){this.eventEmitter.emit("show")},e.prototype.hide=function(){this.eventEmitter.emit("hide")},e.prototype.disable=function(){this.isDisabled=!0},e.prototype.enable=function(){this.isDisabled=!1},e.prototype.destroy=function(){this.eventEmitter.emit("destroy"),t.prototype.destroy.call(this)},e}(r(n(54)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(11),i=u(n(2)),a=u(n(54)),s=u(n(23));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.pdfViewer=n,r.pageRender=o,r}return c(e,t),e.prototype.getSelectionInfo=function(){var t=(0,s.default)(),e=this.pdfViewer.getStore().subscribe(o.STORE_NAMES.SELECTION_INFO,(function(n){e(),t.resolve(n)}));return this.addDestroyHook(e),t.promise},e.prototype.copy=function(){var t=this;return this.getSelectionInfo().then((function(e){(0,r.copyText)(e.text)?t.pdfViewer.eventEmitter.emit(i.default.copyTextSuccess,e.text):t.pdfViewer.eventEmitter.emit(i.default.copyTextFailed,e.text)}))},e.prototype.createTextHighlight=function(){return this.createTextMarkupAnnot("highlight")},e.prototype.createStrikeout=function(){return this.createTextMarkupAnnot("strikeout")},e.prototype.createUnderline=function(){return this.createTextMarkupAnnot("underline")},e.prototype.createTextMarkupAnnot=function(t){var e=this;return this.pageRender.getPDFPage().then((function(n){return e.getSelectionInfo().then((function(o){return n.addAnnot({type:t,rect:{left:0,right:0,top:0,bottom:0},flags:4,coords:o.rectArray}).then((function(t){var n=t[0];e.pdfViewer.eventEmitter.emit(i.default.addAnnotSuccess,n),e.pageRender.annotsRender.activeAnnot(n.getId())}))}))}))},e}(a.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(311);var o,r=n(312),i=(o=r)&&o.__esModule?o:{default:o};e.default=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=new Error("Method not implemented."),r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.option=e}return t.prototype.loadForm=function(t){throw o},t.prototype.formFillerEvent=function(t,e,n,r){throw o},t.prototype.updateField=function(t,e,n,r){throw o},t.prototype.updateFormControl=function(t,e,n,r){throw o},t.prototype.updateMKProperty=function(t,e,n,r,i){throw o},t.prototype.setWidgetAS=function(t,e,n,r){throw o},t.prototype.setFieldValue=function(t,e,n){throw o},t.prototype.getFieldsValue=function(t){throw o},t.prototype.addControl=function(t,e,n,r,i){throw o},t.prototype.validateFieldName=function(t,e,n){throw o},t.prototype.renameField=function(t,e,n){throw o},t.prototype.removeField=function(t,e){throw o},t.prototype.removeControl=function(t,e,n){throw o},t.prototype.fixPageFields=function(t,e){throw o},t.prototype.init=function(){return Promise.resolve(!0)},t.prototype.getPDFDocIdByFile=function(t){throw o},t.prototype.getPDFDocIdByChunk=function(t,e){throw o},t.prototype.getPDFDocIdByHttpRangeRequest=function(t){throw o},t.prototype.getPDFDocIdByStream=function(t){throw o},t.prototype.parsePDFDocByPassword=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];throw o},t.prototype.setIcons=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw o},t.prototype.addIcon=function(t){throw o},t.prototype.removeIcon=function(t,e,n){throw o},t.prototype.getPDFDocInfoById=function(t){throw o},t.prototype.getMetadata=function(t){throw o},t.prototype.setMetadataValue=function(t,e,n){throw o},t.prototype.getPageInfoByIndex=function(t,e){throw o},t.prototype.getPageInfoById=function(t,e){throw o},t.prototype.getPageBitmap=function(t,e,n,r,i,a,s){throw o},t.prototype.getPageAndHighlightBitmap=function(t,e,n,r,i){throw o},t.prototype.setRenderFlag=function(t,e){throw o},t.prototype.getAnnot=function(t,e,n){throw o},t.prototype.getPageAnnotIDList=function(t,e){throw o},t.prototype.getAnnots=function(t,e,n){throw o},t.prototype.getAnnotBitmap=function(t,e,n,r,i,a){throw o},t.prototype.getAnnotBitmapByRange=function(t,e,n,r,i,a){throw o},t.prototype.getAnnotIdAtPoint=function(t,e,n,r){n.x,n.y;throw o},t.prototype.getAnnotIdAtDevicePoint=function(t,e,n,r,i){n.x,n.y;throw o},t.prototype.getCharInfoAtPoint=function(t,e,n,r){n.x,n.y;throw o},t.prototype.updateAnnotQuadPointsByCharIndex=function(t,e,n,r,i){throw o},t.prototype.setAnnotContent=function(t,e,n,r){throw o},t.prototype.setAnnotBorderColor=function(t,e,n,r){throw o},t.prototype.setAnnotBorderStyle=function(t,e,n,r,i){throw o},t.prototype.setAnnotBorderWidth=function(t,e,n,r){throw o},t.prototype.setAnnotFillColor=function(t,e,n,r){throw o},t.prototype.setAnnotBorderInfo=function(t,e,n,r){throw o},t.prototype.setAnnotOpacity=function(t,e,n,r){throw o},t.prototype.removeAnnot=function(t,e,n){throw o},t.prototype.annotAddReply=function(t,e,n,r){throw o},t.prototype.annotRemoveReply=function(t,e,n,r){throw o},t.prototype.annotRemoveAllStateAnnots=function(t,e,n){throw o},t.prototype.annotRemoveAllReply=function(t,e,n){throw o},t.prototype.setAnnotRect=function(t,e,n,r){throw o},t.prototype.getAnnotInnerRect=function(t,e,n){throw o},t.prototype.moveAnnotTo=function(t,e,n,r){throw o},t.prototype.getPDFDocStream=function(t,e,n){throw o},t.prototype.setAnnotEndingStyle=function(t,e,n,r,i){throw o},t.prototype.enableLineCaption=function(t,e,n,r){throw o},t.prototype.setLineStartPoint=function(t,e,n,r,i){throw o},t.prototype.setLineEndPoint=function(t,e,n,r,i){throw o},t.prototype.setAnnotLeaderLineLength=function(t,e,n,r){throw o},t.prototype.updateAnnotVertexes=function(t,e,n,r,i,a){throw o},t.prototype.setAnnotVertexes=function(t,e,n,r){throw o},t.prototype.setAnnotAPBitmap=function(t,e,n,r,i){throw o},t.prototype.setAction=function(t,e,n,r){return o},t.prototype.setAnnotInnerRect=function(t,e,n,r){r.left,r.right,r.top,r.bottom;throw o},t.prototype.setAnnotFlag=function(t,e,n,r){throw o},t.prototype.importFromFDFFile=function(t,e,n){throw o},t.prototype.importFromFDF=function(t,e,n){throw o},t.prototype.exportToFDF=function(t,e,n){throw o},t.prototype.addAnnot=function(t){throw o},t.prototype.getTextRectsAtRect=function(t,e,n){throw o},t.prototype.getTextContinuousRectsAtRect=function(t,e,n){throw o},t.prototype.getTextContinuousRectsAtPoints=function(t,e,n,r,i,a,s){throw o},t.prototype.getTextContinuousCharsAtRect=function(t,e,n){throw o},t.prototype.getTextSearch=function(t,e,n,r){throw o},t.prototype.textSearchFindNext=function(t){throw o},t.prototype.textSearchFindPrev=function(t){throw o},t.prototype.textSearchDestroy=function(t){throw o},t.prototype.registerSecurityCallback=function(t,e){throw o},t.prototype.destroyDoc=function(t){throw o},t.prototype.destroyPage=function(t,e){throw o},t.prototype.setPopupOpenStatus=function(t,e,n,r){throw o},t.prototype.moveCaretRectByCharIndex=function(t,e,n,r){throw o},t.prototype.setAnnotIntent=function(t,e,n,r){throw o},t.prototype.setUserName=function(t){throw o},t.prototype.getUserName=function(){throw o},t.prototype.addAnnotReviewState=function(t,e,n,r){throw o},t.prototype.addAnnotMarkedState=function(t,e,n,r){throw o},t.prototype.setStateName=function(t,e,n,r){throw o},t.prototype.setNoteOpenStatus=function(t,e,n,r){throw o},t.prototype.removeAllStateAnnots=function(t,e,n){throw o},t.prototype.setDynamicInfoFormula=function(t,e){throw o},t.prototype.getGraphicObjectsInfo=function(t,e){throw o},t.prototype.updatePageInfo=function(t,e){throw o},t.prototype.setPageRotation=function(t,e,n){throw o},t.prototype.addPageImage=function(t,e,n,r,i,a){throw o},t.prototype.addWatermark=function(t,e,n){throw o},t.prototype.getGraphicsObjectAtPoint=function(t,e,n,r,i){throw o},t.prototype.setGraphicsObjectMatrix=function(t,e,n,r){throw o},t.prototype.getGraphicsObjectBitmap=function(t,e,n,r){throw o},t.prototype.setGraphicsObjectBorderStyle=function(t,e,n,r,i){throw o},t.prototype.setGraphicsObjectBorderWidth=function(t,e,n,r){throw o},t.prototype.setGraphicsObjectBorderColor=function(t,e,n,r){throw o},t.prototype.setGraphicsObjectFillColor=function(t,e,n,r){throw o},t.prototype.setGraphicsObjectOpacity=function(t,e,n,r){throw o},t.prototype.addGraphicsObject=function(t,e,n){throw o},t.prototype.setImageObjectOpacity=function(t,e,n,r){throw o},t.prototype.setImageObjectRotation=function(t,e,n,r){throw o},t.prototype.insertSubAction=function(t,e,n,r){throw o},t.prototype.setSubAction=function(t,e,n,r){throw o},t.prototype.removeAllSubActions=function(t,e){throw o},t.prototype.removeSubAction=function(t,e,n){throw o},t.prototype.setActionData=function(t,e,n){throw o},t.prototype.removeGraphicsObject=function(t,e,n){throw o},t.prototype.removePageAllAnnot=function(t,e){throw o},t.prototype.setTextObjectChar=function(t,e,n,r){throw o},t.prototype.setTextObjectItalic=function(t,e,n,r){throw o},t.prototype.setTextObjectBold=function(t,e,n,r){throw o},t.prototype.setTextObjectFontSize=function(t,e,n,r){throw o},t.prototype.setTextObjectStandardFont=function(t,e,n,r){throw o},t.prototype.setTextObjectFontByName=function(t,e,n,r,i,a){throw o},t.prototype.getTextObjectWoff=function(t,e,n){throw o},t.prototype.getAnnotWoff=function(t,e,n){throw o},t.prototype.drmEncrypt=function(t,e){throw o},t.prototype.getActionFileStream=function(t,e,n){throw o},t.prototype.getTemplates=function(t){throw o},t.prototype.hideTemplate=function(t,e,n){throw o},t.prototype.spawnPage=function(t,e,n,r,i){throw o},t.prototype.setFieldsValue=function(t,e,n){throw o},t.prototype.removeTemplate=function(t,e){throw o},t.prototype.setUniqueId=function(t,e,n,r){throw o},t.prototype.getFontBufferByName=function(t,e){throw o},t.prototype.getPageSizes=function(t,e){throw o},t.prototype.setMeasureRatio=function(t,e,n,r){throw o},t.prototype.setMeasureUnit=function(t,e,n,r){throw o},t.prototype.startImportPages=function(t,e,n,r,i,a,s,u){throw o},t.prototype.insertPagesToOther=function(t,e,n,r,i,a,s,u,c,l,f){throw o},t.prototype.extractPages=function(t,e,n,r,i){throw o},t.prototype.getHeaderFooter=function(t){throw o},t.prototype.updateHeaderFooter=function(t,e){throw o},t.prototype.addHeaderFooter=function(t,e){throw o},t.prototype.removeHeaderFooter=function(t){throw o},t.prototype.paste=function(t,e,n,r,i,a){throw o},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=y(n(314)),i=y(n(3)),a=n(78),s=y(n(327)),u=y(n(330)),c=y(n(128)),l=y(n(331)),f=y(n(332)),d=y(n(333)),p=n(140),h=y(n(10)),g=y(n(141));function y(t){return t&&t.__esModule?t:{default:t}}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function(){function t(e,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,t),this.id=e,this.engine=n,this.api=n.api,this.pageCache=[],this.pagePromiseCache=[],this.info={fileName:r.fileName,pageSizes:{}},this.fieldWidgets={},this.visibleTemplates=[],this.invisibleTemplates=[],this.metadata={FileName:r.fileName},this.docModified=!1;var s=[];for(var u in i.default)"layerVisibleChange"!==u&&"drmEncryptFailed"!==u&&"docModified"!==u&&s.push(i.default[u]);var c=function(){o.engine.eventEmitter.emit(i.default.docModified,o),o.docModified=!0},l=(0,p.debounce)(100,c);s.map((function(t){o.engine.eventEmitter.on(t,l)})),this.engine.eventEmitter.on(a.ViewerEvents.willCloseDocument,(function(){s.map((function(t){o.engine.eventEmitter.removeListener(t,l)}))})),this.permissionFactory={}}return t.prototype.checkNoAdditionPerm=function(t){return!(this.permissionFactory.additional(this)&t)},t.prototype.checkPermission=function(t){return this.getPermissionsSync()&this.permissionFactory.standard()&t},t.prototype.isDocModified=function(){return this.docModified},t.prototype.getId=function(){return this.id},t.prototype.getNameTreeIcons=function(){return this.info.icons},t.prototype.getFileName=function(){return this.info.fileName},t.prototype.parseByPassword=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={};if(n.encryptPassword&&(o.encryptPassword=n.encryptPassword),n.annotsJson){var r=c.default.JSONToFDF(n.annotsJson);o.fdf={file:r}}return n.fdf&&(o.fdf=n.fdf),n.drm&&(o.drm=n.drm),n.fileOpen&&(o.fileOpen=n.fileOpen),this.api.parsePDFDocByPassword(this.id,t,o).then((function(t){var n=t.code,o=t.info;if(0!==n)return Promise.reject(t);e.info=Object.assign(e.info,o),e.pageCache=new Array(e.info.pageCount),e.info.action&&(e.action=e.engine.actionFactory.createAction(e.info.action,e,e.api,e.engine.eventEmitter,e))})).then((function(){return e}))},t.prototype.parse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parseByPassword(t.password,t)},t.prototype.getJsNameTree=function(){return this.info.jsNameTree},t.prototype.getMetadata=function(){var t=this;return this.api.getMetadata(this.id).then((function(e){return t.metadata=Object.assign(t.metadata,e)}))},t.prototype.getMetadataValue=function(t){return this.metadata[t]},t.prototype.flatten=function(t){if(!(this.checkPermission(h.default.annotForm)&&this.checkPermission(h.default.modify)&&this.checkPermission(h.default.assemble)))throw new Error("Permission error");for(var e=[],n=this.getPageCount(),o=0;o<n;o++){var r=this.getPageByIndex(o).then((function(e){return e.flatten(t)}));e.push(r)}return Promise.all(e)},t.prototype.setMetadataValue=function(t,e){var n=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.api.setMetadataValue(this.id,t,e).then((function(o){if(!n.metadata)return n.getMetadata();n.metadata[t]=e,n.engine.eventEmitter.emit(i.default.metaDataChanged,n)}))},t.prototype.loadPDFForm=function(){var t=this.PDFForm;return t?Promise.resolve(t):(t=this.PDFForm=new s.default(this,this.engine),this.api.loadForm(this.id).then((function(e){return t.setFormJson(e),t})))},t.prototype.getPDFForm=function(){return this.PDFForm},t.prototype.getPageCount=function(){return this.info.pageCount},t.prototype.isLinearized=function(){return this.api.isLinearized(this.id)},t.prototype.hasForm=function(){return this.info.hasForm},t.prototype.setCustomPermission=function(t,e){this.permissionFactory[t]=e},t.prototype.getPermission=function(){return this.getPermissions()},t.prototype.getPermissions=function(){return this.getPermissionsSync()},t.prototype.getPermissionsSync=function(){return this.info.hasSigned?4294963392:this.info.isOwner?4294967292:this.info.userPermissions},t.prototype.getStdCipherOptions=function(){return this.api.getStdCipherOptions(this.id)},t.prototype.getPDFDocInfo=function(){return this.api.getPDFDocInfoById(this.id)},t.prototype.getBookmarksJson=function(){return this.api.getBookmarks(this.id)},t.prototype.getRootBookmark=function(){var t=this,e=this.engine;return this.getBookmarksJson().then((function(n){return n?new d.default(e,t,n):null}))},t.prototype.createRootBookmark=function(){var t=this;if(!this.checkPermission(h.default.assemble))throw new Error("Permission error");var e=this.engine;this.id;return this.api.createRootBookmark(this.id).then((function(n){return new d.default(e,t,n)}))},t.prototype.getLayerNodesJson=function(){return this.api.getLayerNodes(this.id)},t.prototype.setLayerNodeVisiable=function(t,e){var n=this;return this.api.setLayerNodeVisiable(this.id,t,e).then((function(t){return t&&n.engine.eventEmitter.emit(i.default.layerVisibleChange,n),t}))},t.prototype.getPageByIndex=function(t){var e,n=this,o=this.pageCache;if(e=o[t])return Promise.resolve(e);var i=this.pagePromiseCache;return i[t]=i[t]||this.api.getPageInfoByIndex(this.id,t).then((function(e){var a=o[t]=new r.default(e,n);return delete i[t],a}))},t.prototype.destroy=function(){return this.api.destroyDoc(this.getId())},t.prototype.getStream=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.checkNoAdditionPerm(1))throw new Error("Permission error, download disabled");return this.PDFForm?this.PDFForm.addTask().then((function(){return e.api.getPDFDocStream(e.id,t,n)})):this.api.getPDFDocStream(this.id,t,n)},t.prototype.exportAnnotsToFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.api.exportToFDF(this.id,t,2)},t.prototype.exportFormToFile=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Promise.resolve();return this.PDFForm||(n=this.loadPDFForm()),n.then((function(n){switch(e){case 0:return Promise.resolve(new Blob([t.PDFForm.exportFDF()],{type:"application/vnd.adobe.fdf"}));case 1:var o=t.PDFForm.exportXFDF(),r=new Blob([o],{type:"application/vnd.adobe.xfdf"});return Promise.resolve(r);case 2:var i=t.PDFForm.exportXML(),a=new Blob([i],{type:"application/xml"});return Promise.resolve(a)}}))},t.prototype.exportToFDF=function(t,e){return this.api.exportToFDF(this.id,t,2).then((function(t){return new Uint8Array(t)}))},t.prototype.importAnnotsFromFDF=function(t){var e=this;if(!this.checkPermission(h.default.annotForm))throw new Error("Permission error");return this.api.importFromFDF(this.id,t,2).then((function(){for(var t=e.pageCache,n=[],o=function(e,o){var r=t[e];if(!r)return"continue";n.push(r.getUnloadedAnnots().then((function(t){return{page:r,newAnnots:t}})))},r=0,i=t.length;r<i;r++)o(r);return Promise.all(n)})).then((function(t){e.engine.eventEmitter.emit(i.default.annotationImported,e,t)}))},t.prototype.importFormFromFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.checkPermission(h.default.annotForm+h.default.fillForm))throw new Error("Permission error");var o=Promise.resolve();if(this.PDFForm||(o=this.loadPDFForm()),n){if(t instanceof Blob)o=new Promise((function(e,n){var o=new FileReader;o.readAsText(t),o.onload=function(t){var n=t.target.result;e(n)}}));else if(t.slice){var r=String.fromCharCode.apply(null,new Uint8Array(t));o=Promise.resolve(r)}}else o=Promise.resolve();return o.then((function(o){return n&&(t=(0,f.default)(o)),e.api.importFromFDF(e.id,t,1).then((function(t){return e.api.getFieldsValue(e.id)})).then((function(t){return e.PDFForm.upadateValue(t)}))}))},t.prototype.importFromFDFFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(1===n)return this.PDFForm.importFDF();var o=t,r=!1;if(t instanceof Uint8Array&&t.length>52428800){var a=new Blob([t],{type:"arraybuffer"});o=URL.createObjectURL(a),r=!0}return this.api.importFromFDFFile(this.id,o,-1,n).then((function(t){for(var n=e.pageCache,o=[],r=function(t,e){var r=n[t];if(!r)return"continue";o.push(r.getUnloadedAnnots().then((function(t){return{page:r,newAnnots:t}})))},i=0,a=n.length;i<a;i++)r(i);return Promise.all(o)})).then((function(t){r&&URL.revokeObjectURL(o);var a=i.default.annotationImported;1==n&&(a=i.default.annotationImported),e.engine.eventEmitter.emit(a,e,t)}),(function(t){console.error("some error happened. Please check fdf file exists.")}))},t.prototype.exportAnnotsToJSON=function(t){var e=this,n=Promise.resolve();if(t&&0!=t.length){var r={},i=t.map((function(t,e){var n=t.exportToJSON();return"stamp"!=n.type&&"fileattachment"!=n.type||(r[e]={page:n.page,index:t.info.index}),n}));n=Promise.all([i,this.getAnnotsRawData(r)])}else n=this.getAnnots().then((function(t){for(var n={},o=[],r=0,i=t.length;r<i;r++)for(var a=t[r],s=0,u=a.length;s<u;s++){var c=a[s].getType();if("widget"!=c&&"popup"!=c&&"watermark"!=c){var l=a[s].exportToJSON();o.push(l),"stamp"!=l.type&&"fileattachment"!=l.type||(n[o.length-1]={page:r,index:s})}}return Promise.all([o,e.getAnnotsRawData(n)])}));return n.then((function(t){var e=o(t,2),n=e[0];return e[1].forEach((function(t){return n[t.index].raw=t.raw})),n}))},t.prototype.getAnnotsRawData=function(t){return t.length>0?[]:this.api.getAnnotsRawData(this.id,t)},t.prototype.importAnnotsFromJSON=function(t){if(!this.checkPermission(h.default.annotForm))throw new Error("Permission error");var e=c.default.JSONToFDF(t);return this.importAnnotsFromFDF(e)},t.prototype.getPageAnnots=function(t){return this.getPageByIndex(t).then((function(t){return t.getAnnots()}))},t.prototype.getAnnots=function(){for(var t=this,e=[],n=[],o=0,r=this.getPageCount();o<r;o++)e.push(function(e){return t.getPageAnnots(e).then((function(t){n[e]=t}))}(o));return Promise.all(e).then((function(){return n}))},t.prototype.getTextSearch=function(t,e){return new u.default(this,t,e)},t.prototype.addAnnot=function(t,e){if(!this.checkPermission(h.default.annotForm))throw new Error("Permission error");return this.getPageByIndex(t).then((function(t){return t.addAnnot(e)}))},t.prototype.addAnnotGroup=function(t,e,n){if(!this.checkPermission(h.default.annotForm))throw new Error("Permission error");return this.getPageByIndex(t).then((function(t){return t.addAnnotGroup(e,n)}))},t.prototype.setOpenAction=function(t,e,n){var o=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.api.setDocOpenAction(this.getId(),t).then((function(t){o.engine.actionFactory.createAction(t,o,o.api,o.engine.eventEmitter,o).setActionDataByIndex(e,n)}))},t.prototype.setPasswordAndPermission=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4294967292,o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.default.AES256,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments[5];if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.api.setPasswordAndPermission(this.id,t,e,n,r,a).then((function(n){return(s&&(s.userPassword||s.ownerPassword)||t&&-1!=t||e&&-1!=e)&&n&&o.engine.eventEmitter.emit(i.default.docPasswordChanged,o),n}))},t.prototype.removeSecurity=function(){var t=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.getPasswordType().then((function(e){if(3==e||0==e)return t.api.removeSecurity(t.id).then((function(e){return e&&t.engine.eventEmitter.emit(i.default.removePwdAndPerm,t),e}));throw new Error("Need owner password.")}))},t.prototype.isCorrectPassword=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.checkPassword(t).then((function(t){return 0!==t}))},t.prototype.checkPassword=function(t){var e=this;return this.api.checkPassword(this.id,t).then((function(t){return 3===t&&(e.info.isOwner=!0),e.engine.eventEmitter.emit(i.default.permissionChanged,e),t}))},t.prototype.getUserPassword=function(t){return this.api.getUserPassword(this.id,t)},t.prototype.getPasswordType=function(){return Promise.resolve(this.info.passwordType)},t.prototype.setPasswordType=function(t){return this.info.passwordType=t},t.prototype.getUserPermissions=function(){return this.info.userPermissions},t.prototype.makeRedactByPages=function(t){if(!this.checkPermission(h.default.annotForm))throw new Error("Permission error");for(var e=[],n=0;n<t.length;n++){var o=t[n],r=this.getPageByIndex(o).then((function(t){var e=void 0;return e=1==t.info.rotation||3==t.info.rotation?{left:0,top:0,right:t.getHeight(),bottom:t.getWidth()}:{left:0,top:0,right:t.getWidth(),bottom:t.getHeight()},t.markRedactAnnot([e])}));e.push(r)}return Promise.all(e)},t.prototype.movePageTo=function(t,e){var n=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.info.pageSizes={},this.getPageByIndex(t).then((function(o){return n.api.movePageTo(n.id,o.getId(),e).then((function(o){if(o){var r=n.pageCache[t];n.pageCache.splice(t,1),n.pageCache.splice(e,0,r);var a=Math.min(t,e),s=Math.max(t,e);n.updatePageIndex(a,s),n.engine.eventEmitter.emit(i.default.pageMoved,t,e)}return o}))}))},t.prototype.insertPage=function(t,e,n){var o=this;if(!this.checkPermission(h.default.assemble))throw new Error("Permission error");return this.info.pageSizes={},this.api.insertPage(this.id,t,e,n).then((function(t){if(!t)return!1;o.info.pageCount++;var e=new r.default(t,o);return o.pageCache.splice(t.index,0,e),o.updatePageIndex(t.index+1,o.info.pageCount-1),o.engine.eventEmitter.emit(i.default.pageAdded,e),e}))},t.prototype.removePage=function(t){var e=this;if(!this.checkPermission(h.default.assemble))throw new Error("Permission error");return this.info.pageSizes={},this.api.removePage(this.id,t).then((function(n){return n&&(e.info.pageCount--,e.pageCache.splice(t,1),e.updatePageIndex(t,e.info.pageCount-1),e.engine.eventEmitter.emit(i.default.pageRemoved,t)),n}))},t.prototype.updatePageIndex=function(t,e){for(var n=t;n<=e&&this.pageCache[n];n++)this.pageCache[n].info.index=n;this.pageCache.forEach((function(t){t.annots.forEach((function(t){"link"!=t.info.type&&"screen"!=t.info.type||t._update()}))}))},t.prototype.applyRedaction=function(){var t=this;if(!this.checkPermission(h.default.annotForm)||!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.api.applyRedaction(this.id).then((function(e){if(!e)return!1;for(var n=[],o=function(o){var r=e[o],a=t.getPageByIndex(r.pageIndex).then((function(e){var n=e.clearAnnotIds(r.removedAnnotIds).filter((function(t){return t}));return t.engine.eventEmitter.emit(i.default.annotationRemoved,n,e),{pageIndex:r.pageIndex,removedAnnots:r.removedAnnotIds}}));n.push(a)},r=0;r<e.length;r++)o(r);return Promise.all(n).then((function(e){return t.engine.eventEmitter.emit(i.default.applyRedaction,e),e}))}))},t.prototype.drmEncrypt=function(t){var e=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.api.drmEncrypt(this.getId(),t).then((function(t){return e.info=Object.assign(e.info,t),e.engine.eventEmitter.emit(i.default.drmEncryptSuccess,e),e}),(function(t){return e.engine.eventEmitter.emit(i.default.drmEncryptFailed,t,e),Promise.reject(t)}))},t.prototype.getTemplates=function(){var t=this;this.api.getTemplates(this.id).then((function(e){e&&(t.visibleTemplates=e.visibleArr,t.invisibleTemplates=e.invisibleArr)}))},t.prototype.hideTemplate=function(t,e){var n=this,o=this;if(!e)return this.api.hideTemplate(this.id,t,e).then((function(){o.visibleTemplates.push(t);for(var e=-1,n=0;n<o.invisibleTemplates.length;n++){var r=o.invisibleTemplates[n];if(r.name===t.name&&r.objNum===t.objNum){e=n;break}}o.invisibleTemplates.splice(e,1)}));for(var r=this.getPageCount(),i=function(r){n.getPageByIndex(r).then((function(i){i.info.objectNumber===t.objNum&&o.removePage(r).then((function(){return o.api.hideTemplate(n.id,t,e).then((function(){o.invisibleTemplates=o.invisibleTemplates.push(t);for(var e=-1,n=0;n<o.visibleTemplates.length;n++){var r=o.visibleTemplates[n];if(r.name===t.name&&r.objNum===t.objNum){e=n;break}}o.visibleTemplates.splice(e,1)}))}))}))},a=0;a<r;a++)i(a)},t.prototype.spawnPage=function(t,e,n,o){return this.api.spawnPage(this.id,t,e,n,o)},t.prototype.removeTemplate=function(t){var e=this;return this.api.removeTemplate(this.id,t).then((function(n){for(var o=-1,r=0;r<e.invisibleTemplates.length;r++){if(e.invisibleTemplates[r].name===t){o=r;break}}e.invisibleTemplates.splice(o,1),o=-1;for(var i=0;i<e.visibleTemplates.length;i++){if(e.visibleTemplates[i].name===t){o=i;break}}return e.visibleTemplates.splice(o,1),Promise.resolve()}))},t.prototype.getPageSizes=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getPageCount()-e;return e<0&&(e=0),e+n>this.getPageCount()&&(n=this.getPageCount()-e),this.api.getPageSizes(this.id,e,n).then((function(e){return Object.assign(t.info.pageSizes,e),e}))},t.prototype.getPageSize=function(t){var e=this.info.pageSizes;return e[t]?Object.assign({},e[t]):null},t.prototype.getPageSizesSync=function(){return this.info.pageSizes},t.prototype.updatePageSize=function(t,e,n){var o=this.info.pageSizes;o[t]&&(o[t].width=e,o[t].height=n)},t.prototype.insertPages=function(t){var e=this,n=t.destIndex,o=t.file,a=t.password,s=void 0===a?"":a,u=t.flags,c=void 0===u?0:u,l=t.layerName,f=void 0===l?"":l,d=t.startIndex,p=t.endIndex;if(!this.checkPermission(h.default.assemble))throw new Error("Permission error");return this.api.startImportPages(this.id,n,o,s,c,f,d,p).then((function(t){e.info.pageSizes={},e.info.pageCount+=t.length;var o=[];return t.forEach((function(t){var n=new r.default(t,e);o.push(n)})),e.pageCache.splice.apply(e.pageCache,[n,0].concat(o)),e.updatePageIndex(n,e.info.pageCount-1),e.engine.eventEmitter.emit(i.default.importPages,o),o}))},t.prototype.insertPagesToOther=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",r=arguments[7],i=arguments[8],a=[];return this.api.insertPagesToOther(this.id,t,file,password,otherFile,otherPassword,(function(t){var e=t.arrayBuffer;a.push(e)}),n,o,r,i).then((function(){return a}))},t.prototype.extractPages=function(t){if(-4!=this.checkPermission(4294967292))throw new Error("Permission error");var e=[];return this.api.extractPages(this.id,t,(function(t){var n=t.arrayBuffer;e.push(n)}),void 0,void 0).then((function(t){return e}))},t.prototype.getHeaderFooter=function(){var t=this;return this.HF?Promise.resolve(this.HF):this.api.getHeaderFooter(this.id).then((function(e){if(!e)return null;var n=t.HF=new g.default;return n.json=e,n}))},t.prototype.updateHeaderFooter=function(t){var e=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.HF=t,this.api.updateHeaderFooter(this.id,t.json).then((function(n){return e.HF.json=n,e.engine.eventEmitter.emit(i.default.headerFooterUpdated,t.range),e.engine.eventEmitter.emit(i.default.docModified,t.range),n}))},t.prototype.addHeaderFooter=function(t){var e=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.HF=t,this.api.addHeaderFooter(this.id,t.json).then((function(n){return e.HF.json=n,e.engine.eventEmitter.emit(i.default.headerFooterAdded,t.range),e.engine.eventEmitter.emit(i.default.docModified,t.range),n}))},t.prototype.removeHeaderFooter=function(){var t=this;if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return delete this.HF,this.api.removeHeaderFooter(this.id).then((function(e){return t.engine.eventEmitter.emit(i.default.headerFooterUpdated),t.engine.eventEmitter.emit(i.default.docModified),e}))},t.prototype.attchFile=function(t){if(!this.checkPermission(h.default.modify))throw new Error("Permission error");return this.api.attachFile(this.id,t).then((function(t){return t}))},t}();e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(315),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.page=n,this.api=n.api}return t.prototype.getId=function(){return this.id},t.prototype.findNext=function(){return this.api.textSearchFindNext(this.getId()).then((function(t){return t?new i.default(t):null}))},t.prototype.findPrev=function(){return this.api.textSearchFindPrev(this.getId()).then((function(t){return t?new i.default(t):null}))},t.prototype.destroy=function(){return this.api.textSearchDestroy(this.getId())},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(17)),r=a(n(139)),i=n(20);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));r.action=r.engine.actionFactory.createAction(n.action,o.doc,r.api,r.eventEmitter,r);var i=r.page.doc.getPDFForm();i&&i.mapFormControl(r.info.field,r);var a=r.getField(),s=a&&a.getControl(n.objectNumber);return a&&s&&!s.isEmpty()&&"display"in s.changes&&r.setDisplay(s.changes.display),r}return s(e,t),e.prototype.setDisplay=function(t,e){var n=this.info.flag;switch(t){case 0:n&=-2,n&=-3,n&=-33,n|=4;break;case 1:n&=-2,n&=-33,n|=6;break;case 2:n&=-2,n&=-5,n&=-3,n&=-33;break;case 3:n|=32,n|=4,n&=-3}return this.setFlagValue(n,e)},e.prototype.getObjNum=function(){return this.info.objectNumber},e.prototype.getFlags=function(){return-66&t.prototype.getFlags.call(this)},e.prototype.getAction=function(){return this.action},e.prototype.getRotation=function(){return this.info.rotation},e.prototype.getField=function(){var t=this.page.getPDFDoc().getPDFForm();return t&&t.getField(this.info.field)},e.prototype.getMKProperty=function(t){switch(t){case"borderColor":return this.info.MKBorderColor;case"fillColor":return this.info.fillColor;case"normalCaption":case"downCaption":case"rolloverCaption":return this.info[t]}},e.prototype.setMKProperty=function(t,e){switch(t){case"borderColor":this.info.MKBorderColor=e;break;case"fillColor":this.info.fillColor=e;break;case"normalCaption":case"downCaption":case"rolloverCaption":this.info[t]=e}return this.updateMKProperty(t,e)},e.prototype.updateMKProperty=function(t,e){var n=this.page,o=n.getPDFDoc();return this.api.updateMKProperty(o.getId(),n.getId(),this.getId(),t,e)},e.prototype.updateUI=function(t){this.render&&this.render(t)},e.prototype.setRenderNotifier=function(t){this.render=t},e.prototype.update=function(){var e=this;return t.prototype.update.call(this).then((function(t){var n=e.page.doc.getPDFForm();n&&n.getField(e.info.field).update()}))},e.prototype.getAdditionalAction=function(t){if(!this.engineActions)for(var e in this.engineActions={},this.info.AA)this.engineActions[e]=r.default.createAction(this.info.AA[e],this);return this.engineActions[t]?this.engineActions[t]:this.getField().getAction(t)},e.prototype.getAction=function(){return this.action},e.prototype.switchAS=function(){3==this.getField().getType()&&"Off"!=this.info.ApState||(1==this.info.ApStates.length&&"Off"!=this.info.ApStates[0]&&(this.info.ApStates[1]="Off"),this.info.ApStates[0]==this.info.ApState?this.info.ApState=this.info.ApStates[1]:this.info.ApState=this.info.ApStates[0],this.getField().setValue(this.info.ApState,this))},e.prototype.setAS=function(t,e){switch(this.getField().getType()){case 3:if(e){if(e!=this){var n=this.info.ApStates.indexOf(t);i.FieldFlag.inUnison(this.getField().getFlags())?this.info.ApState=-1==n?"Off":t:this.info.ApState="Off"}}else this.info.ApStates[1]!==t?this.info.ApState="Off":this.info.ApState=t;break;default:if(e!=this){var o=this.info.ApStates.indexOf(t);this.info.ApState=-1==o?"Off":t}}var r=this.page,a=r.getPDFDoc();return this.api.setWidgetAS(a.getId(),r.getId(),this.getId(),this.info.ApState)},e.prototype.getOnAS=function(){return"Off"!=this.info.ApStates[0]?this.info.ApStates[0]:this.info.ApStates[1]},e.prototype.getAS=function(){return this.info.ApState},e.prototype.getIconObjNum=function(t){switch(t){case 0:return this.info.normalIcon;case 1:return this.info.downIcon;case 2:return this.info.rollIcon}},e.prototype.setIconObj=function(t,e){var n=void 0;switch(e){case 0:n="normalIcon",this.info.normalIcon=t;break;case 1:n="downIcon",this.info.downIcon=t;break;case 2:n="rolloverIcon",this.info.rollIcon=t}return this.updateMKProperty(n,t)},e.prototype.setAction=function(t){this.info.action=t;var e=this.page;this.action=this.engine.actionFactory.createAction(t,e.doc,this.api,this.eventEmitter,this),this.api.setAction(e.doc.getId(),e.getId(),this.getId(),t)},e.prototype.getDAFontColor=function(){var t=this.info.DA.fontColor;return t||this.getField().getDAFontColor()},e.prototype.getAlignment=function(){return void 0!==this.info.alignment?this.info.alignment:this.getField().getAlignment()},e.prototype.getDefaultAppearance=function(){return Object.assign({},this.info.defaultAppearance)},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=g(n(18)),r=g(n(316)),i=g(n(317)),a=g(n(318)),s=g(n(319)),u=g(n(320)),c=g(n(321)),l=g(n(322)),f=g(n(323)),d=g(n(324)),p=g(n(325)),h=g(n(326));function g(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.createAction=function(t,e,n,g,y){if(t)switch(t.type){case"TypeURI":return new r.default(t,this,e,n,g,y);case"TypeLaunch":return new i.default(t,this,e,n,g,y);case"TypeNamed":return new a.default(t,this,e,n,g,y);case"TypeJavaScript":return new s.default(t,this,e,n,g,y);case"TypeSubmitForm":return new u.default(t,this,e,n,g,y);case"TypeResetForm":return new c.default(t,this,e,n,g,y);case"TypeImportData":return new l.default(t,this,e,n,g,y);case"TypeGoto":return new f.default(t,this,e,n,g,y);case"TypeHide":return new d.default(t,this,e,n,g,y);case"TypeGoToR":return new p.default(t,this,e,n,g,y);case"TypeGoToE":return new h.default(t,this,e,n,g,y);default:return new o.default(t,this,e,n,g,y)}},t}();e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=e.getQuadPointsFromRect=e.normalizeQuadPoints=void 0;var o,r=n(77),i=(o=r)&&o.__esModule?o:{default:o};e.normalizeQuadPoints=function(t){var e=t[0],n=t[1],o=t[2],r=t[3],a=new i.default;if(a.translate(e.x,e.y),a.rotate(Math.atan2(e.y-n.y,n.x-e.x)),a.transformPoint(o.x,o.y)[1]>0){var s=e;e=o,o=s,s=n,n=r,r=s}return[e,n,o,r]},e.getQuadPointsFromRect=function(t,e){var n=t.left,o=t.right,r=t.top,a=t.bottom;switch(e%4){case 0:return[{x:n,y:r},{x:o,y:r},{x:n,y:a},{x:o,y:a}];case 1:return[{x:o,y:r},{x:o,y:a},{x:n,y:r},{x:n,y:a}];case 2:return[{x:o,y:a},{x:n,y:a},{x:o,y:r},{x:n,y:r}];case 3:return[{x:n,y:a},{x:n,y:r},{x:o,y:a},{x:o,y:r}]}var s=new i.default,u=(n+o)/2,c=(r+a)/2;s.rotateAt(u,c,-radian);var l=s.transformRect(n,r,o,a),f=s.transformPoint(l[0],l[3]);f={x:f[0],y:f[1]};var d=s.transformPoint(l[2],l[3]);d={x:d[0],y:d[1]};var p=s.transformPoint(l[0],l[1]);p={x:p[0],y:p[1]};var h=s.transformPoint(l[2],l[1]);return[f,d,p,h={x:h[0],y:h[1]}]},e.debounce=function(t,e){var n=void 0;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(o,r)}),t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.json=e||{contentFormats:{},margin:{left:72,right:36,top:72,bottom:36},textSize:12,textColor:4278190080,hasTextShrinked:!1,hasFixedSized:!1,startPageNumber:1}}return t.prototype.getContent=function(t){return this.json.contentFormats[t]||this.json.contents[t]},t.prototype.setFont=function(t){this.json.fontId=t},t.prototype.setContentFormat=function(t,e){this.json.contentFormats[t]=e},t.prototype.setRange=function(t){if(t.start<1||t.end<1)throw new Error("page range is wrong.");if(t.filter<0||t.filter>2)throw new Error("Wrong filter.");this.json.range=t},t.prototype.setMargin=function(t){this.json.margin=t},t.prototype.setTextSize=function(t){this.json.textSize=t},t.prototype.setTextColor=function(t){this.json.textColor=t},t.prototype.enableTextShrinked=function(t){this.json.hasTextShrinked=t},t.prototype.enableFixedSizedForPrint=function(t){this.json.hasFixedSized=t},t.prototype.setStartDisplayingPage=function(t){this.json.startPageNumber=t},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(143);var i=k(n(1)),a=k(n(144)),s=k(n(167)),u=k(n(23)),c=(k(n(90)),k(n(2))),l=k(n(46)),f=n(11),d=n(173),p=k(n(174)),h=k(n(176)),g=k(n(236)),y=k(n(248)),v=k(n(281)),m=k(n(283)),b=k(n(285)),w=k(n(289)),P=k(n(291)),A=k(n(127)),_=k(n(292)),C=k(n(293)),D=k(n(295)),S=k(n(300)),R=n(0),E=k(n(129)),O=n(306);n(307);var I=n(31),x=k(n(74)),M=k(n(10)),T=k(n(28)),F=k(n(42));function k(t){return t&&t.__esModule?t:{default:t}}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var V=function(){},B=function(){return-1},N=void 0,L=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.preloadJR,i=void 0===o||o,a=(n.preloadSR,n.libPath),u=n.jr,f=n.i18n,S=n.i18nOptions,R=n.eventEmitter,M=void 0===R?new l.default:R,T=n.minScale,F=void 0===T?.1:T,k=n.maxScale,N=void 0===k?10:k,L=n.defaultScale,U=void 0===L?"fitWidth":L,q=n.preloadedPages,H=void 0===q?1:q,W=n.scaleFrequency,K=void 0===W?4:W,Y=n.tileSize,G=void 0===Y?3600:Y,z=n.StateHandlers,$=void 0===z?[]:z,J=n.customs,Q=void 0===J?{}:J,Z=n.keymap,X=void 0===Z?{}:Z,tt=n.Viewmodes,et=void 0===tt?[]:tt,nt=n.enableJS,ot=n.enableSafeMode,rt=n.stateHandlerConfig,it=n.watermarkConfig,at=n.actionOptions,st=void 0===at?{}:at,ut=n.defaultViewMode,ct=void 0===ut?"continuous-view-mode":ut,lt=n.snapshotServer,ft=void 0===lt?new A.default({uploadSnapshotAPIPath:"snapshot/upload"}):lt,dt=n.highPerformance,pt=void 0===dt?"object"===("undefined"==typeof WebAssembly?"undefined":r(WebAssembly)):dt,ht=n.defaultKeyboardEventBinder,gt=void 0===ht?I.VIEWER_BINDER:ht,yt=n.defaultAnnotConfig;j(this,t),-1!==(a=a?(0,d.isUrl)(a)?a:(0,d.urlJoin)(location.href,a):(0,d.getCurrentPath)()).indexOf("?")&&(a=a.replace(/\?.*$/,"")),-1!==a.indexOf("#")&&(a=a.replace(/#.*$/,"")),"/"!==a[a.length-1]&&(a+="/"),this.libPath=a;var vt=!0,mt=!0,bt=10,wt="jr-engine/gsdk";(u=u||{}).licenseKey=u.licenseKey||"",u.licenseSN=u.licenseSN||"",u.l=u.l||"";var Pt=u.workerPath||"";Pt?(0,d.isUrl)(Pt)||(Pt=(0,d.urlJoin)(a,Pt)):Pt=a;var At=u.enginePath;u.workerPath=Pt,u.enginePath=At,u.enginePath=u.enginePath||wt,At?(0,d.isUrl)(At)||(At=(0,d.urlJoin)(a,At)):At=a+wt,u.enginePath=At;var _t="../external/brotli",Ct=u.fontPath;Ct?(0,d.isUrl)(Ct)||(Ct=(0,d.urlJoin)(a,Ct)):Ct=(0,d.urlJoin)(a,_t),u.fontPath=Ct,this.snapshotServer=ft;var Dt=(S=(0,_.default)({initOption:{ns:"viewer_"}},S)).path;Dt=Dt?(0,d.isUrl)(Dt)?Dt:(0,d.urlJoin)(a,Dt):a+"locales",S.absolutePath=S.absolutePath||Dt,this.i18n=f||(0,s.default)(S),i&&this.getWebPDFJR(),this.customs=Object.assign({closeDocBefore:V,closeDocAfter:V,getDocPermissions:B},Q);var St=this;this.actionOptions=Object.assign({remoteGotoActionInit:function(){var t=window.opener;t&&(t.postMessage({isReady:!0},window.location.origin),window.addEventListener("message",(function(t){if(t.source!==window){var e=t.data,n=e.foxitSdkActionType,o=e.foxitSdkActionUrl,r=e.foxitSdkActionFileName,i=e.top,a=(e.bottom,e.left),s=(e.right,e.pageIndex),u=e.zoomFactor,l=e.zoomMode;"TypeGoToR"===n&&St.openPDFByHttpRangeRequest({range:{url:o}},{fileName:r}).then((function(){M.once(c.default.renderPageSuccess,(function(){switch(l){case"ZoomXYZ":var t=u;0===t?St.goToPage(s,i,a,0!==i):St.zoomTo(t,!1).then((function(){St.goToPage(s,i,a,0!==i)}));break;case"ZoomFitHorz":St.zoomTo("fitWidth",!1).then((function(){St.goToPage(s,i,a,0!==i)}));break;case"ZoomFitPage":St.zoomTo("fitHeight",!1).then((function(){St.goToPage(s,i,a,0!==i)}))}}))}))}}),!1))}},st),this.keyboard=new b.default;var Rt=(0,w.default)();for(var Et in Rt.forEach((function(t){var n=t.binder;t.active;e.keyboard.addEventBinder(n)})),Rt.forEach((function(t){var n=t.binder,o=t.deps;t.depToDefault&&gt instanceof x.default&&n.attach(gt),o&&o.map((function(t){return e.keyboard.getBinder(t)})).forEach((function(t){return n.attach(t)}))})),P.default){var Ot=P.default[Et];this.keyboard.registerKeybinding(Ot.bindTo,Et,Ot.shortcut)}for(var It in X)this.keyboard.registerKeybinding(It,X[It]);"string"==typeof gt?this.keyboard.setDefaultBinderName(gt):gt instanceof x.default&&this.keyboard.setDefaultBinderName(gt.name),this.keyboard.activeDefaultBinder(),this.viewModeManager=new p.default(this);for(var xt=0,Mt=et.length;xt<Mt;xt++)this.registerViewMode(et[xt]);this.defaultAnnotConfig=yt||V,ot=void 0===ot||ot,this.config={jr:u,minScale:F,maxScale:N,defaultScale:U,tileSize:G,enableJS:nt,enableSafeMode:ot,defaultViewMode:ct,stateHandlerConfig:rt,watermarkConfig:it,preloadedPages:H,scaleFrequency:K,progressiveRendering:vt,highPerformance:pt,preloadPageSize:mt,sizeCount:bt},this.eventEmitter=M,this.store=new O.Store,this.mementoManager=new D.default(this),this.annotManager=new h.default(this),this.actionManager=new g.default(this),this.JSEngine=new y.default(this),this.inkSignManager=new m.default(this),this.viewerUI=arguments[0].viewerUI||new E.default;var Tt=this.stateHandlerManager=new v.default(this);this.viewerUI.prepare(this),this.customRenderManager=new C.default(this);for(var Ft=0,kt=$.length;Ft<kt;Ft++)Tt.register($[Ft]);this.annotsEventMaps=[],this._annotMouseEventCallback=this._annotMouseEventCallback.bind(this),this._runtimeColor=["RGB",0,0,1],this._highlightControls=!0}return t.prototype.getDefalutAnnotConfig=function(){return this.webPDFJR&&this.webPDFJR.getDefaultAnnotConfig()},t.prototype.setDefaultAnnotConfig=function(t){this.webPDFJR&&this.webPDFJR.setDefaultAnnotConfig(t)},t.prototype._annotMouseEventCallback=function(t){this.annotsEventMaps.map((function(e){e&&e(t)}))},t.prototype.startListenAnnotMouseEvent=function(){this.cleanListenAnnotMouseEvent(),document.addEventListener("mouseup",this._annotMouseEventCallback,{capture:!0})},t.prototype.stopListenAnnotMouseEvent=function(){this.cleanListenAnnotMouseEvent(),document.removeEventListener("mouseup",this._annotMouseEventCallback)},t.prototype.addListenAnnotMouseEvent=function(t){this.annotsEventMaps.push(t)},t.prototype.cleanListenAnnotMouseEvent=function(){this.annotsEventMaps=[]},t.prototype.changeLanguage=function(t){var e=this;return new Promise((function(n,o){e.i18n.changeLanguage(t,(function(t){t?o(t):n()}))}))},t.prototype.takeSnapshot=function(t,e,n,o,r){var i=this.getPDFPageRender(t);if(!i)throw new Error("page not found: "+t);return i.getSnapshot(e,n,o,r)},t.prototype.uploadImage=function(t){var e=this;return this.snapshotServer.uploadImage(t).catch((function(t){return console.warn(e.i18n.t("viewer_:error.snapshotServer")),Promise.reject(t)}))},t.prototype.copySnapshot=function(t){var e=document.createElement("img");e.src=t;var n=document.createElement("div");if(n.appendChild(e),n.classList.add("fv__ui-canvas-mirror"),document.body.appendChild(n),document.body.createControlRange){var o=document.body.createControlRange();o.addElement(e),o.execCommand("copy"),document.body.removeChild(n)}else{var r=window.getSelection();r.removeAllRanges();var i=document.createRange();i.selectNodeContents(n),r.addRange(i);try{document.execCommand("copy",!1,null)}catch(t){}document.body.removeChild(n)}},t.prototype.getKeyboardEventBinder=function(t){var e=this.keyboard.getBinder(t);if(!e)throw new Error("event binder not found error: "+t);return e},t.prototype.switchKeyboardEventBinder=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.keyboard.activeBinder(t,e)},t.prototype.addKeyboardShortcutEventListener=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getDefaultKeyboardEventBinder(),o=void 0;return(o=n instanceof x.default?n:this.keyboard.getBinder(n))?o.on(t,e):V},t.prototype.getDefaultKeyboardEventBinder=function(){return this.keyboard.getDefaultKeyboardEventBinder()},t.prototype.getWebPDFJR=function(){var t=this;if(this.webPDFJRPromise)return this.webPDFJRPromise;var e=(0,u.default)();return Promise.resolve().then(n.t.bind(null,134,7)).then((function(n){var o=new n.default(t.config.jr,t.eventEmitter);t.webPDFJR=o;var r="viewer_:error.initEngine.c2";return o.setDefaultAnnotConfig(t.defaultAnnotConfig),o.init().then((function(n){if(!n)return t.eventEmitter.emit(c.default.jrLicenseSuccess),e.resolve(o);var i=location.href,a=!0;if(n.h){a=!1;for(var s=n.h,u=s.length;u--;){var l=s[u];if(new RegExp(l).test(i)){a=!0;break}}}if(!a)return t.viewerUI.alert(r),void e.reject(new Error("failed to initialize WebPDF JR Engine"));var f=Date.now(),d=n.b;if(d&&!(a=f>d))return t.viewerUI.alert(r),void e.reject(new Error("failed to initialize WebPDF JR Engine"));var p=n.e;return p&&!(a=f<p)?(t.viewerUI.alert(r),void e.reject(new Error("failed to initialize WebPDF JR Engine"))):a?(t.eventEmitter.emit(c.default.jrLicenseSuccess),e.resolve(o)):(t.viewerUI.alert(r),void e.reject(new Error("failed to initialize WebPDF JR Engine")))}),(function(n){t.viewerUI.alert(t.i18n.t(["viewer_:error.initEngine.c1",r][n-1]||"viewer_:error.c-1")),e.reject(n)})),o})),this.webPDFJRPromise=e.promise},t.prototype.setIcons=function(t){return this.getWebPDFJR().then((function(e){e.setIcons(t)}))},t.prototype.addIcon=function(t){return this.getWebPDFJR().then((function(e){e.addIcon(t)}))},t.prototype.removeIcon=function(t,e,n){return this.getWebPDFJR().then((function(o){o.removeIcon(t,e,n)}))},t.prototype.init=function(t){this.$ui=(0,i.default)(t),this.pdfViewerRender=new a.default(this.$ui,this.viewModeManager.get(this.config.defaultViewMode),this)},t.prototype.redraw=function(t){var e=this;if(!this.pdfViewerRender||!this.pdfViewerRender.pdfDocRender)return Promise.resolve(!1);try{var n=this.pdfViewerRender.pdfDocRender.pagesRender;return t&&n.setRenderFlags(7),n.renderVisiblePages().then((function(){})).finally((function(){e.eventEmitter.emit(c.default.fitWidthResizeViewport)}))}catch(t){return Promise.reject()}},t.prototype.openPDFByFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];return t.name&&!n.fileName&&(n.fileName=t.name),this.close().then((function(){e.eventEmitter.emit(c.default.beforeOpenFile);var t=void 0;return t=o?Promise.resolve(o):e.getWebPDFJR(),e.pdfViewerRender.rendering(),t}),(function(){return Promise.reject({error:-3})})).then((function(e){return e.getPDFDocByFile(t,n)})).then((function(t){return e._reopenPDFDoc(t,n)}),(function(t){return e.eventEmitter.emit(c.default.openFileFailed,t),Promise.reject(t)})).finally((function(){e.pdfViewerRender.rendered()}))},t.prototype.openPDFByHttpRangeRequest=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fileName:""},o=t.range.url;if(!n.fileName&&o.endsWith(".pdf")){var r=o.lastIndexOf("/"),i=o.substring(r+1);n.fileName=i}if(!/^\w+\:\/\/.*/.test(o)){var a=location.pathname.replace(/\/[^\/]+$/,"/");t.range.url=(0,d.resolvePath)(a,o)}return this.close().then((function(){e.eventEmitter.emit(c.default.beforeOpenFile);var t;return t=e.getWebPDFJR(),e.pdfViewerRender.rendering(),t}),(function(){return Promise.reject({error:-3})})).then((function(e){return e.getPDFDocByHttpRangeRequest(t,n)})).then((function(t){return e._reopenPDFDoc(t,n)}),(function(t){return e.eventEmitter.emit(c.default.openFileFailed,t),Promise.reject(t)})).finally((function(){e.pdfViewerRender.rendered()}))},t.prototype.createNewDoc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled.pdf",e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{height:842,width:595};return this.close().then((function(){return e.getWebPDFJR()}),(function(){return Promise.reject({error:-3})})).then((function(e){return e.createNewDoc(t,n,o)})).then((function(n){return e.reopenPDFDoc(n,{password:"",fileName:t})}))},t.prototype.reopenPDFDoc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.eventEmitter.emit(c.default.beforeOpenFile),this._reopenPDFDoc(t,e)},t.prototype._reopenPDFDoc=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startListenAnnotMouseEvent();var i=!1,a=!1;return t.parse(n).then((function(t){e.currentPDFDoc=t,e.eventEmitter.once(c.default.renderPageSuccess,(function(){a=!0}));var n=e.pdfViewerRender.renderDoc(t);return e.eventEmitter.emit(c.default.openFileSuccess,t),i=!0,Promise.all([t,n])}),(function(n){e.currentPDFDoc=null;var o={error:n&&n.code,pdfDoc:t,encryptDict:n&&n.encryptDict};return e.eventEmitter.emit(c.default.openFileFailed,o),Promise.reject(o)})).then((function(t){var n=o(t,1)[0];return e.eventEmitter.emit(c.default.renderFileSuccess,n),n}),(function(n){if(i&&a)return e.eventEmitter.emit(c.default.renderFileSuccess,t),t;e.eventEmitter.emit(c.default.renderFileFailed,t);var o={error:-1,pdfDoc:t};try{var s=void 0,u=void 0;"number"===(void 0===n?"undefined":r(n))?s=n:"number"===r(n.error)?(s=n.error,u=n.encryptDict):s=n,o={error:s,pdfDoc:t,encryptDict:u}}catch(t){}return Promise.reject(o)}))},t.prototype.close=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.customs.closeDocBefore,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.customs.closeDocAfter;return this.stopListenAnnotMouseEvent(),this.currentPDFDoc?(this.eventEmitter.emit(c.default.willCloseDocument),Promise.resolve(e()).then((function(e){if(!1===e)return Promise.reject();t.currentPDFDoc=null,t.pdfViewerRender.closeOldDocRender();var n=void 0;try{n=t.pdfViewerRender.pdfDocRender}catch(t){}return n?(n.hidden(),Promise.resolve(t.pdfViewerRender.closeOldDocRender())):Promise.resolve()})).then((function(t){if(!1!==t)return n()}))):Promise.resolve()},t.prototype.destroy=function(){var t=this;return this.close().then((function(){t.keyboard.destroy(),t.getWebPDFJR().then((function(t){t&&t.api.workerPromise.worker.terminate()}))}))},t.prototype.zoomTo=function(t){try{return this.setActiveElement(),this.pdfViewerRender.zoomTo(t)}catch(e){return Promise.reject(t)}},t.prototype.visibleLayoutZoom=function(t){try{return this.pdfViewerRender.pdfDocRender.pagesRender.renderVisiblePagesLayout(t)}catch(t){return Promise.resolve()}},t.prototype.zoom=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25;try{return this.pdfViewerRender.getScaleRatio().then((function(n){var o=t.config.minScale,r=t.config.maxScale;n===o&&Math.floor(o/e)!==o/e&&(n=Math.floor(n/e)*e);var i=Math.max(o,Math.min(r,n+e));return i=o+Math.round((i-o)/e)*e,i=Math.max(o,Math.min(r,i)),t.zoomTo(i)}))}catch(t){return Promise.reject(scale)}},t.prototype.goToPage=function(t,e,n){var o=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this.pdfViewerRender)return Promise.reject("PDFViewer has not been initialized completely!");var i=this.getPDFPageRender(t);return i?r&&"number"!=typeof e?i.getPDFPage().then((function(i){return e=i.getHeight(),o.pdfViewerRender.goToPage(t,e,n,r)})):this.pdfViewerRender.goToPage(t,e,n,r):Promise.reject('The page with index "'+t+'" does not exists or the document has not been opened!')},t.prototype.setLayerNodeVisible=function(t,e){return this.pdfViewerRender&&this.pdfViewerRender.setLayerNodeVisible(t,e)},t.prototype.setEnableJS=function(t){this.JSEngine.setEnableJS(t,this.currentPDFDoc),this.eventEmitter.emit(c.default.changeEnableJS,t)},t.prototype.getEnableJS=function(){return this.JSEngine.getEnableJS()},t.prototype.setSafeReadingMode=function(t){this.config.enableSafeMode=t},t.prototype.getSafeReadingMode=function(){return this.config.enableSafeMode},t.prototype.getSmartScale=function(t){var e=this.config,n=e.scaleFrequency;return 0===n?t+=f.dpr-1:t=Math.ceil((t+f.dpr-1)*n)/n,Math.min(Math.max(t,e.minScale),e.maxScale)},t.prototype.controlStateSwitch=function(t){this.pdfViewerRender&&this.pdfViewerRender.controlStateSwitch(t)},t.prototype.getStateHandlerManager=function(){return this.stateHandlerManager},t.prototype.getInkSignManager=function(){return this.inkSignManager},t.prototype.getViewModeManager=function(){return this.viewModeManager},t.prototype.getMementoManager=function(){return this.mementoManager},t.prototype.getEventEmitter=function(){return this.eventEmitter},t.prototype.getCurrentPDFDoc=function(){return this.currentPDFDoc},t.prototype.getPDFViewerRender=function(){try{return this.pdfViewerRender}catch(t){return null}},t.prototype.getDeviceCurrentPosition=function(){for(var t=this.getPDFDocRender(),e=t.$container.find(".fv__pdf-view-mode-item"),n=t.viewerRender.scrollWrap,o=n.getScrollTop(),r=n.getScrollLeft(),a=0,s=0,u=0,c=0;c<e.length;c++){var l=e[c],f=(0,i.default)(l).find(".fv__pdf-page-layout"),d=f.width(),p=f.height(),h=l.offsetTop,g=h+p,y=l.offsetLeft;if(g>o&&y+d>r){a=c,u=o-h,s=r-y;break}}return{pageIndex:a,left:s,top:u}},t.prototype.getPDFDocRender=function(){try{return this.pdfViewerRender.pdfDocRender||null}catch(t){return null}},t.prototype.getPDFPageRender=function(t){try{return this.pdfViewerRender.pdfDocRender.getPDFPageRender(t)||null}catch(t){return null}},t.prototype.getAnnotRender=function(t,e){try{return this.getPDFPageRender(t).getAnnotRender(e)||null}catch(t){return null}},t.prototype.getPDFPageRenderAsync=function(t){try{return this.pdfViewerRender.pdfDocRender.getPDFPageRender(t)}catch(t){return null}},t.prototype.getAnnotRenderAsync=function(t,e){try{return this.getPDFPageRenderAsync(t).getAnnotRender(e)}catch(t){return null}},t.prototype.setActiveElement=function(t){var e=this;if(t&&t.annot&&t.annot.isGrouped&&t.annot.isGrouped()){var n=!1;if(t.annot.groupElements.map((function(t){e.getAnnotRender(t.getPDFPage().getIndex(),t.getId()).component==e.activeElement&&(n=!0)})),n)return}else if(this.activeElement==t)return;var o=this.activeElement;o&&(o&&o.annot&&o.annot.isGrouped&&o.annot.isGrouped()?o.annot.groupElements.map((function(t){var n=e.getAnnotRender(t.getPDFPage().getIndex(),t.getId()),o=n&&n.component;o&&o.isActive&&o.unActive&&o.unActive(),o&&o.deactive&&o.deactive()})):(o.isActive&&o.unActive&&o.unActive(),o.deactive&&o.deactive())),this.activeElement=t,this.eventEmitter.emit(c.default.activeElementChanged,t,o)},t.prototype.getAnnotManager=function(){return this.annotManager},t.prototype.registerMatchRule=function(t){this.annotManager.registerMatchRule(t)},t.prototype.setUserName=function(t){return this.getWebPDFJR().then((function(e){return e.setUserName(t)}))},t.prototype.getUserName=function(t){return(t?Promise.resolve(t):this.getWebPDFJR()).then((function(t){return t.getUserName()}))},t.prototype.setDynamicInfoFormula=function(t,e,n){return(n?Promise.resolve(n):this.getWebPDFJR()).then((function(n){return n.setDynamicInfoFormula(t,e)}))},t.prototype.printPDFDocument=function(t){var e=this,n=(t.asImage,t.endIndex),o=void 0===n?this.currentPDFDoc.getPageCount()-1:n,r=t.printType,i=void 0===r?["page"]:r,a=(t.reverse,t.shrinkToFit,t.silent,t.startIndex),s=void 0===a?0:a,c=(t.ui,t.rangeType),l=t.total,f=void 0===l?this.currentPDFDoc.getPageCount():l,d=t.fromToArray,p=t.dpi,h=void 0===p?96:p,g=this.currentPDFDoc;if(!g.checkPermission(M.default.print||M.default.printHigh))throw new Error("Permission error");o>=this.currentPDFDoc.getPageCount()&&(o=this.currentPDFDoc.getPageCount()-1),this.printComponent=this.printComponent||new S.default(this),this.printComponent.out();var y=[];this.printComponent.setTotal(f),this.printComponent.showProcess();var v=0,m=this.pdfViewerRender.pdfDocRender.getFormRender(),b=m&&m.getFormatedData("display"),w=h/96,P=function(t){var n=(0,u.default)();return e.printComponent.createPagePrintHtml(t),g.getPageByIndex(t).then((function(o){var r=o.getWidth(),a=o.getHeight(),s=void 0;if(r>a){s=90;var u=r;r=a,a=u}else s=0;var c=e.printComponent.getScale(r,a)*w;o.getPageBitmap(c,s,{x:0,y:0,width:r*c,height:a*c},i,"print").then((function(o){var r=o.buffer,i=o.width,a=o.height,s=o.image;if(s)return e.printComponent.insertImageByIndex(t,URL.createObjectURL(s)),++v,e.printComponent.updateProcess(v),void n.resolve();var u=document.createElement("canvas");u.width=i,u.height=a;var c=u.getContext("2d"),l=c.createImageData(i,a);l.data.set(new(Uint8ClampedArray||Uint8Array)(r)),c.putImageData(l,0,0),u.toBlob((function(o){e.printComponent.insertImageByIndex(t,URL.createObjectURL(o)),++v,e.printComponent.updateProcess(v),n.resolve()}),"image/png")}))})),n.promise},A=Promise.resolve();return m&&(A=g.getPDFForm().setFieldsValue(b,!0)),A.then((function(){if("assign"===c)for(var t=0;t<d.length;t++)if(d[t][0]===d[t][1])y.push(P(d[t][0]-1));else for(var n=d[t][0];n<=d[t][1];n++)y.push(P(n-1));else{o>e.currentPDFDoc.getPageCount()-1&&(o=e.currentPDFDoc.getPageCount()-1);for(var r=s;r<=o;r++)y.push(P(r))}return Promise.all(y)})).then((function(){if(m)return b=m.getFormatedData("value"),g.getPDFForm().setFieldsValue(b,!1)})).then((function(){e.printComponent.hideProcess(),e.printComponent.print()}))},t.prototype.highlightControls=function(){return this._highlightControls},t.prototype.getDisplayHighlightColor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML";return(0,R.colorConvertor)(this._runtimeColor,e,t)},t.prototype.setRuntimeHighlight=function(t){return this.pdfViewerRender.pdfDocRender&&this.pdfViewerRender.pdfDocRender.formRender&&this.pdfViewerRender.pdfDocRender.formRender.setRuntimeHighlight(t),this._highlightControls=t},t.prototype.setRuntimeHighlightColor=function(t){return this.pdfViewerRender.pdfDocRender&&this.pdfViewerRender.pdfDocRender.formRender&&this.pdfViewerRender.pdfDocRender.formRender.setRuntimeHighlightColor(t),this._runtimeColor=t},t.prototype.getStore=function(){return this.store},t.prototype.setJRFontMap=function(t){return this.getWebPDFJR().then((function(e){return e.setFontMap(t)}))},t.prototype.setJRWatermarkFontMap=function(t){return this.getWebPDFJR().then((function(e){return e.setWatermarkFontMap(t)}))},t.prototype.pasteAnnot=function(t,e){var n=this,r=this.currentPDFDoc;t=t.then((function(t){return r.getPageByIndex(e.page)})).then((function(t){return t.getAnnotsByIdArray([e.annot])})).then((function(t){if(t.length>0)return n.getPDFDocRender().getViewBoxCenter().then((function(e){var n=o(e,2),r=n[0],i=n[1];return i={x:i[0],y:i[1]},r.annots.forEach((function(t){var e=t.getRect();e.left-2<i.x&&i.x<e.right+2&&e.bottom-2<i.y&&i.y<e.top+2&&(i.x+=5,i.y-=5)})),r.pasteAnnot(t[0],i)}))})).then((function(t){return n.eventEmitter.emit(c.default.addAnnotSuccess,t[0]),t}))},t.prototype.pasteImage=function(t,e){var n=this;window.URL=window.URL||window.webkitURL;var r=window.URL.createObjectURL(e),a=(0,i.default)("<img style='opacity:0' />");a.on("load",(function(e){t=t.then((function(t){return n.getPDFDocRender().getViewBoxCenter(!1)})).then((function(t){var e=o(t,2),i=e[0],s=e[1],c={left:s[0],top:s[1],right:s[0]+a.width(),bottom:s[1]+a.height()};c=i.reverseDeviceRect(c,n.pdfViewerRender.pdfDocRender.getPDFPageRender(i.getIndex()).scale);var l=new XMLHttpRequest;l.open("get",r),l.responseType="arraybuffer";var f=(0,u.default)();return l.onloadend=function(t){return f.resolve(l.response)},l.send(),Promise.all([i,f.promise,c])})).then((function(t){var e=o(t,3),n=e[0],r=e[1],i=e[2];return n.addImage(r,i)})).then((function(t){window.URL.revokeObjectURL(r),a.remove()}))})),a.attr("src",r),(0,i.default)("body").append(a)},t.prototype.paste=function(t){var e=this;t||(t=[{type:"string",value:N}]);var n=Promise.resolve();t.forEach((function(t){switch(t.type){case"string":try{var r=JSON.parse(t.value);if(r.doc&&r.annot)return e.pasteAnnot(n,r);r.doc&&r.graphicObject&&e.currentPDFDoc.id==r.doc&&(n=n.then((function(t){return e.getPDFDocRender().getViewBoxCenter()})).then((function(t){var e=o(t,2),n=e[0];e[1];return n.pasteGraphicObject(r.graphicObject,r.page,{})})))}catch(r){n=n.then((function(t){return e.getPDFDocRender().getViewBoxCenter()})).then((function(e){var n=o(e,2),r=n[0],i=n[1];return r.addGraphicsObject({fontSize:12,weight:400,italic:!1,fillColor:4278190080,text:t.value,font:{standardId:0},originPosition:{x:i[0],y:i[1]},type:1})}))}break;case"file":var i=t.value;if(!i)return;/^image.*/.test(i.type)?e.pasteImage(n,i):n=n.then((function(n){return e.currentPDFDoc.attachFile(t.blob)}))}}))},t.prototype.copy=function(t){if(t||(t=this.activeElement),t instanceof T.default){var e=t.annot.getType();if("strikeout"===e||"highlight"===e||"squiggly"===e||"underline"===e||"redact"===e||"caret"===e||"screen"===e||"sound"===e)return;var n=t.getPDFPage(),o=JSON.stringify({page:n.getIndex(),annot:t.getId(),doc:n.getPDFDoc().getId()});return N=o,void(0,f.copyText)(o)}if(t.graphicsObject&&t.graphicsObject instanceof F.default){var r=(t=t.graphicsObject).getPDFPage(),i=JSON.stringify({page:r.getIndex(),graphicObject:t.getId(),doc:r.getPDFDoc().getId()});return N=i,void(0,f.copyText)(i)}},t.prototype._setSaveBefore=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;this._saveBefore=t},t}();e.default=L},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n(145)),r=c(n(79)),i=c(n(149)),a=c(n(2)),s=c(n(89)),u=c(n(56));function c(t){return t&&t.__esModule?t:{default:t}}var l=(0,o.default)(),f=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=t.getDefaultName(),this.pdfViewer=o,this.ViewMode=n,this.$ui=e,this.scrollWrap=new(this.pdfViewer.customs.ScrollWrap||s.default)(this),e.addClass("fv__pdf-viewer").html(l),this.$rendering=e.find(".fv__pdf-viewer-rendering"),this.$container=e.find(".fv__pdf-viewer-container"),this.pdfViewerRendering=new(o.customs.PDFViewerRendering||r.default)(this.$rendering[0],this),(this.handler=new(o.customs.PDFViewerHandler||u.default)(e.find(".fv__pdf-viewer-handler-container"),this)).active(),this.oldPdfDocRenders=[]}return t.getDefaultName=function(){return"pdfViewerRender"},t.prototype.setViewMode=function(t){var e=this;if(t!==this.ViewMode){var n=this.ViewMode;this.ViewMode=t,this.pdfViewer.eventEmitter.emit(a.default.startChangeViewMode,t,n),this.pdfDocRender&&this.pdfDocRender.setViewMode(t).then((function(){e.pdfViewer.eventEmitter.emit(a.default.changeViewModeSuccess,t,n)}),(function(){e.pdfViewer.eventEmitter.emit(a.default.changeViewModeFailed,t,n)}))}},t.prototype.getViewMode=function(){return this.ViewMode},t.prototype.rendering=function(){this.$ui.addClass("fv__view-rendering"),this.pdfViewerRendering.rendering()},t.prototype.rendered=function(){this.$ui.removeClass("fv__view-rendering"),this.pdfViewerRendering.rendered()},t.prototype.renderDoc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pdfViewer.config.defaultScale,n=new i.default(this.$container,t,this);return this.pdfDocRender=n,this.oldPdfDocRenders.push(n),this.rendered(),n.render(e)},t.prototype.closeOldDocRender=function(){for(var t,e=[],n=this.oldPdfDocRenders,o=n.length;o--;)e[o]=((t=n[o]).hidden(),t.destroy()),n.splice(o,1);return Promise.all(e).catch((function(){}))},t.prototype.bindEvent=function(){},t.prototype.zoomTo=function(t){try{return this.pdfDocRender.zoomTo(t)}catch(e){return Promise.reject(t)}},t.prototype.goToPage=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.pdfDocRender.goToPage(t,{x:n,y:e},o)},t.prototype.zoomAt=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};if(!this.pdfDocRender)throw new Error("No PDF files are currently open");return this.getScaleRatio().then((function(o){return t.zoomTo(e).then((function(){return t.getScaleRatio().then((function(e){var r=e/o,i=n.x*(r-1),a=n.y*(r-1);t.scrollWrap.scrollBy(i,a)}))}))}))},t.prototype.setLayerNodeVisible=function(t,e){return this.pdfDocRender?this.pdfDocRender.setLayerNodeVisible(t,e):Promise.reject(scale)},t.prototype.getScaleRatio=function(){return this.pdfDocRender.getScaleRatio()},t}();e.default=f},function(t,e,n){n(5);t.exports=function(t){"use strict";t=t||{};return'<div class="fv__pdf-viewer-layout">\r\n    <div class="fv__pdf-viewer-rendering"></div>\r\n    <div class="fv__pdf-viewer-container"></div>\r\n    <div class="fv__pdf-viewer-handler-container"></div>\r\n</div>','<div class="fv__pdf-viewer-layout">\r\n    <div class="fv__pdf-viewer-rendering"></div>\r\n    <div class="fv__pdf-viewer-container"></div>\r\n    <div class="fv__pdf-viewer-handler-container"></div>\r\n</div>'}},function(t,e,n){"use strict";(function(e){
/*! art-template@runtime | https://github.com/aui/art-template */
var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},o=Object.create(n),r=/["&'<>]/;o.$escape=function(t){return function(t){var e=""+t,n=r.exec(e);if(!n)return t;var o="",i=void 0,a=void 0,s=void 0;for(i=n.index,a=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}a!==i&&(o+=e.substring(a,i)),a=i+1,o+=s}return a!==i?o+e.substring(a,i):o}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},o.$each=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e(t[n],n);else for(var r in t)e(t[r],r)},t.exports=o}).call(this,n(147))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports='<div class="fv__rendering-container">\r\n    <img class="fv__rendering-svg" src="'+n(80)+'">\r\n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=g(n(1)),a=g(n(150)),s=g(n(151)),u=(g(n(23)),g(n(86))),c=g(n(87)),l=n(7),f=g(n(2)),d=(g(n(165)),g(n(24))),p=(g(n(26)),g(n(56)),g(n(88))),h=g(n(166));function g(t){return t&&t.__esModule?t:{default:t}}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var v=function(){},m=w("hand"),b=(w("annot"),function(t){function e(n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));s.name="pdfDocRender",s.$ui=n,s.doc=o,s.viewerRender=r,s.ViewMode=r.ViewMode;var d=s.pdfViewer=r.pdfViewer,p=(0,i.default)(a.default);p[0].id=o.id,n.append(p),s.$doc=p,s.$rendering=p.find(".fv__pdf-doc-rendering"),s.$container=p.find(".fv__pdf-doc-container"),s.pdfDocRendering=new(d.customs.PDFDocRendering||u.default)(s.$rendering[0],s),s.docCustomRender=new(d.customs.DocCustomRender||c.default)(p.find(".fv__pdf-doc-custom-container")[0],s),s.zoomToTaskExecutor=new l.DebounceAsyncTaskExecutor,s.bindEvent(),s.controlStateClass=m,s.$container.addClass(m),s.handlerInit(p.find(".fv__pdf-doc-handler-container")),s.currentPageIndex=0,s.watermarkConfig=d.config.watermarkConfig;var h=s.customPermission_=d.customs.getDocPermissions||function(){return-1};o.setCustomPermission("standard",h),h=d.customs.getAdditionalPerm||function(){return-1},o.setCustomPermission("additional",h);var g=d.eventEmitter;return g.on(f.default.annotationAppearanceUpdated,s.annotationAppearanceUpdatedBind=function(t,e){if(e.getPDFDoc()===s.doc)try{s.getPDFPageRender(e.getIndex()).redrawAnnotRenders(t)}catch(t){}}),g.on(f.default.annotationMovedPosition,s.annotationMovedPositionBind=function(t,e,n){if(e.getPDFDoc()===s.doc)try{s.getPDFPageRender(e.getIndex()).movedAnnotRenders(t,n)}catch(t){}}),g.on(f.default.annotationRemoved,s.annotationRemovedBind=function(t,e){if(e.getPDFDoc()===s.doc)try{s.getPDFPageRender(e.getIndex()).removeAnnotRenders(t)}catch(t){}}),g.on(f.default.annotationImported,s.updateImportedAnnotsBind=function(t,e){if(t===o)try{s.pagesRender.setRenderFlags(10);var n=e.filter((function(t){return t.newAnnots.length>0})).map((function(t){return t.page.getIndex()}));s.pagesRender.renderPages(n).catch(v)}catch(t){}}),g.on(f.default.annotationAdd,s.updateAddAnnotsBind=function(t,e){if(e.getPDFDoc()===s.doc)try{var n=s.getPDFPageRender(e.getIndex());n&&n.addAnnotRenders(t)}catch(t){console.error(t)}}),g.on(f.default.pageRotationChange,s.rotationPageBind=function(t,e,n){if(t.getPDFDoc()===s.doc)try{s.getPDFPageRender(t.getIndex()).redraw(!0)}catch(t){}}),g.on(f.default.customDataAdd,s.customDataAddBind=function(t,e,n){if(s.doc.getId()===n)try{s.getPDFPageRender(e).addCustomRenders(t)}catch(t){}}),g.on(f.default.customDataImported,s.customDataImportedBind=function(t){if(s.doc.getId()===t)try{s.pagesRender.setRenderFlags(32),s.pagesRender.renderVisiblePages().catch(v)}catch(t){}}),g.on(f.default.customDataRemoved,s.customDataRemovedBind=function(t,e,n){if(s.doc.getId()===n)try{s.getPDFPageRender(e).removeCustomRenders(t)}catch(t){}}),g.on(f.default.customDataUpdated,s.customDataUpdatedBind=function(t,e,n){if(s.doc.getId()===n)try{s.getPDFPageRender(e).updateCustomRenders(t)}catch(t){}}),s.checkCannotModifyExcludeAssemble_=s.getUserPermission().checkCannotModifyExcludeAssemble(),g.on(f.default.permissionChanged,s.permissionChangedBind=function(){var t=s.getUserPermission().checkCannotModifyExcludeAssemble();t!==s.checkCannotModifyExcludeAssemble_&&(s.checkCannotModifyExcludeAssemble_=t,s.loadFormRender().then((function(t){s.pdfViewer.redraw(!0)})))}),s}return y(e,t),e.prototype.getBoundingClientRects=function(){var t=this.$container.find(".fv__pdf-view-mode-item"),e=this.viewerRender.scrollWrap.getScrollHost();e==window&&(e=document.body);for(var n=e.getBoundingClientRect(),o=[],r=0;r<t.length;r++){var a=t[r],s=(0,i.default)(a).find(".fv__pdf-page-layout")[0].getBoundingClientRect();if(s.bottom>n.top&&s.top<n.bottom&&s.left<n.right&&s.right>n.left){var u={index:r,scale:this.getPDFPageRender(r).scale,left:Math.max(n.left,s.left)-s.left,right:Math.min(n.right,s.right)-s.left,top:Math.max(n.top,s.top)-s.top,bottom:Math.min(n.bottom,s.bottom)-s.top};u.x=u.left,u.y=u.top,u.height=u.bottom-u.top,u.width=u.right-u.left,o.push(u)}}return o},e.prototype.handlerInit=function(t){var e=this;t.on("click",(function(){e.unActiveAnnotRender()}))},e.prototype.getFormRender=function(){return this.formRender},e.prototype.setStateHandler=function(t){if(this.stateHandler){if(this.stateHandler.constructor.getStateName()===t.getStateName())return;this.stateHandler.destroyDocHandler()}(this.stateHandler=new t(this.pdfViewer)).docHandler(this)},e.prototype.setViewMode=function(t){return this.pagesRender?this.pagesRender.setViewMode(t):Promise.resolve()},e.prototype.getViewMode=function(){return this.pagesRender.getViewMode()},e.prototype.prevPage=function(){var t=this.getCurrentViewMode().getPrevPageIndex();this.goToPage(t,{x:0,y:0})},e.prototype.nextPage=function(){var t=this.getCurrentViewMode().getNextPageIndex();this.goToPage(t,{x:0,y:0})},e.prototype.goToPage=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.x,i=void 0===o?0:o,a=n.y,s=void 0===a?0:a,u=n.width,c=n.height,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGoto=!0,t>this.doc.getPageCount()?t=this.doc.getPageCount()-1:t<0&&(t=0);var f=this.pagesRender,d=f.getPDFPageRender(t);if(d)return d.getPDFPage().then((function(n){return f.getPageScale(t,e.scale).then((function(t){if(l){if(void 0!==u){var e=n.getDeviceRect({left:i,right:i+u,top:s+c,bottom:s},t);i=e.left,s=e.top,e.right<i&&(i=e.right),e.bottom<s&&(s=e.bottom)}else{var o=n.getDevicePoint([i,s],t),a=r(o,2),f=a[0],d=a[1],p=n.info.height;(s>p||d<0)&&(d=0),i=f,s=d}return[t,i,s]}return[t,i,s]}))})).then((function(e){var n=r(e,3),o=n[0],i=n[1],a=n[2];return f.goToPage(t,o,i,a)})).then((function(){e.setCurrentPageIndex(t)})).catch((function(t){}));this.isGoto=!1},e.prototype.setCurrentPageIndex=function(t){void 0!==t&&this.currentPageIndex!==t&&(this.currentPageIndex=t,this.pageNumberChange(this.currentPageIndex))},e.prototype.getCurrentPageIndex=function(){return this.currentPageIndex},e.prototype.pageNumberChange=function(t){this.pdfViewer.eventEmitter.emit(f.default.pageNumberChange,t+1)},e.prototype.bindEvent=function(){},e.prototype.destroy=function(){this.$doc.addClass("fv__destroying"),this.stateHandler&&this.stateHandler.destroyDocHandler(),this.docCustomRender.destroy(),this.pagesRender&&this.pagesRender.destroy(),this.$doc.remove();var t=this.pdfViewer.eventEmitter;return t.off(f.default.annotationAppearanceUpdated,this.annotationAppearanceUpdatedBind),t.off(f.default.annotationMovedPosition,this.annotationMovedPositionBind),t.off(f.default.annotationRemoved,this.annotationRemovedBind),t.off(f.default.annotationImported,this.updateImportedAnnotsBind),t.off(f.default.annotationAdd,this.updateAddAnnotsBind),t.off(f.default.pageRotationChange,this.rotationPageBind),t.off(f.default.customDataAdd,this.customDataAddBind),t.off(f.default.customDataImported,this.customDataImportedBind),t.off(f.default.customDataRemoved,this.customDataRemovedBind),t.off(f.default.customDataUpdated,this.customDataUpdatedBind),t.off(f.default.customDataUpdated,this.permissionChangedBind),this.formRender&&this.formRender.destroy(),this.doc.destroy()},e.prototype.rendering=function(){this.$doc.addClass("fv__doc-rendering"),this.pdfDocRendering.rendering()},e.prototype.rendered=function(){this.$doc.addClass("fv__doc-rendering"),this.pdfDocRendering.rendered(),this.setCurrentPageIndex(0)},e.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fitWidth";return this.scale=e,this.rendering(),Promise.resolve(this.docCustomRender.render(e)).then((function(n){if(!1!==n){var o=Promise.resolve();return t.pdfViewer.config.preloadPageSize&&(o=t.doc.getPageSizes(0,t.pdfViewer.config.sizeCount)),o.then((function(n){var o=t.pagesRender=t.pagesRender||new s.default(t.$container,t.doc,t),r=t.checkCannotModifyExcludeAssemble_?Promise.resolve():t.loadFormRender();return o.render(e).then((function(t){return r})).then((function(){if(!t.stateHandler){var e=t.pdfViewer;(t.stateHandler=new(e.stateHandlerManager.getCurrentStates())(e)).docHandler(t)}}))}))}t.rendered()}))},e.prototype.loadFormRender=function(){var t=this;return this.doc.loadPDFForm().then((function(e){return t.formRender=new h.default(t.doc,t)})).then((function(e){var n=t.doc.getJsNameTree(),o="";for(var r in n)o+=n[r]+"\n";var i=t.getPDFDoc().action;return i&&i.getScript&&(o+=i.getScript()),t.pdfViewer.JSEngine.initEvent(13,null,null,"Init",{doc:t.doc}),t.pdfViewer.JSEngine.exec(o,!0),t.doc.getPDFForm().addTask()})).then((function(e){return t.doc.getPDFForm().setState("jsInited")}))},e.prototype.hidden=function(){this.$doc.addClass("fv__hidden")},e.prototype.show=function(){this.$doc.removeClass("fv__hidden")},e.prototype.zoomTo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=this.scale;return this.scale=e,this.zoomToTaskExecutor.exec((function(e,o){return o.eventEmitter.emit(f.default.beforeZoomTo,e,t.scale),t.pagesRender.zoomTo(e).then((function(){return t.scale=e,o.eventEmitter.emit(f.default.zoomToSuccess,e,n),e}),(function(n){return o.eventEmitter.emit(f.default.zoomToFailed,e,t.scale),Promise.reject(n)}))}),[e,this.pdfViewer],this)},e.prototype.getScaleRatio=function(){var t=this,e=function(){switch(o(t.scale)){case"number":return t.scale;case"string":return t.pagesRender?t.pagesRender.getScaleRatio():1;default:return 1}};return this.zoomToTaskExecutor.waitForLastTask().then(e,e)},e.prototype.getScale=function(){return this.scale},e.prototype.getPDFDoc=function(){return this.doc},e.prototype.getPDFPageRender=function(t){try{return this.pagesRender.getPDFPageRender(t)}catch(t){return null}},e.prototype.getCurrentViewMode=function(){try{return this.pagesRender.viewMode}catch(t){return null}},e.prototype.getAnnotRender=function(t,e){try{return this.getPDFPageRender(t).getAnnotRender(e)}catch(t){return null}},e.prototype.unActiveAnnotRender=function(t){if(t)return t.unActive();try{this.pagesRender.unActiveAnnotRender()}catch(t){}},e.prototype.setWatermarkConfig=function(t){this.watermarkConfig=t},e.prototype.getWatermarkConfig=function(){return this.watermarkConfig},e.prototype.getUserPermission=function(){var t=this.doc,e=this.customPermission_(t),n=t.getPermissionsSync();return new p.default(e&n)},e.prototype.getOffsetInfo=function(){var t=0,e=0,n=0,o=this.pagesRender,i=void 0;if(!o)return(i=o.getPDFPageRender(t)).reverseDevicePoint([e,n]).then((function(e){var n=r(e,2),o=n[0],a=n[1];return{index:t,left:o,top:a,scale:i.getScale()}}));for(var a=this.pdfViewer.$ui,s=a.parent()[0].getBoundingClientRect(),u=o.viewMode.getVisibleIndexes(),c=0,l=u.length;c<l;c++){t=u[c];var f=a.find(".fv__pdf-page-layout").eq(t)[0].getBoundingClientRect();if(!(f.bottom<=s.top)){(e=s.left-f.left)<0&&(e=0),(n=s.top-f.top)<0&&(n=0);break}}return(i=o.getPDFPageRender(t)).reverseDevicePoint([e,n]).then((function(e){var n=r(e,2),o=n[0],a=n[1];return{index:t,left:o,top:a,scale:i.getScale()}}))},e.prototype.getViewBoxCenter=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.getViewMode().getItems(),r=this.viewerRender.scrollWrap.getScrollHost();r==window&&(r=document.body);for(var i=r.getBoundingClientRect(),a=i.x+i.right/2,s=i.y+i.height/2,u=function(o){var r=n[o].firstElementChild.getBoundingClientRect(),i=r.x,u=r.y,c=u+r.height,l=r.right;if(a>i&&a<l&&s>u&&s<c){var f=t.getPDFPageRender(o);return{v:f.getPDFPage().then((function(t){return e?Promise.all([t,t.reverseDevicePoint([a-i,s-u],f.scale)]):Promise.all([t,[a-i,s-u]])}))}}},c=0;c<n.length;c++){var l=u(c);if("object"===(void 0===l?"undefined":o(l)))return l.v}return this.getPDFPageRender(this.currentPageIndex).getPDFPage().then((function(t){return Promise.all([t,[0,0]])}))},e.prototype.renderPages=function(t,e){return this.pagesRender.renderPages(t,e).catch(v)},e}(d.default));function w(t){return"state-"+t}e.default=b},function(t,e){t.exports='<div class="fv__pdf-doc-layout">\n    <div class="fv__pdf-doc-rendering"></div>\n    <div class="fv__pdf-doc-custom-container"></div>\n    <div class="fv__pdf-doc-container"></div>\n    <div class="fv__pdf-doc-handler-container"></div>\n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=d(n(1)),a=d(n(152)),s=d(n(153)),u=n(7),c=d(n(24)),l=d(n(2)),f=n(6);function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var h=function(){},g=function(t){function e(n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return i.name=e.getDefaultName(),i.$ui=n,i.doc=o,i.docRender=r,i.ViewMode=r.ViewMode,i.viewMode=new r.ViewMode(r),i.viewerRender=r.viewerRender,i.pdfViewer=i.viewerRender.pdfViewer,i.pageRenders=[],i.scale=1,i.neverRendered=!0,i.minScale=+i.pdfViewer.config.minScale,i.maxScale=+i.pdfViewer.config.maxScale,i.pdfViewer.eventEmitter.on(l.default.actionAdd,i.actionAdd=function(t){i.pageRenders[t.getPDFPage().getIndex()].getAnnotRender(t.getId()).component.addAction(t.action)}),i.pdfViewer.eventEmitter.on(l.default.actionRemove,i.actionRemove=function(t){i.pageRenders[t.getPDFPage().getIndex()].getAnnotRender(t.getId()).component.removeAction()}),i.pdfViewer.eventEmitter.on(l.default.actionUpdated,i.actionUpdated=function(t){i.pageRenders[t.getPDFPage().getIndex()].getAnnotRender(t.getId()).component.actionViewer.updateAction(t.action)}),i.pdfViewer.eventEmitter.on(l.default.layerVisibleChange,i.layerVisibleChangeBind=function(t){i.doc===t&&(i.setRenderFlags(2),i.renderVisiblePages().catch(h))}),i.pdfViewer.eventEmitter.on(l.default.imageAdded,i.imageAdded=function(t){i.pageRenders[t.getIndex()].redrawContent(!0)}),i.pdfViewer.eventEmitter.on(l.default.watermarkAdded,i.watermarkAdded=function(t){i.pageRenders[t.getIndex()].redrawContent(!0)}),i.pdfViewer.eventEmitter.on(l.default.graphicsUpdated,i.graphicsUpdated=function(t){i.pageRenders[t.getIndex()].redrawContent(!0)}),i.pdfViewer.eventEmitter.on(l.default.pageAdded,i.pageAdded=function(t){var e=t.getIndex();i.addNewPageByIndex(e)}),i.pdfViewer.eventEmitter.on(l.default.pageMoved,i.pageMoved=function(t,e){i.movePageRender(t,e)}),i.pdfViewer.eventEmitter.on(l.default.pageRemoved,i.pageReoved=function(t){i.removePageByIndex(t)}),i.pdfViewer.eventEmitter.on(l.default.importPages,i.importPages=function(t){i.importPagesByArray(t)}),i.pdfViewer.eventEmitter.on(l.default.applyRedaction,i.applyRedacts=function(t){var e=i.pdfViewer;if(!1!==t){var n=e.getPDFDocRender(),o=n.pagesRender;if(!o)return;t.forEach((function(t){var e=t.pageIndex,o=t.removedAnnots,r=n.pagesRender.pageRenders[e];if(r.annotsRender)for(var i=r.annotsRender.annots,a=i.length-1;a>=0;a--){var s=i[a];-1!==o.indexOf(s.id)&&(s.info.isDeleted=!0,i.splice(a,1))}})),o.setRenderFlags(10),o.renderVisiblePages(),e.eventEmitter.emit(l.default.redactAnnotApplyed,i)}}),i.pdfViewer.eventEmitter.on(l.default.flattened,i.flattened=function(t){i.setRenderFlags(10),i.renderVisiblePages()}),i.pdfViewer.eventEmitter.on(l.default.headerFooterUpdated,i.headerFooterUpdated=function(t){i.setRenderFlags(10),i.renderVisiblePages()}),i.pdfViewer.eventEmitter.on(l.default.headerFooterAdded,i.headerFooterAdded=function(t){i.setRenderFlags(10),i.renderVisiblePages()}),i.preloadPageSize=i.pdfViewer.config.preloadPageSize,i}return p(e,t),e.getDefaultName=function(){return"pdfPagesRender"},e.prototype.setViewMode=function(t){var e=this;this.viewMode.out(),this.viewMode=new t(this.docRender),this.viewMode.into(),this.setRenderFlags(4),this.docRender.goToPage(this.docRender.getCurrentPageIndex(),{x:0,y:0});var n=void 0;if(this.preloadPageSize){var o=Object.keys(this.doc.getPageSizesSync());n=this.loadPageSize(o,0)}else n=Promise.resolve();return n.then((function(t){return e.renderVisiblePages(e.scale)})).then((function(){"fitWidth"===e.scale&&e.renderVisiblePages()})).catch(h)},e.prototype.getViewMode=function(){return this.viewMode},e.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale;this.scale=e,this.createPagesStructure(),this.viewMode.into(),this.docRender.rendered();var n=this.$ui;return n.find(".fv__pdf-page-layout").each((function(n,o){t.pageRenders[n]||(t.pageRenders[n]=new s.default((0,i.default)(o),n,t.doc,t)).rendering(t.getPageScaleSync(n,e))})),this.renderVisiblePages(e)},e.prototype.movePageRender=function(t,e){var n=this.pageRenders[t];if(n){var o=n.$ui.parent(),r=this.pageRenders[e];if(r){var i=r.$ui.parent();t<e?o.insertAfter(i):o.insertBefore(i),this.pageRenders.splice(t,1),this.pageRenders.splice(e,0,n);for(var a=Math.min(t,e),s=Math.max(t,e),u=a;u<=s;u++)this.pageRenders[u].updateIndex(u)}}},e.prototype.addNewPageByIndex=function(t){var e=(0,i.default)(a.default);if(this.pageRenders[t]){var n=this.pageRenders[t].$ui.parent();e.insertBefore(n)}else this.$ui.append(e);var o=e.find(".fv__pdf-page-layout"),r=new s.default(o,t,this.doc,this);this.pageRenders.splice(t,0,r);for(var u=t+1;u<this.pageRenders.length;u++)this.pageRenders[u].updateIndex(u);return r.rendering(this.getPageScaleSync(t,this.scale)),this.renderVisiblePages(this.scale).catch(h)},e.prototype.importPagesByArray=function(t){var e=this;return t.forEach((function(t){var n=(0,i.default)(a.default),o=t.getIndex();if(e.pageRenders[o]){var r=e.pageRenders[o].$ui.parent();n.insertBefore(r)}else e.$ui.append(n);var u=n.find(".fv__pdf-page-layout"),c=new s.default(u,o,e.doc,e);e.pageRenders.splice(o,0,c);for(var l=o+1;l<e.pageRenders.length;l++)e.pageRenders[l].updateIndex(l);c.rendering(e.getPageScaleSync(o,e.scale))})),this.renderVisiblePages(this.scale).catch(h)},e.prototype.removePageByIndex=function(t){if(this.pageRenders[t]){this.pageRenders.splice(t,1)[0].$ui.parent().remove();for(var e=t;e<this.pageRenders.length;e++)this.pageRenders[e].updateIndex(e)}this.renderVisiblePages(this.scale).catch(h)},e.prototype.setRenderFlags=function(t){for(var e=this.pageRenders,n=0,o=e.length;n<o;n++)e[n].updateRenderFlags(t)},e.prototype.loadPageSize=function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;this.doc.getPageSize(t[o]);)o++;var r=void 0;if(o==t.length)r=Promise.resolve();else{var i=t[o];r=this.doc.getPageSizes(i+n,7)}return r.then((function(t){var n=e.doc.getPageSizesSync();for(var o in n){if(o=+o,!e.pageRenders[o])return;e.pageRenders[o].rendering(e.getPageScaleSync(o,e.scale))}}))},e.prototype.renderVisiblePagesPromise=function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=this.viewMode,o=n.getVisibleIndexes(),r=[],i=0,a=o.length;i<a;i++){var s=o[i];r.push(function(e,n){return t.getPageScale(e,n).then((function(n){return t.pageRenders[e].render(n)}))}(s,e))}return Promise.all(r).then((function(){var e=t.getSmartInvisibleIndexes(o);return t.renderPages(e)}))},e.prototype.renderVisiblePages=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=this.viewMode,o=n.getVisibleIndexes(),r=void 0,i=this.preloadPageSize;if(i)r=this.loadPageSize(o,-3).then((function(t){o=n.getVisibleIndexes()}));else{if(this.neverRendered)return this.neverRendered=!1,o=o.slice(0,1),this.renderPages(o,e).then((function(){t.pdfViewer.eventEmitter.emit(l.default.visiblePagesRenderCompleted)}));r=this.renderPagesLayout(o,e).then((function(){o=n.getVisibleIndexes()}))}return r.then((function(){return t.renderPages(o,e)})).then((function(){return t.adjustRenderVisiblePages(o,e)})).then((function(){t.pdfViewer.eventEmitter.emit(l.default.visiblePagesRenderCompleted)}))},e.prototype.adjustRenderVisiblePages=function(t,e){for(var n=this,o=this.viewMode.getVisibleIndexes(),r={},i=t.length;i--;)r[t[i]]=1;t=[];for(var a=o.length;a--;){var s=o[a];t[a]=s,r[s]&&o.splice(a,1)}return o.length?this.renderPages(o,e).then((function(){return n.adjustRenderVisiblePages(t,e)})):Promise.resolve()},e.prototype.renderPages=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,o=this.renderPagesSerial;o&&o.end().catch(h),o=this.renderPagesSerial=new u.SerialPromise;for(var r=[],i=0,a=e.length;i<a;i++){var s=e[i];r.push(function(e,n){return function(){return t.getPageScale(e,n).then((function(n){if(t.pageRenders[e])return t.pageRenders[e].render(n)}))}}(s,n))}return o.serial(r)},e.prototype.renderVisiblePagesLayout=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=this.viewMode,n=e.getVisibleIndexes();return this.renderPagesLayout(n,t)},e.prototype.renderPagesLayout=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,o=this.renderPagesSerial;o&&o.end().catch(h),o=this.renderPagesSerial=new u.SerialPromise;for(var r=[],i=0,a=e.length;i<a;i++){var s=e[i];r.push(function(e,n){return function(){return t.getPageScale(e,n).then((function(n){if(t.pageRenders[e])return t.pageRenders[e].renderLayout(n)}))}}(s,n))}return o.serial(r)},e.prototype.destroy=function(){for(var t=this.pageRenders.length;t--;)this.pageRenders[t].destroy();this.pageRenders=[],this.renderPagesSerial&&this.renderPagesSerial.end().catch(h),this.viewMode.out(),this.$ui.empty(),this.pdfViewer.eventEmitter.off(l.default.actionAdd,this.actionAdd),this.pdfViewer.eventEmitter.off(l.default.actionRemove,this.actionRemove),this.pdfViewer.eventEmitter.off(l.default.actionUpdated,this.actionUpdated),this.pdfViewer.eventEmitter.off(l.default.layerVisibleChange,this.layerVisibleChangeBind),this.pdfViewer.eventEmitter.off(l.default.imageAdded,this.imageAdded),this.pdfViewer.eventEmitter.off(l.default.watermarkAdded,this.watermarkAdded),this.pdfViewer.eventEmitter.off(l.default.graphicsUpdated,this.graphicsUpdated),this.pdfViewer.eventEmitter.off(l.default.pageAdded,this.pageAdded),this.pdfViewer.eventEmitter.off(l.default.pageMoved,this.pageMoved),this.pdfViewer.eventEmitter.off(l.default.pageRemoved,this.pageReoved),this.pdfViewer.eventEmitter.off(l.default.importPages,this.importPages),this.pdfViewer.eventEmitter.off(l.default.applyRedacts,this.applyRedacts),this.pdfViewer.eventEmitter.off(l.default.flattened,this.flattened),this.pdfViewer.eventEmitter.off(l.default.headerFooterUpdated,this.headerFooterUpdated),this.pdfViewer.eventEmitter.off(l.default.headerFooterAdded,this.headerFooterAdded)},e.prototype.getSmartInvisibleIndexes=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewMode.getVisibleIndexes(),e=Math.max(this.pdfViewer.config.preloadedPages,0),n=t.length,o=[],r=this.pageRenders.length;if(!n){for(var i=0,a=r;i<a;i++)o[i]=i;return o}for(var s=t.sort((function(t,e){return t-e})),u=s[s.length-1]+1,c=Math.min(u+e,r-1),l=u;l<c;l++)o.push(l);return o},e.prototype.goToPage=function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.getPDFPageRender(t);if(i)return i.getPDFPage().then((function(a){a.getRotation();return i.renderLayout(e).then((function(){return n.viewMode.jumpToPage(t,{x:o,y:r}),n.renderVisiblePages()})).then((function(){n.viewMode.jumpToPage(t,{x:o,y:r})})).catch(h)}))},e.prototype.zoomTo=function(t){this.scale=t;this.preloadPageSize;return this.renderVisiblePages(t)},e.prototype.getScaleRatio=function(){switch(r(this.scale)){case"number":return Promise.resolve(this.scale);case"string":return this.getPageScale(0,this.scale);default:return Promise.resolve(1)}},e.prototype.adjustFitPage=function(t){var e=void 0,n=void 0,o=this.getPDFPageRender(t);o.page&&o.page.info&&(e=o.page.info.height,n=o.page.info.width);var r=this.doc.info.pageSizes[t];return r&&(e=r.height,n=r.width),e/n>this.viewMode.getFitHeight(t)/this.viewMode.getFitWidth(t)?"fitHeight":"fitWidth"},e.prototype.getPageScaleSync=function(t,e){var n=this.preloadPageSize;if("fitHeight"===e&&(e=this.adjustFitPage(t)),+e>this.minScale)return Math.min(+e,this.maxScale);if(+e<=this.minScale)return this.minScale;if("fitWidth"===e){var o=this.doc.getPageSize(t);if(n&&o)return this.viewMode.getFitWidth(t)/(o.width*(0,f.pt2px)(1))}else if("fitHeight"===e){var r=this.doc.getPageSize(t);if(n&&r)return this.viewMode.getFitHeight(t)/(r.height*(0,f.pt2px)(1))}return-1},e.prototype.getPageScale=function(t,e){var n=this;return"fitHeight"===e&&(e=this.adjustFitPage(t)),+e>this.minScale?Promise.resolve(Math.min(+e,this.maxScale)):+e<=this.minScale?Promise.resolve(this.minScale):"fitWidth"===e?this.doc.getPageByIndex(t).then((function(e){return n.viewMode.getFitWidth(t)/e.getPxWidth()})):"fitHeight"===e?Promise.all([this.viewMode.getFitHeight(t),this.pageRenders[t].getPDFPage().then((function(t){return t.getPxHeight()}))]).then((function(t){var e=o(t,2);return e[0]/e[1]})):Promise.resolve(1)},e.prototype.createPagesStructure=function(){for(var t="",e=this.doc.getPageCount();e--;)t+=a.default;this.$ui.html(t)},e.prototype.getPDFPageRender=function(t){try{return this.pageRenders[t]}catch(t){return null}},e.prototype.unActiveAnnotRender=function(){for(var t=this.pageRenders||[],e=t.length;e--;){t[e].unActiveAnnotRender()}},e}(c.default);e.default=g},function(t,e){t.exports='<div class="fv__pdf-view-mode-item">\n    <div class="fv__pdf-page-layout">\n        <div class="fv__pdf-page-rendering" style="position: absolute;width: 100%;z-index: 1000;"></div>\n        <div class="fv__pdf-custom-page-container"></div>\n        <div class="fv__pdf-page-container">\n        </div>\n        <div class="fv__pdf-page-annots-container"></div>\n        <div class="fv__pdf-page-customs-container"></div>\n        <div class="fv__pdf-page-handler-container"></div>\n    </div>\n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=w(n(23)),i=n(6),a=w(n(81)),s=w(n(83)),u=w(n(155)),c=w(n(156)),l=w(n(24)),f=w(n(25)),d=w(n(26)),p=w(n(2));n(44);var h=w(n(158)),g=w(n(160)),y=w(n(161)),v=w(n(164)),m=n(85),b=w(n(45));n(27);function w(t){return t&&t.__esModule?t:{default:t}}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var A=void 0,_=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));u.isRendered=!1,u.name=e.getDefaultName(),u.$ui=n,u.index=o,n.attr("data-index",o),u.pagesRender=i,u.docRender=i.docRender,u.viewerRender=u.docRender.viewerRender,u.$rendering=n.find(".fv__pdf-page-rendering"),u.$container=n.find(".fv__pdf-page-container").attr("data-index",o),u.$annotsContainer=n.find(".fv__pdf-page-annots-container"),u.$customsContainer=n.find(".fv__pdf-page-customs-container");var c=u.$handler=n.find(".fv__pdf-page-handler-container");u.$invisible=n.find(".fv__pdf-invisible-page-container"),u.pageHandler=new h.default(c,u),u.doc=r,u.unit="pt",u.pxUnit="px",u.scale=1,u.rotate=0;var l=u.pdfViewer,f=l.customs||{};u.pdfPageRendering=new(f.PDFPageRendering||a.default)(u.$rendering[0],u),u.pageCustomRender=new(f.PageCustomRender||s.default)(n.find(".fv__pdf-custom-page-container")[0],u);l.config;return u.renderFlags=7,u.renderingDeferreds=[],u.followRenderDeferreds=[],u.watermarkConfig=null,u.excluedHighlights=[],u.preloadPageSize=l.config.preloadPageSize,A=u.pdfViewer.config.progressiveRendering,u}return P(e,t),e.getDefaultName=function(){return"pdfPageRender"},e.prototype.updateRenderFlags=function(t){var e=this.pageContentTiles;2&t&&e&&e.cleanCache(),this.renderFlags=this.renderFlags|t},e.prototype.updateRenderFlagsByScaleAndRotate=function(t,e){t!==this.scale||e!==this.rotate?this.updateRenderFlags(7):this.updateRenderFlags(0)},e.prototype.checkRenderLayoutFlags=function(){return 4==(4&this.renderFlags)},e.prototype.resetRenderLayoutFlags=function(){this.renderFlags&=-5},e.prototype.checkRenderContainerFlags=function(){return this.checkRenderContentFlags()||this.checkRenderAnnotFlags()||this.checkRebuildAnnotFlags()||A},e.prototype.checkRenderContentFlags=function(){return 2==(2&this.renderFlags)},e.prototype.resetRenderContentFlags=function(){this.renderFlags&=-3},e.prototype.checkRenderAnnotFlags=function(){return 1==(1&this.renderFlags)},e.prototype.resetRenderAnnotFlags=function(){this.renderFlags&=-2,this.resetRebuildAnnotFlags()},e.prototype.checkRenderCustomFlags=function(){return 16==(16&this.renderFlags)},e.prototype.resetRenderCustomFlags=function(){this.renderFlags&=-17,this.resetRebuildCustomFlags()},e.prototype.checkRebuildAnnotFlags=function(){return 8==(8&this.renderFlags)},e.prototype.resetRebuildAnnotFlags=function(){this.renderFlags&=-9},e.prototype.checkRebuildCustomFlags=function(){return 32==(32&this.renderFlags)},e.prototype.resetRebuildCustomFlags=function(){this.renderFlags&=-33},e.prototype.setStateHandler=function(t){if(this.stateHandler){if(this.stateHandler.constructor.getStateName()===t.getStateName())return;this.stateHandler.destroyPageHandler()}(this.stateHandler=new t(this.pdfViewer)).pageHandler(this)},e.prototype.updateIndex=function(t){this.index!==t&&(this.index=t,this.$ui.attr("data-index",t),this.$container.attr("data-index",t))},e.prototype.getPDFPage=function(){var t=this;return(this.pageCache=this.pageCache||new u.default((function(e){return t.doc.getPageByIndex(e).then((function(e){return t.page=e,e}))}))).getCache(this.index)},e.prototype.getPDFDoc=function(){return this.doc},e.prototype.getAnnotRender=function(t){try{return this.annotsRender.getAnnotRender(t)}catch(t){return null}},e.prototype.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=(0,r.default)();return this.isRendering?this.followRenderDeferreds.push({deferred:n,scale:t,rotate:e}):(this.renderingDeferreds.push({deferred:n,scale:t,rotate:e}),this.isRendering=!0,this.queueRender()),n.promise},e.prototype.queueRender=function(){var t=this,e=this.renderingDeferreds.length;if(e){var n=this.renderingDeferreds[e-1],o=n.scale,r=n.rotate;this.updateRenderFlagsByScaleAndRotate(o,r),this._render(o,r).then((function(){for(var e=t.renderingDeferreds,n=0,o=e.length;n<o;n++)e[n].deferred.resolve(t);t.followRenderDeferreds.length?(t.renderingDeferreds=t.followRenderDeferreds,t.followRenderDeferreds=[],t.queueRender()):(t.renderingDeferreds=[],t.isRendering=!1)}))}},e.prototype._render=function(t,e){var n=this;return this.rendering(),Promise.resolve(this.pageCustomRender.render(t,e)).then((function(o){if(!1!==o)return(n.checkRenderLayoutFlags()?n.renderLayout(t,e):Promise.resolve()).then((function(){return n.resetRenderLayoutFlags(),n.checkRenderContainerFlags()?n.renderContainer(t,e):Promise.resolve()})).then((function(){return n.scale=t,n.rotate=e,n.rendered(),n.pdfViewer.eventEmitter.emit(p.default.renderPageSuccess,n),n}));n.rendered()}))},e.prototype.setShowWidth=function(t){this.showWidth=t},e.prototype.getShowWidth=function(){return this.showWidth},e.prototype.setShowHeight=function(t){this.showHeight=t},e.prototype.getShowHeight=function(){return this.showHeight},e.prototype.renderLayout=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=this.scale;return this.getPDFPage().then((function(r){var a=(0,i.getWHByMatrix)(r.getPxWidth(),r.getPxHeight(),e,n),s=o(a,2),u=s[0],c=s[1];return t.showWidth=u,t.showHeight=c,Promise.all([u,c,t.pagesRender.viewMode.renderViewMode(t,e,n,u,c)])})).then((function(i){var a=o(i,2),s=a[0],u=a[1],c=t.pxUnit;if(t.$ui.css({width:s+c,height:u+c}),r!==e){var l=t.layoutContainerTransitionId;l||(l=t.layoutContainerTransitionId=(0,b.default)("fv__pdf_page_layout_container_transition"));var f=t.eLayoutContainerTransitionStyle;f||(f=document.createElement("style"),document.body.appendChild(f),t.eLayoutContainerTransitionStyle=f),f.type="text/css",f.innerHTML="."+l+"{transform-origin: 0 0; transform: scale("+e/r+"); width:"+r/e*100+"%;}"}t.pdfViewer.eventEmitter.emit(p.default.pageLayoutRedraw,t,e,n)}))},e.prototype.renderContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.renderPage(t,e)},e.prototype.getPageTileConfig=function(t,e){var n=this;return this.getPDFPage().then((function(o){var r,i,a=n.getSmartScale(t),s=n.pdfViewer.config.tileSize;return r=o.getPxWidth()*a,i=o.getPxHeight()*a,[Math.ceil(i/s),Math.ceil(r/s),r,i,s,a,t,e]}))},e.prototype.renderPage=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return(this.checkRenderContentFlags()||A?this.renderContentImage(e,n):Promise.resolve()).then((function(n){return t.resetRenderContentFlags(),t.docRender.checkCannotModifyExcludeAssemble_?Promise.resolve():t.checkRebuildAnnotFlags()?t.rebuildAnnots(e):t.checkRenderAnnotFlags()?t.renderAnnots(e):Promise.resolve()})).then((function(){return t.resetRenderAnnotFlags(),t.checkRebuildCustomFlags()?t.rebuildCustoms(e):t.checkRenderCustomFlags()?t.renderCustoms(e):Promise.resolve()})).then((function(){if(t.resetRenderCustomFlags(),!t.stateHandler){var e=t.pdfViewer;(t.stateHandler=new(e.stateHandlerManager.getCurrentStates())(e)).pageHandler(t)}}))},e.prototype.renderContentImage=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.getPageTileConfig(e,n).then((function(e){var n=o(e,8),r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6];n[7];return t.renderContentImageByTileCanvas(r,i,a,s,u,c,l)})).then((function(){var e=t.layoutContainerTransitionId;e&&t.$container.removeClass(e)}))},e.prototype.adjustHighlightInContentImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if([].concat(this.excluedHighlights).sort().join()!==[].concat(t).sort().join())return this.excluedHighlights=t,this.redrawContent(!0)},e.prototype.adjustHighlightAnnots=function(){var t=this.annotsRender;return t?t.adjustHighlightAnnots():Promise.resolve()},e.prototype.renderContentImageByTileCanvas=function(t,e,n,o,r,i,a){var s=this,u=this.pageContentTiles;if(!u){this.pageContentTiles=u=new f.default((function(t,e,n,o,r,i){return s.getContentImageDataByTile(t,e,n,o,r,i)}),null,this.preloadPageSize);var c=u.$container;c.addClass("fv__pdf-page-content-container"),this.$container.append(c)}var l=this.getWatermarkConfig()||this.docRender.getWatermarkConfig();l&&l.content&&l.type&&(this.watermark=new y.default(n,o,r,i,l.watermarkSettings,l.watermarkTextProperties)).exportDataURL({content:l.content,type:l.type}).then((function(t){var e=new Image;e.src=t,u.setUpdateCanvasMore((function(t,n,o,r,i,a){t.drawImage(e,o*a,n*a,r,i,0,0,r,i)}))}));return A?function(t,e,n,o,r,i,a){return new Promise((function(u,c){setTimeout((function(){return s.progressRender(t,e,n,o,r,i,a).then(u,c)}),0)}))}(t,e,n,o,r,i,a):u.redraw(t,e,n,o,r,i,a)},e.prototype.progressRender=function(t,e,n,o,r,i,a){var s=this.pdfViewer.$ui.parent(),u=s.width(),c=s.height(),l=s.scrollTop(),f=s.scrollLeft(),d=document.body.parentElement,p=d.scrollLeft;p>f&&(f=p,l=d.scrollTop);for(var h=this.$ui[0].offsetTop,g=this.$ui[0].offsetLeft,y=r/i*a,v=Math.max(0,Math.floor(Math.max(0,f-g)/y)),m=Math.min(e-1,Math.ceil(Math.max(0,f-g+u)/y)),b=Math.max(0,Math.floor(Math.max(0,l-h)/y)),w=Math.min(t-1,Math.ceil(Math.max(0,l-h+c)/y)),P=[],A=b;A<=w;A++)for(var _=v;_<=m;_++)P.push([A,_]);return this.pageContentTiles.progressRender(t,e,P,n,o,r,i,a)},e.prototype.renderAnnots=function(t,e){var n=this;return this.parent("pdfDocRender").getFormRender().form.addTask((function(o){if(n.annotsRender)return n.annotsRender.render(t,e);return n.getAnnots().then((function(t){return n.annotsRender=n.annotsRender||new c.default(n.$annotsContainer,t,n)})).then((function(n){return n.render(t,e)}))}))},e.prototype.rebuildAnnots=function(t,e){var n=this;return this.getAnnots().then((function(t){return n.annotsRender&&(n.annotsRender.destroy(),n.annotsRender=null),n.annotsRender=n.annotsRender||new c.default(n.$annotsContainer,t,n)})).then((function(n){return n.render(t,e)}))},e.prototype.renderCustoms=function(t,e){var n=this;return this.customsRender?this.customsRender.render(t,e):this.getPDFPage().then((function(t){return n.pdfViewer.customRenderManager.getPageCustomData(t)})).then((function(t){return n.customsRender&&(n.customsRender.destroy(),n.customsRender=null),n.customsRender=n.customsRender||new v.default(n.$customsContainer,t,n)})).then((function(n){return n.render(t,e)}))},e.prototype.rebuildCustoms=function(t,e){var n=this;return this.getPDFPage().then((function(t){return n.pdfViewer.customRenderManager.getPageCustomData(t)})).then((function(t){return n.customsRender=n.customsRender||new v.default(n.$customsContainer,t,n)})).then((function(n){return n.render(t,e)}))},e.prototype.renderAnnot=function(t,e,n){return new(this.pdfViewer.annotManager.get(t.getType()))(t,this).render(e,n)},e.prototype.rendering=function(t){var e=this.doc.getPageSize(this.index);if(this.preloadPageSize&&t&&e&&(!this.pageContentTiles||!this.pageContentTiles.isRenderingDone(t,e.width*t))){e.width*=(0,i.pt2px)(1)*t,e.height*=(0,i.pt2px)(1)*t;var n=Object.assign({},e);this.$ui.height()!=e.width&&(n.minHeight=40),this.$ui.get(0).style.cssText+="\n                width: "+n.width+"px;\n                height: "+n.height+"px;\n                min-height: "+n.minHeight+"px;\n            "}this.preloadPageSize?this.firstRendering||(this.firstRendering=!0,this.$ui.addClass("fv__rendering"),this.pdfPageRendering.rendering()):0!=this.renderFlags&&(this.$ui.addClass("fv__rendering"),this.pdfPageRendering.rendering())},e.prototype.rendered=function(){var t=this;this.isRendered=!0,this.$ui.removeClass("fv__rendering"),this.pdfPageRendering.rendered(),this.openActionTrigged||this.getPDFPage().then((function(e){var n=e.getAction("open");n&&t.pdfViewer.actionManager.get(n,t).active(),t.openActionTrigged=!0}))},e.prototype.bindEvent=function(t){var e=this,n=t[0],o=this.pageHammer=new d.default.Manager(n,{recognizers:[[d.default.Pan,{direction:d.default.DIRECTION_ALL}]]});o.add(new d.default.Tap({event:"doubletap",taps:2})),o.add(new d.default.Tap({event:"singletap"})),o.get("doubletap").recognizeWith("singletap"),o.get("singletap").requireFailure("doubletap"),o.on("singletap",(function(t){var o=e.pdfViewer.eventEmitter,r=e.annotsRender;if(r){r.unActiveAnnot();var i=t.srcEvent,a=n.getBoundingClientRect(),s=(0,m.getClientX)(i),u=(0,m.getClientY)(i);e.getAnnotIdAtDevicePoint(s-a.left,u-a.top).then((function(e){if(e){var n=r.getAnnotRender(e);n?(o.emit(p.default.tapAnnotation,n,t),r.activeAnnot(e)):o.emit(p.default.tapPage,t)}else o.emit(p.default.tapPage,t)}))}else o.emit(p.default.tapPage,t)})),o.on("doubletap",(function(t){var o=e.pdfViewer.eventEmitter,r=e.annotsRender;if(r){r.unActiveAnnot();var i=t.srcEvent,a=n.getBoundingClientRect(),s=(0,m.getClientX)(i),u=(0,m.getClientY)(i);e.getAnnotIdAtDevicePoint(s-a.left,u-a.top).then((function(n){if(n){var i=r.getAnnotRender(n);i?(o.emit(p.default.doubleTapAnnotation,i,t),r.doubleTapAnnot(n)):o.emit(p.default.doubleTapPage,t,e)}else o.emit(p.default.doubleTapPage,t,e)}))}else o.emit(p.default.doubleTapPage,t,e)})),o.on("press",(function(t){var o=e.pdfViewer.eventEmitter,r=e.annotsRender;if(r){r.unActiveAnnot();var i=t.srcEvent,a=n.getBoundingClientRect(),s=(0,m.getClientX)(i),u=(0,m.getClientY)(i);e.getAnnotIdAtDevicePoint(s-a.left,u-a.top).then((function(e){if(e){var n=r.getAnnotRender(e);n?(o.emit(p.default.pressAnnotation,n,t),r.showContextMenu(e)):o.emit(p.default.pressPage,t)}else o.emit(p.default.pressPage,t)}))}else o.emit(p.default.pressPage,t)})),n.oncontextmenu=function(t){t.preventDefault()},t.on("mouseup",(function(t){if(3===t.which){var o=e.pdfViewer.eventEmitter,r=e.annotsRender;if(r){r.unActiveAnnot();var i=t,a=n.getBoundingClientRect();e.getAnnotIdAtDevicePoint(i.clientX-a.left,i.clientY-a.top).then((function(e){if(e){var n=r.getAnnotRender(e);n?(o.emit(p.default.rightClickAnnotation,n,t),r.showContextMenu(e)):o.emit(p.default.rightClickPage,t)}else o.emit(p.default.rightClickPage,t)}))}else o.emit(p.default.rightClickPage,t)}}))},e.prototype.destroy=function(){this.stateHandler&&this.stateHandler.out(),this.contentImageDataCache&&this.contentImageDataCache.destroy(),this.annotsRender&&this.annotsRender.destroy(),this.pageHammer&&this.pageHammer.destroy(),this.pageHandler.destroy(),this.$ui.empty(),this.eLayoutContainerTransitionStyle&&document.body.removeChild(this.eLayoutContainerTransitionStyle)},e.prototype.getSmartScale=function(t){return this.pdfViewer.getSmartScale(t)},e.prototype.getScale=function(){return this.scale},e.prototype.getContentImageDataByTile=function(t,e,n,o,r,a){var s=this;return this.getPDFPage().then((function(u){return s.docRender.checkCannotModifyExcludeAssemble_?u.getPageBitmap((0,i.pt2px)(a),0,{x:e*r,y:t*r,width:n,height:o},["page","annot"]):u.getPageBitmap((0,i.pt2px)(a),0,{x:e*r,y:t*r,width:n,height:o})}))},e.prototype.getAnnots=function(){return this.getPDFPage().then((function(t){return t.getAnnots()}))},e.prototype.getAnnotIdAtDevicePoint=function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=this.annotsRender;if(r)return this.getPDFPage().then((function(r){var i=n.scale,a=r.getDeviceMatrix();return a.scale(i,i),r.getAnnotIdAtDevicePoint([t,e],o,[a.a,a.b,a.c,a.d,a.e,a.f])}))},e.prototype.getTextDeviceRectsAtDeviceRect=function(t){var e=this;return Promise.all([this.getPDFPage(),this.getTextRectsAtDeviceRect(t)]).then((function(t){var n=o(t,2),r=n[0],i=n[1];return e.transformRectArray(r,i)}))},e.prototype.getTextDeviceContinueRectAtDeviceRect=function(t){var e=this;return Promise.all([this.getPDFPage(),this.getTextContinueRectAtDeviceRect(t)]).then((function(t){var n=o(t,2),r=n[0],i=n[1];return e.transformRectArray(r,i)}))},e.prototype.getTextRectsAtDeviceRect=function(t){var e=this,n=void 0;return this.getPDFPage().then((function(o){return(n=o).reverseDeviceRect(t,e.scale)})).then((function(t){return n.getTextRectsAtRect(t)}))},e.prototype.getTextContinueRectAtDeviceRect=function(t){var e=this,n=void 0;return this.getPDFPage().then((function(o){return(n=o).reverseDeviceRect(t,e.scale)})).then((function(t){return n.getTextContinuousRectsAtRect(t)}))},e.prototype.getTextContinueRectAtDevicePoints=function(t,e,n,r){return Promise.all([this.getPDFPage(),this.reverseDevicePoint(t),this.reverseDevicePoint(e)]).then((function(t){var e=o(t,3),i=e[0],a=e[1],s=e[2];return i.getTextContinuousRectsAtPoints(a,s,8,n,r)}))},e.prototype.getTextContinuousCharAtDeviceRect=function(t){var e=this,n=void 0;return this.getPDFPage().then((function(o){return(n=o).reverseDeviceRect(t,e.scale)})).then((function(t){return n.getTextContinuousCharsAtRect(t)}))},e.prototype.reverseDeviceRect=function(t){var e=this;return this.getPDFPage().then((function(n){return n.reverseDeviceRect(t,e.scale)}))},e.prototype.reverseDevicePoint=function(t){var e=o(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.getPDFPage().then((function(t){return t.reverseDevicePoint([n,r],i)}))},e.prototype.transformRectArray=function(t,e){for(var n=[],o=this.scale,r=e.length;r--;){var i=e[r];n[r]=t.getDeviceRect(i,o)}return n},e.prototype.getClientPoint=function(t,e){var n=this.$ui[0].getBoundingClientRect();return[t-n.left,e-n.top]},e.prototype.redraw=function(t){return t&&(this.updateRenderFlags(7),this.annotsRender.adjustHighlightsRender()),this.render()},e.prototype.redrawContent=function(t){var e=this;return(t?(e.pageContentTiles&&e.pageContentTiles.cleanCache(),e.contentImageDataCache?e.contentImageDataCache.clear():Promise.resolve()):Promise.resolve()).then((function(){return e.renderContentImage(e.scale,e.rotate)})).then((function(){return e.adjustHighlightAnnots()}))},e.prototype.getDevicePointFromEvent=function(t){var e=this.$ui.offset();return[t.pageX-e.left,t.pageY-e.top]},e.prototype.removeAnnotRenders=function(t){return this.annotsRender&&this.annotsRender.removeAnnotRenders(t)},e.prototype.redrawAnnotRenders=function(t){for(var e=[],n=[],o=0,r=t.length;o<r;o++){var i=t[o];"highlight"===i.getType()?e.push(i):n.push(i)}return e.length&&this.renderContentImage(),this.annotsRender.redrawAnnotRenders(n)},e.prototype.movedAnnotRenders=function(t,e){return this.annotsRender.movedAnnotRenders(t,e)},e.prototype.addAnnotRenders=function(t){if(this.annotsRender){for(var e=[],n=0,o=t.length;n<o;n++){var r=t[n];"highlight"===r.getType()&&e.push(r)}return e.length&&(this.pageContentTiles.cleanCache(),this.renderContentImage()),this.annotsRender.addAnnotRenders(t)}},e.prototype.getPageAreaRenderer=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new g.default(this,t,e,n,o)},e.prototype.getSnapshot=function(t,e,n,o){var i=this.getPageAreaRenderer(n,o,1,!0);return i.setPosition(t+n/2,e+o/2),i.update().then((function(t){var e=(0,r.default)();return t.toBlob((function(t){return e.resolve(t)}),"image/png"),e.promise}))},e.prototype.unActiveAnnotRender=function(){try{this.annotsRender.unActiveAnnot()}catch(t){}},e.prototype.activeGraphicsObject=function(t){},e.prototype.addCustomRenders=function(t){this.customsRender.addCustomRenders(t)},e.prototype.removeCustomRenders=function(t){this.customsRender.removeCustomRenders(t)},e.prototype.updateCustomRenders=function(t){this.customsRender.updateCustomRenders(t)},e.prototype.setWatermarkConfig=function(t){this.watermarkConfig=t},e.prototype.getWatermarkConfig=function(){return this.watermarkConfig},e}(l.default);e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageMatrix=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=0;switch(o%360){case 0:r=0;break;case 90:r=1;break;case 180:r=2;break;case 270:r=3}return[[n,0,0,n,0,0],[0,n,-n,0,n*e,0],[-n,0,0,-1,n*t,n*e],[0,-n,n,0,0,n*t]][r]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.returnPromise=e}return t.prototype.get=function(t){var e=this,n=this.promise=Promise.resolve(this.returnPromise(t));return n.then((function(t){e.data=t})),n},t.prototype.getCache=function(t){return void 0!==this.data?Promise.resolve(this.data):this.promise?this.promise:this.get(t)},t.prototype.remove=function(){this.promise=void 0,this.data=void 0},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(1)),r=s(n(157)),i=s(n(24)),a=s(n(2));n(44);s(n(55));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(){},l=function(t){function e(n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));i.name="annotsRender",i.$ui=n,i.renderingAnnotsCanvas=document.createElement("canvas"),i.annots=o,i.pageRender=r,i.annotRenders={};var a=i.pdfViewer.customs||{};return i.activeAnnotBefore=a.activeAnnotBefore||c,i.activeAnnotAfter=a.activeAnnotAfter||c,i.unActiveAnnotBefore=a.unActiveAnnotBefore||c,i.unActiveAnnotAfter=a.unActiveAnnotAfter||c,i}return u(e,t),e.prototype.render=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.scale=t,this.rotate=n;var i=this.annots,a=i.filter((function(t){return!e.annotRenders[t.getId()]})).map((function(t){return new r.default((0,o.default)("<div>"),(0,o.default)("<div>"),t,e)}));this.$ui.append(a.reduce((function(t,e){return t.append(e.$ui,e.$handler),t}),(0,o.default)(document.createDocumentFragment()))),a.forEach((function(t){return e.annotRenders[t.annot.getId()]=t}));var s=i.map((function(o){var r=o.getId();return e.annotRenders[r].render(t,n)}));return Promise.all(s).then((function(){e.adjustHighlightsRender()}))},e.prototype.adjustHighlightsRender=function(){return Promise.resolve()},e.prototype.adjustHighlightAnnots=function(){var t=[];for(var e in this.annotRenders){var n=this.annotRenders[e];"highlight"===n.annot.getType()&&t.push(n.redraw())}return Promise.all(t)},e.prototype.destroy=function(){for(var t in this.annotRenders){var e=this.annotRenders[t];e&&e.destroy()}},e.prototype.clickNoteAt=function(t){var e=this.annotRenders[t];e&&e.focus()},e.prototype.unActiveAnnot=function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.currentActiveAnnotRender){var e=this.currentActiveAnnotRender,n=this.pdfViewer.eventEmitter;this.currentActiveAnnotRender=null,Promise.resolve(this.unActiveAnnotBefore()).then((function(o){!1!==o&&Promise.resolve(t._unActiveAnnot(e)).then((function(){n.emit(a.default.unActiveAnnotation,e,e.annot.getId(),t),t.unActiveAnnotAfter(e)}))}))}},e.prototype._unActiveAnnot=function(t){t.unActive()},e.prototype._forEachRenderer=function(t){for(var e in this.annotRenders)t.call(this,this.annotRenders[e],e,this.annotRenders)},e.prototype.activeAnnot=function(t){var e=this,n=this.annotRenders[t];if(!n)return Promise.resolve();var o=this.pdfViewer.eventEmitter,r=this.pdfViewer.customs;return Promise.resolve((r.activeAnnotBefore||c)(n,t,this)).then((function(i){if(o.emit(a.default.activeAnnotationBefore,n,t,e),!1===i)return n;if(n.annot.isGrouped&&n.annot.isGrouped()){var s=[];return n.getRelevanceRenders().map((function(t){"popup"!==t.annot.getType()&&s.push(t.active())})),Promise.all(s).then((function(){return e.currentActiveAnnotRender=n,o.emit(a.default.activeAnnotation,n,t,e),Promise.resolve((r.activeAnnotationAfter||c)(n,t,e))})).then((function(){return o.emit(a.default.activeAnnotationAfter,n,t,e),n}))}return n.active().then((function(){return e.currentActiveAnnotRender=n,o.emit(a.default.activeAnnotation,n,t,e),Promise.resolve((r.activeAnnotationAfter||c)(n,t,e))})).then((function(){return o.emit(a.default.activeAnnotationAfter,n,t,e),n}))}))},e.prototype._activeAnnot=function(t,e){var n=this.annotRenders[t];return n?n.active():Promise.resolve()},e.prototype.splitAnnotIndexArr=function(t,e,n){for(var o=[],r=[],i=t+1,a=t-1,s=-1,u=0,c=e.length;u<c;u++){var l=e[u],f=l.length;if(1===f&&l[0]===t)return!1;for(var d=0,p=f;d<p;d++){var h=l[d];if(h instanceof Array){var g=h[0],y=h[1];if(t===g){s=u,o=l.slice(0,d),r=(r=y>i?[[i,y]]:[y]).concat(l.slice(d+1));break}if(t===y){s=u,o=l.slice(0,d),g<a?o.push([g,a]):o.push(g),r=l.slice(d+1);break}if(t>g&&t<y){s=u,o=l.slice(0,d),a===g?o.push(g):o.push([g,a]),r=(r=i===y?[y]:[[i,y]]).concat(l.slice(d+1));break}}else if(h===t){s=u,o=l.slice(0,d),r=l.slice(d+1);break}}if(-1!==s)break}if(-1===s)return!1;var v=JSON.stringify(e[s]),m=n[v],b=[s,1];return o.length&&b.push(o),b.push([t]),r.length&&b.push(r),e.splice.apply(e,b),{removeTileCanvas:m,beforeIndexArr:o,splitIndexArr:[t],afterIndexArr:r,tileCanvasMap:n,splitKey:v}},e.prototype.splitTileCanvas=function(t,e,n,r,i,a,s,u,c,l){var f=t.beforeIndexArr,d=t.splitIndexArr,p=t.afterIndexArr,h=t.removeTileCanvas,g=t.tileCanvasMap,y=t.splitKey,v=(0,o.default)(document.createDocumentFragment()),m=[];return f.length&&m.push(this.rangeAnnotTileCanvasRedraw(e,n,f,g,v,r,i,a,s,u,c,l)),m.push(this.renderSplitAnnots(d,e,n,v,r,c,l)),p.length&&m.push(this.rangeAnnotTileCanvasRedraw(e,n,p,g,v,r,i,a,s,u,c,l)),Promise.all(m).then((function(){h.$container.before(v),h.destroy(),delete g[y]}))},e.prototype.getAnnotRender=function(t){return this.annotRenders[t]},e.prototype.removeAnnotRender=function(t){var e=t.annot.getId();delete this.annotRenders[e]},e.prototype.showContextMenu=function(t,e,n){return this.activeAnnot(t).then((function(t){return t&&t.showContextMenu(e,n)}))},e.prototype.doubleTapAnnot=function(t){return this.activeAnnot(t).then((function(t){return t&&t.doubleTapAnnot()}))},e.prototype.addAnnots=function(t){var e=this,n=(0,o.default)(document.createDocumentFragment());this.annots.reduce((function(t,i){var a=i.getId();if(!t[a]){var s=(0,o.default)("<div></div>"),u=(0,o.default)("<div></div>");n.append(s),n.append(u),t[a]=new r.default(s,u,i,e)}return t}),this.annotRenders),this.$ui.append(n);for(var i=!1,a=0,s=t.length;a<s;a++){if("highlight"===t[a].getType()){i=!0;break}}i&&this.parent("pdfPageRender").redrawContent(!0)},e.prototype.getAnnotRenders=function(){return this.annotRenders},e.prototype.removeAnnotRenders=function(t){for(var e=this.annots,n=this.annotRenders,o=t.length;o--;){var r=t[o].getId(),i=this.getAnnotRender(r);i&&(i.remove(!0),delete n[r]);for(var a=0,s=e.length;a<s;a++){if(e[a].getId()==r){this.annots.splice(a,1);break}}}},e.prototype.redrawAnnotRenders=function(t){for(var e=t.length;e--;){var n=t[e].getId(),o=this.getAnnotRender(n);o&&o.redraw()}},e.prototype.movedAnnotRenders=function(t,e){for(var n=t.length;n--;){var o=t[n].getId(),r=this.getAnnotRender(o);r&&r.moved(e)}},e.prototype.addAnnotRenders=function(t){var e,n=this,i=[];t.filter((function(t){var e=t.getId(),o=n.annots.findIndex((function(t){return t.getId()===e}));o>-1?n.annots[o]=t:i.push(t)})),(e=this.annots).push.apply(e,i);var a=i.map((function(t){var e=new r.default((0,o.default)("<div>"),(0,o.default)("<div>"),t,n);return n.scale=n.pageRender.scale,e.render(n.scale,n.rotate),e}));if(a.length>0){var s=(0,o.default)(document.createDocumentFragment());a.forEach((function(t){s.append(t.$ui,t.$handler),n.annotRenders[t.annot.getId()]=t})),this.$ui.append(s)}},e.prototype.updateAnnotRendersId=function(t,e){t in this.annotRenders&&(this.annotRenders[e]=this.annotRenders[t],delete this.annotRenders[t])},e}(i.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(24);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return a.name=e.getDefaultName(),a.$ui=n,a.$handler=o,a.$page=i.$ui,a.annot=r,a.component=new(a.pdfViewer.annotManager.get(r))(r,n[0],o[0],a),a}return i(e,t),e.getDefaultName=function(){return"annotRender"},e.prototype.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.scale,o=this.rotate;this.scale=t,this.rotate=e;var r=this.component;if(!r.isHidden())return r.isUIVisible()&&r._showUI(),r.isUIVisible()?Promise.resolve(r.render(t,e)).then((function(i){var a=n!==t||o!==e;return Promise.resolve(r.afterRender({transformed:a,prescale:n,scale:t,prerotate:o,rotate:e})).then((function(t){return i}))})):Promise.resolve();r._hideUI()},e.prototype.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.scale=t,this.rotate=e,Promise.resolve(this.component.add(t,e))},e.prototype.active=function(){return Promise.resolve(this.component.active())},e.prototype.unActive=function(){return Promise.resolve(this.component.unActive())},e.prototype.destroy=function(){this.component.destroy()},e.prototype.focus=function(){return this.component.focus(this.$page)},e.prototype.blur=function(){return this.component.blur(this.$page)},e.prototype.remove=function(t){t&&(this.component.remove(),this.parent().removeAnnotRender(this));for(var e=this.getRelevanceRenders(),n=[],o=e.length;o--;)n[o]=e[o].remove(!0);return Promise.all(n)},e.prototype.showContextMenu=function(t,e){this.component.showContextMenu(t,e)},e.prototype.doubleTapAnnot=function(){this.component.doubleTapAnnot()},e.prototype.redraw=function(t){if(t)return Promise.resolve(this.component.redraw());for(var e=this.getGroupRenders(),n=[],o=e.length;o--;)n[o]=e[o].redraw(!0);return Promise.all(n)},e.prototype.getAnnot=function(){return this.getPDFAnnot()},e.prototype.getPDFAnnot=function(){return this.annot},e.prototype.getGroupRenders=function(){var t=this.annot,e=[t];if(!t.IsGrouped||!t.IsGrouped())return[this];e=[].concat(t.getGroupElements());var n=this.parent().getAnnotRenders(),o=[];for(var r in n){var i=n[r],a=e.indexOf(i.getPDFAnnot());if(a>-1&&(o.push(i),e.splice(a,1)),!e.length)break}return o},e.prototype.getRelevanceRenders=function(){var t,e=[],n=this.annot;(t=(n=n.getGroupHeader&&n.getGroupHeader()||n).getPopup&&n.getPopup())&&e.push(t),function(t,e){s(t,"getReplies",e)}(n,e),function(t,e){s(t,"getMarkedStates",e)}(n,e),function(t,e){s(t,"getReviewStates",e)}(n,e);var o=n.isGrouped&&n.isGrouped()?n.getGroupElements():[n];e=e.concat(o);var r=this.parent().getAnnotRenders(),i=[];try{for(var a in r){var u=r[a],c=e.indexOf(u.getPDFAnnot());if(c>-1&&(i.push(u),e.splice(c,1)),!e.length)break}}catch(t){}return i},e.prototype.moved=function(t){this.component.moved(),t&&t.getId()!==this.annot.getId()&&this.component.movedByOther(t)},e.prototype.getComponent=function(){return this.component},e}(((o=r)&&o.__esModule?o:{default:o}).default);function s(t,e,n){if(t[e]){var o=t[e](),r=o.length;if(r){n.push.apply(n,o);for(var i=r;i--;){s(o[i],e,n)}}}}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(56)),r=i(n(159));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return i.handlers={hand:r.default},i.destroyStateHandlers={},i}return a(e,t),e.prototype.active=function(){this.activated||(this.activated=!0,this.$handler.addClass("fv__active"));this.states.length||this.resetState()},e.prototype.destroy=function(){this.$handler.removeClass("fv__active")},e.prototype.intoState=function(t){var e=this.states;if(-1===e.indexOf(t)){e.push(t);var n=this.handlers[t];n&&(this.destroyStateHandlers[t]=n.bind(this)())}},e.prototype.outState=function(t){var e=void 0;(e=this.destroyStateHandlers[t])&&(e.bind(this)(),delete this.destroyStateHandlers[t]);var n;-1!==(n=this.states.indexOf(t))&&this.states.splice(n,1)},e.prototype.resetState=function(){this.setStates(["hand"])},e.prototype.setStates=function(t){for(var e=this.states,n=0,o=e.length;n<o;n++)this.outState(e[n]);for(var r=0,i=t.length;r<i;r++)this.intoState(t[r])},e.prototype.getStates=function(){return this.states},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=this,e=t.$handler,n=e[0],a=this.render,s=a.pdfViewer,u=s.eventEmitter,c=new o.default.Manager(n,{recognizers:[[o.default.Pan,{direction:o.default.DIRECTION_ALL}]]});c.add(new o.default.Tap({event:"doubletap",taps:2})),c.add(new o.default.Tap({event:"singletap"})),c.get("doubletap").recognizeWith("singletap"),c.get("singletap").requireFailure("doubletap"),c.on("singletap",(function(t){var e=a.annotsRender;if(e){e.unActiveAnnot(),a.parent("pdfDocRender").getFormRender().blurControl();var o=t.srcEvent,s=n.getBoundingClientRect(),c=(0,i.getClientX)(o),l=(0,i.getClientY)(o);a.getAnnotIdAtDevicePoint(c-s.left,l-s.top).then((function(n){if(n){var o=e.getAnnotRender(n);o?(u.emit(r.default.tapAnnotation,o,t),e.activeAnnot(n)):u.emit(r.default.tapPage,t)}else u.emit(r.default.tapPage,t)}))}else u.emit(r.default.tapPage,t)})),c.on("doubletap",(function(t){var e=a.annotsRender;if(e){e.unActiveAnnot(),a.parent("pdfDocRender").getFormRender().blurControl();var o=t.srcEvent,s=n.getBoundingClientRect(),c=(0,i.getClientX)(o),l=(0,i.getClientY)(o);a.getAnnotIdAtDevicePoint(c-s.left,l-s.top).then((function(n){if(n){var o=e.getAnnotRender(n);o?(u.emit(r.default.doubleTapAnnotation,o,t),e.doubleTapAnnot(n)):u.emit(r.default.doubleTapPage,t)}else u.emit(r.default.doubleTapPage,t)}))}else u.emit(r.default.doubleTapPage,t)})),c.on("press",(function(t){var e=a.annotsRender;if(e){e.unActiveAnnot(),a.parent("pdfDocRender").getFormRender().blurControl();var o=t.srcEvent,s=n.getBoundingClientRect(),c=(0,i.getClientX)(o),l=(0,i.getClientY)(o);a.getAnnotIdAtDevicePoint(c-s.left,l-s.top).then((function(n){if(n){var o=e.getAnnotRender(n);o?(u.emit(r.default.pressAnnotation,o,t),e.showContextMenu(n)):u.emit(r.default.pressPage,t)}else u.emit(r.default.pressPage,t)}))}else u.emit(r.default.pressPage,t)})),n.oncontextmenu=function(t){t.preventDefault()};var l=void 0;return e.on("mouseup",l=function(t){if(3===t.which){var e=a.annotsRender;if(e){e.unActiveAnnot();var o=t,i=n.getBoundingClientRect();a.getAnnotIdAtDevicePoint(o.clientX-i.left,o.clientY-i.top).then((function(n){if(n){var o=e.getAnnotRender(n);o?(u.emit(r.default.rightClickAnnotation,o,t),e.showContextMenu(n)):u.emit(r.default.rightClickPage,t)}else u.emit(r.default.rightClickPage,t)}))}else u.emit(r.default.rightClickPage,t)}}),function(){n.destroy(),e.off("mouseup",l);t=void 0,e=void 0,n=void 0,a=void 0,s=void 0,u=void 0,l=void 0}};var o=a(n(26)),r=a(n(2));n(44);var i=n(85);function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o(this,t),this.pageRender=e,this.secondaryScale=i,this.fixedPosition=a;var s=document.createElement("div");s.classList.add("fv__page-area-renderer");var u=document.createElement("canvas");s.appendChild(u),this.canvas=u,this.element=s,this.setDimension(n,r),this.offsetPageX=0,this.offsetPageY=0}return t.prototype.setDimension=function(t,e){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.element.style.cssText+="width: "+t+"px;height:"+e+"px"},t.prototype.setPosition=function(t,e){this.offsetPageX=t,this.offsetPageY=e},t.prototype.setSecondaryScale=function(t){t=Number(t),(!isFinite(t)||t<=0)&&(t=1),this.secondaryScale=t},t.prototype.update=function(){var t=this;return this.pageRender.getPDFPage().then((function(e){var n=t.pageRender.scale,o=t.canvas,r=4*n/3*t.secondaryScale,i=e.getPxWidth()*n*t.secondaryScale,a=e.getPxHeight()*n*t.secondaryScale,s=o.width,u=o.height,c=s/2,l=u/2,f=t.offsetPageX*t.secondaryScale,d=t.offsetPageY*t.secondaryScale,p=f-c,h=f+c,g=d-l,y=d+l,v=0,m=0;t.fixedPosition?(p<0&&(h=(p=0)+s),h>i&&(p=(h=i)-s),g<0&&(y=(g=0)+u),y>a&&(g=(y=a)-u)):(p<0?v=Math.min(-p,c):h>i&&(v=Math.max(i-h,-c)),g<0?m=Math.min(-g,l):y>a&&(m=Math.max(a-y,-l)),o.style.cssText+="left: "+v+"px; top: "+m+"px");var b=Math.max(0,p),w=Math.min(h,i),P=Math.max(0,g),A=Math.min(y,a),_=Math.round(w-b),C=Math.round(A-P),D=Math.abs(Math.min(0,v)),S=Math.abs(Math.min(0,m));return e.getPageBitmap(r,t.pageRender.rotate,{x:b,y:P,width:_,height:C},["page","annot"]).then((function(e){var n=e.buffer,o=e.width,r=e.height,i=t.canvas.getContext("2d"),a=i.createImageData(o,r);return a.data.set(new(Uint8ClampedArray||Uint8Array)(n)),i.putImageData(a,D,S),t.canvas}))}))},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(162)),r=a(n(163)),i=a(n(23));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(e,n,i,a){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{position:"Center",offsetX:0,offsetY:0,scaleX:1,scaleY:1,rotation:-45,opacity:100},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{font:"Microsoft Yahei",fontSize:20,color:"#000000",fontStyle:"normal",lineSpace:10,alignment:"center"};s(this,t),this.showWidth=e,this.showHeight=n,this.tileSize=i,this.smartScale=a;var l=u.position,f=u.offsetX,d=u.offsetY,p=u.scaleX,h=u.scaleY,g=u.rotation,y=u.opacity,v=c.font,m=c.fontSize,b=c.color,w=c.fontStyle,P=c.lineSpace,A=c.alignment;this.watermarkSettings=new o.default(l,f,d,p,h,g,y),this.watermarkTextProperties=new r.default(v,m,b,w,P,A)}return t.prototype.exportDataURL=function(t){var e=t.content,n=t.type;return"text"===n?this.createTextWatermark(e):"image"===n?this.createImageWatermark(e):void 0},t.prototype.createImageWatermark=function(t){var e=this,n=(0,i.default)(),o=document.createElement("canvas");o.width=this.showWidth,o.height=this.showHeight;var r=o.getContext("2d"),a=o.getContext("2d"),s=new Image;s.src=t;var u=this.watermarkSettings,f=u.getOffsetX(),d=u.getOffsetY(),p=u.getScaleX(),h=u.getScaleY(),g=u.getRotation(),y=this.showWidth,v=this.showHeight;return s.onload=function(){s.width=s.width*p*e.smartScale,s.height=s.height*h*e.smartScale,c(r,u.getOpacity()),r.save();var t=l(s.width,s.height,g),i=t.x,m=t.y;switch(u.getPosition()){case"TopLeft":a.translate(i+s.width/2,m+s.height/2);break;case"TopCenter":a.translate(y/2,m+s.height/2);break;case"TopRight":a.translate(y-i-s.width/2,m+s.height/2);break;case"CenterLeft":a.translate(i+s.width/2,v/2);break;case"Center":a.translate(y/2,v/2);break;case"CenterRight":a.translate(y-i-s.width/2,v/2);break;case"BottomLeft":a.translate(i+s.width/2,v-m-s.height/2);break;case"BottomCenter":a.translate(y/2,v-m-s.height/2);break;case"BottomRight":a.translate(y-i-s.width/2,v-m-s.height/2)}a.rotate(g*Math.PI/180),a.drawImage(s,-s.width/2+f,-s.height/2+d,s.width,s.height),r.restore(),n.resolve(o.toDataURL())},s.onerror=function(t){var e=new Error("Failed to load image");e.originEvent=t,n.reject(e)},s.oncancel=function(t){var e=new Error("Load image has been cancelled");e.originEvent=t,n.reject(e)},n.promise},t.prototype.createTextWatermark=function(t){var e=(0,i.default)(),n=document.createElement("canvas");n.width=this.showWidth,n.height=this.showHeight;var o=t.split("\n"),r=n.getContext("2d"),a=n.getContext("2d"),s=this.showWidth,u=this.showHeight,f=this.watermarkTextProperties,d=f.getFontSize()*this.smartScale,p=f.getLineSpace()*this.smartScale,h=f.getFontStyle(),g=f.getColor(),y=f.getAlignment(),v=f.getFont();a.font=d+"px "+v,a.fillStyle=g;var m=this.watermarkSettings,b=m.getOffsetX(),w=m.getOffsetY(),P=(m.getScaleX(),m.getScaleY(),m.getRotation()),A=0,_=o.length,C=_*d+(_-1)*p;o.map((function(t){var e=t.replace(/\s+/g,"");A=Math.max(e.length*d,A)})),a.lineWidth=1,a.strokeStyle=g,r.textBaseline="top",c(r,m.getOpacity());var D=l(A,C,P),S=D.x,R=D.y;switch(m.getPosition()){case"TopLeft":a.translate(S+A/2,R+C/2);break;case"TopCenter":a.translate(s/2,R+C/2);break;case"TopRight":a.translate(s-S-A/2,R+C/2);break;case"CenterLeft":a.translate(S+A/2,u/2);break;case"Center":a.translate(s/2,u/2);break;case"CenterRight":a.translate(s-S-A/2,u/2);break;case"BottomLeft":a.translate(S+A/2,u-R-C/2);break;case"BottomCenter":a.translate(s/2,u-R-C/2);break;case"BottomRight":a.translate(s-S-A/2,u-R-C/2)}return a.rotate(P*Math.PI/180),d<12&&a.scale(d/12,d/12),o.map((function(t,e){var n=t.replace(/(^\s*)|(\s*$)/g,""),o=n.length*d,i=void 0,s=void 0,u=0,c=0;switch(y){case"left":r.textAlign="left",i=-o/2-(A-o)/2,s=o/2-(A-o)/2,u=-A/2,c=-C/2;break;case"right":r.textAlign="right",i=-o/2+(A-o)/2,s=o/2+(A-o)/2,u=A/2,c=-C/2;break;default:r.textAlign="center",i=-o/2,s=o/2,c=-C/2}a.fillText(n,u+b,c+e*(p+d)+w),"underline"===h&&(a.moveTo(i,-C/2+d+e*(d+p)),a.lineTo(s,-C/2+d+e*(d+p)),a.stroke())})),e.resolve(n.toDataURL()),e.promise},t.prototype.getWatermarkSettings=function(){return this.watermarkSettings},t.prototype.getWatermarkTextProperties=function(){return this.watermarkTextProperties},t.prototype.getHeight=function(){return this.showHeight},t.prototype.getWidth=function(){return this.showWidth},t}();function c(t,e){t.globalAlpha=e/100}function l(t,e,n){var o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),r=Math.asin(e/2/o)/(Math.PI/180),i=void 0,a=void 0,s=(n+360)%360;s>=270&&s<360||s>=90&&s<180?(i=n-r,a=r+n):(i=n+r,a=n-r);var u=o*Math.abs(Math.sin(i*Math.PI/180));return{x:o*Math.abs(Math.cos(a*Math.PI/180))-t/2,y:u-e/2}}e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Center",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-45,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;o(this,t),this.position=e,this.offsetX=n,this.offsetY=r,this.scaleX=i,this.scaleY=a,this.rotation=s,this.opacity=u}return t.prototype.setPosition=function(t){this.position=t},t.prototype.getPosition=function(){return this.position},t.prototype.setOffsetX=function(t){this.offsetX=t},t.prototype.getOffsetX=function(){return this.offsetX},t.prototype.setOffsetY=function(t){this.offsetY=t},t.prototype.getOffsetY=function(){return this.offsetY},t.prototype.setScaleX=function(t){this.scaleX=t},t.prototype.getScaleX=function(){return this.scaleX},t.prototype.setScaleY=function(t){this.scaleY=t},t.prototype.getScaleY=function(){return this.scaleY},t.prototype.setRotation=function(t){this.rotation=t},t.prototype.getRotation=function(){return this.rotation},t.prototype.setOpacity=function(t){this.opacity=t},t.prototype.getOpacity=function(){return this.opacity},t}();e.default=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Microsoft Yahei",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"center";o(this,t),this.font=e,this.fontSize=n,this.color=r,this.fontStyle=i,this.lineSpace=a,this.alignment=s}return t.prototype.setFont=function(t){this.font=t},t.prototype.getFont=function(){return this.font},t.prototype.setFontSize=function(t){this.fontSize=t},t.prototype.getFontSize=function(){return this.fontSize},t.prototype.setColor=function(t){this.color=t},t.prototype.getColor=function(){return this.color},t.prototype.setFontStyle=function(t){this.fontStyle=t},t.prototype.getFontStyle=function(){return this.fontStyle},t.prototype.setLineSpace=function(t){this.lineSpace=t},t.prototype.getLineSpace=function(){return this.lineSpace},t.prototype.setAlignment=function(t){this.alignment=t},t.prototype.getAlignment=function(){return this.alignment},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(24);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r));return i.name="customsRender",i.$ui=n,i.customs=o,i.customRenders={},i}return i(e,t),e.prototype.render=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.scale=t,this.rotate=e;var n=this.customs;this.adjustCustomsRenderInit(n);var o=this.pdfViewer.customRenderManager,r=this.customRenders;return Promise.all(n.map((function(n){return r[o.getCustomDataId(n)].render(t,e)})))},e.prototype.activeCustom=function(t){var e=this.customRenders[this.customManager.getCustomDataId(t)];return e?(this.currentActiveCustomRender=e,e.render(this.scale,this.rotate)):Promise.reject()},e.prototype.unActiveCustoms=function(){var t=this.currentActiveCustomRender;if(t)return t.unActive()},e.prototype.adjustCustomsRenderInit=function(t){var e=this,n=this.pdfViewer.customRenderManager,o=this.customRenders,r=document.createDocumentFragment();t.filter((function(t){return!o[n.getCustomDataId(t)]})).map((function(t){var i=document.createElement("div"),a=document.createElement("div");r.appendChild(i),r.appendChild(a),o[n.getCustomDataId(t)]=new(n.get(t))(i,a,t,e)})).length&&this.$ui.append(r)},e.prototype.addCustomRenders=function(t){this.adjustCustomsRenderInit(t);var e=this.pdfViewer.customRenderManager,n=this.customRenders,o=this.scale,r=this.rotate;return Promise.all(t.map((function(t){return n[e.getCustomDataId(t)].render(o,r)})))},e.prototype.removeCustomRenders=function(t){var e={},n=this.pdfViewer.customRenderManager,o=this.customRenders;t.map((function(t){var r=n.getCustomDataId(t);e[r]=1,delete o[r]}));for(var r=this.customs,i=r.length;i--;)e[n.getCustomDataId(r[i])]&&r.splice(i,1)},e.prototype.destroy=function(){var t=this.customRenders;for(var e in t){var n=t[e];n&&n.destroy()}},e.prototype.updateCustomRenders=function(t){for(var e=this,n={},o=this.pdfViewer.customRenderManager,r=this.customRenders,i=t.map((function(t){var e=o.getCustomDataId(t);return n[e]=t,r[e]})),a=this.customs,s=a.length;s--;){var u=o.getCustomDataId(a[s]);n[u]&&(a[s]=n[u])}return Promise.all(i.map((function(t){return t&&t.render(e.scale,e.rotate)})))},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.x,o=t.y,r=e.x,i=e.y,a=Math.abs(n-r),s=Math.abs(o-i);return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(n(24)),r=n(0),i=l(n(1)),a=l(n(2)),s=l(n(30)),u=n(31),c=l(n(12));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return r.docRender=o,(r.form=n.getPDFForm()).setActionHandler((function(t,e,n,o){return r.execAction("Field",t,e,n,o)})),r.offKeyHandle&&r.offKeyHandle(),r.offKeyHandle=r.pdfViewer.getDefaultKeyboardEventBinder().on(u.KEY_MAP_FIELD_TAB_NEXT,(function(t){return r.focusNextWidget(t)}),!0),r.pdfViewer.eventEmitter.on(a.default.tapPage,(function(){r.blurControl()})).on(a.default.tapAnnotation,(function(){r.blurControl()})).on(a.default.openFileSuccess,(function(){r.control=null})),r}return f(e,t),e.prototype.focusNextWidget=function(t){var e=0,n=0;if(this.control){var o=this.control.annot;e=o.getObjNum(),n=o.getPage().getIndex()}return t.preventDefault(),t.stopPropagation(),function t(e,n,o,r){for(var i=n.pageCache,a=i[o],s=a.filterAnnot(e,"widget");s;){var u=s.getField();if(!(7===u.getType()||1&u.getFlags()||98&s.getFlags()))return s.updateUI({type:"focus"});s=a.filterAnnot(s.getObjNum(),"widget")}var c=n.getPageCount(),l=o+1;for(l%=c;!(l in i)&&l!=o;)l+=1,l%=c;((l%=c)!=r||e)&&t(null,n,l,r)}(e,this.docRender.doc,n,n),!1},e.prototype.destroy=function(){this.offKeyHandle&&this.offKeyHandle(),this.offKeyHandle=c.default},e.prototype.setRuntimeHighlight=function(t){t?(0,i.default)(".fv__ui-form-foreground:not(.form-field-readonly)").show():(0,i.default)(".fv__ui-form-foreground:not(.form-field-readonly)").hide()},e.prototype.setRuntimeHighlightColor=function(t){(0,i.default)(".fv__ui-form-foreground").css("background-color",(0,r.colorConvertor)(t,"HTML",.25))},e.prototype.isReadOnly=function(){var t=this.docRender.getUserPermission().getValue();return!(32&t||256&t)},e.prototype.fill=function(t,e,n,o){return this.form.fill(t,e,n,o)},e.prototype.isSameTarget=function(t){return this.control==t},e.prototype.focusControl=function(t,e){if(this.control!=t){if(t&&function(t){var e=t.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return e.bottom<100||e.top>n}(t.$handler[0])){var n=t.annot,o=n.getPage().getIndex(),r=n.getRect();this.pdfViewer.getPDFDocRender().goToPage(o,{x:r.left,y:r.bottom,width:r.right-r.left,height:r.top-r.bottom},!0)}if(this.control)if(this.blurControl()&&!e)return;this.pdfViewer.setActiveElement(t),this.control=t,t&&t.focus(e)}},e.prototype.blurControl=function(){var t=this.control;if(this.control=null,t){t.blur();document.activeElement.blur()}},e.prototype.setValue=function(t,e){return t.getField().setValue(e)},e.prototype.calculate=function(t){this.form.calculate(t)},e.prototype.execAction=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!e)return!0;var a=this.pdfViewer.actionManager.get(e,this);return a.setSourceTarget(n,o),"TypeJavaScript"==e.getType()&&(a.setTypeName(t,r),a.setParam(i)),a.active()},e.prototype.getFormatedData=function(t){var e=this,n={},o=this.form;return o.enumFields([],0,(function(r,i,a){var u=o.getField(i),c=u.getAction(s.default.FieldWillFormat);if(6==r&&c){var l=a;if("display"==t)if(u.getDisplayValue())n[i]=u.getDisplayValue();else{var f=a.length>0&&c&&e.execAction("Field",c,null,u,s.default.FieldWillFormat);!1!==f&&f&&f.rc&&(l=f.value),n[i]=l}else n[i]=l}})),n},e}(o.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(168)),r=u(n(169)),i=u(n(170)),a=u(n(171)),s=u(n(172));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=l(t);return{loadPath:function(t,o){var r=void 0;try{r=n.versions[t.join(" ")][o.join(" ")]}catch(t){r=n.version}return e+"/{{lng}}/{{ns}}.json?v="+r}}}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},s.default,t)}e.default=function(t){var e,n=o.default.createInstance();return n.use(r.default).init(Object.assign({},{load:"currentOnly",fallbackLng:"en-US",backend:{backends:[i.default,a.default],backendOptions:t.backendOptions||[(e=t.version,{prefix:"foxit_pdf_sdk_for_web_i18next_",expirationTime:6048e6,versions:l(e).versions}),c(t.version,t.absolutePath)]}},t.initOption)),n}},function(t,e){t.exports=a},function(t,e){t.exports=s},function(t,e){t.exports=u},function(t,e){t.exports=c},function(t,e,n){"use strict";n.r(e),e.default={version:"210662738a83b6ed82119d430c28bbb9",versions:{"en-US":{ui_:"9b925483be3fb2db9bbc3abc778ca813",viewer_:"4b80ca4ec11cc85013476c6f76d8aa51"},"zh-CN":{ui_:"18fa21dc0f70adfdf2b948a751c0b859",viewer_:"ca4d0edaf809044e6d29fa27e11f560c"}},languageVersions:{"en-US":"3e2be4c7e88cd140ab46456aa45cc855","zh-CN":"f3cf4a51b9efdec9fac2773fd12fc8c8"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(){for(var t="",e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];for(var r=0,a=n.length;r<a;r++){var s=n[r];s&&(t+=t?"/"+s:s)}return i(t)}function r(t){return"/"===t[0]}function i(t){var e=r(t),n=t&&"/"===t[t.length-1];return(t=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(i))}return n}(t.split("/"),!r).join("/"))||r?(t&&n&&(t+="/"),(e?"/":"")+t):""}function a(t){var e=/^([A-z]+)\:\/\/([A-z0-9\-_\.]+)(\:(\d+))?(\/[^?#]*)?(\?[^#]*)?(#.*)?$/,n=t.match(e);if(!n)throw"this is not a valid url";return{match:n,protocol:n[1],hostname:n[2],host:n[2]+(n[3]||""),port:+n[4]||80,pathname:n[5]||"/",search:n[6]||"",hash:n[7]||""}}function s(t){return t.split("/").slice(0,-1).join("/")||"/"}e.getCurrentPath=function(){var t=a(location.href);return t.protocol+"://"+t.host+s(t.pathname)},e.join=o,e.isUrl=function(t){return/^([A-z]+)\:\/\/([A-z0-9\-_\.]+)(\:(\d+))?(\/[^?#]*)?(\?[^#]*)?(#.*)?$/.test(t)},e.urlJoin=function(t){for(var e=a(t),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.unshift(s(e.pathname)),e.protocol+"://"+e.host+o.apply(void 0,r)+e.search+e.hash},e.resolvePath=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=e[0],r=void 0;if(o.match(/^\w+?:\/\//)){var i=/^(\w+?:\/\/[^\/]+)(\/?.*)/,a=o.match(i);r=a[1],e[0]=a[2]||"/"}var s=e.filter((function(t){return"string"==typeof t&&t.length>0})),u=s.map((function(t){return t.replace(/[\/\\]+/,"/").split("/").filter((function(t,e,n){return""!==t||0===e}))})).reduce((function(t,e){return e.forEach((function(e,n){switch(e){case".":break;case"..":t.pop();break;case"":t=[""];break;default:t.push(e)}})),t}),[]).join("/");return s.length>0&&(/[\/\\\\]/.test(s[0][0])||0===s[0].indexOf(".."))&&"/"!==u[0]&&(u="/"+u),r?r+u:u},e.mergePath=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join("/").replace(/[\/\\]+/,"/")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(175),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ViewModes={},this.pdfViewer=e,this.register(i.default)}return t.prototype.register=function(t){return this.ViewModes[t.getName()]=t},t.prototype.get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.getName();return this.ViewModes[t]||i.default},t.prototype.switchTo=function(t){var e=this.currentViewMode,n=this.get(t);if(e!==n){this.currentViewMode=n;var o=this.pdfViewer,r=o.pdfViewerRender;r&&(o.setActiveElement(null),r.setViewMode(n))}},t.prototype.getCurrentViewMode=function(){return this.currentViewMode||i.default},t.prototype.getAll=function(){return this.ViewModes},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(91)),r=i(n(1));i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return a(e,t),e.getName=function(){return"continuous-view-mode"},e.prototype.getItems=function(){return this.docRender.$container.find(".fv__pdf-view-mode-item")},e.prototype.into=function(){var t=this;this.docRender.$container.addClass(e.getName());var n=this.docRender.viewerRender.scrollWrap;this._unwatchScrollEvent=n.addScrollEventListener((function(){clearTimeout(t.scrollEventTimer),t.scrollEventTimer=setTimeout((function(){var e=t.docRender.pagesRender;e&&e.renderVisiblePages().then((function(){t.docRender.isGoto?setTimeout((function(){t.docRender.isGoto=!1}),40):t.docRender.setCurrentPageIndex(t.getCurrentPageIndex())}),(function(){}))}),100)}))},e.prototype.getDocLayoutWidth=function(){var t=this.docRender.doc.pageCache,e=0;return t.forEach((function(t){e=Math.max(t.getPxWidth(),e)})),e},e.prototype.getFitHeight=function(t){var e=this.docRender.viewerRender.scrollWrap;return e.getHeight()-e.getScrollOffsetTop()},e.prototype.getFitWidth=function(t){var e=this.docRender.viewerRender.scrollWrap;return e.getWidth()-e.getScrollOffsetLeft()},e.prototype.jumpToPage=function(t,e){var n=e.x,o=void 0===n?0:n,r=e.y,i=void 0===r?0:r,a=this.getItems();t>=a.length?t=a.length-1:t<0&&(t=0);var s=a[t],u=s.offsetLeft+o,c=s.offsetTop+i;this.docRender.viewerRender.scrollWrap.scrollTo(u,c)},e.prototype.getVisibleIndexes=function(){var t=this.docRender.viewerRender.scrollWrap,e=t.getScrollTop()-t.getScrollOffsetTop()-20,n=t.getHeight(),o=e+n+20,r=[];return this.getItems().each((function(t,n){var i=n.offsetTop,a=n.offsetHeight+i;e<a&&o>i&&r.push(t)})),r},e.prototype.out=function(){this.docRender.$container.removeClass(e.getName()),this._unwatchScrollEvent&&this._unwatchScrollEvent()},e.prototype.getCurrentPageIndex=function(){for(var t=this.getItems(),e=this.docRender.viewerRender.scrollWrap,n=e.getScrollTop(),o=n+e.getHeight(),i=(e.getScrollLeft(),e.getWidth(),void 0),a=[],s=0;s<t.length;s++){var u=t[s],c=u.offsetTop,l=(0,r.default)(u).height(),f=c+l;c<=n&&f>n&&f<o?a.push({index:s,height:f-n}):c>=n&&f<o?a.push({index:s,height:l}):c<=n&&f>o?i=s:c>=n&&c<o&&f>o&&a.push({index:s,height:o-c})}if(null==i)for(var d=0,p=0;p<a.length;p++)a[p].height>d&&(d=a[p].height,i=a[p].index);return i},e.prototype.getNextPageIndex=function(){var t=this.docRender.doc.getPageCount(),e=this.docRender.currentPageIndex;return e<t-1&&e++,e},e.prototype.getPrevPageIndex=function(){var t=this.docRender.currentPageIndex;return t>0&&t--,t},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=T(n(28)),r=(T(n(15)),T(n(34)),T(n(99))),i=T(n(60)),a=T(n(102)),s=T(n(103)),u=T(n(51)),c=T(n(196)),l=T(n(63)),f=T(n(66)),d=T(n(106)),p=T(n(108)),h=T(n(109)),g=T(n(110)),y=T(n(111)),v=T(n(69)),m=T(n(112)),b=T(n(113)),w=T(n(211)),P=T(n(114)),A=n(4),_=T(n(70)),C=T(n(116)),D=T(n(117)),S=T(n(221)),R=T(n(118)),E=T(n(119)),O=T(n(233)),I=T(n(55)),x=T(n(120)),M=T(n(2));function T(t){return t&&t.__esModule?t:{default:t}}var F=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.matchRules=[],this.getAnnotFlag_=function(){return 0}}return t.prototype.registerMatchRule=function(t){return this.matchRules.push(t),t},t.prototype.unRegisterMatchRule=function(t){var e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},t.prototype.get=function(t){for(var e=this.matchRules,n=this.getDefault(t),o=void 0,r=0,i=e.length;r<i;r++){var a=e[r];if("function"==typeof a){var s=a(t,n);s&&(o=s,n=s)}}return o||n},t.prototype.getDefault=function(t){switch(t.getType()){case"highlight":return r.default;case"squiggly":return s.default;case"strikeout":switch(t.getIntent()){case A.Intents.STRIKEOUT_TEXTEDIT:return E.default}return i.default;case"underline":return a.default;case"line":switch(t.getIntent()){case A.Intents.LINE_DIMENSION:return c.default}return u.default;case"polyline":return l.default;case"fileattachment":return g.default;case"text":return h.default;case"circle":return p.default;case"caret":return y.default;case"freetext":switch(t.getIntent()){case A.Intents.FREETEXT_TYPEWRITER:return _.default;case A.Intents.FREETEXT_CALLOUT:return C.default;default:return D.default}case"ink":return b.default;case"polygon":switch(t.getIntent()){case A.Intents.POLYGON_CLOUD:return P.default;case A.Intents.POLYGON_DIMENSION:default:return f.default}case"square":return v.default;case"sound":return x.default;case"stamp":return m.default;case"link":return d.default;case"widget":return(0,S.default)(t);case"screen":return R.default;case"redact":return w.default;case"watermark":return O.default;default:return o.default}},t.prototype.getAnnotFlag=function(t){var e=new I.default(t.getFlags());return e.or(this.getAnnotFlag_(t)),e},t.prototype.setViewerAnnotFlag=function(t){this.getAnnotFlag_=t,this.pdfViewer.eventEmitter.emit(M.default.globalAnnotFlagChanged)},t}();e.default=F},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={zIndexDown:{name:"zIndexDown",nameI18nKey:"viewer_:contextmenu.annot.zIndexDown",callback:function(){this.data("zIndexContextMenu").zIndexDown()},visible:function(){return this.data("zIndexContextMenu").checkZIndexDown()}},zIndexRecover:{name:"zIndexRecover",nameI18nKey:"viewer_:contextmenu.annot.zIndexRecover",callback:function(){this.data("zIndexContextMenu").zIndexRecover()},visible:function(){return!this.data("zIndexContextMenu").checkZIndexDown()}}};e.getZIndexContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-container";return{selector:t,items:o,events:{show:function(){return this.data("zIndexContextMenu").updateDeleteStatus(!0),!0},hide:function(){return this.data("zIndexContextMenu").updateDeleteStatus(!1),!0}}}},e.annotZIndexComponentKey="zIndexContextMenu"},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";var e="",n=(t=t||{}).disabledAttr,r=t.disabled,i=t.i18nRoot,a=t.hlm,s=t.endingStyle,u=t.borderWidth,c=o.$escape,l=t.minBorderWidth,f=t.borderStyle,d=t.cloudy,p=t.highlightingMode,h=t.rotation,g=t.fillColor,y=t.checked,v=t.strFillColor,m=t.color,b=t.lineStartStyle,w=t.startStyle,P=t.lineEndStyle,A=t.endStyle,_=t.hasCap,C=(t.hasCapChecked,t.opacity);e+='<div class="fv__annot-properties-dialog">\n<div>\n    ';n=r?"disabled=disabled":"",a=(i="viewer_:dialog.")+"highlightingMode.",s=i+"endingStyle.";if(e+="\n    ",void 0!==u&&(e+='\n        <div class="fv__property-item">\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"borderWidth")),e+='</span>\n            <div class="fv__property-item-field-container">\n                <input id="thickness-input-tx" type="number"\n                       min="',e+=c(null!=l?l:1),e+='" max="12" step="1" value="',e+=c(u),e+='"\n                       ',e+=c(n),e+='>\n                <input id="thickness-input" type="range"\n                       value="',e+=c(u),e+='" min="1" max="12" step="1"\n                       ',e+=c(n),e+=">\n            </div>\n        </div>\n    "),!1!==f&&(e+='\n        <div class="fv__property-item">\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"borderStyle")),e+='</span>\n            <div class="fv__property-item-field-container">\n                <select id="borderStyle-select" ',e+=c(n),e+='>\n                    <option value="0">———————————</option>\n                    <option value="1">. . . . . . . . . . . . . . . . . . . . .</option>\n                    <option value="2">-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -</option>\n                    <option value="3">—  —  —  —  —  —  —  —  —</option>\n                    <option value="4">—  -  —  -  —  -  —  -  —  -  —  -</option>\n                    <option value="5">——  -  ——  -  ——  -  ——  -</option>\n                    <option value="6">-   ———   -   ———   -   ———</option>\n                    ',!0===d&&(e+='\n                    <option value="7">﹋﹋﹋﹋﹋﹋﹋﹋﹋﹋﹋</option>\n                    <option value="8">~~~~~~~~~~~~~~~~~~~</option>\n                    '),e+="\n                </select>\n            </div>\n        </div>\n    "),void 0!==p&&(e+='\n        <div class="fv__property-item">\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(a+"title")),e+='</span>\n            <div class="fv__property-item-field-container">\n                <select id="highlighting-select" ',e+=c(n),e+='>\n                    <option value="0">',e+=c(o.i18n(a+"none")),e+='</option>\n                    <option value="1">',e+=c(o.i18n(a+"invert")),e+='</option>\n                    <option value="2">',e+=c(o.i18n(a+"outline")),e+='</option>\n                    <option value="3">',e+=c(o.i18n(a+"push")),e+='</option>\n                    <option value="4">',e+=c(o.i18n(a+"toggle")),e+="</option>\n                </select>\n            </div>\n        </div>\n    "),void 0!==h&&(e+='\n            <div class="fv__property-item">\n                <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"rotate")),e+='</span>\n                <div class="fv__property-item-field-container">\n                    <select id="rotation-select" ',e+=c(n),e+='>\n                        <option value="0">0</option>\n                        <option value="1">90</option>\n                        <option value="2">180</option>\n                        <option value="3">270</option>\n                    </select>\n                </div>\n            </div>\n        '),void 0!==g){y="",r="",v=g;if(0==g)r="disabled=1",y="checked=1",v="#FFFFFF";else{for(v=(g&=16777215).toString(16);v.length<6;)v="0"+v;v="#"+v}e+='\n        <div class="fv__property-item">\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"fillColor")),e+='</span>\n\n            <div class="fv__property-item-field-container">\n                <input id="fillcolor-input" type="color" value="',e+=c(v),e+='" ',e+=c(r),e+=" ",e+=c(n),e+='>\n\n                <label>\n                    <input id="fillColor-transparent-input" type="checkbox" ',e+=c(y),e+=" ",e+=c(n),e+=">\n                    ",e+=c(o.i18n(i+"transparent")),e+="\n                </label>\n            </div>\n        </div>\n    "}(void 0!==m&&(0===m&&(m="#ffffff"),e+='\n    <div class="fv__property-item">\n        <label>\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"color")),e+='</span>\n            <div class="fv__property-item-field-container">\n                <input id="color-input" type="color" value="',e+=c(m),e+='" ',e+=c(n),e+=">\n            </div>\n        </label>\n    </div>\n    "),b&&(e+='\n        <div class="fv__property-item">\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"startStyle")),e+='</span>\n            <div class="fv__property-item-field-container">\n                <select id="startstyle-select" value="',e+=c(w),e+='" ',e+=c(n),e+='>\n                    <option value="0">',e+=c(o.i18n(s+"none")),e+='</option>\n                    <option value="1">',e+=c(o.i18n(s+"square")),e+='</option>\n                    <option value="2">',e+=c(o.i18n(s+"circle")),e+='</option>\n                    <option value="3">',e+=c(o.i18n(s+"diamond")),e+='</option>\n                    <option value="4">',e+=c(o.i18n(s+"openArrow")),e+='</option>\n                    <option value="5">',e+=c(o.i18n(s+"closedArrow")),e+='</option>\n                    <option value="6">',e+=c(o.i18n(s+"butt")),e+='</option>\n                    <option value="7">',e+=c(o.i18n(s+"reverseOpenArrow")),e+='</option>\n                    <option value="8">',e+=c(o.i18n(s+"reverseClosedArrow")),e+='</option>\n                    <option value="9">',e+=c(o.i18n(s+"slash")),e+="</option>\n                </select>\n            </div>\n        </div>\n        "),P&&(e+='\n        <div class="fv__property-item">\n            <span class="fv__property-item-name-container">',e+=c(o.i18n(i+"endStyle")),e+='</span>\n            <div class="fv__property-item-field-container">\n                <select id="endstyle-select" value="',e+=c(A),e+='" ',e+=c(n),e+='>\n                    <option value="0" >',e+=c(o.i18n(s+"none")),e+='</option>\n                    <option value="1" >',e+=c(o.i18n(s+"square")),e+='</option>\n                    <option value="2" >',e+=c(o.i18n(s+"circle")),e+='</option>\n                    <option value="3" >',e+=c(o.i18n(s+"diamond")),e+='</option>\n                    <option value="4" >',e+=c(o.i18n(s+"openArrow")),e+='</option>\n                    <option value="5" >',e+=c(o.i18n(s+"closedArrow")),e+='</option>\n                    <option value="6" >',e+=c(o.i18n(s+"butt")),e+='</option>\n                    <option value="7" >',e+=c(o.i18n(s+"reverseOpenArrow")),e+='</option>\n                    <option value="8" >',e+=c(o.i18n(s+"reverseClosedArrow")),e+='</option>\n                    <option value="9" >',e+=c(o.i18n(s+"slash")),e+="</option>\n                </select>\n            </div>\n        </div>\n        "),void 0!==_)&&(e+='\n    <div class="fv__property-item">\n        <label class="fv__property-item-only-field-container">\n            <input id="hasCap-input" type="checkbox" ',e+=c(_?"checked=true":""),e+=" ",e+=c(n),e+=">\n            ",e+=c(o.i18n(i+"hasCap")),e+="\n        </label>\n    </div>\n    ");return!1!==C&&(e+='\n    <div class="fv__property-item">\n        <label class="fv__property-item-name-container">',e+=c(o.i18n(i+"opacity")),e+='</label>\n        <div class="fv__property-item-field-container">\n            <input id="opacity-input" type="range" value="',e+=c(C),e+='" min="0" max="1" step="0.01" ',e+=c(n),e+=">\n        </div>\n    </div>\n    "),e+='\n</div>\n<div class="fv__btn-close-container">\n    <button type="button" class="fv__btn fv__btn-close">',e+=c(o.i18n(i+"close")),e+="</button>\n</div>\n</div>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",NONE:"none"}},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",r=o.$escape,i=t.content,a=(arguments[1],function(t){return e+=t}),s=t.replies;return e+='<dialog class="fv__dialog fv__annot-reply-dialog">\n    <div class="fv__textarea-container">\n        <label>\n            <span class="fv__label-block-text">',e+=r(o.i18n("viewer_:dialog.content")),e+='</span>\n            <textarea class="fv__block-textarea content-textarea">',e+=r(i),e+='</textarea>\n        </label>\n    </div>\n    <div class="fv__textarea-container">\n        <label>\n            <span class="fv__label-block-text">',e+=r(o.i18n("viewer_:dialog.reply")),e+='</span>\n            <textarea class="fv__block-textarea reply-textarea"></textarea>\n        </label>\n    </div>\n    <div class="fv__btn_reply_container">\n        <button type="button" class="fv__btn fv__btn-reply" disabled>',e+=r(o.i18n("viewer_:dialog.reply")),e+='</button>\n    </div>\n    <div class="fv__dialog-replies-block">\n        ',a(n(93)(s)),e+='\n    </div>\n    <div class="fv__btn-close-container">\n        <button type="button" class="fv__btn fv__btn-close">',e+=r(o.i18n("viewer_:dialog.close")),e+="</button>\n    </div>\n</dialog>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getDefaultConfig=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"annotComponent",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".fv__pdf-page-annot-handler-rect";return{selector:e,items:{copy:{name:"copy",nameI18nKey:"viewer_:contextmenu.annot.copy",callback:function(e,n,o){this.data(t).copyText()},visible:function(){var e=this.data(t);if(!e.annot.isArea())return!e.annot.isReplace||!e.annot.isReplace()}},reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data(t).showReplyDialog("reply")},disabled:function(){return this.data(t).replyDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(e,n,o){this.data(t).showPropertiesDialog(e,n,o)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(t).removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}},events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__text-boundary fv__text-boundary-',e+=(0,o.$escape)(t.direction),e+='">\n    <div class="fv__text-boundary-blank">\n        <div class="fv__text-boundary-cursor"></div>\n        <div class="fv__text-boundary-sign"></div>\n    </div>\n</div>'}},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",n=o.$escape,r=t.previewer,i=t.moveable,a=t.resizable,s=t.enableFrame,u=t.enableDiagonally,c=t.enableSizeBox,l=t.rotatable;return e+='<div class="fv__shape-control">\n    <canvas class="fv__shape-control-previewer" ',e+=n(r?"":"style=display:none"),e+=" ></canvas>\n    ",i&&(e+='\n    <div class="fv__shape-control-move-area"></div>\n    '),e+="\n    ",a&&(e+="\n    ",s&&(e+='\n    <div class="fv__shape-controller" direction="north"></div>\n    <div class="fv__shape-controller" direction="south"></div>\n    <div class="fv__shape-controller" direction="west"></div>\n    <div class="fv__shape-controller" direction="east"></div>\n    '),e+="\n    ",u&&(e+='\n    <div class="fv__shape-controller" direction="north-west"></div>\n    <div class="fv__shape-controller" direction="north-east"></div>\n    <div class="fv__shape-controller" direction="south-west"></div>\n    <div class="fv__shape-controller" direction="south-east"></div>\n    '),e+="\n    ",c&&(e+='\n    <div class="fv__shape-size"></div>\n    '),e+="\n    "),e+="\n    ",l&&(e+='\n    <div class="fv__shape-rotate">\n        <div class="fv-shape-rotate-handle fv__cursor-rotation"></div>\n        <div class="fv-shape-rotate-degree"></div>\n        <div class="fv-shape-rotate-bound"></div>\n    </div>\n    '),e+="\n</div>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(50),i=s(n(32)),a=s(n(16));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,o=void 0===n?0:n,r=e.right,i=void 0===r?0:r,a=e.bottom,s=void 0===a?0:a,c=e.top,l=void 0===c?0:c,f=e.box,d=e.marginBox,p=void 0===d?{left:0,top:0,right:0,bottom:0}:d,h=e.expansion,g=void 0===h?{left:0,top:0,right:0,bottom:0}:h;u(this,t),this.processing=!1,this.boundary={left:o,right:i,bottom:s,top:l},this.freeBoundary=null,this.marginBox=p,this.shape=this.calculateShape(),this.setBoundaryBox(f),this.tasks=[],this.expansion=g}return o(t,null,[{key:"ADJUST_MODE_FREE",get:function(){return"free"}},{key:"ADJUST_MODE_UNIFORM",get:function(){return"uniform"}},{key:"ADJUST_MODE_SQUARE",get:function(){return"square"}}]),t.prototype.process=function(){this.tasks=[],this.processing=!0,this.freeBoundary=Object.assign({},this.boundary)},t.prototype.end=function(){this.tasks=[],this.processing=!1,this.boundary=this.squareBoundary||this.freeBoundary,this.freeBoundary=null,this.squareBoundary=null,this.shape=this.calculateShape()},t.prototype.cancel=function(){this.tasks=[],this.processing=!1,this.freeBoundary=null,this.squareBoundary=null},t.prototype.setBoundaryBox=function(t){var e=this;this.box=t,this.boxStrict=t?function(n){return e._adjustBoundaryByBox(t,n)}:i.default},t.prototype.undo=function(){var t=this.tasks.pop();"function"==typeof t&&t()},t.prototype.addTask=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.tasks.push((function(){return t.apply(void 0,n)}))},t.prototype.recordFreeBoundary=function(){var t=this,e=this.freeBoundary?Object.assign({},this.freeBoundary):null;this.addTask((function(e){t.freeBoundary=e}),e)},t.prototype.recordSquareBoundary=function(){var t=this,e=this.squareBoundary?Object.assign({},this.squareBoundary):null;this.addTask((function(e){t.squareBoundary=e}),e)},t.prototype.adjustWest=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var o=this.freeBoundary,i=this.freeBoundary.left+e,a=this.freeBoundary.right;switch(o.left=Math.min(i,a),o.right=Math.max(i,a),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareH();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),a<i?r.DIR_EAST:r.DIR_WEST},t.prototype.adjustEast=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var o=this.freeBoundary.right+e,i=this.freeBoundary.left;switch(this.freeBoundary.left=Math.min(i,o),this.freeBoundary.right=Math.max(i,o),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareH();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),o<i?r.DIR_WEST:r.DIR_EAST},t.prototype._adjustToSquareH=function(){var t=this.freeBoundary,e=t.right-t.left,n=t.bottom-t.top,o=t.top+n/2-e/2,r=o+e;t.top=o,t.bottom=r},t.prototype.adjustNorth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var o=this.freeBoundary.top+e,i=this.freeBoundary.bottom;switch(this.freeBoundary.top=Math.min(o,i),this.freeBoundary.bottom=Math.max(o,i),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareV();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),i<o?r.DIR_SOUTH:r.DIR_NORTH},t.prototype.adjustSouth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var o=this.freeBoundary.bottom+e,i=this.freeBoundary.top;switch(this.freeBoundary.top=Math.min(i,o),this.freeBoundary.bottom=Math.max(i,o),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareV();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),o<i?r.DIR_NORTH:r.DIR_SOUTH},t.prototype._adjustToSquareV=function(){var t=this.freeBoundary,e=t.right-t.left,n=t.bottom-t.top,o=t.left+e/2-n/2,r=o+n;t.left=o,t.right=r},t.prototype._adjustToSquare=function(t,e){var n=this.freeBoundary.right-this.freeBoundary.left,o=this.freeBoundary.bottom-this.freeBoundary.top,i=Math.min(n,o);this.squareBoundary=Object.assign({},this.freeBoundary),e==r.DIR_WEST?this.squareBoundary.left=this.freeBoundary.right-i:this.squareBoundary.right=this.freeBoundary.left+i,t==r.DIR_SOUTH?this.squareBoundary.bottom=this.freeBoundary.top+i:this.squareBoundary.top=this.freeBoundary.bottom-i},t.prototype.adjustNorthWest=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),this.squareBoundary=null,o){case t.ADJUST_MODE_UNIFORM:return this._adjustNorthWestUniform(e,n,i),this.boxStrict(this.freeBoundary),r.DIR_NORTH_WEST;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var a=this.adjustNorth(n),s=this.adjustWest(e);return o==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(a,s),this.boxStrict(this.squareBoundary)),a+"-"+s}},t.prototype._adjustNorthWestUniform=function(t,e,n){var o=this.freeBoundary,r=o.right,i=o.bottom,a=o.left,s=o.top,u=r-(a+t),c=i-(s+e),l=r-a,f=i-s,d=Math.min(u,c);d>=n&&(d===u?c=d/l*f:u=d/f*l,this.freeBoundary.left=r-u,this.freeBoundary.top=i-c)},t.prototype.adjustNorthEast=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),o){case t.ADJUST_MODE_UNIFORM:return this._adjustNorthEastUniform(e,n,i),this.boxStrict(this.freeBoundary),r.DIR_NORTH_EAST;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var a=this.adjustNorth(n),s=this.adjustEast(e);return this.squareBoundary=null,o==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(a,s),this.boxStrict(this.squareBoundary)),a+"-"+s}},t.prototype._adjustNorthEastUniform=function(t,e,n){var o=this.freeBoundary,r=o.right,i=o.bottom,a=o.left,s=o.top,u=r+t-a,c=i-(s+e),l=r-a,f=i-s,d=Math.min(u,c);d>=n&&(d===u?c=d/l*f:u=d/f*l,this.freeBoundary.right=a+u,this.freeBoundary.top=i-c)},t.prototype.adjustSouthWest=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),o){case t.ADJUST_MODE_UNIFORM:return this._adjustSouthWestUniform(e,n,i),this.boxStrict(this.freeBoundary),r.DIR_SOUTH_WEST;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var a=this.adjustSouth(n),s=this.adjustWest(e);return this.squareBoundary=null,o==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(a,s),this.boxStrict(this.squareBoundary)),a+"-"+s}},t.prototype._adjustSouthWestUniform=function(t,e,n){var o=this.freeBoundary,r=o.right,i=o.bottom,a=o.left,s=o.top,u=r-(a+t),c=i+e-s,l=r-a,f=i-s,d=Math.min(u,c);d>=n&&(d===u?c=d/l*f:u=d/f*l,this.freeBoundary.left=r-u,this.freeBoundary.bottom=s+c)},t.prototype.adjustSouthEast=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),o){case t.ADJUST_MODE_UNIFORM:return this._adjustSouthEastUniform(e,n,i),this.boxStrict(this.freeBoundary),r.DIR_SOUTH_EAST;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var a=this.adjustSouth(n),s=this.adjustEast(e);return this.squareBoundary=null,o==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(a,s),this.boxStrict(this.squareBoundary)),a+"-"+s}},t.prototype._adjustSouthEastUniform=function(t,e,n){var o=this.freeBoundary,r=o.right,i=o.bottom,a=o.left,s=o.top,u=r+t-a,c=i+e-s,l=r-a,f=i-s,d=Math.min(u,c);d>=n&&(d===u?c=d/l*f:u=d/f*l,this.freeBoundary.right=a+u,this.freeBoundary.bottom=s+c)},t.prototype.adjustPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.recordFreeBoundary(),this.freeBoundary.left+=t,this.freeBoundary.right+=t,this.freeBoundary.top+=e,this.freeBoundary.bottom+=e,this.boxStrict(this.freeBoundary)},t.prototype.adjustPositionTo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.freeBoundary.left,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.freeBoundary.top;this.adjustPosition(t-this.freeBoundary.left,e-this.freeBoundary.top)},t.prototype._adjustMovingBoundaryByBox=function(t,e){var n=e.right-e.left,o=e.bottom-e.top;this.boundary.right>t.right&&(this.boundary.right=t.right,this.boundary.left=t.right-n),this.boundary.bottom>t.bottom&&(this.boundary.bottom=t.bottom,this.boundary.top=t.bottom-o),this.boundary.left<t.left&&(this.boundary.left=t.left,this.boundary.right=t.left+n),this.boundary.top<t.top&&(this.boundary.top=t.top,this.boundary.bottom,t.top)},t.prototype._adjustBoundaryByBox=function(t,e){var n=this.marginBox;n||(n={}),n.left=n.left||0,n.top=n.top||0,n.bottom=n.bottom||0,n.right=n.right||0;var o=a.default.on(e).expand(n.top,n.left,n.bottom,n.right).extract(),r=o.right-o.left,i=o.bottom-o.top;o.right>t.right&&(o.right=t.right,o.left=t.right-r),o.bottom>t.bottom&&(o.bottom=t.bottom,o.top=t.bottom-i),o.left<t.left&&(o.left=t.left,o.right=t.left+r),o.top<t.top&&(o.top=t.top,o.bottom=t.top+i);var s=a.default.on(o).shrink(n.top,n.left,n.bottom,n.right).extract();a.default.copyTo(s,e)},t.prototype.setMargin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.marginBox,e=t.left,n=void 0===e?0:e,o=t.top,r=void 0===o?0:o,i=t.right,a=void 0===i?0:i,s=t.bottom,u=void 0===s?0:s;this.marginBox={left:n,top:r,right:a,bottom:u}},t.prototype.getAdjustRect=function(){var t=this.squareBoundary||this.freeBoundary;return t?Object.assign({},t):null},t.prototype.getAdjustShape=function(){var t=this.squareBoundary||this.freeBoundary;return t?{left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}:null},t.prototype.getRect=function(){return Object.assign({},this.boundary)},t.prototype.getShape=function(){return Object.assign({},this.shape)},t.prototype.calculateShape=function(){var t=this.boundary;return{left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}},t.prototype.applyToDom=function(t){var e=this.getShape(),n=this.expansion;t.style.cssText+="\n                left: "+(e.left-n.left)+"px;\n                top: "+(e.top-n.top)+"px;\n                width: "+(e.width+(n.left+n.right))+"px;\n                height: "+(e.height+(n.top+n.bottom))+"px;\n                "},t.prototype.applyAdjustingToDom=function(t){var e=this.getAdjustShape(),n=this.expansion;t.style.cssText+="\n                left: "+(e.left-n.left)+"px;\n                top: "+(e.top-n.top)+"px;\n                width: "+(e.width+(n.left+n.right))+"px;\n                height: "+(e.height+(n.top+n.bottom))+"px;\n                "},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(58)),r=f(n(186)),i=n(33),a=f(n(187)),s=f(n(98)),u=f(n(188)),c=f(n(189)),l=f(n(59));function f(t){return t&&t.__esModule?t:{default:t}}var d={},p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.toggleLogger=function(t){o.logOff="boolean"==typeof t?t:!o.logOff},t.getLogger=function(t){return d[t]=d[t]||this.createLogger(t)},t.createLogger=function(t){var e,n=void 0,f=void 0;switch(o.logLayout){case"complex":n=new u.default;break;case"simple":default:n=new r.default}switch(o.logLevel){case"debug":f=i.LEVEL_DEBUG;break;case"info":f=i.LEVEL_INFO;break;case"warn":f=i.LEVEL_WARN;break;case"error":default:f=i.LEVEL_ERROR}return e=o.logAppenders.map((function(t){switch(t){case"console":return new s.default;case"websocket":return new WebsocketAppender}})).filter((function(t){return t instanceof l.default})),new a.default(new c.default(e),n,t,f)},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(33);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.format=function(t,e,n){return[{type:"string",value:"["+this.levelText(e)+"]"},{type:"string",value:"{"+t+"}"}].concat(n.map((function(t){return null==t?{type:void 0===t?"undefined":o(t),value:t+""}:{type:void 0===t?"undefined":o(t),value:t}})))},t.prototype.levelText=function(t){switch(t){case r.LEVEL_DEBUG:return"DEBUG";case r.LEVEL_INFO:return"INFO";case r.LEVEL_WARN:return"WARN";case r.LEVEL_ERROR:return"ERROR"}return"UNKNOWN LEVEL"},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoLogger=void 0;var o=n(33),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(58));function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(e,n,o,r){s(this,t),this.appender=e,this.layout=n,this.module=o,this.minLevel=r,this.logOff=!1}return t.prototype.toggle=function(t){this.logOff="boolean"==typeof t?t:!r.logOff},t.prototype.setLevel=function(t){this.minLevel=t},t.prototype.doLog=function(t,e){if(!this.isLoggable(t)){var n=this.layout.format(this.module,t,e);this.appender.print(n,t)}},t.prototype.log=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.doLog(t,n)},t.prototype.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_DEBUG,e)},t.prototype.info=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_INFO,e)},t.prototype.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_WARN,e)},t.prototype.error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_ERROR,e)},t.prototype.isLoggable=function(t){return this.logOff||r.logOff||t<this.minLevel||t<r.logLevel},t}();e.default=u;e.NoLogger=function(t){function e(){return s(this,e),i(this,t.apply(this,arguments))}return a(e,t),e.prototype.doLog=function(){},e}(u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(33);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.format=function(t,e,n){var r=this,i=(new Error).stack,a=void 0;i&&(a="\n  "+i.split("\n")[4].trim());return[{type:"string",style:"color: "+this.levelColor(e)+";",value:"["+this.levelText(e)+"]"},{type:"string",style:"color: magenta",value:"{"+t+"}"}].concat(n.map((function(t){return null==t?{type:void 0===t?"undefined":o(t),style:"color: megenta;font-weight: bold",value:t+""}:"string"==typeof t?{type:void 0===t?"undefined":o(t),style:"color: "+r.levelColor(e),value:t}:{type:void 0===t?"undefined":o(t),value:t}}))).concat({type:"string",style:"color: grey;",value:a})},t.prototype.levelColor=function(t){switch(t){case r.LEVEL_DEBUG:return"blue";case r.LEVEL_INFO:return"green";case r.LEVEL_WARN:return"#5C3C00";case r.LEVEL_ERROR:return"red"}return"#000"},t.prototype.levelText=function(t){switch(t){case r.LEVEL_DEBUG:return"DEBUG";case r.LEVEL_INFO:return"INFO";case r.LEVEL_WARN:return"WARN";case r.LEVEL_ERROR:return"ERROR"}return"UNKNOWN LEVEL"},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(n(98));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var i=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o.appenders=n||[],o}return r(e,t),e.prototype.print=function(t,e){this.appenders.forEach((function(n){return n.print(t,e)}))},e}(o(n(59)).default);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(6),a=n(22),s=(o=a)&&o.__esModule?o:{default:o};n(11);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.lastRenderPromise=Promise.resolve(),o.lastX=0,o.lastY=0,o}return u(e,t),e.prototype.resetCanvasSize=function(){},e.prototype.closeTo=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(t-e)<n},e.prototype.render=function(e,n){var o=this;this.prepared||this.prepare();var a=this.component,s=this.component.annot,u=s.page,c=this.canvas.getContext("2d"),l=a.getTileConfig(e,n),f=r(l,10),d=(f[0],f[1],f[2],f[3],f[4],f[5]),p=(f[6],f[7],f[8]),h=f[9],g=s.getRect(),y=u.getDeviceRect(g,d),v=u.getDeviceRect(g,e),m=v.right-v.left,b=v.bottom-v.top,w=y.right-y.left,P=y.bottom-y.top;if(!this.closeTo(y.left,this.lastX)||!this.closeTo(y.top,this.lastY)){var A=y.left-this.lastX,_=y.top-this.lastY,C=c.getImageData(0,0,this.canvas.width,this.canvas.height);t.prototype.resetCanvasSize.call(this,w,P),this.canvas.style.cssText+="width: "+m+"px;height: "+b+"px;",this.container.style.cssText+="\n                left: "+v.left+"px;\n                top: "+v.top+"px;\n            ",c.putImageData(C,-A,-_)}return this.lastX=y.left,this.lastY=y.top,a.getPDFPage().getPageAndHighlightBitmap((0,i.pt2px)(d),0,{x:Math.ceil(p*d),y:Math.ceil(h*d),width:w,height:P}).then((function(e){var n=e.buffer,r=e.width,i=e.height,a=new(Uint8ClampedArray||Uint8Array)(n),s=c.createImageData(r,i);s.data.set(a),t.prototype.resetCanvasSize.call(o,r,i),o.container.style.cssText+="\n                left: "+v.left+"px;\n                top: "+v.top+"px;\n            ",o.canvas.style.cssText+="width: "+m+"px;height: "+b+"px;",c.putImageData(s,0,0)}))},e}(s.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(61);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return s(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);var n=this.component.annot.info,o=e.quadRects,r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),r.save(),r.globalAlpha=n.opacity,r.strokeStyle=this.numberToRGBAString(n.borderColor),o.forEach((function(t){r.beginPath(),r.lineWidth=Math.max(1,.12568*t.height);var e=t.left,n=t.right,o=t.top+t.textBlockHeight/2;r.moveTo(e,o),r.lineTo(n,o),r.stroke()})),r.restore()},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(61);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return s(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);var n=this.component.annot.info,o=e.quadRects,r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),r.save(),r.globalAlpha=n.opacity,r.strokeStyle=this.numberToRGBAString(n.borderColor);var i=Math.max(1,.12568*o[0].height);o.forEach((function(t){r.beginPath(),r.lineWidth=i;var e=t.left,n=t.right,o=t.top+t.textBlockHeight-i/2;r.moveTo(e,o),r.lineTo(n,o),r.stroke()})),r.restore()},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(61);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return s(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);var n=this.component.annot.info,o=e.quadRects,r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),r.save(),r.globalAlpha=n.opacity,r.strokeStyle=this.numberToRGBAString(n.borderColor);var i=Math.max(1,.12823*o[0].height);o.forEach((function(t){r.beginPath(),r.lineWidth=i;var e=.2504*t.height,n=Math.ceil(t.width/e),o=t.bottom-e,a=t.bottom;r.moveTo(t.left,o);for(var s=1;s<=n;s++)r.lineTo(t.left+s*e,s%2==0?o:a);r.stroke()})),r.restore()},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=u},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";var e="",n=(t=t||{}).i,r=(t.pointIndex,o.$escape);for(n=0;n<t.anchorCount;n++){e+="\n";e+='\n<div class="fv__pdf-annot-line-point" data-index="',e+=r(n),e+='"><div class="fv__pdf-annot-line-point-item"></div></div>\n'}return e+="\n\n"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=u(n(22)),i=u(n(19)),a=n(4),s=u(n(104));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.helper=new s.default(n),o}return c(e,t),e.prototype.doRender=function(t){var e=this,n=this.component.annot,o=(n.page,this.component.annot.info),r=o.borderInfo||{},s=t.scale,u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height);var c=this.convertPointToPixel(r.width,s);u.save(),t.lineWidth=c,u.globalAlpha=o.opacity,u.strokeStyle=this.numberToRGBAString(o.borderColor),u.lineWidth=c;var l=t.outerRect,f=this.convertToPathPoint(n.getStartPoint(),s,l),d=this.convertToPathPoint(n.getEndPoint(),s,l),p=n.getLeaderLinePoints(),h=this.convertToPathPoint(p.start,s,l),g=this.convertToPathPoint(p.end,s,l),y=n.getCaptionOffset(),v=new i.default(this.convertPointToPixel(y.x,s),-this.convertPointToPixel(y.y,s)),m=this.convertPointToPixel(n.getLeaderLineExtend(),s);try{if(r.style===a.BORDER_STYLE.DASHED){var b=r.dashes||[],w=r.dashPhase||0;u.setLineDash(b.map((function(t){return e.convertPointToPixel(t,s)}))),u.lineDashOffset=this.convertPointToPixel(w,s)}u.beginPath(),this.renderLine(u,f,d,h,g,m),u.closePath(),u.stroke(),this.helper.renderLineEnd(u,c,t,n.getStartStyle(),g,h),this.helper.renderLineEnd(u,c,t,n.getEndingStyle(),h,g),this.renderLineCaption(u,t,c,h,g,v)}finally{u.restore()}},e.prototype.convertToPathPoint=function(t,e,n){var r=this.component.annot.page.getDevicePoint([t.x,t.y],e),a=o(r,2),s=a[0],u=a[1];return new i.default(s-n.left,u-n.top)},e.prototype.renderLine=function(t,e,n,o,r,i){if(t.moveTo(o.x,o.y),t.lineTo(r.x,r.y),t.moveTo(e.x,e.y),t.lineTo(o.x,o.y),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),i>0){var a=o.move(-i,e),s=r.move(-i,n);t.moveTo(o.x,o.y),t.lineTo(a.x,a.y),t.moveTo(r.x,r.y),t.lineTo(s.x,s.y)}},e.prototype.renderLineCaption=function(t,e,n,o,r,i){var s=this.component.annot;e.scale;if(s.hasCaption()){var u=s.info,c=s.getContent();if("string"==typeof c&&!((c=c.trim()).length<1)){var l,f=Math.atan2(r.y-o.y,r.x-o.x),d=o.distanceTo(r),p=o.move(.5*d,r),h=32*Math.max(1,(l=n,Math.log(l)/Math.log(5)))*e.scale,g=16777215-(16777215&u.borderColor^10855845),y=void 0;t.save(),t.fillStyle=this.numberToRGBAString(g),t.font=h+"px bold Arial",t.textBaseline="middle",t.textAlign="center";var v=t.measureText(c),m=p.move(i.y,o).rotate(Math.PI/2,p);switch(s.getCaptionPos()){case a.LINE_CAPTION_POSITION.POS_INLINE:if(0!=i.y&&0!=i.x){y=m.move(i.x,p).rotate(Math.PI/2,m);break}y=m;break;case a.LINE_CAPTION_POSITION.POS_TOP:var b=v.actualBoundingBoxAscent+v.actualBoundingBoxDescent,w=p.move(.5*(n+b)-i.y,r).rotate(Math.PI/2,p);y=0!=i.x?w.move(i.x,p).rotate(Math.PI/2,m):w}t.translate(y.x,y.y),t.rotate(f),t.fillText(c,0,0),t.restore(),t.beginPath();var P=m.move(i.x-v.width/2,p).rotate(Math.PI/2,m);t.moveTo(p.x,p.y),t.lineTo(m.x,m.y),t.moveTo(m.x,m.y),t.lineTo(P.x,P.y),t.closePath(),t.stroke()}}},e}(r.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(51),i=(o=r)&&o.__esModule?o:{default:o},a=n(35);function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.name="lineMeasurement",a}return s(e,t),e.prototype.getLengthInInchUnit=function(){var t=this.getDimension(),e=t.width,n=t.height;return this._getLengthInInchUnit(e,n)},e.prototype._getLengthInInchUnit=function(t,e){var n=a.PIXEL_HORIZONTAL.convertTo(t,a.INCH),o=a.PIXEL_VERTICAL.convertTo(e,a.INCH);return Math.round(100*Math.sqrt(n*n+o*o))/100},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=c(n(22)),i=c(n(104)),a=c(n(19)),s=n(4),u=c(n(64));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var f=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.helper=new i.default(n),o}return l(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polyline")},e.prototype.doRender=function(t){var e=this.component.annot,n=e.info,r=n.borderInfo||{},i=t.scale,u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height);var c=this.convertPointToPixel(r.width,i),l=this.component.getPDFPage(),f=t.innerRect,d=this.component.getVertexes().map((function(t){var e=l.getDevicePoint([t.x,t.y],i),n=o(e,2),r=n[0],s=n[1];return new a.default(r-f.left,s-f.top)}));t.vertexes=d,u.save(),t.lineWidth=c,u.globalAlpha=n.opacity,u.strokeStyle=this.numberToRGBAString(n.borderColor),u.lineWidth=c;try{switch(r.style){case s.BORDER_STYLE.DASHED:case s.BORDER_STYLE.SOLID:this.renderSolid(u,n,t);break;case s.BORDER_STYLE.BEVELED:}var p=d[d.length-1],h=d[d.length-2],g=d[0],y=d[1];this.helper.renderLineEnd(u,c,t,e.getStartStyle(),y,g),this.helper.renderLineEnd(u,c,t,e.getEndingStyle(),h,p)}finally{u.restore()}},e.prototype.renderSolid=function(t,e,n){var o=this,r=n.scale,i=e.borderInfo,a=i.dashes||[],c=i.dashPhase||0;i.style===s.BORDER_STYLE.DASHED&&(t.setLineDash(a.map((function(t){return o.convertPointToPixel(t,r)}))),t.lineDashOffset=this.convertPointToPixel(c,r)),new u.default(n.vertexes,!1).render(t),t.stroke()},e}(r.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=c(n(22)),i=n(67),a=c(n(19)),s=c(n(64)),u=n(4);n(105);function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var p=function(t){function e(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l(this,e);var r=f(this,t.call(this,n));return r.closing=o,r}return d(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polygon")},e.prototype.doRender=function(t){var e=this.component.annot.info,n=e.borderInfo||{},r=t.scale,i=this.canvas.getContext("2d");i.clearRect(0,0,this.canvas.width,this.canvas.height);var s=this.convertPointToPixel(n.width,r),c=this.component.getPDFPage(),l=t.innerRect,f=this.component.getVertexes().map((function(t){var e=c.getDevicePoint([t.x,t.y],r),n=o(e,2),i=n[0],s=n[1];return new a.default(i-l.left,s-l.top)}));t.vertexes=f,i.save(),t.lineWidth=s,i.globalAlpha=e.opacity,i.strokeStyle=0===s?"transparent":this.numberToRGBAString(e.borderColor),i.lineWidth=s;try{switch(n.style){case u.BORDER_STYLE.DASHED:case u.BORDER_STYLE.SOLID:case u.BORDER_STYLE.UNDERLINE:case u.BORDER_STYLE.BEVELED:this.renderSolid(i,e,t);break;case u.BORDER_STYLE.CLOUDY:0==s?this.renderSolid(i,e,t):this.renderCloud(i,e,t)}}finally{i.restore()}},e.prototype.renderCloud=function(t,e,n){var o=e.fillColor,r=e.borderInfo.cloudIntensity,a=n.innerRect;new i.CloudyPathGenerator(n.vertexes,a,n.outerRect).generate(16/r).render(t),o&&(t.fillStyle=this.numberToRGBAString(o),t.fill()),t.stroke()},e.prototype.renderSolid=function(t,e,n){var o=this,r=n.scale,i=e.borderInfo,a=i.dashes||[],c=i.dashPhase||0,l=e.fillColor;i.style===u.BORDER_STYLE.DASHED&&(t.setLineDash(a.map((function(t){return o.convertPointToPixel(t,r)}))),t.lineDashOffset=this.convertPointToPixel(c,r)),new s.default(n.vertexes,this.closing).render(t),l&&(t.fillStyle=this.numberToRGBAString(l),t.fill()),t.stroke()},e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}},actions:{name:"actions",nameI18nKey:"viewer_:contextmenu.annot.actions",callback:function(){this.data("annotComponent").showActionsDialog()},disabled:function(){return this.data("annotComponent").actionsDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};e.getLinkContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:o,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",n=o.$escape;return e+='<dialog class="fv__ui-layer fv__action-dialog" >\n   <div class="fv__action-dialog-header">\n      <div class="fv__action-dialog-title">',e+=n(o.i18n("viewer_:dialog.actionDialog.title")),e+='</div>\n      <div class="fv__action-dialog-close"><i class="fv__action-dialog-close-icon">x</i></div>\n   </div>\n   <div class="fv__action-dialog-body">\n      <div class="fv__action-dialog-select">\n         <span class="fv__action-dialog-select-title">',e+=n(o.i18n("viewer_:dialog.actionDialog.selectKey")),e+=':</span>\n         <select id="select-action">\n            <option value="TypeGoto">',e+=n(o.i18n("viewer_:dialog.actionDialog.selectAction.goto")),e+='</option>\n            <option value="TypeURI">',e+=n(o.i18n("viewer_:dialog.actionDialog.selectAction.webLink")),e+='</option>\n         </select>\n      </div>\n      <div class="fv__action-dialog-url fv__action-dialog-box" data-type="TypeURI">\n         <div class="fv__action-dialog-url-title fv__action-box-title">',e+=n(o.i18n("viewer_:dialog.actionDialog.URLAction.title")),e+='</div>\n         <div class="fv__action-dialog-url-input">\n            <input class="fv__action-dialog-input" id="url-input"/>\n         </div>\n      </div>\n      <div class="fv__action-dialog-goto fv__action-dialog-box" style="display:block;"  data-type="TypeGoto">\n         <div class="fv__action-dialog-goto-title fv__action-box-title">',e+=n(o.i18n("viewer_:dialog.actionDialog.GotoAction.title")),e+='</div>\n         <div class="fv__action-dialog-goto-container">\n            <div class="fv__action-dialog-goto-center">\n               <div class="fv__action-dialog-goto-left">\n                  <div class="fv__action-dialog-goto-target">',e+=n(o.i18n("viewer_:dialog.actionDialog.GotoAction.target")),e+=':</div>\n               </div>\n               <div class="fv__action-dialog-goto-right">\n                  <div class="fv__action-dialog-goto-input">\n                     <input type="number" min="1" class="fv__action-dialog-input" id="goto-input"/>\n                  </div>\n                  <div class="fv__action-dialog-goto-position">\n                     <span class="fv__action-dialog-goto-position-left">',e+=n(o.i18n("viewer_:dialog.actionDialog.GotoAction.left")),e+=':</span><span class="fv__action-dialog-goto-left-value">0</span>\n                     <span class="fv__action-dialog-goto-position-top">',e+=n(o.i18n("viewer_:dialog.actionDialog.GotoAction.top")),e+=':</span><span class="fv__action-dialog-goto-top-value">0</span>\n                  </div>\n               </div>\n            </div>\n         </div>\n      </div>\n   </div>\n   <div class="fv__action-dialog-footer">\n      <div class="fv__action-dialog-btns">\n          <button type="button" class="fv__action-btn fv__action-btn-cancel ">',e+=n(o.i18n("viewer_:dialog.actionDialog.Cancel")),e+='</button>\n          <button type="button" class="fv__action-btn fv__action-btn-ok">',e+=n(o.i18n("viewer_:dialog.actionDialog.OK")),e+="</button>\n      </div>\n   </div>\n</dialog>"}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(107)),r=n(4);i(n(16));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return u(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.style.cssText+="box-sizing: content-box;"},e.prototype.doRender=function(t){return this.component.highlightModeIsActive?this.doRenderHighlightMode(t):(this.component.annot.getHighlightingMode()===r.HIGHLIGHTING_MODE.PUSH&&(this.canvas.style.cssText+="border: none; border-color: none;"),this.doRenderNormal(t))},e.prototype.doRenderHighlightMode=function(t){switch(this.component.annot.getHighlightingMode()){case r.HIGHLIGHTING_MODE.NONE:return this.doRenderNormal(t);case r.HIGHLIGHTING_MODE.OUTLINE:return this.renderOutline(t);case r.HIGHLIGHTING_MODE.INVERT:return this.renderInvert(t);case r.HIGHLIGHTING_MODE.PUSH:return this.renderPush(t);case r.HIGHLIGHTING_MODE.TOGGLE:return this.renderToggle(t)}},e.prototype.doRenderNormal=function(t){this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.renderSquare(t)},e.prototype.getLineWidth=function(t){var e=this.component.annot.info.borderInfo;return this.convertPointToPixel(e.width,t)/2},e.prototype.renderSquare=function(t){var e=this.canvas.getContext("2d"),n=this.component.annot.info,o=n.borderInfo,i=this.getLineWidth(t.scale);switch(e.save(),t.lineWidth=i,e.globalAlpha=n.opacity,e.strokeStyle=0===i?"transparent":this.numberToRGBAString(n.borderColor),e.lineWidth=i,o.style){case r.BORDER_STYLE.DASHED:this.renderDashed(e,n,t);break;default:this.renderSolid(e,n,t)}e.stroke()},e.prototype.renderInvert=function(t){var e=this,n=this.canvas.getContext("2d"),o=this.component.annot,r=o.page,i=(o.info.borderInfo,this.getLineWidth(t.scale),t.outerRect),a={x:i.left,y:i.top,width:i.width,height:i.height};r.getPageBitmap(4*t.scale/3,t.rotate,a,["page","annot"]).then((function(t){var o=t.width,r=t.height,i=t.buffer;n.clearRect(0,0,e.canvas.width,e.canvas.height);var a=new(Uint8ClampedArray||Uint8Array)(i),s=n.createImageData(o,r);s.data.set(a),n.save();for(var u=s.data,c=0;c<u.length;c+=4)u[c]^=255,u[c+1]^=255,u[c+2]^=0;n.putImageData(s,0,0),n.restore()}))},e.prototype.renderToggle=function(t){},e.prototype.renderPush=function(t){var e=this,n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.style.cssText+="\n            border: 1px solid;\n            border-color: black #aaa #aaa black;\n        ";var o=this.component.annot.page,r=t.outerRect,i={x:r.left,y:r.top,width:r.width,height:r.height};o.getPageBitmap(4*t.scale/3,t.rotate,i,["page","annot"]).then((function(o){var r=o.width,i=o.height,a=o.buffer;n.clearRect(0,0,e.canvas.width,e.canvas.height);var s=new(Uint8ClampedArray||Uint8Array)(a),u=n.createImageData(r,i);u.data.set(s),n.putImageData(u,0,0),e.renderSquare(t)}))},e.prototype.renderOutline=function(t){var e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height);this.component.annot.info.borderInfo;this.renderSquare(t);var n=5*this.getLineWidth(t.scale)/6,o=.5*n,r=t.outerRect;e.save(),e.lineWidth=n,e.strokeStyle="black",e.strokeRect(o,o,r.width-n,r.height-n),e.restore()},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r,i){var a=Math.max(r,i),s=r/a,u=i/a;t.save(),t.scale(s,u),t.beginPath(),t.arc(e/s,n/u,a,0,o.TOWPI,!1),t.closePath(),t.restore()};var o=n(204)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TOWPI=2*Math.PI},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCircleContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return(0,o.getCommonContextMenu)(t)};var o=n(47)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(22)),r=u(n(19)),i=n(4),a=u(n(16)),s=n(67);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=function(t){function e(){return c(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.doRender=function(t){var e=this.component.annot.info,n=e.borderInfo||{},o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height);var r=this.convertPointToPixel(n.width,t.scale);o.save(),t.lineWidth=r,o.globalAlpha=e.opacity,o.strokeStyle=0===r?"transparent":this.numberToRGBAString(e.borderColor),o.lineWidth=r;try{switch(n.style){case i.BORDER_STYLE.SOLID:this.renderSolid(o,e,t);break;case i.BORDER_STYLE.BEVELED:break;case i.BORDER_STYLE.DASHED:this.renderDashed(o,e,t);break;case i.BORDER_STYLE.CLOUDY:this.renderCloud(o,e,t)}var a=e.fillColor;a&&(o.fillStyle=this.numberToRGBAString(a),o.fill()),o.stroke()}finally{o.restore()}},e.prototype.renderSolid=function(t,e,n){this.renderDashed(t,e,n)},e.prototype.renderDashed=function(t,e,n){var o=e.borderInfo,i=n.lineWidth,a=n.innerRect,s=n.outerRect,u=o.dashes||[],c=o.dashPhase||0,l=.5*i,f=new r.default(.5*(a.left+a.right)-s.left,.5*(a.top+a.bottom)-s.top),d=Math.abs(.5*a.height-l),p=Math.abs(.5*a.width-l);t.lineDashOffset=c,t.setLineDash(u),t.beginPath(),function(t,e,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI,u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];t.ellipse?t.ellipse(e,n,o,r,i,a,s,u):(t.save(),t.translate(e,n),t.rotate(i),t.scale(o,r),t.arc(0,0,1,a,s,u),t.restore())}(t,f.x,f.y,p,d),t.closePath()},e.prototype.renderCloud=function(t,e,n){var o=e.borderInfo.cloudIntensity,i=.5*n.lineWidth,a=this.shrinkRect(n.innerRect,i),u=this.shrinkRect(n.outerRect,i),c=new r.default(.5*(u.right-u.left)-(a.left-u.left),.5*(u.bottom-u.top)-(a.top-u.top)),l=.5*a.height-i,f=.5*a.width-i,d=16/o,p=Math.PI/d,h=2*Math.PI,g=Array(Math.floor(h/p)-1).fill(0).map((function(t,e){return e*p%h})).map((function(t){var e=f*Math.cos(h-t),n=l*Math.sin(h-t);return c.add(e,n)}));new s.CloudyPathGenerator(g,a,u).generate(1,t).render(t)},e.prototype.shrinkRect=function(t,e){var n=a.default.on(t).shrink(e).extract();return Object.assign(n,{width:n.right-n.left,height:n.bottom-n.top})},e}(o.default);e.default=d},function(t,e){t.exports=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(22)),r=a(n(64)),i=a(n(19));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return c(e,t),e.prototype.doRender=function(t){var e=this.component.annot.info,n=t.outerRect,o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height),o.save(),o.globalAlpha=e.opacity,o.strokeStyle=this.numberToRGBAString(e.borderColor);var a=.2*n.width,s=.5*a,u=s,c=n.width-s,l=n.height-2*s/3,f=Math.atan2(l,n.width/2),d=a/Math.sin(f)+.3*s,p=new r.default([new i.default(u,l),new i.default(n.width/2,d),new i.default(c,l)],!1);o.lineWidth=a,p.render(o),o.stroke(),o.restore()},e}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],r=arguments[4];t.save(),t.beginPath(),t.rect(e,n,o,r),t.closePath(),t.restore()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(22),a=(o=i)&&o.__esModule?o:{default:o},s=n(7);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.executor=new s.DebounceAsyncTaskExecutor(260),o}return u(e,t),e.prototype.resetCanvasSize=function(t,e){this.canvas.style.cssText+="\n            width: "+Math.floor(t)+"px;\n            height: "+Math.floor(e)+"px;\n        "},e.prototype.doRender=function(t){var e=this;this.component.annot.getInkList().length>1e3?this.executor.exec((function(){e.executeRender(t)})):this.executeRender(t)},e.prototype.getMinDistance=function(){return 1.13136},e.prototype.executeRender=function(e){var n=this.component.annot,o=n.page,i=this.component.annot.info,a=i.borderInfo||{},s=e.scale,u=e.outerRect;t.prototype.resetCanvasSize.call(this,u.width,u.height);var c=this.canvas.getContext("2d");c.clearRect(0,0,this.canvas.width,this.canvas.height);var l=this.convertPointToPixel(a.width,s);c.save(),e.lineWidth=l,c.lineCap="round",c.lineJoin="round",c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.globalAlpha=i.opacity,c.strokeStyle=this.numberToRGBAString(i.borderColor),c.lineWidth=l;var f=this.getMinDistance();n.getInkList().map((function(t){var e=t.x,n=t.y,i=t.type,a=o.getDevicePoint([e,n],s),c=r(a,2),l=c[0],f=c[1];return{x:l-u.left,y:f-u.top,type:i}})).reduce((function(t,e,n){if(0===n||1===e.type)t.push(e);else{var o=t[t.length-1];Math.abs(e.x-o.x)+Math.abs(e.y-o.y)>=f&&t.push(e)}return t}),[]).forEach((function(t,e,n){var o=t.x,r=t.y;1===t.type?(c.stroke(),c.beginPath(),c.moveTo(o,r)):c.lineTo(o,r)})),c.stroke(),c.restore()},e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=h(n(15)),i=h(n(212)),a=h(n(13)),s=n(7),u=n(6),c=h(n(25)),l=n(215),f=n(0),d=h(n(2)),p=h(n(14));function h(t){return t&&t.__esModule?t:{default:t}}function g(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var v=(0,l.getCommonContextMenu)(".fv__pdf-page-annot-handler-rect"),m=function(){},b=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));s.name="redact",s.$ui.addClass("fv__pdf-page-redact-annot-container"),s.$handler.addClass("fv__pdf-page-redact-annot-handler-container");var u=void 0;return u=!!n.isArea(),s.pdfViewer.eventEmitter.emit(d.default.redactAnnotRendered,s),p.default.property(s,"shapeControl",(function(){var t=new a.default({start:function(t,e,n){return s.onStartUpdateShape(t,e,n)},update:function(t,e){return s.onShapeUpdating(t,e)},moving:function(t,e){return s.onShapeMoving(t,e)},end:function(t,e,n){return s.onShapeUpdateEnd(t,e,n)},resizable:u,enableDiagonally:!0});return n.isArea()?(s.groupMoveDisabled()||s.moveDisabled())&&t.disable():t.disable(),t})),s}return y(e,t),e.getDefaultContextMenuConfig=function(){return v},e.prototype.assembleDocDisabled=function(){return!(1024&this.docRender.getUserPermission().getValue())},e.prototype.onStartUpdateShape=function(t,e,n){},e.prototype.onShapeUpdating=function(t,e){var n=this;(this.editDebouncePromise=this.editDebouncePromise||new s.DebouncePromiseQueue).push((function(){return n.setRect(t)}))},e.prototype.onShapeMoving=function(t,e){var n=this;(this.editDebouncePromise=this.editDebouncePromise||new s.DebouncePromiseQueue).push((function(){return n.moveTo(t.left,t.top)}))},e.prototype.onShapeUpdateEnd=function(t,e,n){},e.prototype.active=function(){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active");var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)},e.prototype.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=(0,u.getWHByMatrix)(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=o(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},e.prototype.render=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=this.annot;this.scale=n,this.rotate=o;var i=this.getAnnotFlag();if(i.checkInvisible()||i.checkHidden()||r.isEmpty()||r.isDeleted()||r.rectIsEmpty())return this.renderDestroy(),Promise.resolve();var a,s=this.getTileConfig(n,o),l=this.tileCanvas;return l?(a=l).redraw.apply(a,g(s)):(t=l=this.tileCanvas=new c.default((function(t,n,o,i,a,s,c,l){return e.getPDFPage().getAnnotBitmap(r.getId(),(0,u.pt2px)(s),0,{x:c*s+n*a,y:l*s+t*a,width:o,height:i})}),this.$ui)).redraw.apply(t,g(s))},e.prototype.redraw=function(){return this.shapeControl&&this.shapeControl.enable(),this.render()},e.prototype.updateRender=function(){return Promise.resolve()},e.prototype.removeAnnot=function(){var e=this;return!this.deleteDisabled()&&t.prototype.removeAnnot.call(this).then((function(){e.parent("pdfPageRender").redrawContent(!0)}))},e.prototype.remove=function(){t.prototype.remove.call(this),this.parent("pdfPageRender").redrawContent(!0)},e.prototype.showPlaceMarkDialog=function(){if(this.$placeRedactionControl&&this.$placeRedactionControl.$dialog);else{var t=this.pdfViewer.currentPDFDoc.info.pageCount;this.$placeRedactionControl=new i.default(this,document.body,t)}},e.prototype.hidePlaceMarkDialog=function(){this.$actionsControl.close()},e.prototype.placeRedact=function(t){var e=this.annot.getRects(),n=[],o=this.pdfViewer;return t.forEach((function(t){if(o.getPDFDocRender().currentPageIndex!=t){var r=o.currentPDFDoc.getPageByIndex(t).then((function(t){return t.markRedactAnnot(e)}));n.push(r)}})),0==n.length||Promise.all(n)},e.prototype.apply=function(){var t=this;return this.pdfViewer.viewerUI.confirm("viewer_:contextmenu.annot.applyConfirm").then((function(){return t.annot.apply()}),m)},e.prototype.applyAll=function(){var t=this.pdfViewer;return t.viewerUI.confirm("viewer_:contextmenu.annot.applyConfirm").then((function(){return t.getCurrentPDFDoc().applyRedaction()}),m)},e.prototype.getPropertyOptions=function(){var t=this.annot;return{color:(0,f.colorConvertor)(t.getBorderColor(),"#"),applyFillColor:t.getApplyFillColor(),borderStyle:!1,disabled:this.propertyDisabled()}},e.prototype.setApplyFillColor=function(t){return this.annot.setRedactApplyFillColor(t)},e}(r.default);e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(213)),r=a(n(48)),i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}n(214);var s=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerComponent=e,this.docPageCount=a;var s="max page: "+a,u=(0,o.default)(s);n||(u='<dialog class="fv__dialog fv__annot-properties-dialog">'+u+"</dialog>");var c=this.$dialog=(0,i.default)(u);this.bindChangeEvent();var l=n||document.body;if(c.appendTo(l),!n){var f=c[0];r.default.registerDialog(f),f.showModal()}}return t.prototype.bindChangeEvent=function(){var t=this;this.$dialog.on("click",".fv__redaction-cancel",(function(){t.close()})).on("click",".fv__place-redaction-dialog-close-icon",(function(){t.close()})).on("click",".fv__redaction-btn",(function(e){t.submit()})).on("change",".redaction-page-radio",(function(e){e.target.checked&&(t.hideError(),"1"==e.target.value?(0,i.default)(".fv__redaction-page-range").attr("disabled",""):(0,i.default)(".fv__redaction-page-range").removeAttr("disabled"))})).on("keydown",".fv__redaction-page-range",(function(e){t.hideError()}))},t.prototype.submit=function(){var t=this,e=this.docPageCount,n=[];if("1"==(0,i.default)(".redaction-page-radio:checked").val())for(var o=0;o<e;o++)n.push(o);else{var r=(0,i.default)(".fv__redaction-page-range").val();if(new RegExp(/[^\d\-,]/).test(r))return void this.showError();for(var a=r.split(","),s=0;s<a.length;s++){var u=a[s];if(u.indexOf("-")>-1){var c=u.split("-");if(c.length>2)return void this.showError();if(c[0]<1||c[0]>e||c[1]<1||c[1]>e)return void this.showError();for(var l=Math.min(c[0],c[1]),f=Math.max(c[0],c[1]),d=l;d<=f;d++)-1===n.indexOf(d)&&n.push(d-1)}else{if(u<1||u>e)return void this.showError();-1===n.indexOf(n)&&n.push(u-1)}}}this.viewerComponent.placeRedact(n).then((function(e){t.close()}))},t.prototype.reset=function(){this.hideError(),this.element.querySelector(".redaction-page-radio").checked=!0,this.element.querySelector(".fv__redaction-page-range").value=""},t.prototype.showError=function(){this.$dialog[0].querySelector(".fv__redaction-page-range").classList.add("fv__redaction-error")},t.prototype.hideError=function(){this.$dialog[0].querySelector(".fv__redaction-page-range").classList.remove("fv__redaction-error")},t.prototype.close=function(){var t=this.$dialog;t&&(t[0].close(),t.remove(),this.$dialog=null)},t}();e.default=s},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",n=o.$escape;return e+='<dialog class="fv__ui-layer fv__place-redaction-dialog" >\n   <div class="fv__place-redaction-dialog-header">\n      <div class="fv__place-redaction-dialog-title">',e+=n(o.i18n("viewer_:dialog.placeRedactionDialog.title")),e+='</div>\n      <div class="fv__place-redaction-dialog-close"><i class="fv__place-redaction-dialog-close-icon">x</i></div>\n   </div>\n   <div class="fv__place-redaction-dialog-body">\n        <div class="fv__redaction-container">\n        <label>\n            <input name="redaction-page-type" class="redaction-page-radio" type="radio" checked value="1" /><span>',e+=n(o.i18n("viewer_:dialog.placeRedactionDialog.allPage")),e+='</span>\n        </label>\n        </div>\n        <div class="fv__redaction-container">\n            <label>\n                <input name="redaction-page-type" class="redaction-page-radio" type="radio" value="2" /><span>',e+=n(o.i18n("viewer_:dialog.placeRedactionDialog.specificPage")),e+='</span>\n                <div class="fv__redaction-range">',e+=n(o.i18n("viewer_:dialog.placeRedactionDialog.pageRange")),e+=': <input type="text" class="fv__redaction-page-range" disabled placeholder="',e+=n(t),e+='"/></div>\n                </label>\n        </div> \n   </div>\n   <div class="fv__place-redaction-dialog-footer">\n        <div class="fv__redaction-container" style="text-align:right">\n            <button type="button" class="fv__redaction-btn fv__ui-dialog-ok-button">',e+=n(o.i18n("viewer_:dialog.placeRedactionDialog.OK")),e+='</button>\n            <button type="button" class="fv__redaction-cancel fv__ui-dialog-cancel-button">',e+=n(o.i18n("viewer_:dialog.placeRedactionDialog.Cancel")),e+="</button>\n        </div>\n   </div>\n</dialog>"}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data("annotComponent").showReplyDialog("reply")},disabled:function(){return this.data("annotComponent").replyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}},apply:{name:"apply",nameI18nKey:"viewer_:contextmenu.annot.apply",callback:function(){return this.data("annotComponent").apply()},disabled:function(){return this.data("annotComponent").assembleDocDisabled()}},applyAll:{name:"applyAll",nameI18nKey:"viewer_:contextmenu.annot.applyAll",callback:function(){return this.data("annotComponent").applyAll()},disabled:function(){return this.data("annotComponent").assembleDocDisabled()}},place:{name:"place",nameI18nKey:"viewer_:contextmenu.annot.place",callback:function(t,e,n){this.data("annotComponent").showPlaceMarkDialog(t,e,n)},disabled:function(){return this.data("annotComponent").moveDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}}};e.getCommonContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:o,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=void 0,r=void 0,i={};"function"==typeof FontFace?(e.addFont=o=function(t,e){return i[t]?i[t]:i[t]=new Promise((function(n,o){e().then((function(e){if(!e)return o(),void i[t];var r=new FontFace(t,e.buffer||e.url);r.load().then((function(){document.fonts.add(r),n(r)}))}),(function(){o(),delete i[t]}))}))},e.removeFont=r=function(t){i[t]&&i[t].then((function(e){delete i[t],document.fonts.delete(e)}))}):(e.addFont=o=function(t,e){return i[t]?i[t]:i[t]=new Promise((function(n,o){e().then((function(e){return e?e.buffer?URL.createObjectURL(new Blob([e.buffer],"application/x-font-woff")):e.url:(o("woff is invalid"),void delete i[t])})).then((function(e){if(!e)return o();var r=document.createElement("style");r.innerHTML='@font-face{font-family:"'+t+'"; src:url("'+e+'");}',document.head.appendChild(r),n(r)}))}))},e.removeFont=r=function(t){i[t]&&i[t].then((function(e){delete i[t],e.parentNode.removeChild(e)}))}),e.addFont=o,e.removeFont=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};e.getDefaultConfig=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:o,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e,n){n(5);t.exports=function(t){"use strict";t=t||{};return'<div class="fv-callout">\n    <div class="fv__shape-control callout">\n        <canvas class="fv__shape-control-previewer"></canvas>\n        <div class="fv__shape-control-move-area"></div>\n        <div class="fv__shape-control-inner-area">\n            <div class="fv__shape-controller callout left text"></div>\n            <div class="fv__shape-controller callout top text"></div>\n            <div class="fv__shape-controller callout right text"></div>\n            <div class="fv__shape-controller callout bottom text"></div>\n        </div>\n        <div class="fv__shape-control-text-area"></div>\n        <div class="fv__shape-controller callout calloutStart"></div>\n        <div class="fv__shape-controller callout calloutKnee"></div>\n    </div>\n</div>','<div class="fv-callout">\n    <div class="fv__shape-control callout">\n        <canvas class="fv__shape-control-previewer"></canvas>\n        <div class="fv__shape-control-move-area"></div>\n        <div class="fv__shape-control-inner-area">\n            <div class="fv__shape-controller callout left text"></div>\n            <div class="fv__shape-controller callout top text"></div>\n            <div class="fv__shape-controller callout right text"></div>\n            <div class="fv__shape-controller callout bottom text"></div>\n        </div>\n        <div class="fv__shape-control-text-area"></div>\n        <div class="fv__shape-controller callout calloutStart"></div>\n        <div class="fv__shape-controller callout calloutKnee"></div>\n    </div>\n</div>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.init=function(t,e){this.calloutRender=t,this.$ui=(0,i.default)(e),this.$ui.hide()},t.prototype.draw=function(t,e,n){var o=this.$ui[0];o.width=e.right-e.left,o.height=e.bottom-e.top;var r=o.getContext("2d");r.save(),r.clearRect(0,0,this.$ui.width(),this.$ui.height()),r.beginPath(),t.length>1&&(r.moveTo(t[0][0]-e.left,t[0][1]-e.top),r.lineTo(t[1][0]-e.left,t[1][1]-e.top)),t.length>2&&r.lineTo(t[2][0]-e.left,t[2][1]-e.top),r.strokeStyle="#5aa",r.lineWidth=2,r.stroke(),r.save();var i=n.width||n.right-n.left,a=n.height||Math.abs(n.top-n.bottom);r.rect(n.left-e.left,n.top-e.top,i,a),r.fillStyle="rgba(88, 176, 176, 0.5)",r.stroke(),r.fillRect(n.left-e.left,n.top-e.top,i,a),r.restore()},t.prototype.show=function(t,e,n){t&&this.draw(t,e,n),this.$ui.show()},t.prototype.hide=function(){this.$ui&&this.$ui.hide()},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.calcCalloutPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.start,o=e.end,i=e.page,a=e.width,s=void 0===a?o[0]+110:a,u=e.height,c=void 0===u?o[1]+30:u,l=e.rotate,f=void 0===l?0:l,d=e.borderStyle,p=e.endingStyle,h=e.scale;if(o[0]=Math.max(o[0],2),o[1]=Math.max(o[1],12),f%2==1){var g=s;s=c,c=g}var y=100*h*4/3,v=20*h*2/3,m=i.reverseDeviceRect({left:o[0],right:o[0]+y,top:o[1]-v,bottom:o[1]+v},h);n=i.reverseDevicePoint(n,h),o=i.reverseDevicePoint(o,h),m.left<0&&(m.left=0),m.bottom<0&&(m.bottom=0);var b=[{x:n[0],y:n[1]},{x:m.left-15,y:m.top+10},{x:m.left-.1,y:m.top+10}];if(!(b=t.checkKneePoint(0,b,m))||r(b[0],b[1])<15||r(b[2],b[1])<15)return{invalid:!0};var w=t.recalculateRect({points:b,innerRect:m,width:s,height:c,rotate:f,borderStyle:d,endingStyle:p});return w.left<5||w.right>s-5||w.bottom<5||w.top>c-5?{invalid:!0}:{calloutLinePoints:b,rect:w,innerRect:m}},t.checkKneePoint=function(e,n,o){if(e>3||n.length<2)return null;var i=JSON.parse(JSON.stringify(n));switch(e){case 0:i[2]={x:o.left-.1,y:(o.top+o.bottom)/2-.1},i[1]={x:i[2].x-15,y:i[2].y};break;case 1:i[1]={x:(o.left+o.right)/2,y:o.bottom-15},i[2]={x:i[1].x-.1,y:o.bottom-.1};break;case 2:i[1]={x:o.right+15,y:(o.top+o.bottom)/2},i[2]={x:o.right-.1,y:i[1].y-.1};break;case 3:i[1]={x:(o.left+o.right)/2,y:o.top+15},i[2]={x:i[1].x-.1,y:o.top-.1}}var a=r(i[2],i[0]),s=r(i[2],i[1]),u=r(i[1],i[0]),c=Math.acos((a-s-u)/(2*Math.sqrt(s)*Math.sqrt(u)));return Math.PI>c&&c>Math.PI/2?t.checkKneePoint(e+1,n,o):i},t.recalculateRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.points,n=t.innerRect,o=t.width,r=void 0===o?1e4:o,i=t.height,a=void 0===i?1e4:i,s=t.rotate,u=void 0===s?0:s,c=t.borderInfo,l=t.endingStyle;switch(u){case 1:case 3:var f=r;r=a,a=f}for(var d=1e4,p=0,h=0,g=1e4,y=0;y<3;y++)e[y].x<d&&(d=e[y].x),e[y].x>p&&(p=e[y].x),e[y].y>h&&(h=e[y].y),e[y].y<g&&(g=e[y].y);var v=0;c&&5==c.style&&(v=1==c.cloudIntensity?6:9);var m={left:Math.max(Math.min(d,n.left)-1,0),top:Math.max(h,n.top)+1,right:Math.min(Math.max(p,n.right)+1,r),bottom:Math.min(g,n.bottom)-1};0!==v&&(Math.abs(m.left-n.left)<2&&(m.left-=v),Math.abs(m.right-n.right)<2&&(m.right+=v),Math.abs(m.top-n.top)<2&&(m.top+=v),Math.abs(m.bottom-n.bottom)<2&&(m.bottom-=v));var b=0;switch(l){case 7:case 8:b=8;break;case 2:case 1:case 3:case 6:case 9:b=6}return 0!=b&&(m.left-=b,m.right+=b,m.top+=b,m.bottom-=b),m},t}(),r=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n(41)),r=c(n(222)),i=c(n(226)),a=c(n(228)),s=c(n(231)),u=n(20);function c(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=void 0;if(t.page.doc.getPDFForm().isEmpty()||!(e=t.getField())||e.isDAFontEmbedded()&&1&e.getFlags())return o.default;switch(e.getType()){case u.FieldType.Text:case u.FieldType.File:return r.default;case u.FieldType.ListBox:return i.default;case u.FieldType.ComboBox:return a.default;case u.FieldType.Sign:return s.default;default:return o.default}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(n(41)),r=l(n(223)),i=n(20),a=l(n(1)),s=l(n(30)),u=n(0),c=(l(n(224)),l(n(225)),n(31));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));a.engineForm=a.parent("pdfDocRender").doc.getPDFForm(),a.$ui.addClass("form_text_field"),n.setRenderNotifier((function(t){return a.updateUI(t)})),a.defaultEvnet=!1,a.engineRender=!0;var u=a.annot.getAdditionalAction(s.default.FieldWillFormat);return u&&u.getScript&&-1!=u.getScript().indexOf("AFDate_Format")&&(a.isDate=!0),a.generateHandler(1)&&a.bindInputEvent(),a}return f(e,t),e.prototype.generateHandler=function(t){var e=this.annot,n=e.getField();if(!n||n.isDAFontEmbedded()&&this.checkReadOnly())return!1;var o=90*(4-this.annot.getRotation()+e.getPage().getRotation()),c="0",l="0";switch(o){case 90:c="100%";break;case 180:c="100%",l="100%";break;case 270:l="100%"}var f=this.checkReadOnly(),d=4*e.getBorderWidth()/3*t,p=e.getMKProperty("borderColor"),h=void 0;h=0===p?"transparent":(0,u.colorConvertor)(16777215&p,"#");var g=e.getMKProperty("fillColor"),y=void 0;y=0===g?"transparent":(0,u.colorConvertor)(16777215&g,"#"),this.$handler.css("background-color",y);var v=e.getAlignment(),m=i.FieldFlag.isMultiline(n.getFlags()),b=i.FieldFlag.isPassword(n.getFlags()),w=i.FieldFlag.isComb(n.getFlags())&&n.getMaxLength()>0,P=!this.checkInvisible(),A=(0,u.colorConvertor)(16777215&e.getDAFontColor(),"#"),_=this.getFontSize(n,e);_?_+="px":_=m?"16px":"xx-large";var C=n.getValue(),D=(0,r.default)({borderWidth:d,borderColor:h,background:"transparent",isMultiline:m,isPassword:b,comb:w,readonly:f,align:v,value:C,maxLength:n.getMaxLength(),visible:P,color:A,fontSize:_,rotation:o,left:c,top:l,width:"100%",height:"100%"}),S=this.$input=(0,a.default)(D),R=this.$textInput=S.find("input");return 0==R.length&&(R=this.$textInput=S.find("textarea")),this.$foreground.before(S),i.FieldFlag.isComb(n.getFlags())&&n.getMaxLength()>0&&R.hide(),C&&this.formRender.execAction("Field",e.getAdditionalAction(s.default.FieldWillFormat),null,n,s.default.FieldWillFormat),n.isDAFontEmbedded(),this.$input.css("visibility","hidden"),!0},e.prototype.getFontSize=function(t,e){var n=e.getDefaultAppearance(),o=t.getDAFontSize();return n.textSize&&(o=n.textSize),4*o/3},e.prototype.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,o=this.annot,r=o.getField();this.scale=e,this.rotate=n;var a=this.getTileConfig(e,n),s=this.updateForgroundAndHandler(e);if(r){i.FieldFlag.isComb(r.getFlags())&&r.getMaxLength()>0&&this.$input.find(".textComb").css({width:(s.right-s.left)/r.getMaxLength(),height:s.bottom-s.top,"line-height":s.bottom-s.top+"px"});var u=this.getFontSize(r,o)*e;if(u)u+="px";else if(i.FieldFlag.isMultiline(r.getFlags()))u=16*e+"px";else{clearTimeout(this.autoFontSizeTimeout);var c=this;this.autoFontSizeTimeout=setTimeout((function(){c.autoFontSize(r.getValue())}),200)}var l=4*o.getBorderWidth()/3*e,f={"font-size":u,"border-width":l+"px"},d=90*(4-(o.getRotation()-o.getPage().getRotation()));switch(d){case 90:case 270:var p=this.getDimension();f.width=p.height+"px",f.height=p.width+"px"}this.$textInput.css(f)}return this.$ui.css({left:a[8]*a[6],top:a[9]*a[6],width:a[2],height:a[3],transform:"scale("+1/a[6]+")"}),t.prototype.render.call(this,e,n)},e.prototype.focus=function(t){var e=this;this.$input.css("visibility","visible"),this.$handler.find(".fv__tiles-row").hide();var n=this.annot.getField(),o=this.$textInput;n&&o.val(n.getValue()||""),t||(this.lastAvailableValue=n.getValue()),setTimeout((function(){document.activeElement!=o[0]&&o.focus(),e.$foreground.hide()}),50),this.$input.find(".textCombContainer").hide(),o.show();var r=this.annot.getAdditionalAction(s.default.FieldWillFormat);if(this.isDate){var i=o.val(),a=r.getScript().match(/AFDate_FormatEx\("([\s\S]*?)"\)/),u=!1;if(a&&2==a.length){var c=a[1];o.val(function(t,e){e=e.toLowerCase();var n=new Date,o={};o.y=n.getFullYear(),o.m=n.getMonth()+1,o.d=n.getDate();for(var r=0,i=0;i<e.length&&r<t.length;){switch(e[i]){case"y":for(var a="";"0"<=t[r]&&t[r]<="9";)a+=t[r],r++;for(;"y"==e[i];)i++;switch(a.length){case 2:a="20"+a}o.y=parseInt(a);break;case"m":var s="";if("A"<=t[r]&&t[r]<="Z")for(;s.length<3;)s+=t[r],r++;else for(;"0"<=t[r]&&t[r]<="9";)s+=t[r],r++;for(;"m"==e[i];)i++;switch(s.length){case 1:case 2:o.m=parseInt(s);break;case 3:o.m=p[s]}break;case"d":for(var u="";"0"<=t[r]&&t[r]<="9";)u+=t[r],r++;for(;"d"==e[i];)i++;o.d=parseInt(u);break;default:r++,i++}}return o.m+"/"+o.d+"/"+o.y}(i,c)),u=!0}o.datepicker({autoclose:1,keyboardNavigation:!1,forceParse:!1}),u&&o.val(i)}(r=this.annot.getAdditionalAction(s.default.AnnotReceiveInputFocus))&&this.formRender.execAction("Field",r,null,n),this.isActive=!0},e.prototype.handleEvnet=function(t,e){if(this.checkReadOnly())t!=s.default.AnnotMouseButtonReleased&&t!=s.default.AnnotReceiveInputFocus||this.formRender.blurControl();else{s.default.AnnotMouseButtonReleased;var n=this.formRender;switch(t){case s.default.AnnotMouseButtonPressed:n.focusControl(this);break;case s.default.AnnotMouseButtonReleased:if(!n.isSameTarget(this))return;var o=this.annot.action;o&&n.execAction("Field",o,null,this.annot.getField());var r=this.$textInput;setTimeout((function(){document.activeElement!=r[0]&&r.focus()}),50),this.$input.find(".textCombContainer").hide(),r.show()}this.performAction(t)}},e.prototype.bindInputEvent=function(){var e=this;this.isDate&&this.$textInput.on("change",(function(n){e.annot.getField().syncValue(n.target.value),t.prototype.render.call(e,e.scale,e.rotate)})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=this.pdfViewer.getKeyboardEventBinder(c.ACTIVATION_ANNOTATION_BINDER).on(c.KEY_MAP_UNACTIVE_ANNOTATION,(function(t){e.unActive()})),this.$textInput.on("keydown",(function(t){27==t.keyCode&&t.preventDefault()})).on("keyup",(function(t){27==t.keyCode&&t.preventDefault(),e.checkReadOnly()||(e.valueChanged=!0,setTimeout((function(){e.autoFontSize(e.$textInput.val())}),0))}))},e.prototype.updateUIMore=function(e){var n=this,o=e.type,r=e.value,i=this.annot,a=this.$input,c=this.$textInput,l=i.getField();if(l){var f=Promise.resolve();switch(o){case"value":var d=i.getAdditionalAction(s.default.FieldWillFormat);if(0!=l.getValue().length&&d){this.formRender.execAction("Field",d,null,l,s.default.FieldWillFormat).rc||(l.setValue(this.lastAvailableValue,this),this.valueChange(!1,l));break}case"displayValue":f=l.setDisplayValue(r),c.val(r);break;case"align":c.css("text-align",r);break;case"borderStyle":c.css("border-style",r);break;case"borderColor":r=0===r?"transparent":(0,u.colorConvertor)(16777215&r,"#"),a.find(".textComb").css("border-color",r),c.css("border-color",r);break;case"maxLength":case"comb":case"multiline":a.remove(),this.generateHandler(this.scale),this.bindInputEvent(),this.render();break;case"fillColor":this.$handler.css("background-color",0===r?"transparent":(0,u.colorConvertor)(16777215&r,"#"));break;case"password":c.attr("type",r?"password":"text");break;case"readonly":r?(this.$foreground.addClass("form-field-readonly").css("visibility","hidden"),c.attr("readonly",!0)):(this.checkReadOnly()||this.checkInvisible()||this.$foreground.removeClass("form-field-readonly").css("visibility","visible"),c.removeAttr("readonly"));var p=i.getMKProperty("fillColor"),h=(0,u.colorConvertor)(p,"#");(0===p||r)&&(h="transparent"),c.css("background-color",h);break;case"hidden":var g=this.$ui,y=this.$handler;r?(g.hide(),y.hide()):(g.show(),y.show());break;case"textColor":c.css("color",r)}f.then((function(e){return t.prototype.render.call(n,n.scale,n.rotate)}))}},e.prototype.blur=function(){var t=this.$textInput,e=t.data("datepicker");return e&&setTimeout((function(){e.destroy(),t.data("datepicker",null)}),0),this.isActive=!1,this.$input.css("visibility","hidden"),this.$handler.find(".fv__tiles-row").show(),this.setValue(t.val())},e.prototype.setValue=function(t){var e=this.annot,n=e.getField();n.setValueWithoutAction(t);var o=void 0;t===this.lastAvailableValue&&(this.valueChanged=!1);var r=!1,i=e.getAdditionalAction(s.default.FieldKeyStroke);return this.valueChanged&&i&&-1!==(o=this.formRender.execAction("Field",i,null,n,s.default.FieldKeyStroke,{change:t,willCommit:!0}))&&(o.rc?(void 0===o.change&&(o.change=t),n.setValueWithoutAction(o.change)):(r=!0,t=this.lastAvailableValue)),r?(n.setValue(this.lastAvailableValue,this),this.valueChange(r,n)):(i=e.getAdditionalAction(s.default.FieldValueChanged),this.valueChanged&&i&&-1!==(o=this.formRender.execAction("Field",i,null,n,s.default.FieldValueChanged))&&(o.rc?(void 0===o.value&&(o.value=t),n.setValueWithoutAction(o.value)):r=!0),r?n.setValue(this.lastAvailableValue,this):this.valueChanged?n.setValue(n.getValue(),this):(i=e.getAdditionalAction(s.default.FieldWillFormat),(o=n.getValue()&&i&&this.formRender.execAction("Field",i,null,n,s.default.FieldWillFormat))&&!o.rc&&(n.setValue(this.lastAvailableValue,this),this.valueChange(!1,n))),this.valueChange(r,n))},e.prototype.valueChange=function(e,n){return this.valueChanged&&!e&&this.formRender.calculate(n),this.valueChanged=!1,n&&i.FieldFlag.isComb(n.getFlags())&&n.getMaxLength()>0&&(this.$textInput.hide(),this.$input.find(".textCombContainer").show()),t.prototype.blur.call(this),e},e}(o.default),p={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Mov:11,Dec:12};e.default=d},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,i=t.borderColor,a=t.position,s=t.left,u=t.top,c=t.height,l=t.width,f=t.background,d=t.transform,p=t.rotation,h=t.alignStyle,g=t.align,y=(t.fs,t.fontSize),v=(t.fcolor,t.color),m=t.transformStyle,b=t.style,w=t.ml,P=t.maxLength,A=t.isMultiline,_=o.$escape,C=t.ro,D=t.value,S=(t.type,t.isPassword),R=t.readonly;n="border:"+r+"px solid "+i+";",a="left:"+s+";top:"+u+";height:"+c+";width:"+l+";",f="background-color:"+f+";",d="";switch(0!==p&&(d="transform:rotate("+p+"deg)"),g){case 0:h="text-align:left;";break;case 1:h="text-align:center;";break;case 2:h="text-align:right;"}m=d,b=n+a+f+h+("font-size:"+y+";")+("color:"+v+";"),w=P?"maxlength="+P:"";if(A)b+="resize: none;",e+='\n        <div class="textCombInput"><textarea ',e+=_(C),e+=' style="',e+=_(b),e+='overflow: hidden;">',e+=_(D),e+="</textarea></div>\n";else{C=R?"readonly":"";e+='\n        <div class="textCombInput">\n        <input type="',e+=_(S?"password":"text"),e+='" ',e+=_(C),e+=" ",e+=_(w),e+=' style="',e+=_(b+m),e+='" value="',e+=_(D),e+='"></div>\n        '}return e}},function(t,e,n){var o,r,i;
/*!
 * Datepicker for Bootstrap v1.9.0 (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */r=[n(1)],void 0===(i="function"==typeof(o=function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function o(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function i(n,o){return function(){return o!==e&&t.fn.datepicker.deprecated(o),this[n].apply(this,arguments)}}var a,s=(a={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,o=this.length;n<o;n++)if(0<=this[n].valueOf()-e&&this[n].valueOf()-e<864e5)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new s;return t.replace(this),t}},function(){var e=[];return e.push.apply(e,arguments),t.extend(e,a),e}),u=function(e,n){t.data(e,"datepicker",this),this._events=[],this._secondaryEvents=[],this._process_options(n),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",(function(t,e){return Number(e)+1})),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};u.prototype={constructor:u,_resolveViewName:function(e){return t.each(v.viewModes,(function(n,o){if(e===n||-1!==t.inArray(e,o.names))return e=n,!1})),e},_resolveDaysOfWeek:function(e){return t.isArray(e)||(e=e.split(/[,\s]*/)),t.map(e,Number)},_check_template:function(n){try{return n!==e&&""!==n&&((n.match(/[<>]/g)||[]).length<=0||t(n).length>0)}catch(t){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var r=this.o=t.extend({},this._o),i=r.language;y[i]||(i=i.split("-")[0],y[i]||(i=h.language)),r.language=i,r.startView=this._resolveViewName(r.startView),r.minViewMode=this._resolveViewName(r.minViewMode),r.maxViewMode=this._resolveViewName(r.maxViewMode),r.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,r.startView)),!0!==r.multidate&&(r.multidate=Number(r.multidate)||!1,!1!==r.multidate&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var a=v.parseFormat(r.format);r.startDate!==-1/0&&(r.startDate?r.startDate instanceof Date?r.startDate=this._local_to_utc(this._zero_time(r.startDate)):r.startDate=v.parseDate(r.startDate,a,r.language,r.assumeNearbyYear):r.startDate=-1/0),r.endDate!==1/0&&(r.endDate?r.endDate instanceof Date?r.endDate=this._local_to_utc(this._zero_time(r.endDate)):r.endDate=v.parseDate(r.endDate,a,r.language,r.assumeNearbyYear):r.endDate=1/0),r.daysOfWeekDisabled=this._resolveDaysOfWeek(r.daysOfWeekDisabled||[]),r.daysOfWeekHighlighted=this._resolveDaysOfWeek(r.daysOfWeekHighlighted||[]),r.datesDisabled=r.datesDisabled||[],t.isArray(r.datesDisabled)||(r.datesDisabled=r.datesDisabled.split(",")),r.datesDisabled=t.map(r.datesDisabled,(function(t){return v.parseDate(t,a,r.language,r.assumeNearbyYear)}));var s=String(r.orientation).toLowerCase().split(/\s+/g),u=r.orientation.toLowerCase();if(s=t.grep(s,(function(t){return/^auto|left|right|top|bottom$/.test(t)})),r.orientation={x:"auto",y:"auto"},u&&"auto"!==u)if(1===s.length)switch(s[0]){case"top":case"bottom":r.orientation.y=s[0];break;case"left":case"right":r.orientation.x=s[0]}else u=t.grep(s,(function(t){return/^left|right$/.test(t)})),r.orientation.x=u[0]||"auto",u=t.grep(s,(function(t){return/^top|bottom$/.test(t)})),r.orientation.y=u[0]||"auto";if(r.defaultViewDate instanceof Date||"string"==typeof r.defaultViewDate)r.defaultViewDate=v.parseDate(r.defaultViewDate,a,r.language,r.assumeNearbyYear);else if(r.defaultViewDate){var c=r.defaultViewDate.year||(new Date).getFullYear(),l=r.defaultViewDate.month||0,f=r.defaultViewDate.day||1;r.defaultViewDate=n(c,l,f)}else r.defaultViewDate=o()},_applyEvents:function(t){for(var n,o,r,i=0;i<t.length;i++)n=t[i][0],2===t[i].length?(o=e,r=t[i][1]):3===t[i].length&&(o=t[i][1],r=t[i][2]),n.on(r,o)},_unapplyEvents:function(t){for(var n,o,r,i=0;i<t.length;i++)n=t[i][0],2===t[i].length?(r=e,o=t[i][1]):3===t[i].length&&(r=t[i][1],o=t[i][2]),n.off(o,r)},_buildEvents:function(){var e={keyup:t.proxy((function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()}),this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy((function(t){this._focused_from=t.target}),this)}],[this.element,{blur:t.proxy((function(t){this._focused_from=t.target}),this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy((function(t){this.update(t.date)}),this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[this.picker,".prev, .next",{click:t.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:t.proxy(this.dayCellClick,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy((function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()}),this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var o=n||this.dates.get(-1),r=this._utc_to_local(o);this.element.trigger({type:e,date:r,viewMode:this.viewMode,dates:t.map(this.dates,this._utc_to_local),format:t.proxy((function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)}),this)})},show:function(){if(!(this.inputField.is(":disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide")),this},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,(function(t){return new Date(t)}))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==e?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,t.map(e,this._utc_to_local)),this},setDate:i("setDates"),setUTCDate:i("setUTCDates"),remove:i("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var o=this.o.language;return t.map(this.dates,(function(t){return v.formatDate(t,n,o)})).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),o=t(this.o.container),r=o.width(),i="body"===this.o.container?t(document).scrollTop():o.scrollTop(),a=o.offset(),s=[0];this.element.parents().each((function(){var e=t(this).css("z-index");"auto"!==e&&0!==Number(e)&&s.push(Number(e))}));var u=Math.max.apply(Math,s)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),f=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=c.left-a.left,p=c.top-a.top;"body"!==this.o.container&&(p+=i),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-f)):c.left<0?(this.picker.addClass("datepicker-orient-left"),d-=c.left-10):d+e>r?(this.picker.addClass("datepicker-orient-right"),d+=f-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var h=this.o.orientation.y;if("auto"===h&&(h=-i+p-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+h),"top"===h?p-=n+parseInt(this.picker.css("padding-top")):p+=l,this.o.rtl){var g=r-(d+f);this.picker.css({top:p,right:g,zIndex:u})}else this.picker.css({top:p,left:d,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],o=!1;return arguments.length?(t.each(arguments,t.proxy((function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)}),this)),o=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy((function(t){return v.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)}),this)),n=t.grep(n,t.proxy((function(t){return!this.dateWithinRange(t)||!t}),this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),o?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&o&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',-1!==t.inArray(e,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+y[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",n=0;n<12;n++)e+='<span class="month'+(t&&t.getMonth()===n?" focused":"")+'">'+y[this.o.language].monthsShort[n]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,(function(t){return t.valueOf()})):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=o();return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<a?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>a)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&r(e,s)&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,o,r,i,a,s,u){for(var c,l,f,d="",p=r/10,h=this.picker.find(n),g=Math.floor(i/r)*r,y=g+9*p,v=Math.floor(this.viewDate.getFullYear()/p)*p,m=t.map(this.dates,(function(t){return Math.floor(t.getUTCFullYear()/p)*p})),b=g-p;b<=y+p;b+=p)c=[o],l=null,b===g-p?c.push("old"):b===y+p&&c.push("new"),-1!==t.inArray(b,m)&&c.push("active"),(b<a||b>s)&&c.push("disabled"),b===v&&c.push("focused"),u!==t.noop&&((f=u(new Date(b,0,1)))===e?f={}:"boolean"==typeof f?f={enabled:f}:"string"==typeof f&&(f={classes:f}),!1===f.enabled&&c.push("disabled"),f.classes&&(c=c.concat(f.classes.split(/\s+/))),f.tooltip&&(l=f.tooltip)),d+='<span class="'+c.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+b+"</span>";h.find(".datepicker-switch").text(g+"-"+y),h.find("td").html(d)},fill:function(){var r,i,a=new Date(this.viewDate),s=a.getUTCFullYear(),u=a.getUTCMonth(),c=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,l=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,f=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,p=y[this.o.language].today||y.en.today||"",h=y[this.o.language].clear||y.en.clear||"",g=y[this.o.language].titleFormat||y.en.titleFormat,m=o(),b=(!0===this.o.todayBtn||"linked"===this.o.todayBtn)&&m>=this.o.startDate&&m<=this.o.endDate&&!this.weekOfDateIsDisabled(m);if(!isNaN(s)&&!isNaN(u)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(a,g,this.o.language)),this.picker.find("tfoot .today").text(p).css("display",b?"table-cell":"none"),this.picker.find("tfoot .clear").text(h).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var w=n(s,u,0),P=w.getUTCDate();w.setUTCDate(P-(w.getUTCDay()-this.o.weekStart+7)%7);var A=new Date(w);w.getUTCFullYear()<100&&A.setUTCFullYear(w.getUTCFullYear()),A.setUTCDate(A.getUTCDate()+42),A=A.valueOf();for(var _,C,D=[];w.valueOf()<A;){if((_=w.getUTCDay())===this.o.weekStart&&(D.push("<tr>"),this.o.calendarWeeks)){var S=new Date(+w+(this.o.weekStart-_-7)%7*864e5),R=new Date(Number(S)+(11-S.getUTCDay())%7*864e5),E=new Date(Number(E=n(R.getUTCFullYear(),0,1))+(11-E.getUTCDay())%7*864e5),O=(R-E)/864e5/7+1;D.push('<td class="cw">'+O+"</td>")}(C=this.getClassNames(w)).push("day");var I=w.getUTCDate();this.o.beforeShowDay!==t.noop&&((i=this.o.beforeShowDay(this._utc_to_local(w)))===e?i={}:"boolean"==typeof i?i={enabled:i}:"string"==typeof i&&(i={classes:i}),!1===i.enabled&&C.push("disabled"),i.classes&&(C=C.concat(i.classes.split(/\s+/))),i.tooltip&&(r=i.tooltip),i.content&&(I=i.content)),C=t.isFunction(t.uniqueSort)?t.uniqueSort(C):t.unique(C),D.push('<td class="'+C.join(" ")+'"'+(r?' title="'+r+'"':"")+' data-date="'+w.getTime().toString()+'">'+I+"</td>"),r=null,_===this.o.weekEnd&&D.push("</tr>"),w.setUTCDate(w.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(D.join(""));var x=y[this.o.language].monthsTitle||y.en.monthsTitle||"Months",M=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?x:s).end().find("tbody span").removeClass("active");if(t.each(this.dates,(function(t,e){e.getUTCFullYear()===s&&M.eq(e.getUTCMonth()).addClass("active")})),(s<c||s>f)&&M.addClass("disabled"),s===c&&M.slice(0,l).addClass("disabled"),s===f&&M.slice(d+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var T=this;t.each(M,(function(n,o){var r=new Date(s,n,1),i=T.o.beforeShowMonth(r);i===e?i={}:"boolean"==typeof i?i={enabled:i}:"string"==typeof i&&(i={classes:i}),!1!==i.enabled||t(o).hasClass("disabled")||t(o).addClass("disabled"),i.classes&&t(o).addClass(i.classes),i.tooltip&&t(o).prop("title",i.tooltip)}))}this._fill_yearsView(".datepicker-years","year",10,s,c,f,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,s,c,f,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,s,c,f,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,n=new Date(this.viewDate),o=n.getUTCFullYear(),r=n.getUTCMonth(),i=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,s=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=1;switch(this.viewMode){case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:t=Math.floor(o/c)*c<=i,e=Math.floor(o/c)*c+c>s;break;case 0:t=o<=i&&r<=a,e=o>=s&&r>=u}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(e){var r,i,a;e.preventDefault(),e.stopPropagation(),(r=t(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(o(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(a=r.parent().find("span").index(r),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a)):(a=0,i=Number(r.text()),this.viewDate.setUTCFullYear(i)),this._trigger(v.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(i,a,1)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var n=t(e.currentTarget).data("date"),o=new Date(n);this.o.updateViewDate&&(o.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),o.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(o)},navArrowsClick:function(e){var n=t(e.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(n*=12*v.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,n),this._trigger(v.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!(n=t)||isNaN(n.getTime()))return this.o.defaultViewDate;var n;if(!e)return t;var o,r,i=new Date(t.valueOf()),a=i.getUTCDate(),s=i.getUTCMonth(),u=Math.abs(e);if(e=e>0?1:-1,1===u)r=-1===e?function(){return i.getUTCMonth()===s}:function(){return i.getUTCMonth()!==o},o=s+e,i.setUTCMonth(o),o=(o+12)%12;else{for(var c=0;c<u;c++)i=this.moveMonth(i,e);o=i.getUTCMonth(),i.setUTCDate(a),r=function(){return o!==i.getUTCMonth()}}for(;r();)i.setUTCDate(--a),i.setUTCMonth(o);return i},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,(function(t){return r(e,t)})).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,o=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(r,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(n=this.moveAvailableDate(r,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(r,e,"moveDay"):this.weekOfDateIsDisabled(r)||(n=this.moveAvailableDate(r,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(r,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(r,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),o=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+v.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var c=function(e,n){t.data(e,"datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,(function(t){return t.jquery?t[0]:t})),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,p.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,(function(e){return t.data(e,"datepicker")})),this.updateDates()};function l(e,n){var o=t(e).data(),r={},i=new RegExp("^"+n.toLowerCase()+"([A-Z])");function a(t,e){return e.toLowerCase()}for(var s in n=new RegExp("^"+n.toLowerCase()),o)n.test(s)&&(r[s.replace(i,a)]=o[s]);return r}function f(e){var n={};if(y[e]||(e=e.split("-")[0],y[e])){var o=y[e];return t.each(g,(function(t,e){e in o&&(n[e]=o[e])})),n}}c.prototype={updateDates:function(){this.dates=t.map(this.pickers,(function(t){return t.getUTCDate()})),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,(function(t){return t.valueOf()}));t.each(this.pickers,(function(t,n){n.setRange(e)}))},clearDates:function(){t.each(this.pickers,(function(t,e){e.clearDates()}))},dateUpdated:function(n){if(!this.updating){this.updating=!0;var o=t.data(n.target,"datepicker");if(o!==e){var r=o.getUTCDate(),i=this.keepEmptyValues,a=t.inArray(n.target,this.inputs),s=a-1,u=a+1,c=this.inputs.length;if(-1!==a){if(t.each(this.pickers,(function(t,e){e.getUTCDate()||e!==o&&i||e.setUTCDate(r)})),r<this.dates[s])for(;s>=0&&r<this.dates[s];)this.pickers[s--].setUTCDate(r);else if(r>this.dates[u])for(;u<c&&r>this.dates[u];)this.pickers[u++].setUTCDate(r);this.updateDates(),delete this.updating}}}},destroy:function(){t.map(this.pickers,(function(t){t.destroy()})),t(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:i("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var d=t.fn.datepicker,p=function(n){var o,r=Array.apply(null,arguments);if(r.shift(),this.each((function(){var e=t(this),i=e.data("datepicker"),a="object"==typeof n&&n;if(!i){var s=l(this,"date"),d=f(t.extend({},h,s,a).language),p=t.extend({},h,d,s,a);e.hasClass("input-daterange")||p.inputs?(t.extend(p,{inputs:p.inputs||e.find("input").toArray()}),i=new c(this,p)):i=new u(this,p),e.data("datepicker",i)}"string"==typeof n&&"function"==typeof i[n]&&(o=i[n].apply(i,r))})),o===e||o instanceof u||o instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return o};t.fn.datepicker=p;var h=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},g=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=u;var y=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,r,i,a){if(!n)return e;if(n instanceof Date)return n;if("string"==typeof r&&(r=v.parseFormat(r)),r.toValue)return r.toValue(n,r,i);var s,c,l,f,d,p={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},h={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in h&&(n=h[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(s=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,f=0;f<s.length;f++)c=s[f].match(/([\-+]\d+)([dmwy])/i),l=Number(c[1]),d=p[c[2].toLowerCase()],n=u.prototype[d](n,l);return u.prototype._zero_utc_time(n)}s=n&&n.match(this.nonpunctuation)||[];var g,m,b={},w=["yyyy","yy","M","MM","m","mm","d","dd"],P={yyyy:function(t,e){return t.setUTCFullYear(a?(!0===(o=a)&&(o=10),(n=e)<100&&(n+=2e3)>(new Date).getFullYear()+o&&(n-=100),n):e);var n,o},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};P.yy=P.yyyy,P.M=P.MM=P.mm=P.m,P.dd=P.d,n=o();var A=r.parts.slice();function _(){var t=this.slice(0,s[f].length),e=s[f].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(s.length!==A.length&&(A=t(A).filter((function(e,n){return-1!==t.inArray(n,w)})).toArray()),s.length===A.length){var C,D,S;for(f=0,C=A.length;f<C;f++){if(g=parseInt(s[f],10),c=A[f],isNaN(g))switch(c){case"MM":m=t(y[i].months).filter(_),g=t.inArray(m[0],y[i].months)+1;break;case"M":m=t(y[i].monthsShort).filter(_),g=t.inArray(m[0],y[i].monthsShort)+1}b[c]=g}for(f=0;f<w.length;f++)(S=w[f])in b&&!isNaN(b[S])&&(D=new Date(n),P[S](D,b[S]),isNaN(D)||(n=D))}return n},formatDate:function(e,n,o){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,o);var r={d:e.getUTCDate(),D:y[o].daysShort[e.getUTCDay()],DD:y[o].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:y[o].monthsShort[e.getUTCMonth()],MM:y[o].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var i=t.extend([],n.separators),a=0,s=n.parts.length;a<=s;a++)i.length&&e.push(i.shift()),e.push(r[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+h.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+h.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=d,this},t.fn.datepicker.version="1.9.0",t.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',(function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),p.call(n,"show"))})),t((function(){p.call(t('[data-provide="datepicker-inline"]'))}))})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,r.default)("font");return t?(a||((a=document.createElement("style")).type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(a)),(0,o.default)(a).append("@font-face{ font-family: "+e+';src: url("'+t+'") }'),e):e};var o=i(n(1)),r=i(n(45));function i(t){return t&&t.__esModule?t:{default:t}}var a=void 0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=c(n(41)),i=c(n(227)),a=(n(20),c(n(1))),s=c(n(30)),u=n(0);function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var f=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.engineForm=a.parent("pdfDocRender").doc.getPDFForm(),a.$ui.addClass("form_listbox_field"),n.setRenderNotifier((function(t){return a.updateUI(t)})),a.defaultEvnet=!1,a.generateHandler(1),a}return l(e,t),e.prototype.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.scale=t,this.rotate=e;var n=this.getTileConfig(t,e);this.updateForgroundAndHandler(t);var o=this.annot.getField(),r=o.getDAFontSize()*t*4/3;r||(r=16*t),r+="px";var i=4*this.annot.getBorderWidth()/3*t;this.$input.css({"font-size":r,"border-width":i+"px"}),this.$ui.css({left:n[8]*n[6],top:n[9]*n[6],width:n[2],height:n[3],transform:"scale("+1/n[6]+")"});var a=this.$input.find(".selected");a.length>0&&(this.$input[0].scrollTop=a[0].offsetTop)},e.prototype.generateHandler=function(t){var e=this.annot.getField();if(e){var n=this.checkReadOnly(),r=4*this.annot.getBorderWidth()/3*t,s=this.annot.getMKProperty("borderColor"),c=void 0;c=0===s?"transparent":(0,u.colorConvertor)(16777215&s,"#");var l=this.annot.getMKProperty("fillColor"),f=void 0;f=0===l||n?"transparent":(0,u.colorConvertor)(16777215&l,"#");var d=e.getAlignment(),p=e.getOptions(),h=e.getOptions(),g=e.getValue();h.map((function(t){"object"==(void 0===t?"undefined":o(t))&&g===t.value&&(g=t.lable)}));var y=(0,u.colorConvertor)(16777215&e.getDAFontColor(),"#"),v=4*e.getDAFontSize()/3;v?v+="px":v="12px";var m=(0,i.default)({borderWidth:r,borderColor:c,background:f,options:p,align:d,readonly:n,value:g,color:y,fontSize:v});this.checkInvisible()&&this.$handler.hide();var b=this.$input=(0,a.default)(m);this.$handler.append(b)}},e.prototype.handleEvnet=function(t,e){var n=this.formRender,o=this.annot;if(this.checkReadOnly())t!=s.default.AnnotMouseButtonReleased&&t!=s.default.AnnotReceiveInputFocus&&t!=s.default.AnnotMouseButtonReleased||n.blurControl();else{if(e.isTrigger)return!1;switch(t){case s.default.AnnotMouseButtonPressed:n.focusControl(this);break;case s.default.AnnotMouseButtonReleased:if((0,a.default)(e.target).hasClass("form-field-option")){var r=(0,a.default)(e.target).data("val")+"";n.setValue(o,r),n.calculate(o.getField()),this.performAction(s.default.FieldValueChanged)}(0,a.default)(e.target).hasClass("fv__ui-form-foreground"),setTimeout((function(){var t=o.action;n.execAction("Field",t,null,o.getField())}),0)}this.performAction(t)}},e.prototype.updateUIMore=function(t){var e=t.type,n=t.value,o=this.$input,r=this.annot.getField();switch(e){case"value":o.find(".form-field-option.selected").removeClass("selected"),o.find('[data-val="'+n+'"]').addClass("selected");break;case"align":return o.css("text-align",n);case"borderStyle":return o.css("border-style",n);case"clearItems":return this.updateUIMore({type:"value",value:r.getValue()}),o.find(".form-field-option").remove();case"deleteItems":this.updateUIMore({type:"value",value:r.getValue()}),o.find(".form-field-option:nth-child("+(n+1)+")").remove(),this.updateUIMore({type:"value",value:r.getValue()});break;case"insertItemAt":var i=this.annot.getField().getOptions()[n],a='<div class="form-field-option" data-val="'+i.value+'" data-index="'+n+'">'+i.lable+"</div>";o.children().length<=n?o.append(a):o.find(".form-field-option:nth-child("+(n+1)+")").before(a),this.updateUIMore({type:"value",value:r.getValue()});break;case"borderColor":o.css("border-color",0===n?"transparent":(0,u.colorConvertor)(16777215&n,"#"));break;case"fillColor":o.css("background-color",0===n?"transparent":(0,u.colorConvertor)(16777215&n,"#"));break;case"setItems":var s=this.annot.getField().getOptions().map((function(t){return'<div class="form-field-option" data-val="'+t.value+'" data-index="'+n+'">'+t.lable+"</div>"}));o.find(".form-field-option").remove(),o.append(s.join(""))}},e}(r.default);e.default=f},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,i=t.borderColor,a=(t.position,t.background),s=t.align,u=(t.fs,t.fontSize),c=(t.fcolor,t.color),l=(t.style,t.optsClass,o.$escape),f=t.i,d=t.options,p=t.optClass,h=t.value,g=t.readonly;n="border-width:"+r+"px;border-style:solid;border-color:"+i+";box-sizing:border-box;",a="background-color:"+a+";outline:none;";switch(s){case 0:s="text-align:left;";break;case 1:s="text-align:center;";break;case 2:s="text-align:right;"}e+='\n<div class="form-field-options" style="',e+=l(n+"left:0px;top:0px;height:100%;width:100%;"+a+s+"overflow-y:auto;"+("font-size:"+u+";")+("color:"+c+";")),e+='">\n';for(f=0;f<d.length;f++){p="form-field-option";d[f].value==h&&(p+=" selected"),g&&(p+=" readonly"),e+='\n<div class="',e+=l(p),e+='" data-val="',e+=l(d[f].value),e+='" data-index="',e+=l(f),e+='">',e+=l(d[f].lable),e+="</div>\n"}return e+="\n</div>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=f(n(41)),i=f(n(229)),a=f(n(230)),s=n(20),u=f(n(1)),c=f(n(30)),l=n(0);function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var p=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.engineForm=a.parent("pdfDocRender").doc.getPDFForm(),a.$ui.addClass("form_combobox_field"),a.available=!0,a.handleFiller=!1,a.genDropDownUI(1),a.genLabelUI(),a.bindDropDownUIEvent(),a}return d(e,t),e.prototype.render=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(this.scale=n,this.rotate=o,this.available){this.updateForgroundAndHandler(n);var r=this.annot.getDeviceRect(n),i=r.right-r.left,a=r.bottom-r.top;this.$optionsList.css({left:r.left,top:r.top+a,width:i,"font-size":"1em","overflow-y":"auto"});var s=4*this.annot.getBorderWidth()/3*n,u=this.annot.getField();if(!u)return!1;this.$textInput.css({"font-size":l,"border-width":s+"px",padding:s+"px"});var c=.3*a>20?20:.3*a;this.$handler.find(".fwr__ui-combo-dropdown").css({"border-width":c+"px "+.6*c+"px 0",top:(a-c)/2+"px"});var l=4*u.getDAFontSize()/3;l?l+="px":(clearTimeout(this.autoFontSizeTimeout),this.autoFontSizeTimeout=setTimeout((function(){e.autoFontSize(e.$textInput.val(),2*c)}),200)),t.prototype.render.call(this,n,o)}},e.prototype.handleEvnet=function(e,n){var o=this,r=t.prototype.handleEvnet.call(this,e,n);if(1==r)return r;switch(e){case c.default.AnnotMouseButtonPressed:this.optionsMounted=this.optionsMounted||this.$handler.after(this.$optionsList),this.$optionsList.show();break;case c.default.AnnotMouseButtonReleased:if((0,u.default)(n.target).hasClass("form-field-option")){(0,u.default)(n.target).data("val");n.stopPropagation(),this.$optionsList.hide()}setTimeout((function(){var t=o.annot.action;o.formRender.execAction("Field",t,null,o.annot.getField())}),150)}this.performAction(e)},e.prototype.genDropDownUI=function(t){var e=this.annot,n=this.annot.getField();if(n){var o=4*e.getBorderWidth()/3*t,r=e.getMKProperty("borderColor"),a=(0,l.colorConvertor)(r,"#");0===r&&(a="gray");var s=e.getMKProperty("fillColor"),c=(0,l.colorConvertor)(s,"#");0===s&&(c="white");var f=n.getOptions(),d=n.getValue(),p=(0,i.default)({borderWidth:o,borderColorHex:a,fillColorHex:c,background:"white",options:f,value:d});this.$optionsList=(0,u.default)(p),this.$optionsList.hide()}else this.available=!1},e.prototype.bindDropDownUIEvent=function(){var t=this;if(this.available){var e=this.formRender,n=this.annot;this.$optionsList.on("click",(function(o){if((0,u.default)(o.target).hasClass("form-field-option")){var r=(0,u.default)(o.target).data("val");o.stopPropagation(),t.$optionsList.hide(),t.$optionsList.find(".selected").removeClass("selected"),(0,u.default)(o.target).addClass("selected");var i=n.getField();if(!i)return;if(i.getValue()===r)return;t.updateUIMore({type:"value",value:r}),e.setValue(n,r),e.calculate(n.getField()),t.performAction(c.default.FieldValueChanged),t.performAction(c.default.FieldKeyStroke,{change:(0,u.default)(o.target).html()})}setTimeout((function(){var t=n.action;e.execAction("Field",t,null,n.getField())}),150)}))}},e.prototype.blur=function(){var e=this;this.$input.css("visibility","hidden"),this.$handler.find(".fv__tiles-row").show();var n=this.formRender,o=this.annot;if(this.$optionsList.hide(),this.$textInput.length>0){var r=this.$textInput.val();setTimeout((function(){var t=o.getField();if(t){var i=r;t.getOptions().forEach((function(t){r==t.lable+""&&(i=t.value)})),i!==t.getValue()&&(n.setValue(o,i),n.calculate(o.getField()),e.performAction(c.default.FieldValueChanged))}}),0)}t.prototype.blur.call(this)},e.prototype.focus=function(){var e=this;t.prototype.focus.call(this),this.$input.css("visibility","initial"),this.$handler.find(".fv__tiles-row").hide();var n=this.annot.getField();if(n){var o=n.getValue(),r=o;n.getOptions().forEach((function(t){o==t.value+""&&(r=t.lable)})),this.$textInput.val(r),setTimeout((function(){e.$textInput.focus()}),10)}},e.prototype.genLabelUI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.annot,n=e.getField();if(!n)return!1;var o=(0,a.default)(this.getStyle(t)),r=this.$input=(0,u.default)(o);return this.$foreground.after(r),this.$textInput=this.$handler.find("input"),this.$input.css("visibility","hidden"),!0},e.prototype.updateUIMore=function(e){var n=this,o=e.type,r=e.value,i=this.$textInput,a=this.$optionsList,s=this.annot.getField();if(s){var u=Promise.resolve();switch(o){case"value":var c=s.getOptions(),f=c[s.valueIndex];if(s.valueIndex)r=f.lable;else for(var d=0;d<c.length;d++){var p=c[d];if(r==p.value+""){r=p.lable;break}r==p.value+""&&(r=p.lable)}u=s.setDisplayValue(r),i.val(r);break;case"displayValue":i.val(r);break;case"align":i.css("text-align",r);break;case"borderStyle":i.css("border-style",r);break;case"borderColor":i.css("border-color",0===r?"transparent":(0,l.colorConvertor)(16777215&r,"#"));break;case"fillColor":this.$input.find(".textCombContainer").css("background-color",0===r?"transparent":(0,l.colorConvertor)(16777215&r,"#")),i.css("background-color",0===r?"transparent":(0,l.colorConvertor)(16777215&r,"#"));break;case"readonly":r?(this.$foreground.hide().addClass("form-field-readonly").css("visibility","hidden"),i.attr("readonly",!0)):(this.$foreground.show().removeClass("form-field-readonly").css("visibility","visible"),i.removeAttr("readonly"));var h=this.annot.getMKProperty("fillColor"),g=(0,l.colorConvertor)(h,"#");0===h&&(g="transparent"),i.css("background-color",g);break;case"clearItems":a.find(".form-field-option").remove(),this.updateUIMore({type:"value",value:s.getValue()});break;case"deleteItems":a.find(".form-field-option:nth-child("+(r+1)+")").remove(),this.updateUIMore({type:"value",value:s.getValue()});break;case"insertItemAt":var y=this.annot.getField().getOptions(),v="";y.forEach((function(t,e){v+='<div class="form-field-option" data-val="'+t.value+'" data-index="'+e+'">'+t.lable+"</div>"})),a.empty().append(v),this.updateUIMore({type:"value",value:s.getValue()});break;case"setItems":var m=this.annot.getField().getOptions().map((function(t){return'<div class="form-field-option" data-val="'+t.value+'" data-index="'+r+'">'+t.lable+"</div>"}));a.find(".form-field-option").remove(),a.append(m.join("")),this.updateUIMore({type:"value",value:s.getValue()})}u.then((function(e){return t.prototype.render.call(n,n.scale,n.rotate)}))}},e.prototype.getStyle=function(t){var e=this.annot,n=e.getField();if(!n)return!1;var r=this.checkReadOnly(),i=4*e.getBorderWidth()/3*t,a=e.getMKProperty("borderColor"),u=void 0;u=0===a?"transparent":(0,l.colorConvertor)(16777215&a,"#");var c=e.getMKProperty("fillColor"),f="transparent";0!=c&&(f=(0,l.colorConvertor)(16777215&c,"#"));var d=n.getAlignment(),p=!this.checkInvisible(),h=(0,l.colorConvertor)(16777215&n.getDAFontColor(),"#"),g=4*n.getDAFontSize()/3;g?g+="px":g="16px";var y=s.FieldFlag.isComboEdit(n.getFlags()),v=n.getOptions(),m=n.getValue();return v.map((function(t){"object"==(void 0===t?"undefined":o(t))&&m===t.value&&(m=t.lable)})),{comboEditable:y,borderWidth:i,borderColor:u,background:f,readonly:r,align:d,value:m,maxLength:n.getMaxLength(),visible:p,color:h,fontSize:g}},e}(r.default);e.default=p},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,i=t.borderColorHex,a=(t.position,t.background),s=t.align,u=(t.style,o.$escape),c=t.i,l=t.options,f=t.optClass,d=t.value;n="border:"+r+"px solid "+i+";box-sizing:border-box;",a="background-color:"+a+";outline:none;";switch(s){case 0:s="text-align:left;";break;case 1:s="text-align:center;";break;case 2:s="text-align:right;"}e+='\n<div class="checkbox form-field-options" style="',e+=u(n+"left:0px;top:100%;max-height:200px;width:100%;position:absolute;"+a+s+"overflow-y:auto"),e+='">\n    ';for(c=0;c<l.length;c++){f="form-field-option";l[c].value==d&&(f+=" selected"),e+='\n    <div class="',e+=u(f),e+='" data-val="',e+=u(l[c].value),e+='" data-index="',e+=u(c),e+='">',e+=u(l[c].lable),e+="</div>\n    "}return e+="\n</div>"}},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,i=t.borderColor,a=(t.position,t.background),s=t.align,u=(t.readonlyAttr,t.readonly),c=t.comboEditable,l=(t.cursor,t.fs,t.fontSize),f=(t.fcolor,t.color),d=t.style,p=t.dropButtonDisplay,h=o.$escape,g=t.value;n="border:"+r+"px solid "+i+";box-sizing:border-box;",a="background-color:"+a+";outline:none;";switch(s){case 0:s="text-align:left;";break;case 1:s="text-align:center;";break;case 2:s="text-align:right;"}d=n+"left:0px;top:0px;height:100%;width:100%;position:absolute;"+a+s+("font-size:"+l+";")+("color:"+f+";")+(c?"":"cursor:pointer;"),p=u?"display:none":"display:block";return e+='\n<input class="fwr__ui-combo-input" ',e+=h(u||!c?"readonly":""),e+=' style="',e+=h(d),e+='" value="',e+=h(g),e+='"></input>\n<div class="fwr__ui-combo-dropdown" style="',e+=h(p),e+='"></div>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(41)),r=a(n(30)),i=a(n(2));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return c(e,t),e.prototype.handleEvnet=function(e,n){var o=t.prototype.handleEvnet.call(this,e,n);if(o)return o;switch(e){case r.default.AnnotMouseButtonPressed:this.pdfViewer.eventEmitter.emit(i.default.signatureFieldMouseLButtonDown,this.annot);break;case r.default.AnnotMouseButtonReleased:this.pdfViewer.eventEmitter.emit(i.default.signatureFieldMouseLButtonUp,this.annot);break;case r.default.AnnotCursorEnter:this.pdfViewer.eventEmitter.emit(i.default.signatureFieldMouseEnter,this.annot);break;case r.default.AnnotCursorExit:this.pdfViewer.eventEmitter.emit(i.default.signatureFieldMouseExit,this.annot)}},e}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}},actions:{name:"actions",nameI18nKey:"viewer_:contextmenu.annot.actions",callback:function(){this.data("annotComponent").showActionsDialog()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}},r={properties:o.properties,download:{name:"download",nameI18nKey:"viewer_:contextmenu.annot.download",callback:function(){this.data("annotComponent").download()}},remove:o.remove};e.getImageContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:o,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.getMultiMediaContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:r,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(28)),r=n(6),i=a(n(25));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i));return a.$ui.addClass("fv__pdf-page-watermark-annot-container"),a}return u(e,t),e.prototype.getTileConfig=function(t,e){var n=this.pdfViewer,o=n.getSmartScale(t),r=n.config.tileSize,i=this.annot,a=i.getDeviceRect(1),s=i.getDeviceRect(o),u=s.right-s.left,c=s.bottom-s.top;return[Math.ceil(c/r),Math.ceil(u/r),u,c,r,o,t,e,a.left,a.top]},e.prototype.render=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,a=this.annot;if(this.scale=n,this.rotate=o,a.isEmpty()||a.isDeleted()||a.rectIsEmpty())return this.renderDestroy(),Promise.resolve();var u=this.tileCanvas,c=a.getBorderWidth();if(!c)return u&&u.hideContainer(),Promise.resolve();var l=this.getTileConfig(n,o);return u||(u=this.tileCanvas=new i.default((function(t,n,o,i,s,u,c,l){return e.getPDFPage().getAnnotBitmap(a.getId(),(0,r.pt2px)(u),0,{x:c*u+n*s,y:l*u+t*s,width:o,height:i})}),this.$ui)),u.showContainer(),(t=u).redraw.apply(t,s(l))},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data("annotComponent").showReplyDialog("reply")},disabled:function(){return this.data("annotComponent").replyDisabled()}},play:{name:"play",nameI18nKey:"viewer_:contextmenu.annot.play",callback:function(){this.data("annotComponent")},disabled:function(){this.data("annotComponent")}},pause:{name:"pause",nameI18nKey:"viewer_:contextmenu.annot.pause",callback:function(){this.data("annotComponent")},disabled:function(){this.data("annotComponent")}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};e.getSoundContextMenu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:o,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}},e.defaultAnnotComponentKey="annotComponent"},function(t,e,n){"use strict";function o(t,e,n){for(var o=0;o<n.length;o++,e++){var r=n[o];t.setInt8(e,r)}}function r(t,e,n){for(var o=0;o<n.length;o++)t.setUint8(e+o,n.charCodeAt(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.encodeWAV=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],i=arguments[3],a=new ArrayBuffer(44+t.length),s=new DataView(a);return r(s,0,"RIFF"),s.setUint32(4,36+t.length,!0),r(s,8,"WAVE"),r(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,e,!0),s.setUint32(24,n,!0),s.setUint32(28,n*e,!0),s.setUint16(32,e,!0),s.setUint16(34,i,!0),r(s,36,"data"),s.setUint32(40,t.length,!0),o(s,44,t),s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=h(n(21)),r=h(n(237)),i=h(n(238)),a=h(n(240)),s=h(n(241)),u=h(n(242)),c=h(n(243)),l=h(n(244)),f=h(n(245)),d=h(n(246)),p=h(n(247));function h(t){return t&&t.__esModule?t:{default:t}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.actionOptions=e.actionOptions;var n=this.actionOptions.remoteGotoActionInit;n&&n()}return t.prototype.get=function(t,e){switch(t&&t.getType()||null){case"TypeURI":return new r.default(t,e);case"TypeLaunch":return new i.default(t,e);case"TypeNamed":return new a.default(t,e);case"TypeJavaScript":return new s.default(t,e);case"TypeSubmitForm":return new u.default(t,e);case"TypeResetForm":return new c.default(t,e);case"TypeImportData":return new l.default(t,e);case"TypeHide":return new d.default(t,e);case"TypeGoto":return new f.default(t,e);case"TypeGoToR":return new p.default(t,e);default:return new o.default(t,e)}},t}();e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer,o=n.customs;Promise.resolve((o.URIActionCallback||r.default)(this.getURI())).then((function(t){if(!1!==t){var o=e.getURI();if(/\w*:\/\/[\s\S]*/.test(o)){if("file"===o.match(/(\w*):\/+[\s\S]*/)[0])return}else o="http://"+o;if(e.pdfViewer.getSafeReadingMode()){var i=e.pdfViewer.i18n.t("viewer_:pdfjs.launchURLHint");return n.viewerUI.confirm(i+"\n"+o).then((function(){window.open(o)}),r.default)}window.open(o)}})),t.prototype.active.call(this)},e.prototype.getURI=function(){return this.action.getURI()},e.prototype.setURI=function(t){return this.action.setURI(t)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(21)),r=a(n(239)),i=a(n(12));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return i.fileSpec=i.getFileSpec()&&new r.default(i.getFileSpec())||null,i}return s(e,t),e.prototype.active=function(){var e=this.annot.pdfViewer.customs;Promise.resolve((e.launchActionCallback||i.default)(this.getFileSpec())).then((function(t){})),t.prototype.active.call(this)},e.prototype.getFileSpec=function(){return this.action.getFileSpec()},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileSpec=e}return t.prototype.getChecksum=function(){return this.fileSpec.getChecksum()},t.prototype.getCreationDateTime=function(){return this.fileSpec.getCreationDateTime()},t.prototype.getDescription=function(){return this.fileSpec.getDescription()},t.prototype.getDict=function(){return this.fileSpec.dict},t.prototype.getFileData=function(){return this.fileSpec.fileData},t.prototype.getFileName=function(){return this.fileSpec.getFileName()},t.prototype.getFileSize=function(){return this.fileSpec.fileSize},t.prototype.getModifiedDateTime=function(){return this.fileSpec.modifiedDateTime},t.prototype.getSubtype=function(){return this.fileSpec.subtype},t.prototype.isEmbedded=function(){return this.fileSpec.isEmbedded},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.namedActionCallback||r.default)(this.getName())).then((function(t){if(!1!==t){var n=e.pdfViewer.getPDFDocRender();switch(e.getName()){case"NextPage":n.nextPage();break;case"PrevPage":n.prevPage();break;case"FirstPage":n.goToPage(0,{x:0,y:0});break;case"LastPage":var o=n.doc.getPageCount();n.goToPage(o-1,{x:0,y:0})}}})),t.prototype.active.call(this)},e.prototype.setActionData=function(t){return this.action.setActionData(t)},e.prototype.getName=function(){return this.action.getName()},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.annot.pdfViewer.JSEngine,i=void 0,a=this.annot.pdfViewer.customs;return o.getEnableJS()?n?Promise.resolve((a.javascriptActionCallback||r.default)(this.getScript())).then((function(t){!1!==t&&(o.initEvent(e.getType(),e.source,e.target,e.name),o.exec(e.getScript()))})):!1!==(i=(a.javascriptActionCallback||r.default)(this.getScript()))&&(o.initEvent(this.getType(),this.source,this.target,this.name,this.param),i=o.exec(this.getScript())):((a.javascriptDisabledActionCallback||r.default)(),i={rc:!0}),t.prototype.active.call(this),i},e.prototype.setTypeName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.type=t,this.name=e},e.prototype.getType=function(){return this.type},e.prototype.getScript=function(){return this.action.getScript()},e.prototype.setScript=function(t){return this.action.setScript(t)},e.prototype.setParam=function(t){this.param=t},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.submitFormActionCallback||r.default)({flags:this.getFlags(),url:this.getURL(),fieldNames:this.getFieldNames()})).then((function(t){if(!1!==t)if(e.annot.pdfViewer.getSafeReadingMode()){if(!n.submitFormActionCallback){var o=e.annot.pdfViewer.i18n.t("viewer_:pdfjs.safeModeSubmit",{URL:e.getURL(),interpolation:{escapeValue:!1}});if(!confirm(o))return}e.annot.pdfViewer.pdfViewerRender.pdfDocRender.doc.getPDFForm().submitForm(e.getURL(),e.getFieldNames(),e.getFlags())}else e.annot.pdfViewer.pdfViewerRender.pdfDocRender.doc.getPDFForm().submitForm(e.getURL(),e.getFieldNames(),e.getFlags())})),t.prototype.active.call(this)},e.prototype.setActionData=function(t){return this.action.setActionData(t)},e.prototype.getFlags=function(){return this.action.getFlags()},e.prototype.getURL=function(){return this.action.getURL()},e.prototype.getFieldNames=function(){return this.action.getFieldNames()},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.resetFormActionCallback||r.default)(this.getFlags(),this.getFieldNames())).then((function(t){!1!==t&&e.annot.pdfViewer.pdfViewerRender.pdfDocRender.doc.getPDFForm().resetForm(e.getFieldNames(),e.getFlags(),e.source)})),t.prototype.active.call(this)},e.prototype.setActionData=function(t){return this.action.setActionData(t)},e.prototype.getFlags=function(){return this.action.getFlags()},e.prototype.getFieldNames=function(){return this.action.getFieldNames()},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this.annot.pdfViewer.customs;Promise.resolve((e.importDataActionCallback||r.default)(this.getFDFFileSpec())).then((function(t){})),t.prototype.active.call(this)},e.prototype.getFDFFileSpec=function(){return this.action.getFDFFileSpec()},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.gotoActionCallback||r.default)(this.getDestination())).then((function(t){!1!==t&&function(t,e){e.getPDFDocRender().getPDFDoc().getPageByIndex(t.pageIndex).then((function(n){switch(t.zoomMode){case"ZoomXYZ":var o=t.zoomFactor;0===o?e.getPDFDocRender().goToPage(t.pageIndex,{x:t.left,y:t.top},0!==t.top):e.zoomTo(o).then((function(){e.getPDFDocRender().goToPage(t.pageIndex,{x:t.left,y:t.top},0!==t.top)}));break;case"ZoomFitHorz":e.zoomTo("fitWidth").then((function(){e.getPDFDocRender().goToPage(t.pageIndex,{x:t.left,y:t.top},0!==t.top)}));break;case"ZoomFitPage":e.zoomTo("fitHeight").then((function(){e.getPDFDocRender().goToPage(t.pageIndex,{x:t.left,y:t.top},0!==t.top)}));break;case"ZoomFitRect":var r=e.getPDFViewerRender().scrollWrap.getScrollHost(),i=r.clientWidth,a=r.clientHeight;e.getPDFPageRender(t.pageIndex).getPDFPage().then((function(n){var r=n.getDeviceRect({left:t.left,top:t.top,bottom:t.bottom,right:t.right}),s=r.right-r.left,u=r.bottom-r.top;o=Math.min(i/s,a/u),e.zoomTo(o).then((function(){e.getPDFDocRender().goToPage(t.pageIndex,{x:t.left,y:t.top},0!==t.top)}))}));break;default:e.zoomTo("fitWidth").then((function(){e.getPDFDocRender().goToPage(t.pageIndex,{x:t.left,y:t.top},0!==t.top)}))}}))}(e.getDestination(),e.pdfViewer)})),t.prototype.active.call(this)},e.prototype.getDestination=function(){return this.action.getDestination()},e.prototype.setActionData=function(t){return this.action.setActionData(t)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(21));r(n(12));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return i(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer.getPDFDocRender().getPDFDoc();this.getFieldNames().forEach((function(t){n.getPDFForm().getField(t).setHidden(e.getHideState())})),t.prototype.active.call(this)},e.prototype.getFieldNames=function(){return this.action.getFieldNames()},e.prototype.getHideState=function(){return this.action.getHideState()},e.prototype.setActionData=function(t){return this.action.setActionData(t)},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(21)),r=i(n(12));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.active=function(){var e=this,n=this.annot.pdfViewer,o=this.annot.pdfViewer.customs,i=this;Promise.resolve((o.remoteGotoActionCallback||r.default)(this.getDestination())).then((function(t){if(!1!==t){var o=e.action.getFileSpec();if(o.isEmbedded()){var r=e.getDestination();e.action.getFileSpecStream().then((function(t){var e=new Blob(t,{type:"application/pdf"}),n=URL.createObjectURL(e);window.open(location.href+"#FOXITPDFREMOTE");window.addEventListener("message",(function(t){t.source!==window&&t.data.isReady&&t.source.postMessage(Object.assign({foxitSdkActionType:i.action.getType(),foxitSdkActionUrl:n,foxitSdkActionFileName:i.action.getFileSpec().getFileName()},r),window.location.origin)}),!1)}))}else{var a=n.i18n.t("viewer_:dialog.action.remoteGoto.message");n.viewerUI.alert(a+"("+o.getFileName()+")")}}})),t.prototype.active.call(this)},e.prototype.getDestination=function(){return this.action.getDestination()},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(249),r=s(n(256)),i=s(n(276)),a=s(n(30));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t){return t+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}var l=[],f=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.curEvent=null,this.PDFViewer=e,this.hasInitAnnots=!1;var a=e.config.enableJS;this.enableJS=null==a||a;var s=new o.jsApp(this,e),u=new r.default(this);i.default.initJSEnv(this,s,u),this.cacheJSDoc=u,this.PDFViewer.eventEmitter.on("open-file-success",(function(t){n.cacheJSDoc.dirty=!1,(0,o.endDialog)()})),this.PDFViewer.eventEmitter.on("doc-modified",(function(){n.cacheJSDoc.dirty=!0}))}return t.prototype.setStatus=function(t,e){this.status=t,this.eventSource=e},t.prototype.getEvent=function(t){return t?this.events[t]:this.events[this.cacheJSDoc.timeStamp||this.curEvent]||{}},t.prototype.getEnableJS=function(){return this.enableJS},t.prototype.setEnableJS=function(t,e){var n=this.enableJS;if(this.enableJS=t,!n&&t&&e){var o=e.getJsNameTree(),r="";for(var i in o)r+=o[i]+"\n";var a=e.action;a&&a.getScript&&(r+=a.getScript()),this.initEvent(13,null,null,"Init"),this.exec(r,!0)}},t.prototype.getPDFDoc=function(){return this.PDFViewer.currentPDFDoc},t.prototype.getFieldValue=function(t){return this.getPDFForm().getField(t).getValue()},t.prototype.getPDFForm=function(){return this.getPDFDoc().getPDFForm()},t.prototype.initEvent=function(t,e,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};"Init"==o&&(this.events={},this.cacheJSDoc.cleanFields());var i={};i.engineTarget=n,i.target=this.cacheJSDoc.getField(n&&n.getName()),i.name=o,i.source=this.cacheJSDoc.getField(e&&e.getName()),i.type=t,i.rc=!0,i.value="";var s=c((new Date).valueOf()+""+o);for(e&&(s+=e.getName()+"_"),n&&(s+=n.getName());this.events[s];)s+="p";for(var u in i.timeStamp=this.curEvent=s,this.events[s]=i,i.change="",r)i[u]=r[u];switch(o){case a.default.FieldKeyStroke:i.value=n.getValue(),i.changeEx=n.getValue();break;case a.default.FieldRecalculateValue:case a.default.FieldValueChanged:i.value=n.getValue();break;case"WillPrint":break;case"Focus":case a.default.AnnotReceiveInputFocus:i.value=n.getValue();break;case"DidPrint":break;case"Blur":case a.default.AnnotLoseInputFocus:i.value=n.getValue();break;case"WillSave":break;case"Format":case a.default.FieldWillFormat:i.rc=!0,i.value=n.getValue()}return s},t.prototype.closeDoc=function(){this.PDFViewer.pdfViewerRender.pdfDocRender.destroy()},t.prototype.postRunScripts=function(t){var e="";switch(t.name){case a.default.FieldRecalculateValue:e=t.rc,void 0!==t.value&&(t.value+"").length>0&&t.engineTarget.setValue(t.value);break;case a.default.FieldWillFormat:t.rc&&t.engineTarget.showDisplayValue(t.value),e={rc:t.rc,format:t.format,value:t.value};break;case a.default.FieldKeyStroke:e=t.change,e={rc:t.rc,format:t.format,change:e};break;case a.default.FieldValueChanged:e={rc:t.rc,format:t.format,value:t.value}}return"calculate"==this.status&&(this.getPDFForm().calculate(this.eventSource),this.status=""),delete this.events[t.timeStamp],t=null,e},t.prototype.handleJavaScripts=function(t,e,n){var o=void 0,r=this.events[n.event]||{};try{if(this.isBusy=!0,o=i.default.exec(t,!!e,n),this.isBusy=!1,"boolean"==typeof o)return this.postRunScripts(r)}catch(t){0,this.isBusy=!1,r.rc=!0,this.postRunScripts(r),o=-1}return o},t.prototype.delayHandle=function(){var t=this;setTimeout((function(){if(t.isBusy)t.delayHandle();else for(var e=l.pop();e;)t.exec.apply(t,u(e)),e=l.pop()}),10)},t.prototype.exec=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.enableJS?(n.event=n.event||this.curEvent,this.handleJavaScripts(t,e,n)):{rc:!0}},t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.endDialog=e.jsApp=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=c(n(250)),i=c(n(251)),a=c(n(253)),s=c(n(255)),u=n(27);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(){return Object.assign({},{type:"static_text",whiteSpace:"pre-wrap",name:"",item_id:"msg",char_width:60,font:"dialog",border:"none"})},f=function(t){return{callback:function(t){},initialize:function(){},description:{name:"alert",first_tab:"cncl",elements:[t]}}},d=new s.default,p=function(){function t(e,n){for(var o in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsEngine=e,this.viewerApp=n,this._calculate=!0,this._fullscreen=!0,this._fs=d,this._runtimeHighlight=!0,this._highlightColor=["RGB",0,0,1],this.dialogQueue=Promise.resolve(),this)"function"==typeof this[o]&&(this[o].toString=function(){return"function(){[native code]}"})}return t.prototype.popUpMenu=function(){for(var t=this.viewerApp.i18n.t("viewer_:pdfjs.popupMenu"),e={},n=function n(o){var r=1;return function(i){var a=Object.prototype.toString.call(i);if(a.indexOf("String")>-1&&"-"!==i){var s=void 0;s=void 0!==o?o+"-"+r:String(r),t+=s+". "+i+" \n",e[s.trim()]=i,r++}else if(a.indexOf("Array")>-1){var u=void 0;u=o?o+"-"+r:String(r),t+=u+". "+i[0]+" \n",e[u.trim()]=i[0],void 0!==o?i.slice(1).forEach(n("  "+o+"-"+r)):i.slice(1).forEach(n("  "+r)),r++}}},o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];r.forEach(n());var a=prompt(t);if(null===a)return null;for(var s in e)if(e.hasOwnProperty(s)&&a.trim()===s)return e[s]},t.prototype.response=function(t){var e=t.cQuestion,n=(t.cTitle,t.cDefault);t.bPassword,t.cLabel;return window.prompt(e,n)},t.prototype.beep=function(t){var e=void 0;switch(t){case 0:e="error";break;case 1:e="warning";break;default:e="error"}var n=new Audio(r.default[e]);n.addEventListener("load",(function(){n.play()}),!0),n.autoplay=!0},t.prototype.alert=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;arguments[3];if(!this.jsEngine.getEvent().isSensitiveCheck&&!this.jsEngine.getEvent().isLoading){var r=this.jsEngine.getEvent();if(!r.isSensitiveCheck&&!r.isLoading){var i,a;t&&t.nType&&t.nType;switch(i=o,t&&void 0!==t.nType&&(i=t.nType),(a=t&&t.cMsg?t.cMsg:"")||(a=null==t?"undefined":"string"==typeof t?t:t.toString()),i){default:case 0:if(u.isMobile)alert(a);else{var s=l();s.name=a,this.dialogQueue=this.dialogQueue.then((function(t){return n._execDialog(f(s))}))}return 0;case 1:return confirm(a)?1:2;case 2:case 3:return confirm(a)?4:3}}}})),t.prototype.clearInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){clearInterval(t)})),t.prototype.clearTimerOut=function(t){clearTimeout(t)},t.prototype.launchURL=function(t){if(this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.getEvent().isLoading)this.jsEngine.sensitiveOp=!0;else{if(/\w*:\/\/[\s\S]*/.test(t)){if("file"===t.match(/(\w*):\/+[\s\S]*/)[0])return}else t="http://"+t;var e=this.viewerApp.i18n.t("viewer_:pdfjs.launchURLHint");confirm(e+"\n"+t)&&window.open(t)}},t.prototype._execDialog=function(t){return new Promise((function(e,n){var o=new i.default(t,(function(t){e(t)}));o.initialize(),o.doModal()}))},t.prototype.execDialog=function(t,e,n){return this._execDialog(t,e,n)},t.prototype.execMenuItem=function(){console.warn("app.execMenuItem is not completed now.")},t.prototype.setInterval=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return setInterval(window.eval(t),e)})),t.prototype.setTimeOut=function(t,e){var n=this;return setTimeout((function(e){return n.jsEngine.exec(t)}),e)},o(t,[{key:"activeDocs",get:function(){return[this.jsEngine.cacheJSDoc]}},{key:"calculate",get:function(){return this._calculate},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._calculate=t}},{key:"constants",get:function(){return{algin:{left:0,center:1,right:2,top:3,bottom:4}}}},{key:"focusRect",get:function(){return this._focusRect},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._focusRect=t}},{key:"formsVersion",get:function(){return 7}},{key:"fullscreen",get:function(){return this._fullscreen},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._fullscreen=t}},{key:"fs",get:function(){return this._fs}},{key:"runtimeHighlight",get:function(){return this.viewerApp.highlightControls()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.viewerApp.setRuntimeHighlight(t)}},{key:"runtimeHighlightColor",get:function(){return this.viewerApp.getDisplayHighlightColor(.2,"RGB")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.viewerApp.setRuntimeHighlightColor(t)}},{key:"viewerVersion",get:function(){return 7}},{key:"viewerType",get:function(){return"Exchange-Pro"}},{key:"viewerVariation",get:function(){return"Business Tools"}},{key:"printerNames",get:function(){return["Web Printer"]}},{key:"platform",get:function(){var t=window.navigator.platform,e=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?e="MAC":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?e="WIN":!e&&/Linux/.test(t)&&(e="UNIX"),e}},{key:"language",get:function(){var t=void 0,e=navigator.language||navigator.userLanguage;return[{language:"zh-CN",code:"CHS"},{language:"zh-HK",code:"CHT"},{language:"zh-TW",code:"CHT"},{language:"da",code:"DAN"},{language:"de",code:"DEU"},{language:"en",code:"ENU"},{language:"es",code:"ESP"},{language:"fr",code:"FRA"},{language:"it",code:"ITA"},{language:"ko",code:"KOR"},{language:"ja",code:"JPN"},{language:"nl",code:"NLD"},{language:"nb",code:"NOR"},{language:"pt-BR",code:"PTB"},{language:"fi",code:"SUO"},{language:"sv",code:"SVE"}].some((function(n){e.indexOf(n.language)>-1&&(t=n.code)})),t}},{key:"numPlugIns",get:function(){return 2}},{key:"plugIns",get:function(){return[{name:"Annots",certified:!0,loaded:!0,path:"",version:7},{name:"Forms",certified:!0,loaded:!0,path:"",version:7}]}},{key:"media",get:function(){return new a.default(this.jsEngine)}}]),t}();e.jsApp=p,e.endDialog=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={error:"data:audio/mp3;base64,SUQzBAAAAAAAJ1RTU0UAAAATAAADVVBZVU4gVHJhbnNjb2RpbmcAAAAAAAAAAAAAAP/zwMAAAAAAAAAAAABJbmZvAAAADwAAAA4AABh8ACIiIiIiIiIzMzMzMzMzRERERERERFVVVVVVVVVmZmZmZmZmd3d3d3d3d4iIiIiIiIiZmZmZmZmZmaqqqqqqqqq7u7u7u7u7zMzMzMzMzN3d3d3d3d3u7u7u7u7u/////////wAAAABMYXZjNTguMzUAAAAAAAAAAAAAAAAkAuAAAAAAAAAYfNJCphkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/zwMQAUHwOTAdawAEmXGgLFAkxKU3Mk6dc6s04bESZmMQHJlnHdmnKhwOmpVby2ZccsgYQUY4kZIcAiDNS3ZhQoGDlrEAiRDEIpdfdh6p0AhdwtgWULIFmEADTKFYQv4WUMAAEBAAwSldtdiwipExEVEVFNISw8tgAAGARkIZiGQRdhkJjWfvH7RyUGAfUuuWTL5w0X/RTdeu6aX6Adf6NhrWaRo5y5yHcsV7fPwqRh2HcnJW1hYRQBIRIhYjXJ1212MQZZLOZ/hSRu/KIxYm3bh+1Dcbt/Xlcbn5Q1tr8Py/uGGG6TD+6lEYsStyHIhyWYfnTxt/IcpOf/1425DuP5GJZSWMMKent9lD+OQ7ksl+eqljn1H8Ym1+H6enjb/w/L+aqUlJYwqRhy4fn9UljCpSP+/7tuW5blv/fiDO2vw/flEMP5GLHf/CpSUgGAAZMWhiMZldMDSOMgUPABaGRbgnPqSmaoJnuYgms5DHh4SmrooGFwTFAImIADAYPDBQCRgIjRRg1g+OGRjM2gyxCOUKzJVA2lEMrQwgqMuAjAf/zwsRSbOQWeUGd2AAJMnIjSA8AAQUCBKCCqMa+YhcUHkwyMHNJBzBSk18QNKLTdAAwwtMDCACTmCghpQwr8UFCZEMoFTgx0FHAgLx0QMTHTC0ImUzDyUILSJOAwgYIJmjppiZ6JHQ8RG6EgWK14GzFxhDUY+BGKiBoIqAAEyozNFWzA1My0oLhg0XBIYBTQORC38lfZZbpmCCxjpwAScwYmIids6uyANMRATCyMwUqNcBjBykmBn+0MgVKYSEtqt1PRCgSD42iorG7bwS6XiqKWAuDUxwYAhAEGCcsZXSohN1xAgAJETkFUJJQkaDC4sPKTa2ls6z/xuKNYguWSGXxFnb9vxJZfAk9Xv0jxvbFlJS+H3NiEXjtDHIy9Lk3HYbu3yg8XiTuO5F4xBU3XiNSV2oHr34foJZar5Z4apO7vd4zClmH2fqSN1f2TWX8lcPPz8/R5Uk9pxJC9blTVO772xjCVReVU7y0NmtnScoAAFxgMgBGya0Gigx3CwsODHM9AoiMj105eUjQYmNvloyuEjVLUMagIBCIwGOjJoLMNir/88LEM2YsEpInnNAAHjOEBdACGejmgjKAzRgTfiDDHzBIQwalCRbkAaJpEVEC8LAQN4QACxwUCApqAhw9WCo4aJGQJBi8RhQ41NAUkZoOq0CA1jAwQRapoLiSySUpnBSUapGsGYKBQO4xpgxiCwcCLyGBGpymEFmZImFLgkE0kEjAQPSjNYGMsGCBwcER9hgwAxMF0tQwwpIhS5R0cIl9luRWlZ6+wwDAgcDBC4aZsmqrAl4xESWVVWysHIV5yuN33SpfMCIKAicW2dpcW1Y3vkawVPIgShUNlyTiSzNVaI/FI0vqG5uQOsxZyUe2JOomIw1O1AIwaGmJyqJNHymyUA3N2H0pWVtfo4+1l53YZRFXmVNJ5svDKm4sqZk48teliGLxXVKEPUQGGK2Kna8y1kTIl8yBEZ/WCzrKJe2lxrLLVZUTGPtYYm4sQhl9ZI56jL3uPm5fJmRI9tbeFdD2syVlhDYIMa4xZerFnOgqMSal7QAACYAQoNjKPfMFhwzHyTCQUMu6MwqvAULDVDOM2B85YrjKRDEiWYBBaCcYE5hQ//PCxC9fZA6J45zQAUxiQkmOMnWCgvgASR0kAS5MmcMEYMOdQBEQkcRGJJGjGoEysMBmQqbHugANgqiaUyEVBQQgBAx0InCM4a8EPIUhzaGxYaWYNWWEA8jbu8YUgGETAnTHEkmwoUDgRjEI4JL6mdbmPXmDELtK35gAoQPN0kM8WByIWWGYFiMCp8GnRCVRAV6FxRgDJpQ4AFPzCm5NUXGIxIIEiEaAiTK4feZVYKAhEISFMyiMABVroIBeNiKkUWlwNiT0QvWM2N1IKeJj8vCiRJaDVg21X8n9FHYmo889pAcPAFnLJUPgGCWgPZHJc06/Q15tu1IzidoZulppRUqTcTuT0alz8P7Vzk0hlGolK5uU3ex+OUUO0fY5QcmZu3SV6CmoKstksrr1LHfp4VP3Mr9/+xDKPR37duP1KWclMpl9/f2//T+ZvVdkEKkteWU0rwi9TDOtYtCFIABMP0Bs1BIVQCAghGTAngoBE4Dl4zD5HCXgzIwKQETA7AlMMkRUxuh90Uk3QcAmycxxT45FxY8/yJgLZlzL8TnXuYlEGf/zwsRGaTwOLAue6ACTSBmwTstKi9gFA2KAAHAAZbKmaFDeY2HaZ2tBVrQDSgYGBUAQ4AwcDYKkYx+Hsw6IUw2HQzPMatAMM0kdBgGBAKGEQGJSojmW6pAqCzS50wuKpnknZn0MJiUOcZj0fiMCuk4S/03wgCxIE2gJhhgBmEwtGeq3GSRwmGhDGPoRGFgkmFALmDgSiAN5e9UNV4Khq3U0lohQHAI7dSpVi+jJ40zLAgTAkDiULzJ5BzDUZjE0MDD8WjAUHjB0BBgAzA4NzDgI6aIwzSR2U83vn75Vl7lw04i1I/P09axIL4KBlHlghgiFw6BhheHBhaDBf0Kg4YZhoDQKDAeMFBFBIDGAoBA4AssvrZd//xx+rjzdJLP/+/3WFjPD8PMAwYDgaUWAAKmCgJmCgImAANmEgOlmFSp7MHLmkABAoEkvnmWBUyk8R/mv+tl3LXf/8cf3jz8cqSc7hf5nP8zv7zn+W7agYDSZHEcDgcDgZGJNsx9TDzafmvkAXAvhoKgUn8a7ybFSKBgBAEIWmA4AAJAEmGwMGYt4OKL/88LENmiD9sJfnvIDISAMmAsACAADzO8UMNxqCY3JDmC8RgCABAYBlKpRZSRlIh3mB6F+Yyoms2py3OlgaCTtUi6Nzpxo28kEDVzKXj8SvuQ0+G3zrGWWsebmaQ5kQBEmBkR0ZwhIUmcaeppDWW58M0Zx6ugmm+TOYYguBoelUmSiPaYLIVhlYiOQRk7TawmVW3Vhqdaky65TGWcTUYGAe5wVJRGEcL2YcoCphyA3GCuG+YWIGJmGmiy+OwXHL36uZy2GYpP4/3KoZAo9Zi0hEmHsGYYKAKZhnhJmDQEWYfYdphAgEmEaB+BQGzBVA3MNAHIwHABU5XfhEAO5D/ZHbr7orDMLm78k7LMedrY+WvSgScBwCBgXgShwD8ohpxIm5Lvv2AgBFLIEuY6r5y/9bu4freOf7s8ztawyyt/97vFTuO/6VjKGmLvZfU44cjQBsvtILqb0c01h+Kmdi3e7T5/jVynrNT9/v+0GpqJ53ebzv5Y2ZgUCAVAgMFIICEzHBkwUC0xYXU+0NYCBKYiGqa0D2AidIhBMbASSMRSL0uyF//PCxClfZAZ0Ad3YAUEDA4RDAkJK5lGBQXApHkyJJIZCgaA0EkLDBwBNMCwcTFBqm6kKloBogWgzJQIqh5ADgZQMMVyJjYgBDwWOjBilYUISjExswlsN6BwYCiEACCxlYhDBUPMaIzAREBBBWCMVOFCRgqfAwgMAJoHBhmomQlCIZyg474OCwdumFlCV5c4VIC8gVDWdP8ASYaDBI4QSI2jVkYmQAJhS4BAuEIwGL3ZkTSqaRuQz2wpg2NLgGiq2FmrjCpIMDrXYaDhtPSHqezChoRgJewJE2fKEOIm8lgrVDjQWmwLBzPMYQ0iflRICVZVAeFqkuyqgotTMYd7ll08FP3HhZ1I4FsbpatiWP9DMVci3Aj1XbV2HMoo/sc3Zcegn6fuo1K4s9N2vM5Uz72rzgcn8e7huTTkQqwfGY3KsJbDFyjrzNHepqSVRmMVKK9KaSWT2r1i7Lbuu16aeuLwKC04vkIzkPMk4zQrA9KDUw6CUwVNE/d8w5YGKDRDRwFKkY2xKbmkOtyFhJ/hyRDBD+ZyEcVggoMUyKBxn4BewiP/zwsRAVgQWfALfdCBLutIbiBeiQIQ0UsTSMUHMMCJpTzkMBq5mQyihEnGDxYmDYiGCoAIiDYGfFDMdYLQIogULFg+BUSYyCgyDTiBxUwBYVIA4Md9Wl8W+OqGLBomDJujo4eOFrIsx8KoU9FeqLCAYMDBlaVgk5S4AsbLUSi0/M18bbHJnHdNQguwvpoa5VZg7u97+rmaVGMnglQ0LhqbJAz9LMkaqTQFiw1ZVWi3wuWXoalmC0mhyaW26LVSilWNDjZgG/jCZVLqePt49N/PVNT09iEx/GV5RWVx2mrflM7k03N0tNS7lMbhOdqGt0VnOXw5U+L3a9PO5yimkUNcwuXZVvVDLsKty3G6T3hlb8VJe/Ev5Ny2SZVqSXzOfK+Wt473aEKGy6IVGEHHEYBgmYaPMcCEaYPBYBBLNVwDAwFkIIGKYBsHcVRZsEMiw9ICxIADF8P13IkmPYsCoKIklm3WRLJBRUcka+l9JrGEYRiQcA4ISAApgmnlSQGDlxjLQiGGeArAEQ4VUlioRXXbIAmTU1tjxoxYkGAhABR/V0Jz/88LEfVS0FnwE7pk8ERD2IlrguZKBphjr4Bhc4EJGwoRHAIkAgmVFUIsooirDR1iwYJTOFk7/vYHbQY7L5oREBoMBEgWHLzTrkHwxBsIhL4MdLPPwRC0piUSYMM3bSoXfbNSvRTlvIAlw6HgBTiGWMSFZUGU605VC2w9nobnLDlreder2XZUVNcpal6BXQlVd0oAZpGYahl2YftuZuD8XamESATLuLdcbgdctF3IulfVGVZn25V4uJOuHh9x080kdOVx0zqq3I4nF7+GpNJw2KZahYMC02nNzo8SMtNTmJJYhfkxBTUUzLjEwMKqqqqqqqqqqqqoluQ+g0VSaDiUIguK3g0KXwwRGDCkaHEymoJAYGIS27a3YAZAYUACSqqphIYS1iBlISjAEU8gpDaURkQL6Tji77xoAdrOFk22UxQSCsiAyqKiDyhNOsExccIJOChSUJtNCrqJusBCXaJmxUEgOC4qHF30gBxFfYOmWuXiM+dRJk4HWR2KClzthKyFVXjnB0x6UsnrHQQgNERC9khKc+SSUu3AtS1L5uQxZ8J1J//PCxKxQTBaIBuZe/NaPA0DNHIsJNBj/tju7Yj8E/SS+Fqbi0choMQ73i0arWtJy7tEy0Db1JSNT6cYGobVEV+HJPw0DiRBpBycFfN4bsrC62UauWEG1vXF+4zrhpcG5mT7ZGXTCulQpynZ/M3zk1gxUwwYzd+0vpCrQyO3Ipl20oTBc19/cuS8eJxHswahubA/mMNDmGDRzrHcJIMNitBs5VUxP0qAIiIQEwHQHDAaADMIUpw01Q3zAnBVBgnx2pUGJAEAR+Z6EA8DBYDAYDwGMg0CEskFIXAhiRaumGBw4OaiEbCwNBR2QgYcDGwm40GkS+pik6nSZ1MA5fMtBhCOs4NGCRYXNaAlLwSFkVAaINCAkKCsgVQDQDTioyKhQ0pgICEAmBkQKMyCcBKwAEkmSl2EYkEERCJgQZBy+bAECAtHisA1hgQ8Y6BnDDoVEg6LBAQSCossig5HB4MMFNQAImNAy2IbNtCjAXQqAgEBQKECzIRJj6Tia8NV2sQCjCX9TKfEGES2y7AwEpLGoCKtsNiw0pqrXcj7aGBhS8H5MIP/zwsT+ZMwWbAD3NlBVrhEIMRHQJHMcBKRbxe5ddAzp8oYaJF6dHkaAGCwFSx+7UkUAXIhEoFa4/cLchrb1y+IqxMyfiK9tRa9p22ZwtwNPZUm5yPbkER058pxh61C4egLNyYap3Esyycymm+g+jbDTbiee3RgqzEX7jkPWKO7WrNvWiE3Nv5ledl9oGf6kzq2KDCNQ7AM1I5RbnrNzeFnt/qoOkozAdDZAQXCoTAvA7NMcEwwhQKTBlAcMfAF9cZgZAMGDMBOOgGF8wCAIxwDAMGCqBkKANmBOBKYPITRgGALGBsBAYdAPIGA2L1gIpMJDUGjUkcx8dAwUOACPCKhm8cBlg0QEAQaTA5pIeYyugaQMIAjDzcDRhjYeABoSLzBkwwaUMrGRYDTLIlJAGyAygLCDoSPTOAQwIuBpGa4kGHFzQzBRAIABJvNHIQCVgYCC1KlWZWImxsgCGCh6Gh4VFzGQkiIwwAeUwYrQqMWCUcmeGsBAwpDRADgZSZEykREyCCVq1nOfOGEmVFFsCwUYCDBgIHDq7U+ha/c9h40AOIr/88LE/2b0FnADXtgATf+LKaAAR62UQjjxI0vtkRDaA5tY0hPaFArptpFWiW6j8kQK154L8Qnp2I/AvYYkbCs5Io5WV12KJmwO3sxSdkv5vw7cQpIAlboU83TxyRy/CET8teSYkV6YlbKs67XpZYq3Y6tnKYeGG6PdHYlL2UEhe+NRhtb0RiNufo7MnpXifqD5x06CbiF2LT85fnr0a07NeNz+Nmlpbcut6gEYQ43poHJHggGIw9wwIarm/+UcZKgPZhVDPiEFRmStxh4g5mCoHsYNoFhgRgsPfSGNxunCipAtMzCIKTCkbgwj8u6MLSiNWwMMfSWBIIDQJmAwF5d4aFI+YsDSaIDgabFGYDgwkOYChgYSid/47NHR8NgSeMXSiMNT1MQhdMLwDMQhRfwdAUwyF/lbK1VMZjnEkEMHBHMm26MymJMWTJBIlmBYVGF4XGHIjAUMDGMYDA8O3dx5r/35g2exlOLZiQbpkYboYUgYI4FA4wCGoIGwGgQCgKQZMFAlMKApZinyYAgwMgR+v////DjkMsQ9MOQUMBBaMWSH//PCxPhnw7ZQA57oATDMGy8piQGZgYFYVBwLBkTDKUAuYShQBgPUxSOFARQZMBgFSRoXVCoEJpL+///f////+FwCYACgTJAEGQIAIKlyQCBRVB0Kgk5ZYAQtegssoLgfDMNSuHXShTAX2kTAd7fWU0r6//////////+IQBL8l0QcDrzFQCCYEEvkx1yhQAVFIuRACs9SoCAWtjj+RtwXlYE0plymS8kimXTVO7OMqnppypFFTEFNRTMuMTAwqqqqqqqqqqqqqqqqAlZVvVpAgyZUZmWDoYCGKlBmZgZKJItAQdNXgjnaQ5lyMhAzQGc3h1NcMxAPGhrxoyaaEcmXD4QCGUohqKcZ6OEoqZcgmbMGPDA4E1sCBTEBwgC3AGggAFMIFBQFtC3RgwRfJ4y6pd5AMmFC1yoqrpljSlMUxVNYwgmLTIpOMxkCijJljJiE6zCEzMFzHA1WAUsZxmb6GbpSEFDOtDgvjYmC65lFpqWxu3Rs0QYPMwxN05NURHAxnVRnD5mCJiga6DBjjJkAUSSdMMNAQJ+qbcZf2W3I1GaWl//zwsTZW6P9CZXb0AEfyy3jVjMtwlT/S67GY1TU1reONa1NO0/1uGXJh25DUZjMts1qamy3Ko1Ls5S/strRqzrLL8asMxVuKQqYMUUyQeWtBqmK7nejVeGXdis0/0t53//VNaiTWmvUcMuTDtA/0trU3caWlpb0Ray12ifZyn6vxF2mdONTuCzl+Zp2pbzLv/ulszLku7YdpyoeoXZjVr4ooKpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",warning:"data:audio/mp3;base64,SUQzBAAAAAADBVRDT04AAAAHAAADT3RoZXIAVElUMgAAACEAAAPDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRYWFgAAAApAAADY29tbWVudADDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRBTEIAAAAhAAADw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUWFhYAAAAJgAAA1RZRVIAw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUWFhYAAAALAAAA2x5cmljcy1jaGkAw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUUEUxAAAAIQAAA8OVwr7Cs8Kkw4vDmMKyw4Qoc2MuY2hpbmF6LmNvbSkAUFJJVgAAABEAAEF2ZXJhZ2VMZXZlbAB7DAAAUFJJVgAAAA4AAFBlYWtWYWx1ZQAhewAAVFNTRQAAABMAAANVUFlVTiBUcmFuc2NvZGluZwAAAAAAAAAAAAAA//uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAARAAAdYgAcHBwcHCoqKioqKjg4ODg4OEdHR0dHR1VVVVVVVWNjY2NjY3FxcXFxcX9/f39/f46Ojo6OnJycnJycqqqqqqqquLi4uLi4x8fHx8fH1dXV1dXV4+Pj4+Pj8fHx8fHx//////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAJAAAAAAAAAHWJUiMoVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAI81BSOKmGTTAAAA0gAAABD/09FhTGAAAAADSCgAAEAJAVbVtVpKZFAPBHOIWq2r/9/TOMqjc8XwGpRbVm9nOIhwsIPKmlLVlTqk4uIts2C6zjCOE6TWIRcTihGldXJzE6/9Xu5ue5Re2xf91F72NzYLpMubYnC/8zc3JRacSI1Llm5v+5ubjbcKr218Dh21VYSCYlBMD5PfzU4Cw/o2wXxLBoTIvqSxHecmxIdX/S7B+dk+BkzXnZPilOZiWjcbucKDs/YZEMRyeeVX4weOQ2P70c6862s67FJ9juO4zisY4Fi9X0kV5zfXktX0ziwwP2N9gSCYeV5iI7fmWKHZPfYcxYspkJmSy2/Hz3Do0EgdDgjCIRAQTrYEsCm0aRgGMVvUeViS3EjDGkRylySjhmxgdxXG/fuMiSRxdNidBmjkuuwE9DCzgACh524Etu/qKQKGCGWCgu/cTj0zSTkIrLFQBQplk465sKGgVI5TIeySkfyWUsDwmlS4MgQxBERJGtCvGsqtyilD8zEtp6LO+rhOtx77bvBFKSekMd//uSZEmABw1hTG5nIAAAAA0gwAAAGIVhVfmcAAAAADSDAAAA7XlGrFB9i3Us8zl0sYApoXbfNphjil83vpu6jd7tLe7Uln2Kt3VJR7uWtloyy6a7E0v2TwI4brq4pf//////////5+HP//////tssjF2wzkyiYAQAQBRngYBAUAwGkHUoYnESIx7LX2ulnAECj5bFhUPhACWAlaFlstL1KXQU6SkQcdGWRRZdkAR9lTeO+XrcJbwQJgEu3FJFYpZ5dKpUJKwxfHH+x+KQPKKK/J00XwjrVWYSScfnt6iksUpLkowuyuT3KatfiMQy53/ktNUm7+GqXCT09qNWsKaNSXnLef4Ycp62X0EooOXr04+1FJqCdlupmzbsW6etup+dr62W7n4b+r/43c8f//////+1ij6yyI8AAAAAJmuneg/VEzFQEeKTqBQDEqDqVrgJqhUMARsYFhmLYpnAWLGKKRhIUQhxiIgYaNmhG5sAjByWEPJjRJ+nKW2NBa73HpZTP7lqMwoBF7GGN2et/KRhqsIkOlz0vlFmLwxDDwoBQEGlv/7kmQ1hvYzStNPb2ACAAANIOAAARVdOU3OYZVAAAA0gAAABO1xrBLPgiPRNMVlLS4Bp2TTWD/OnA09RQLbtcvRvLnMr9itTUkZkeql7dqpL4blj+UWGu00WlU5Kae5LK9PKrmFPT50dWlraxzq4U9vDD8+6u5Uk0iMZdj/2/+E8qAAGnjg/chdiKQM8RZcw2jU4pDbiDnQ4lWIBmYJpAVA5MAJibUeYe3JgJgkhGbxXF37ncu4y1hICCLbyv7q1pdOonAprrWIdoLMaXkhKOPAlFPHtyO+zqRMoCNyu/Fo3yasOCiByW52t8vRJVNpEm/9bxxjMFQdK8Zl2+uror6tqfPFMRN33LLmoDYDiy9v8xQiUHcc1eZd7vZv/w12uTMp2gVO4C4AFgaqLJMAYAACAAADkWKMvaXbdpCe8CW4YABk5It4snXkYGALxqoDwuJIsAj3G2mt9SQ+2r8rHMQBRZ8st6q1Y02BNQOB1atjr/rtLMGgJ87tacwyyX2ikWta64N+9N+9aEtUi3Gfuo1qn+MJykxGnjYVhoCGrN9Rb1//+5JkO4D1UFfTe49HEgAADSAAAAEVIT9HjeF1QAAANIAAAAQrutoSjEIkUB0TFXLFi4hiFbMtiyi4YepW4MQQgUqan1KE+pMTc39CCIj/enAs73/qMfMfIAAAAAASrePMwSwuxw0bBYXOSQR4MgeO3mxMDUgZaVmVnQEGEV1gViMoeGqmOF00MYYMjbu35XjNI7AqTfYT2Vj5XEW4SudrWq9FA0uR9UFdWb+3WjyYggKzVtbvZzGcgtB8WTKZjG/nT226M/X7Oa1lW+5N1LPP2fYeBIMS2nq1uG8fScfW10RvTDEhTJLcXSwxLzptZxhyp1WVzLUuPuuO1En4qc4lSmQAEAAAAAAmIwa6Cy3jhuUPiSESbmmbOQNdjLxRsyR03Ng0ClSxY0jguUL2MIXMKeMEDmrTdS/+zmbYFY2cVkg2lit0kHTKvryy5awsq0fQ4jNgB/FubTQuLpNQySrrgSsVvn831ONlVVn6wrcn+7++K8JIg02W6GCsYNTis+LnSDvhMlikI33fwWMvR9gbE87DK10pXL9l8Nvw+7I0njDi//uSZFED9FRD0nNPTTIAAA0gAAABEUEvPgykdcgAADSAAAAEPKkUAVdLk62bufGkvmDLmgaGRfzJVW2rmclNrREBRdk1iA6kWsmPxFCwhD6ECASPoCoqZVILApphps+nLEBV9IVftNybfGJk2qik2cVDyN0KqPGJB/Wj5nZTUeirQ99kilXPilC1JvX1MkFgW9M9uS9WijVIAAAoTqNmBhM+noBoC7lwS9A2kfNpCfDqtqDvjzYS0lhTTr6bRZJ4MBDWpfKSRW+tNZ0JdR9FoESoS5ZNBUoEEItQojmGniTQQ+UEl2jbC0q0rXXh3y3h6ddciVZ2TBckcziirgehSNAZ//BC9VFvbbD+cdzXwGIUtXJkggAJRl0QUGadflbKnPS9fCGpVFokuZp8OkA4nWgEGTxCKh4gEIZMo3QPQuQZSclrRBOhIVkwfNVbmVlRMyqowXWXZRY487H3C4MAjCh934SVB4MMiU7pzLTUxkJIdkTZZNuLmDTXU1EBKdsxfyYRNaZebMNoNoF76p5CoAAAADFBRYyxmsMXkErZDFXWev/7kmSFg/PjStBDDDSQAAANIAAAAQ81GT0MJNFAAAA0gAAABKHn1dKYo6WMhkGwZlZh+IjEkaFIhx1RImTWSm5pemaqa0tganV45rygnCp5BOcqu2JrRqSubsN6cJM0rOC87KpQIunHIKrtIUqe+ElJtKu9xtIi9MqHIehJgdJn8l/+1v/oACwIIGAAC0nnp44a4wsCsLQO5BxkypGIg9lMw3htzpmzrSXtgSuahaJc2lQ1AdiWU4OOHFZgRtBD7SNht6kx0CmgsKMsGLlujJo1SXYYoZ+kj4ACGCAmbBlqBADoNWqt2My+extwucHgQXCIapaFvhkDAFBGozLIaq137qX5flgnokmY0KhISPHi4OERN5WdSK7EpZA8Ay3CM0taWO5PwwkwOAlWp4GAKFwRZi3QLgZa+jty1wW4QVA7k8yfi3J5Rbmrkss0/QSJac6NE0FDdnSqq11Nl0TP1qb///////7n////////8YZP2mdWhoiFhWdkRrvNrbI2gADIQYqAaiJaD0cpgMDy+YABJhMIigBQFGAwUYQF5UIZlSP/+5JkyYADtUFP5WEgAgAADSCgAAEdXYEbGa0AAAAANIMAAADhAiMHDsws9M7Ozt3A0sHkb1Gok5sRwBA00x3MxRjVR5f0NNeBwuRAjS1vNCYe87oz8qcJQZWUu3GlrwwmVRgQAFgkvbEZxpTYlBntSbhxpj0PA6q5SIMWQ+S5XK1T9Xkps7DQ4Ga5AjXWT4NxdiBlV5BFrUq07NyNP85MBuBDTbvi6kMZwbDM1DbrZulp6u1ZTr62NWq4rfNbcedrUMzF5dduXcKWcs6q1Q0HcjKf3EhxONwOCQ2GMJAkAgAE8beG31SsmvGwQ+6YODjQhowECDB2nZaYkZCILMeNzBAd+XVP9kxb1FIPf9y6wFINAgAXKxLveliiYEArHAB5csYlMUovzDCwyLwGPJQAYAZASaaeZisGQWuUHSq4gRTGLNPVqRTZgrSLAMLRmR4KBkeR0FWiXtJjluWw1Rw/DExFJu+4S2H6aarbDK3oddqEtu0d/KK3UwvZ9tZVXCtQdBeDrvhH5ZFm3jzWmCv+0yIOhz//n7//905JG4KpalLT//uSZNeABwdJUP5zYAAAAA0gwAAAHFU/M7m8gBAAADSDAAAAZ0e4W/dE883Uikows2v6hifgqH76IEAAAD8FUBYq/bwTjiukyyMx19JK6anbhOyygIye4gBRn4QQuJLlWaQ9Tef5TWgn6n3BVPXZxqZXKlgWHiPY1avFwWE8ag9nZQHyfrCXJDDMsb4sK2rH1mKp2TotdFGfbaquiJ1sqjnmkcZsMZ0p85k64rCAqfieZXNYcF0ha4MhUSsU1G1WlmkzGaCamUYch9phFLgv6BPYvk6TRxmKM+TXSa4VzabsiPUDcwttUQ8guLdElhv82vSPOS0CQ5oiAIAGFjEQKjURYEqbyJjN6jkUDS3wF2sOiUs2Ss0SwIIChzo5Dxql4JQp2qT9qMmoq+mZoGGkNtrh31CCKDCVP1aMTRUlOYZL7EMgdtLhR0tVvWnmYx6xlBrLMkyxsDF0laVDE00KNMUg9G5M71O8LjkL5XTVO6ABEQAAAAMEoxh4VBpHvglBugQB4LtD0PUQtitHcL8I4Ogv51nGJIdI/znW106HyDiAg//7kmS0gvXhVEzHZeACAAANIOAAAQ8BNUXHpM/AAAA0gAAABBBml4QPYmd4wHOZpTjUBRbgOosqTjBpkqeYy3aT3p3aO0Z3b/2zd2aHxHTKxHi3cvEgM9OxTkSzdc2bgwhDpvSRQQKg9bFSKuhe4pUAQRhlVdUkCp7GKB8YWahkQLpyiQNMCAFW4woNBATQ1vnpngbnOJqsJJoATUcPDoi5A6RtPjpiGoUKTHWeZhg6GpgklOgYNAO/bXHbgB3l6M0bG762mku0tEuuGDsPa2/S4Ef33X0vFW9myPaDSChbB7V0WH7ijW1lo5y+XOxSx5+AKGMY5vQCeW1pYb1vVk5+Oo1hMQlNqLFjeMPOwXfbYpNkKpy5SzeWZWa26savjyd5O4kGhOFAA0IW8tYqS0NAAgAAAAMWBFdRF9YKWWMk43AHTEgQBQAZPAbpF7jHdJNumUw8CJIw9iA0DzCxWBIRBAEQrljV0nkGjLQDX40F7qGVU6TJEfZnN8lCuhaRm8Yk0GRmXHMchgny5D6v4tkEVKqK4Ze9LyVwagPoF2Ii7z7/+5Jk2QHz6EnS8e8xcAAADSAAAAEYBSVJbmWPwAAANIAAAATx9eZuJLkb1rcdc7QXPT4axL5hucuYCkHDcgo79PVXvhf8/XHIMwaOEMte0ZlQsOYsfgtE2v/IBWJaljkbR6fq2FTLDJ2vpt61bX5T8v1/cnOlgd1gxLvyZSwCAAAA2bjLHDrrLU6MYgYmCjcHApq60jAhNONlEDCNqDtMfiAJDBlUxGVAdDMjwtvgZZHeqsfzOMrfYudBtbnMZ2XIIlLKLd+kT2QvCKOvTaxbkXeJDtkhNNOwIpkqMoAweXY4u0xJEFRxmlm/H2VOu0Fl8j+/DMJay+j8WMasM2FnwkShUMiA+QPihyElG/7gzKEHLkTXlresUDToQRfMdybFBZF/u/8OVWtQAgAAAAAAAUiGr5l2UCDAVDFZwslw4Bw/m6k67AUGJ0iSDwEg2o3idKd4MARq4VsOma16bwFCR66rvleZgoQmSmz3CUWoALhzmtyuFXhGEaQF3tqzUgsxEziKX9DsxlecICiNfyqRu9thooO396pjQYTitzyZ1rkz//uSZPkD9mNRU3OZZVAAAA0gAAABFVkPVc5hM4gAADSAAAAE9M7tH+vdQfSUdiFnF4ZFnCh5hUIMde5K3DcLSOfTt1Gwe7uXUpZqt9bbufq3rt/+WO//LjtPv4TPAhP85rPyVoABEwExWNuxI3ySvMTBHAyBhcDUGV9w6pUYCAecXreYBAKqZT5cYwPARyTAQQhKFmfQ6+rrUccHGwMQ7saxg+346lM0/34rTVAo2wfHN+J+y+4umyyVXH/qx0YMNjuFwzBjrzUpTQH04HlDpy3T/Er6/71aG7tLOA1VUMeudnpVgX+tYfn8xcIgYpGtXu8iVz692lxwjbQs6ZmJgOgQRSPixW0rAyqtt4Nx2xFOerBdEV7SFu/b0Qv/+frV8tTyykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqfQCAAAAAABqtFdpCy482NFwwspgMLodYa1SDWqAwIHdFQBgvzBeiCrgA0IhE4NBbnc76h4s2z2zf7ivKtf+bsbmE9IVV3J9Q+/gsmM45xq7BQP/7kmT8BvXLWlR7mVzgAAANIAAAARgBW0ku5XPAAAA0gAAABMUA9RWTxCesLAGIiFWeUZ+gUoKEyfH6mUslBMHP8bXx932S0VrDsCGDbeJthQPjronGBwEo8fEPCALB8qQ9JDVC2/VVd1Uul89s8/+9f/lSjNvsABKA5FGIsndVq6QoCwYsYE0BUGK7Y0IQeYaoxoOKmBhAWrVjKAIRApXZVtBzsE24lKaebMRNXuNPTWvxQpnO/qVVET0odVbExWQbMlBpuqSVZx4wlD3CXteh6H50ZBA2yENarf3gXsLttpFn9fa88K3jMDajZlGdRrAiBdWU/PcwCgVY3Fl0ZSZ+p2qcCcK6TUXAGNarvZUK5BOLmZpTuWfHbaCCYVI1I49MQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpJUAEAAB9AABeJgJp1kTHLWAUPMiFsOCbponvxAzeGGSQc1Co0H2WQA+r4x8QJX5znb9WmRyT5VUcOCIrI3oTNo6O/y22J2a/f/83ZREn/+5Jk6Ab1HVbT65hEcAAADSAAAAEVbSdHbmUxwAAANIAAAAR/MKnI4FWUmdSU7vLAjxb28a3aiqzN93M7X0KQsD/ju9uAmn26mvz0b3iKg7KjTbZWDwkMV1qKmJqMHmQ2FAXDxBTJcBNl0fmjAAAwAAAAQJTsGQHHl9jgaMA4oRgZrhEGYkIwCKAoxnNzoswMPhEIAiJi8xYMlzTApvDAu5Fi7SZ3DEPSraRk28ZfFsUX+M25VYm2GK+7fxkdVsZwqtChiT1JywIIkI2hxrOHo2wsCjMSpppypVEY2GLX4znuUQY+Is1LLFJH6FYAaEfOGKs5RXc8refb05XaPB0/rCtnYvfvLHCRABnF4K05G76zZG/ba2/nXjuuSKuFT+pFTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUpAAAAACoAAF4oEZWsKxqZboxkzdtVDEljSiKppGDKZ8AghC/z9xpyHZBQaRBdNnzW5tPpjzeTL301Z//uSZOYA9LREVHuYLHAAAA0gAAABFoUtQ05lM8AAADSAAAAEmE9/3tVppxtfz8tI7qmleGGV2UEgNEI/3uGZ+I11WucZPdLdqxukMkUe2fhyMBH7gw83oBV/1fd/rtUXMyx8XEzViqX7w+381u81qg64FJqx3D47AGAAEgSnHKLk32YpvGdRUIxvGBgBc9pjxGCgkHDwYlACOs/LJk0k7iAUAwFovPSm1SEqR4ER1MyibvNSpfvXLOmqKEUm5dWjESMUWAyuxPyGNjhBg7THehcXkbcQaRmt14cJiVpppDN/HZdTzDZQLMiDKc4ei/IZYNIreNDK62IAETmxRhITMecU9KFVG2Wji0C7PwgQio8VG8BEkM6qnEy1vOfuM3/mVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVSmAYAAACAAABUoAKqun9yWLLzjUtoalKg0plLuGGhx+wG51SihxmEKQ/j2OO98IQurKIjWmZDUg7HX//twluVnerLxojSfCYxp6q//7kmTchPRvTVR7b0cQAAANIAAAARUtNUWO4ROAAAA0gAAABAT3WMqeesugLNnJmkqZ6T13c7dsyhfbmZa7q/K1g7W7V7LUTfliZsgYlHJCwqkaXpFeHPIjjCxKLh4+ULDDt7nDq/UmAAJCGITwoAmsAgAFgcm9nYnDAwOFqhphkTmPzSbR8Z7QdGSBcDAOYLHZAMEakgb7KoOjedE4RgWX7n8bnv+1hrNq5Z3Mu2kE887B0tvsHKhSizsx5riuIRNDhWDSqal7GmWp1DeKCRPtDkpec8mgx9Yu69I6gp+OuBIofuwtP8u9Tuo5HJmWihZqKagy9MZ/fr27FSxFf1fy1OUE/nf/l3Kkzsdyps7NvOraxoLdb7/eVdVcbrERthVMQU1FMy4xMDBVVVWUgAAABJpLQABGcoWEIyBAUMB0BmDgYYmJRmNamJggZOXBicFiqzGjYYNsoZNQriTGgBMJV0wgFHBB5nDRDOM1Q5iRIAPLPuMEIEwc2ALBQCG1vP0i++jsXFO3sTTXfmsR0wEo8bNGoRItzWLADNJQjUx9rzv/+5Jk5IT0cUPTe3gccAAADSAAAAEXJS9AlcwACAAANIKAAARYltbRATG41Cih6eXKx9tW6oAHMZ8s9nCimlH2KS9kTWhYGq4Fm21FgduULyc6NR9472U7ParU3c9WcblWvLKsYgSYf+V08CTFLQV5+H6TWM3b7qtZqS+vSYz93H3HgvF5HUkz/wHNu5GP/////////+5c7///////4S+X25ZSWJfT26SksU9P////4EDGraAAABARclN0elZN4txOjSUTeT4gw9RClUiRbQcoGUAIRj5cuXLjIyWrQUFBQYKCgoKN/wUG/+BQKCisjgoKfF+KCgov//IFFfFBv/4X//Tf/gUK//v/+FX/+kv/8gUV0FBgr4QUCiugoMFPCgoFTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//uSZPmACBVmUmZzIAAAAA0gwAAADew7Vbz2AAgAADSDgAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ=="}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};n(252);var a=n(27);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(){s(this,t),this.storeMap={},this.itemMap={}}return t.prototype.setStore=function(t,e){this.storeMap=t,this.itemMap=e},t.prototype.updateStoreByElements=function(t,e){var n=this;t.map((function(t){if(t.type&&"gap"!==t.type&&"ok"!==t.type&&"ok_cancel"!==t.type&&"ok_cancel_other"!==t.type)if("cluster"!==t.type&&"view"!==t.type){if(t.item_id)switch(t.type){case"check_box":case"radio":var o=(0,i.default)("#"+e+" #"+t.item_id).is(":checked");n.storeMap[t.item_id].value=o;break;case"static_text":case"button":var r=(0,i.default)("#"+e+" #"+t.item_id).text();n.storeMap[t.item_id].value=r;break;case"edit_text":var a=(0,i.default)("#"+e+" #"+t.item_id).val();n.storeMap[t.item_id].value=a}}else n.updateStoreByElements(t.elements,e)}))},t.prototype.getAlignStyle=function(t){var e="";switch(t){case"align_left":e+="text-align:left;";break;case"align_center":e+="text-align:center;";break;case"align_right":e+="text-align:right;"}return e},t.prototype.getElementStyle=function(t){var e="";if(t.width&&!a.isMobile&&(e+="width:"+t.width+"px;"),t.height&&(a.isMobile?e+="min-height:200px;":e+="height:"+t.height+"px;"),t.char_width&&!a.isMobile&&(e+="width:"+10*t.char_width+"px;"),t.char_height&&(e+="height:"+10*t.char_height+"px;"),"edit_text"===t.type){var n="resize:none;";t.width||t.char_width||(n+="width:100%;"),e+=n}else"check_box"===t.type||t.type;t.align_children&&(e+=this.getAlignStyle(t.align_children)),t.alignment&&(e+=this.getAlignStyle(t.alignment)),t.multiline||"static_text"!==t.type&&"edit_text"!==t.type||(e+="white-space: nowrap;");var o;return(o=t.whiteSpace)&&(e+="white-space: "+o+";"),t.bold&&(e+="font-weight:600;"),t.italic&&(e+="font-style:italic;"),t.border&&(e+="border:"+t.border),e},t.prototype.buildWithWrapper=function(t,e){var n="js-item-wrapper";return e&&"button"===e.type&&(n+=" btn-wrapper"),'<div class="'+n+'">'+t+"</div>"},t.prototype.buildCheckBox=function(t,e){var n=t.name,o=this.storeMap[t.item_id],r="";o&&!0===o.value&&(r='checked="'+o.value+'"');var i='<input type="checkbox" '+r+' name="'+n+'" id="'+t.item_id+'" style="'+e+'"/><span>'+n+"</span>";return i=this.buildWithWrapper(i)},t.prototype.buildRadio=function(t,e){var n=t.name,o=t.group_id,r=this.storeMap[t.item_id],i="";r&&!0===r.value&&(i='checked="'+r.value+'"');var a='<input type="radio" '+i+' name="'+o+'" id="'+t.item_id+'" style="'+e+'"/><span>'+n+"</span>";return a=this.buildWithWrapper(a)},t.prototype.buildStaticText=function(t,e){if(name=t.name?t.name:"",name=unescape(name.replace(/\\/g,"%")),t.item_id){var n=this.storeMap[t.item_id];n&&n.value&&(name=n.value+"")}var o="";t.item_id&&(o='id="'+t.item_id+'"');var r="<div "+o+' style="'+e+'">'+name+"</div>";return r=this.buildWithWrapper(r)},t.prototype.buildButton=function(t,e,n){if(!n){n=t.name?t.name:"",n=unescape(n.replace(/\\/g,"%"));var o=this.storeMap[t.item_id];o&&o.value&&(n=o.value+"")}n||(n='<span style="color: transparent;">A</span>');var r='<button style="'+e+'" type="submit" id="'+t.item_id+'" class="pdf_js_btn btn btn-outline btn-xs btn-circle ">'+n+"</button>";return r=this.buildWithWrapper(r,t)},t.prototype.buildEditText=function(t,e){var n=t.readonly?'readOnly="true"':"",o=this.storeMap[t.item_id],r="";o&&o.value&&(r=o.value),0==r.length&&(r=t.value);var i="";return i=t.multiline?t.readonly?'<div style="'+e+';height:unset" name="" id="'+t.item_id+'" '+n+'><pre style="white-space:pre-line">'+r+"</pre></div>":'<textarea style="'+e+'" name="" id="'+t.item_id+'" '+n+'">'+r+"</textarea>":t.password?'<input style="'+e+'" type="password" value="'+r+'" name="" id="'+t.item_id+'" '+n+"/>":t.SpinEdit?'<input style="'+e+'" type="number" value="'+r+'" name="" id="'+t.item_id+'" '+n+"/>":'<input  style="'+e+'" type="text" value="'+r+'" id="'+t.item_id+'" '+n+"/>",i=this.buildWithWrapper(i)},t.prototype.buildListBox=function(t,e){},t.prototype.buildView=function(t,e){var n="";for(var o in t.elements)n+=this.JSWindowToHTML(t.elements[o]);var r="js-view-component";return"align_row"===t.align_children&&(r+=" children-in-row"),'<div class="'+r+'" style="'+e+'">'+n+"</div>"},t.prototype.buildCluster=function(t,e){var n="";for(var o in t.elements)n+=this.JSWindowToHTML(t.elements[o]);var r="js-cluster-component";"align_row"===t.align_children&&(r+=" children-in-row");var i=t.name?t.name:"";return'<div class="'+r+'" style="'+e+'position:relative;"><fieldset style="text-align: left; border-color: gray; border-style: solid; border-width: 1px;"><legend style="background:white"><span>'+(i=unescape(i.replace(/\\/g,"%")))+"</span></legend><div>"+n+"</div></fieldset></div>"},t.prototype.buildOkCancelOther=function(t,e){var n="",o=this.buildButton({item_id:"jscancle",type:"button"},"",t.cancel_name?t.cancel_name:"Cancel"),r=this.buildButton({item_id:"jsok",type:"button"},"",t.ok_name?t.ok_name:"Ok"),i=this.buildButton({item_id:"jsother",type:"button"},"",t.other_name?t.other_name:"Other");return"ok"===t.type?n=r:"ok_cancel"===t.type?n=r+o:"ok_cancel_other"===t.type&&(n=r+i+o),n?'<div class="js-buttons " style="'+e+'">'+n+"</div>":""},t.prototype.JSWindowToHTML=function(t){t&&t.item_id&&t.type&&(this.itemMap[t.item_id]||(this.itemMap[t.item_id]={}),this.storeMap[t.item_id]||(this.storeMap[t.item_id]={}),this.storeMap[t.item_id].type=t.type,this.itemMap[t.item_id].type=t.type);var e=this.getElementStyle(t),n="";switch(t.type){case"button":n=this.buildButton(t,e);break;case"check_box":n=this.buildCheckBox(t,e);break;case"radio":n=this.buildRadio(t,e);break;case"list_box":case"hier_list_box":break;case"static_text":n=this.buildStaticText(t,e);break;case"edit_text":n=this.buildEditText(t,e);break;case"popup":break;case"ok":case"ok_cancel":case"ok_cancel_other":n=this.buildOkCancelOther(t,e);break;case"view":n=this.buildView(t,e);break;case"cluster":n=this.buildCluster(t,e)}return n},t.prototype.buildDialogWrapper=function(t,e){return'<div id="'+t+'" class="js-window-modal modal fade bs" ><div class="js-modal-dialog modal-dialog " style="'+e+'" ><div class="modal-content "><div class="modal-header" ><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><div class="modal-title">JavaScript Window</div></div><div class="modal-body" >{body}</div><div class="js-warning-footer" ><div class="js-warning" ><span >Warning: JavaScript Window</span></div></div></div></div></div>'},t}(),c=function(){function t(e,n){s(this,t),this.componentUtils=new u,this.callback=n,this.dialogId="jsWindow",this.monitor=e,this.width=void 0,this.height=void 0,this.storeMap={},this.itemMap={},this.componentUtils.setStore(this.storeMap,this.itemMap)}return t.prototype.updateComponents=function(){if((0,i.default)("#"+this.dialogId).length>0)for(var t in this.itemMap){this.itemMap[t].disabled?(0,i.default)("#"+this.dialogId+" #"+t).addClass("disabled"):(0,i.default)("#"+this.dialogId+" #"+t).removeClass("disabled")}},t.prototype.enable=function(t){for(var e in t){var n=t[e];this.itemMap[e]||(this.itemMap[e]={}),this.itemMap[e].disabled=!n}this.updateComponents()},t.prototype.end=function(t){this.callback&&this.callback(t),(0,i.default)("#"+this.dialogId).hide()},t.prototype.load=function(t){for(var e in t){var n=t[e];this.updateStoreItem(e,n)}},t.prototype.store=function(){if(0===(0,i.default)("#"+this.dialogId).length)return{};this.componentUtils.updateStoreByElements(this.monitor.description.elements,this.dialogId);var t={};for(var e in this.storeMap){var n=this.storeMap[e];t[e]=n.value}return t},t.prototype.updateStoreItem=function(t,e){this.storeMap[t]={value:e}},t.prototype.getStore=function(){return this.storeMap},t.prototype.getCallbacks=function(t){var e="";for(var n in t)if("description"!==n&&"initialize"!==n&&"validate"!==n&&"commit"!==n&&"destroy"!==n){var o=t[n];"function"==typeof o&&(this.itemMap[n]||(this.itemMap[n]={}),""!==e&&(e+=","),e+="#"+n,this.itemMap[n].callback=o)}return e},t.prototype.initialize=function(){var t=this,e="";void 0!==this.monitor.description.width&&(this.width=this.monitor.description.width,e+="width:"+this.width+"px;"),void 0!==this.monitor.description.height&&(this.height=this.monitor.description.height,e+="min-height:"+this.height+"px;"),this.monitor.initialize(this);var n="";for(var o in this.monitor.description.elements)n+=this.componentUtils.JSWindowToHTML(this.monitor.description.elements[o]);var r=this.dialogId,a=this.componentUtils.buildDialogWrapper(r,e),s=this.getCallbacks(this.monitor);(0,i.default)("#"+r).length>0&&(0,i.default)("#"+r).remove();var u=a.replace("{body}",n);return(0,i.default)("body").append(u),this.updateComponents(),(0,i.default)("#"+r+" #jsok").off("click").on("click",(function(e){t.monitor.validate&&t.monitor.validate(t),t.monitor.commit&&t.monitor.commit(t),t.monitor.ok&&t.monitor.ok(t),t.monitor.destroy&&t.monitor.destroy(t),t.end("ok")})),(0,i.default)("#"+r+" #jscancle, #"+r+" .close").off("click").on("click",(function(e){t.monitor.cancel&&t.monitor.cancel(t),t.monitor.destroy&&t.monitor.destroy(t),t.end("cancel")})),(0,i.default)("#"+r+" #jsother").off("click").on("click",(function(e){t.monitor.other&&t.monitor.other(t),t.monitor.destroy&&t.monitor.destroy(t),t.end("other")})),(0,i.default)("#"+r+" .modal-dialog").off("click",s).on("click",s,(function(e){var n=e.target.id;t.itemMap[n].callback&&t.itemMap[n].callback(t)})),!0},t.prototype.doModal=function(){(0,i.default)("#"+this.dialogId).show()},t}();e.default=c},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(254),a=(o=i)&&o.__esModule?o:{default:o};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.addStockEvent=function(){},t.prototype.alertFileNotFount=function(){},t.prototype.alertSelectFailed=function(){},t.prototype.argsDWIM=function(){},t.prototype.canPlayOrAlert=function(){},t.prototype.computerFloatWinRect=function(){},t.prototype.constrainRectToScreen=function(){},t.prototype.createPlayer=function(){},t.prototype.Events=function(t){return new a.default(t)},t.prototype.getAltTextData=function(){},t.prototype.getAltTextSettings=function(){},t.prototype.getAnnotStockEvents=function(){},t.prototype.getAnnotTraceEvents=function(){},t.prototype.getPlayers=function(){},t.prototype.getPlayerStockEvents=function(){},t.prototype.getPlayerTraceEvents=function(){},t.prototype.getURLData=function(){},t.prototype.getURLSettings=function(){},t.prototype.getWindowBorderSize=function(){},t.prototype.openPlayer=function(){},t.prototype.removeStockEvents=function(){},t.prototype.startPlayer=function(){},r(t,[{key:"align",get:function(){}},{key:"canResize",get:function(){}},{key:"closeReason",get:function(){}},{key:"ifOffScreen",get:function(){}},{key:"layout",get:function(){}},{key:"monitorType",get:function(){}},{key:"openCode",get:function(){}},{key:"over",get:function(){}},{key:"pageEventNames",get:function(){}},{key:"raiseCode",get:function(){}},{key:"raiseSystem",get:function(){}},{key:"renditionType",get:function(){}},{key:"stauts",get:function(){}},{key:"trace",get:function(){}},{key:"version",get:function(){}},{key:"windowType",get:function(){}}]),t}();e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){o(this,t);var e=arguments[0];this.change="",this.changeEx="",this.events=[],this.init(e)}return t.prototype.init=function(t){for(var e in t){var n={};n[e]=t[e],this.add(n)}},t.prototype.add=function(t){for(var e in t)this.events[e]||(this.events[e]=[]),this.events[e]=t[e]},t.prototype.dispatch=function(){},t.prototype.remove=function(t){},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(121),a=(o=i)&&o.__esModule?o:{default:o};var s=2,u=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._backgroudColor=a.default.yellow,this._clickAdvances=!1,this._isFullScreen=!0,this._cursor=s,this._defaultTransition="",this._escapeExits=!1,this._loop=!1,this._timedelay=3,this._transitions="",this._usePageTiming=!1,this._useTimer=!1}return r(t,[{key:"backgroudColor",get:function(){return this._backgroudColor},set:function(t){}},{key:"clickAdvances",get:function(){return this._clickAdvances},set:function(t){}},{key:"cursor",get:function(){return this._cursor},set:function(t){}},{key:"defaultTransition",get:function(){return this._defaultTransition},set:function(t){}},{key:"escapeExits",get:function(){return this._escapeExits},set:function(t){}},{key:"isFullScreen",get:function(){return this._isFullScreen},set:function(t){this._isFullScreen=t}},{key:"loop",get:function(){return this._loop},set:function(t){}},{key:"timedelay",get:function(){return this._timedelay},set:function(t){}},{key:"transitions",get:function(){return this._transitions},set:function(t){}},{key:"usePageTiming",get:function(){return this._usePageTiming},set:function(t){}},{key:"useTimer",get:function(){return this._useTimer},set:function(t){}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=f(n(257)),a=f(n(258)),s=n(20),u=f(n(259)),c=f(n(29)),l=n(53);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){return t.jsEngine.getPDFDoc()},p=function(t){return t.jsEngine.getPDFForm()},h={},g=function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsEngine=e,this._dirty=!1,this._layout="",this._arrTemplate=new Array,this.printParams=new a.default(this.jsEngine,this),this.annotManage=c.default,this)"function"==typeof this[n]&&(this[n].toString=function(){return"function(){[native code]}"})}return t.prototype.addField=function(t,e,n,o){switch(e){case"text":e=6;break;case"button":e=1;break;case"combobox":e=4;break;case"listbox":e=5;break;case"checkbox":e=2;break;case"radiobutton":e=3;break;case"signature":return null}return p(this).addControlSync({fieldName:t,fieldType:e,pageIndex:n,rect:{left:o[0],top:o[1],right:o[2],bottom:o[3]}}),this.getField(t)},t.prototype.getPrintParams=function(){return this.printParams},t.prototype.getTemplate=function(t){if(!t||""===t)return null;if(this._arrTemplate.length<=0){var e=d(this).visibleTemplates;if(e&&e.length>0)for(var n=0;n<e.length;n++){if(t===e[n].name)return new u.default(e[n],!1,d(this))}if((e=d(this).invisibleTemplates)&&e.length>0)for(var o=0;o<e.length;o++){if(t===e[o].name)return new u.default(e[o],!0,d(this))}return null}for(var r=0;r<this._arrTemplate.length;r++){var i=this._arrTemplate[r];if(i.name===t)return i}return null},t.prototype.removeTemplate=function(t){if(!t||""===t)return!1;if(d(this)){var e=this;d(this).removeTemplate(t).then((function(n){for(var o=0;o<e._arrTemplate.length;o++){if(e._arrTemplate[o].name===t){e._arrTemplate.splice(o,1);break}}}))}},t.prototype.print=function(t,e,n,r,i,a,s,u,c){var l=this;if(!this.jsEngine.getEvent().isSensitiveCheck){var f=void 0;f="object"==(void 0===t?"undefined":o(t))?{startIndex:t.firstPage,endIndex:t.lastPage,silent:t.interactive,printType:["page","annot"]}:c?{startIndex:c.firstPage,endIndex:c.lastPage+1,silent:c.interactive,printType:["page","annot"]}:{ui:t,startIndex:e,endIndex:n,silent:r,shrinkToFit:i,asImage:a,reverse:s,printType:u?["page","annot"]:["page"]},p(this).addTask((function(t){return l.jsEngine.PDFViewer.printPDFDocument(f)}))}},t.prototype.addAnnot=function(t){return"FileAttachment"!==t.type&&"Sound"!==t.type?this.annotManage.addAnnot(t,this.jsEngine.PDFViewer):this.annotManage.showFileDialog(t)},t.prototype.syncAnnotScan=function(){return d(this).getAnnots()},t.prototype.getAnnots=function(t){var e=this,n=-1,o=l.ANFB_ShouldNone,r=l.ANSB_None,i=!1;t&&(t.nPage>=0&&(n=t.nPage),t.nSortBy>=0&&(r=t.nSortBy),t.nFilterBy>=0&&(o=t.nFilterBy),t.bReverse&&(i=t.bReverse));var a=this.numPages,s=d(this).pageCache,u=0,c=[];if(-1!==n&&(u=n),u>=a)return null;var f=function(){var t=s[u];if(!t)return u++,"continue";var e=Object.keys(t.annotIdMap);if(!e.length)return u++,"continue";var o=e.map((function(e){return{pageIndex:u,annot:t.annotIdMap[e]}}));if(c.push.apply(c,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(o)),-1!==n)return"break";u++};t:do{switch(f()){case"continue":continue;case"break":break t}}while(u<a);var p=[];return c.map((function(t){var n=t.pageIndex,o=t.annot,r=e.annotManage.getAnnot(o,n);r&&p.push(r)})),this.annotManage.getAnnots(p,o,r,i)},t.prototype.getAnnot=function(t,e){var n,o=d(this).pageCache;if(!(n=o[t]))return null;var r=Object.keys(n.annotIdMap);if(!r.length)return null;var i=r.map((function(t){return n.annotIdMap[t]})).find((function(t){return t.getId()==e}));return this.annotManage.getAnnot(i,t)},t.prototype.calculateNow=function(){},t.prototype.closeDoc=function(){this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.closeDoc()},t.prototype.getField=function(t){if(!t)return null;var e=d(this).getPDFForm().getField(t),n=void 0;return e||(n=d(this).getPDFForm().getField(t,!0))?h[t]?h[t]:h[t]=new i.default(this.jsEngine,e,n):null},t.prototype.getNthFieldName=function(t){if("number"!=typeof t&&(t=parseInt(t),isNaN(t)))throw"require interge param.";return d(this).getPDFForm().getFieldByIndex(t).getName()},t.prototype.getPageBox=function(t,e){return[0,0,612,792]},t.prototype.getPageRotation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 90*d(this).pageCache[t].getRotation()},t.prototype.getURL=function(){},t.prototype.removeField=function(t){delete h[t],p(this).removeField(t)},t.prototype.resetForm=function(t){if(!this.jsEngine.getEvent().isSensitiveCheck){var e=void 0;this.jsEngine.PDFViewer.activeElement&&this.jsEngine.PDFViewer.activeElement.annot&&(e=this.jsEngine.PDFViewer.activeElement.annot.getField()),p(this).resetForm(t,0,e)}},t.prototype.submitForm=function(t,e,n,r,i,a,u,c,l,f,d,h,g,y,v,m,b,w,P,A,_,C,D,S){var R=this.jsEngine.PDFViewer;if(!this.jsEngine.getEvent().isSensitiveCheck){var E=0;1===arguments.length&&"object"===o(arguments[0])&&(t=arguments[0].cURL,e=arguments[0].bFDF,n=arguments[0].bEmpty,r=arguments[0].aFields,i=arguments[0].bGet,a=arguments[0].bAnnotations,u=arguments[0].bXML,c=arguments[0].bIncrChanges,l=arguments[0].bPDF,f=arguments[0].bCanonical,d=arguments[0].bExclNonUserAnnots,h=arguments[0].bExclFKey,g=arguments[0].cPassword,y=arguments[0].bEmbedForm,v=arguments[0].oJavaScript,m=arguments[0].cSubmitAs,b=arguments[0].bInclNMKey,w=arguments[0].aPackets,P=arguments[0].cCharset,A=arguments[0].oXML,_=arguments[0].cPermID,C=arguments[0].cInstID,D=arguments[0].cUsageRights,S=arguments[0].bHTMLForm),i&&(E|=s.FormActionFlags.FlagGetMethod),l&&(E|=s.FormActionFlags.FlagSubmitAsPDF),h&&(E|=s.FormActionFlags.FlagExclFKey),S&&(E|=s.FormActionFlags.FlagExportFormat);var O=R.i18n.t("viewer_:pdfjs.safeModeSubmit",{URL:t,interpolation:{escapeValue:!1}});confirm(O)&&p(this).submitForm(t,r,E)}},t.prototype.cleanFields=function(){h={}},t.prototype.createIcon=function(t,e,n){return{name:"",stream:t,width:e,height:n}},r(t,[{key:"author",get:function(){return d(this).getMetadataValue("Author")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return d(this).setMetadataValue("Author",t)}},{key:"calculate",get:function(){return p(this).calculationEnabled},set:function(t){return p(this).calculationEnabled=t}},{key:"creationDate",get:function(){return d(this).getMetadataValue("CreationDate")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return d(this).setMetadataValue("CreationDate",t)}},{key:"dirty",get:function(){return this._dirty},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._dirty=t}},{key:"docID",get:function(){return d(this).info.fileID.slice(0,2)}},{key:"creator",get:function(){return d(this).getMetadataValue("Creator")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return d(this).setMetadataValue("Creator",t)}},{key:"documentFileName",get:function(){return d(this).info.fileName}},{key:"external",get:function(){return!1}},{key:"filesize",get:function(){return d(this).info.filesize}},{key:"info",get:function(){return d(this).metadata}},{key:"icons",get:function(){return d(this).getNameTreeIcons()}},{key:"keywords",get:function(){return d(this).getMetadataValue("Keywords")}},{key:"layout",get:function(){switch(this.jsEngine.PDFViewer.getPDFDocRender().getViewMode().constructor.getName()){case"continuous-view-mode":return"OneColumn";case"single-page-view-mode":return"SinglePage";case"'multipage-view-mode'":return"TwoColumnLeft";case"facing-page-view-mode":return"TwoPageLeft"}}},{key:"modDate",get:function(){return d(this).getMetadataValue("ModDate")}},{key:"numFields",get:function(){return d(this).getPDFForm().getFieldCount()}},{key:"numPages",get:function(){return d(this).getPageCount()}},{key:"path",get:function(){return"c:/fakepath/"+d(this).info.fileName}},{key:"pageNum",get:function(){return this.jsEngine.PDFViewer.activeElement&&this.jsEngine.PDFViewer.activeElement.annot?this.jsEngine.PDFViewer.activeElement.annot.getPage().getIndex():this.jsEngine.PDFViewer.getPDFDocRender().getCurrentViewMode().getCurrentPageIndex()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.jsEngine.PDFViewer.goToPage(t,0,0,!1),t}},{key:"templates",get:function(){if(this._arrTemplate.length<=0){var t=d(this).visibleTemplates;if(t&&t.length>0)for(var e=0;e<t.length;e++){var n=t[e],o=new u.default(n,!1,d(this));this._arrTemplate.push(o)}if((t=d(this).invisibleTemplates)&&t.length>0)for(var r=0;r<t.length;r++){var i=t[r],a=new u.default(i,!0,d(this));this._arrTemplate.push(a)}}return this._arrTemplate}}]),t}();e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(20);function i(t,e){var n=t.getPDFForm(),o=n.fieldWidgets[e&&e.getName()];return!o||o.length<1?null:n.fieldWidgets[e.getName()][0]}function a(t,e,n,o){t&&t[n].apply(t,o),e&&e.forEach((function(t){t[n].apply(t,o)}))}var s=function(){function t(e,n,o){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsEngine=e,this.field=n,this.fields=o,this.targetField=this.field||this.fields[0],this._readonly="",this._required="",this._value="",this)"function"==typeof this[r]&&(this[r].toString=function(){return"function(){[native code]}"})}return t.prototype.setItems=function(t){return a(this.field,this.fields,"setItems",[t]),t},t.prototype.buttonGetIcon=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=i(this.jsEngine,this.targetField).getIconObjNum(t);return"number"==typeof e?{_objNum:e}:e},t.prototype.buttonSetIcon=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this.field,this.fields,"setIconObj",[t,e])},t.prototype.browseForFileToSubmit=function(){},t.prototype.buttonGetCaption=function(t){switch(t||(t=0),t){case 0:t="normalCaption";break;case 1:t="downCaption";break;case 2:t="rolloverCaption"}return i(this.jsEngine,this.targetField).getMKProperty(t)},t.prototype.buttonImportIcon=function(t,e){var n=this;return new Promise((function(t){$("#jsBrowserFile").length>0&&$("#jsBrowserFile").remove(),$("body").append('<input id="jsBrowserFile" type="file" style="display: block;" accept="image/*"/>'),$("#jsBrowserFile").off("change").on("change",(function(e){var o=e.target.files[0];if(!o)return-2;var r=new FileReader;r.readAsArrayBuffer(o),r.onload=function(){var e=new Uint8Array(r.result);n.buttonSetIcon(e,0),t(0)}})),$("#jsBrowserFile").click()}))},t.prototype.buttonSetCaption=function(t,e){if(!this.jsEngine.getEvent().isSensitiveCheck){switch(e||(e=0),Array.isArray(t)&&1===t.length&&(t=t[0]),"string"!=typeof t&&(t+=""),e){case 0:e="normalCaption";break;case 1:e="downCaption";break;case 2:e="rolloverCaption"}a(this.field,this.fields,"setMKProperty",[e,t])}},t.prototype.checkThisBox=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.jsEngine.getEvent().isSensitiveCheck){var n=this.field;if(n.getType()===r.FieldType.RadioButton||n.getType()===r.FieldType.CheckBox){var o=n.getWidget(t);if(!o)return;e?n.setValue(o.getOnAS()):n.getValue()===o.getOnAS()&&n.setValue("Off",null,!0)}}},t.prototype.clearItems=function(){this.jsEngine.getEvent().isSensitiveCheck||a(this.field,this.fields,"clearItems",[])},t.prototype.defaultIsChecked=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField&&(this.targetField.getType()===r.FieldType.RadioButton||this.targetField.getType()===r.FieldType.CheckBox)){var n=i(this.jsEngine,this.targetField),o="Off";e&&(o=n?n.getOnAS():"Yes"),a(this.field,this.fields,"setDefaultValue",[o])}},t.prototype.deleteItemAt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.field.getValueIndex();if(!this.jsEngine.getEvent().isSensitiveCheck){if("number"!=typeof t&&(t=parseInt(t)),void 0===t)throw"invalid parameter, expected interge.";a(this.field,this.fields,"deleteItems",[t])}},t.prototype.getArray=function(){},t.prototype.getItemAt=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"!=typeof t&&(t=parseInt(t)),void 0===t)throw"invalid parameter, expected interge.";var n=this.targetField;if(n.getType()===r.FieldType.ListBox||n.getType()===r.FieldType.ComboBox){var o=n.getOptions();-1===t&&(t=o.length-1);var i=o[t];return e?i.value:i.lable}return""},t.prototype.insertItemAt=function(t,e,n){if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField){var o=this.targetField;o.getType()!==r.FieldType.ListBox&&o.getType()!==r.FieldType.ComboBox||a(this.field,this.fields,"insertItemAt",[t,e,n])}},t.prototype.isBoxChecked=function(t){var e=this.targetField;if(!this.targetField)return!1;if(e.getType()===r.FieldType.RadioButton||e.getType()===r.FieldType.CheckBox){var n=e.getWidget(t);if(n)return"Off"!=n.getAS()}return!1},t.prototype.isDefaultChecked=function(t){if(!this.targetField)return!1;var e=this.targetField;if(e.getType()===r.FieldType.RadioButton||e.getType()===r.FieldType.CheckBox){var n=e.getWidget(t);if(n)return e.getDefaultValue()===n.getOnAS()}return!1},t.prototype.setAction=function(t,e){a(this.field,this.fields,"setAction",[-1,e])},t.prototype.setFocus=function(){this.targetField&&this.targetField.focus()},o(t,[{key:"alignment",get:function(){if(this.targetField)return"";switch(this.targetField.getAlignment()){case 0:return"left";case 1:return"center";case 2:return"right"}},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck){var e=0;switch(t){case"left":e=0;break;case"center":e=1;break;case"right":e=2}return a(this.field,this.fields,"setAlignmentWithString",[e,t]),t}}},{key:"borderStyle",get:function(){return this.targetField.getBorderStyle()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setBorderStyle",[t]),t}},{key:"charLimit",get:function(){return this.targetField&&this.targetField.getMaxLength()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setMaxLength",[t]),t}},{key:"comb",get:function(){return!!r.FieldFlag.isComb(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setComb",[t]),t}},{key:"currentValueIndices",get:function(){return this.targetField&&this.targetField.getValueIndex()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setValueByIndex",[t]),t}},{key:"defaultValue",get:function(){return this.targetField&&this.targetField.getDefaultValue()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setDefaultValue",[t]),t}},{key:"display",get:function(){var t=i(this.jsEngine,this.targetField).getFlags();return 2&t?1:4&t?32&t?3:0:2},set:function(t){return a(this.field,this.fields,"setWidgetDisplay",[t,!0]),t}},{key:"exportValues",get:function(){return this.targetField&&this.targetField.getExportValues()}},{key:"fillColor",get:function(){var t=i(this.jsEngine,this.targetField).getMKProperty("fillColor");return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setFillColor",[t]),t}},{key:"hidden",get:function(){var t=i(this.jsEngine,this.targetField).getFlags();return!!(2&t||1&t)},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setHidden",[t]),t}},{key:"highlight",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"lineWidth",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"multiline",get:function(){return!!r.FieldFlag.isMultiline(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setMultiline",[t]),t}},{key:"name",get:function(){return this.targetField&&this.targetField.getName()}},{key:"numItems",get:function(){if(!this.targetField)return 0;if(this.targetField.getType()===r.FieldType.ListBox||this.targetField.getType()===r.FieldType.ComboBox)return this.targetField.getOptions().length;throw"invalid field type: only list box and combo box available."}},{key:"password",get:function(){return!!r.FieldFlag.isPassword(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setPassword",[t]),t}},{key:"print",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"radiosInUnison",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"readonly",get:function(){return!!r.FieldFlag.isReadOnly(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setReadonly",[t]),t}},{key:"required",get:function(){return!!r.FieldFlag.isRequired(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setRequired",[t]),t}},{key:"type",get:function(){if(!this.targetField)return"unknown";switch(this.targetField.getType()){default:case 0:return"unknown";case 1:return"button";case 2:return"checkbox";case 4:return"combobox";case 5:return"listbox";case 3:return"radiobutton";case 7:return"signature";case 6:return"text"}}},{key:"value",get:function(){if(this.targetField){var t=this.targetField.getValue();return t.length>0&&!isNaN(t)?parseFloat(t):t}},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField)return a(this.field,this.fields,"setValue",[t]),this.targetField.getType()!==r.FieldType.RadioButton&&this.targetField.getType()!==r.FieldType.CheckBox||this.jsEngine.setStatus("calculate",this.targetField),t}},{key:"valueAsString",get:function(){return this.targetField&&this.targetField.getValue().toString()}},{key:"strokeColor",get:function(){var t=this.targetField.getBorderColor();return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return a(this.field,this.fields,"setBorderColor",[t]),t}},{key:"textColor",get:function(){var t=this.targetField&&this.targetField.getDAFontColor();return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){return a(this.field,this.fields,"setDAFontColor",[t]),t}},{key:"userName",get:function(){return this.PDFFieldgetAlternateName()},set:function(t){if(this.field)return this.field.update("alternateName",t);this.fields.forEach((function(e){e.update("alternateName",t)}))}},{key:"rect",get:function(){var t=i(this.jsEngine,this.targetField),e=void 0;return[(e=t?t.getRect():this.targetField.rect).left,e.top,e.right,e.bottom]},set:function(t){if(!(Object.prototype.toString.call(t).indexOf("Array")<0||t.length<4)){if(t[0]>t[2]){var e=t[0];t[0]=t[2],t[2]=e}if(t[3]>t[1]){var n=t[3];t[3]=t[1],t[1]=n}a(this.field,this.fields,"setRect",[{left:t[0],top:t[1],right:t[2],bottom:t[3]}])}}},{key:"style",get:function(){return i(this.jsEngine,this.targetField).getMKProperty("normalCaption")},set:function(t){switch(t){case"check":t="4";break;case"cross":t="8";break;case"diamond":t="u";break;case"circle":t="l";break;case"star":t="H";break;case"square":t="n"}return a(this.field,this.fields,"setMKProperty",["normalCaption",t])}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsEngine=e,this.doc=n,this.params={}}return o(t,[{key:"printerName",get:function(){return"Web Printer"},set:function(t){}},{key:"firstPage",get:function(){return void 0!==this.params.firstPage?this.params.firstPage:0},set:function(t){this.params.firstPage=t}},{key:"lastPage",get:function(){return void 0!==this.params.lastPage?this.params.lastPage:this.doc.numPages},set:function(t){this.params.lastPage=t}},{key:"pageHandling",get:function(){return void 0!==this.params.pageHandling?this.params.pageHandling:3},set:function(t){this.params.pageHandling=t}},{key:"constants",get:function(){return{interactionLevel:{automatic:1,full:0,silent:2},handling:{none:1,fit:2,shrink:3,tileAll:4,tileLarge:5,nUp:6,booklet:7},flagValues:{applyOverPrint:131072,applySoftProofSettings:2097152,applyWorkingColorSpaces:262144,emitHalftones:1,emitPostScriptXObjects:524288,emitFormsAsPSForms:4194304,maxJP2KRes:8388608,setPageSize:1024,suppressBG:16,suppressCenter:256,suppressCJKFontSubst:64,suppressCropClip:4,suppressRotate:128,suppressTransfer:8,suppressUCR:32,useTrapAnnots:16777216,usePrintersMarks:33554432},bookletBindings:{Left:0,Right:1,LeftTall:2,RightTall:3},bookletDuplexMode:{BothSides:0,FrontSideOnly:1,BackSideOnly:2},colorOverrides:{auto:0,gray:1,mono:2},fontPolicies:{everyPage:2,jobStart:0,pageRange:1},nUpPageOrders:{Horizontal:0,HorizontalReversed:1,Vertical:2},printContents:{doc:0,docAndComments:1,formFieldsOnly:3},rasterFlagValues:{textToOutline:1,strokesToOutline:2,allowComplexClip:4,preserveOverprint:8},subsets:{all:-3,even:-5,odd:-4},tileMarks:{none:0,west:1,east:2},usages:{auto:0,use:1,noUse:2}}}},{key:"flags",get:function(){return void 0!==this.params.flags?this.params.flags:0},set:function(t){this.params.flags=t}},{key:"interactive",get:function(){return void 0!==this.params.interactive?this.params.interactive:0},set:function(t){this.params.interactive=t}},{key:"fileName",get:function(){return void 0!==this.params.fileName?this.params.fileName:""},set:function(t){this.params.fileName=t}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var r=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateObject=e,this.templateHidden=n,this.pdfDoc=o}return t.prototype.spawn=function(t,e,n,o){if(this.pdfDoc)return this.pdfDoc.spawnPage(this.templateObject,t,e,n)},o(t,[{key:"hidden",get:function(){return this.templateHidden},set:function(t){if(t!==this.templateHidden)return this.pdfDoc?this.pdfDoc.hideTemplate(this.templateObject,t):void 0}},{key:"name",get:function(){return this.templateObject.name}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9);function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),r(e,[{key:"type",get:function(){return"Caret"}},{key:"caretSymbol",get:function(){},set:function(t){}}]),e}(((o=i)&&o.__esModule?o:{default:o}).default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(0);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"Circle"}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"fillColor",get:function(){var t=this.annot.getFillColor();return(0,s.convertFromNumberToJSColor)(t)},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.colorConvertor)(e,"int",0);n.annot.setFillColor(t)}))}},{key:"width",get:function(){return this.annot.getBorderWidth()},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setBorderWidth(e)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u={Paperclip:"Paperclip",PushPin:"PushPin",Graph:"Graph",Tag:"Tag"},c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return s(e,t),r(e,[{key:"type",get:function(){return"FileAttachment"}},{key:"attachIcon",get:function(){return this.annot.getIconName()},set:function(e){var n=this;u[e]&&t.prototype._delayOrExec.call(this,(function(){n.annot.setIconName(e)}))}},{key:"point",get:function(){var t=this.annot.getRect();return[t.left,t.top]},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){!e||!Array.isArray(e)||e.length<2||n.annot.moveTo({left:e[0],top:e[1]})}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(0),u=n(4),c=n(29);function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var f=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return l(e,t),r(e,[{key:"type",get:function(){return"FreeText"}},{key:"alignment",get:function(){return this.annot.getInfo().justification},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setAlignment(e)}))}},{key:"callout",get:function(){var t=this.annot.getCalloutLinePoints(),e=[];return t.map((function(t){e.push(t.x,t.y)})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,c.buildVertexesByPoints)(e);n.annot.setCalloutLinePoints(t)}))}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"fillColor",get:function(){var t=this.annot.getFillColor();return(0,s.convertFromNumberToJSColor)(t)},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.colorConvertor)(e,"int",0);n.annot.setFillColor(t)}))}},{key:"lineEnding",get:function(){var t=this.annot.getCalloutLineEndingStyle();return u.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),t.prototype._delayOrExec.call(this,(function(){var t=u.LineEndingStyle[e];n.annot.setCalloutLineEndingStyle(!0,t)}))}},{key:"richDefaults",get:function(){},set:function(t){}},{key:"rotate",get:function(){var t=360-this.annot.getRotation();return 360===t&&(t=0),t},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=0;0!==e&&(t=360-e),n.annot.setRotation(t)}))}},{key:"textFont",get:function(){},set:function(t){}},{key:"textSize",get:function(){return this.annot.getDefaultAppearance().textSize},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=n.annot.getDefaultAppearance();t.textSize=e,n.annot.setDefaultAppearance(t).then((function(t){}))}))}},{key:"width",get:function(){return this.annot.getBorderWidth()},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setBorderWidth(e)}))}}]),e}(a.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(29);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"Highlight"}},{key:"quads",get:function(){var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.buildRectByPoints)(e);n.annot.setRect(t)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(29);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"Ink"}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"gestures",get:function(){var t=this.annot.getInkList(),e=[],n=void 0;return t.map((function(t){1===t.type&&(n=[],e.push(n)),n.push([t.x,t.y])})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.buildGesturesByArrays)(e);n.annot.setInkList(t)}))}},{key:"width",get:function(){return this.annot.getBorderWidth()},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setBorderWidth(e)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(4),u=n(0);function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return c(e,t),r(e,[{key:"type",get:function(){return"Line"}},{key:"arrowBegin",get:function(){var t=this.annot.getStartStyle();return s.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),t.prototype._delayOrExec.call(this,(function(){var t=s.LineEndingStyle[e];n.annot.setEndingStyle(!0,t)}))}},{key:"arrowEnd",get:function(){var t=this.annot.getEndingStyle();return s.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),t.prototype._delayOrExec.call(this,(function(){var t=s.LineEndingStyle[e];n.annot.setEndingStyle(!1,t)}))}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"doCaption",get:function(){return this.annot.hasCaption()},set:function(t){this.annot.enableCaption(t)}},{key:"fillColor",get:function(){var t=this.annot.getStyleFillColor();return(0,u.convertFromNumberToJSColor)(t)},set:function(t){var e=this;this._delayOrExec((function(){var n=(0,u.colorConvertor)(t,"int",0);e.annot.setStyleFillColor(n)}))}},{key:"leaderExtend",get:function(){return this.annot.getLeaderLineExtend()},set:function(t){}},{key:"leaderLength",get:function(){return this.annot.getLeaderLineLength()},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setLeaderLineLength(e)}))}},{key:"width",get:function(){return this.annot.getBorderWidth()},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setBorderWidth(e)}))}}]),e}(a.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(4),u=n(29),c=n(0);function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var f=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return l(e,t),r(e,[{key:"type",get:function(){return"PolyLine"}},{key:"arrowBegin",get:function(){var t=this.annot.getStartStyle();return s.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),t.prototype._delayOrExec.call(this,(function(){var t=s.LineEndingStyle[e];n.annot.setEndingStyle(!0,t)}))}},{key:"arrowEnd",get:function(){var t=this.annot.getEndingStyle();return s.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),t.prototype._delayOrExec.call(this,(function(t){var o=s.LineEndingStyle[e];n.annot.setEndingStyle(!1,o)}))}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"fillColor",get:function(){var t=this.annot.getFillColor();return(0,c.convertFromNumberToJSColor)(t)},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,c.colorConvertor)(e,"int",0);n.annot.setFillColor(t)}))}},{key:"vertices",get:function(){var t=this.annot.getVertexes(),e=[];return t.map((function(t){e.push(t.x,t.y)})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,u.buildVertexesByPoints)(e);n.annot.setVertexes(t)}))}}]),e}(a.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(29),u=n(0);function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return c(e,t),r(e,[{key:"type",get:function(){return"Polygon"}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"fillColor",get:function(){var t=this.annot.getFillColor();return(0,u.convertFromNumberToJSColor)(t)},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,u.colorConvertor)(e,"int",0);n.annot.setFillColor(t)}))}},{key:"vertices",get:function(){var t=this.annot.getVertexes(),e=[];return t.map((function(t){e.push(t.x,t.y)})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.buildVertexesByPoints)(e);n.annot.setVertexes(t)}))}}]),e}(a.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9);function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),r(e,[{key:"type",get:function(){return"Sound"}},{key:"point",get:function(){var t=this.annot.getRect();return[t.left,t.top]},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){!e||!Array.isArray(e)||e.length<2||n.annot.moveTo({left:e[0],top:e[1]})}))}},{key:"soundIcon",get:function(){},set:function(t){}}]),e}(((o=i)&&o.__esModule?o:{default:o}).default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(0);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"Square"}},{key:"dash",get:function(){return this.annot.getBorderInfo().dashes},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){Array.isArray(e)&&n.annot.setBorderStyle(1,e)}))}},{key:"fillColor",get:function(){var t=this.annot.getFillColor();return(0,s.convertFromNumberToJSColor)(t)},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.colorConvertor)(e,"int",0);n.annot.setFillColor(t)}))}},{key:"width",get:function(){return this.annot.getBorderWidth()},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){n.annot.setBorderWidth(e)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(29);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"Squiggly"}},{key:"quads",get:function(){var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.buildRectByPoints)(e);n.annot.setRect(t)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u={Approved:"Approved",AsIs:"AsIs",Confidential:"Confidential",Departmental:"Departmental",Draft:"Draft",Experimental:"Experimental",Expired:"Expired",Final:"Final",ForComment:"ForComment",ForPublicRelease:"ForPublicRelease",NotApproved:"NotApproved",NotForPublicRelease:"NotForPublicRelease",Sold:"Sold",TopSecret:"TopSecret"},c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return s(e,t),r(e,[{key:"type",get:function(){return"Stamp"}},{key:"AP",get:function(){var t=this.annot.getIconName();if(t&&"#"===t[0]){var e=t.substr(1);(e=u[e])&&(t=e)}return t},set:function(t){}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(29);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"StrikeOut"}},{key:"quads",get:function(){var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.buildRectByPoints)(e);n.annot.setRect(t)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9);function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return r.stateModelValue="Review",r}return a(e,t),r(e,[{key:"type",get:function(){return"Text"}},{key:"noteIcon",get:function(){return this.annot.getIconName()},set:function(e){var n=this;e||(e="Note"),t.prototype._delayOrExec.call(this,(function(){n.annot.setIconName(e).then((function(t){}))}))}},{key:"point",get:function(){var t=this.annot.getRect();return[t.left,t.top]},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){!e||!Array.isArray(e)||e.length<2||n.annot.moveTo({left:e[0],top:e[1]})}))}},{key:"state",get:function(){return"Marked"===this.stateModel?this.annot.getMarkedState(0):this.annot.getReviewState(0)},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){if("Review"===n.stateModelValue){switch(e){case"accepted":case"rejected":case"cancelled":case"completed":case"none":break;default:e="none"}n.annot.addReviewState(e)}else"Marked"===n.stateModelValue&&("marked"!==e&&"unmarked"!==e&&(e="unmarked"),n.annot.addMarkedState(e))}))}},{key:"stateModel",get:function(){return this.stateModelValue},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){"Marked"!==e&&"Review"!==e&&(e="Review"),n.stateModelValue=e}))}}]),e}(((o=i)&&o.__esModule?o:{default:o}).default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(9),a=(o=i)&&o.__esModule?o:{default:o},s=n(29);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),r(e,[{key:"type",get:function(){return"Underline"}},{key:"quads",get:function(){var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;t.prototype._delayOrExec.call(this,(function(){var t=(0,s.buildRectByPoints)(e);n.annot.setRect(t)}))}}]),e}(a.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n(53)),r=c(n(121)),i=c(n(277)),a=c(n(278)),s=c(n(279)),u=c(n(280));function c(t){return t&&t.__esModule?t:{default:t}}var l=URL.createObjectURL(new Blob(["<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n    <script>\n        window.initJS=function(PDFJSGlobal){\n          window.PDFJSGlobal = PDFJSGlobal          \n          function appClosure() {\n            for (var i in window) {\n              if (i != 'PDFJSGlobal' \n              && i != 'location'\n              && i !='window'\n              && i != 'appClosure') {\n                  eval('var ' + i+ '=null');\n              }\n            }\n            var keys=['jsEngine',\n                    '_calculate',\n                    '_dirty',\n                    '_layout',\n                    '_arrTemplate',\n                    'printParams',\n                    'annotManage',\n                    'timeStamp',\n                    'cleanFields']\n            for(var key in window.PDFJSGlobal.doc){\n              if(keys.indexOf(key)!=-1){\n                continue;\n              }\n              (function(key){\n                if(typeof window.PDFJSGlobal.doc[key] == \"function\"){\n                  window[key]=function(){\n                    return window.PDFJSGlobal.doc[key].apply(window.PDFJSGlobal.doc,arguments)\n                  }\n                }else{\n                  Object.defineProperty(window,key,{get:function(){\n                    return window.PDFJSGlobal.doc[key]\n                  },set:function(val){\n                    window.PDFJSGlobal.doc[key] = val\n                  }})\n                }\n              })(key)\n            }\n\n            return {\n                docClosure: function (f) {\n                  with (PDFJSGlobal) {\n                    with (PDFJSGlobal.doc) {\n                    eval(f);\n                    return function (f) {\n                            return eval(f)\n                        }\n                      }\n                    }\n                }\n            }\n          }\n          window.app = appClosure();\n        }\n\n        window.runJS = function (data, engineEvent) {\n            var doc = window.PDFJSGlobal.doc;\n            window.PDFJSGlobal.event = engineEvent;\n\n            doc.timeStamp = engineEvent&&engineEvent.timeStamp;\n            if(data.global){\n              try{\n                doc.exec = app.docClosure.call(doc,data.code);\n              }catch(e){\n                doc.exec = app.docClosure(data.code);\n              }\n                return;\n            }\n            switch (data.action) {\n                case 'execute':\n                    doc.exec(data.code, data, engineEvent);\n            }\n        }\n    <\/script>\n</head>\n\n<body>\n</body>\n\n</html>"],{type:"text/html"})),f="ActiveXObject"in self||navigator.userAgent.toLowerCase().match(/msie [\d\.]+/),d=window.PDFJSGlobal={};for(var p in d.border={s:"solid",b:"beveled",d:"dashed",i:"inset",u:"underline"},d.style={ch:"check",cr:"cross",di:"diamond",ci:"circle",st:"star",sq:"square"},o.default)d[p]=o.default[p];d.global=i.default,d.console=u.default,d.color=r.default,d.display={visible:0,hidden:1,noPrint:2,noView:3},d.util=a.default,d.font=s.default;var h=void 0,g=void 0;var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.initJSEnv=function(t,e,n){var r=this;if(o.default.setJE(t,e),g=t,d.app=e,d.doc=n,d.this=n,d.getEvent=function(e){return t.getEvent(e)},d.postRunScripts=function(e){return t.postRunScripts(e)},!f)return(h=document.createElement("iframe")).style.display="none",h.style.position="absolute",h.style.top=0,this.enable=!1,new Promise((function(t,e){h.onload=t,h.src=l,document.body.appendChild(h)})).then((function(t){r.enable=!0,h.contentWindow.initJS(d)}));window.appClosure=function(){var t=["jsEngine","_calculate","_dirty","_layout","_arrTemplate","printParams","annotManage","timeStamp","cleanFields"],e=window.PDFJSGlobal.doc;for(var n in e)-1==t.indexOf(n)&&function(t){"function"==typeof e[t]?window[t]=function(){return e[t].apply(e,arguments)}:Object.defineProperty(window,t,{get:function(){return e[t]},set:function(n){e[t]=n}})}(n);return{DocClosure:function(t){return new Function("f","with(window.PDFJSGlobal){with(window.PDFJSGlobal.doc){eval(f);return function(f){eval(f);}}}")(t)}}}(),window.runJS=function(t,e){var n=window.PDFJSGlobal.doc;if(window.PDFJSGlobal.event=e,n.timeStamp=e&&e.timeStamp,t.global)try{n.exec=window.appClosure.DocClosure.call(n,t.code)}catch(e){n.exec=window.appClosure.DocClosure(t.code)}else switch(t.action){case"execute":n.exec(t.code,t,e)}},this.enable=!0},t.exec=function(t,e,n,o){var r={action:"execute",code:t,global:e,event:n.event};this.enable||u.default.error("js env is not ready!!");var i=g.events[r.event];return f?window.runJS(r,i):h.contentWindow.runJS(r,i),i.rc},t}();e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setPersistent:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(53),i=(o=r)&&o.__esModule?o:{default:o};var a=function(t,e){if(null==t)throw"Not enough arguments for vsprintf";function n(t,e,n){if(null==e)return"s"==t?"":"0";var o,r="",i="",a=" ";if(n.short||n.long||n.long_long)switch(t){case"e":case"f":case"G":case"E":case"G":case"d":n.short?e>=32767?e=32767:e<=-32768&&(e=-32768):n.long?e>=2147483647?e=2147483647:e<=-2147483648&&(e=-2147483648):e>=0x8000000000000000?e=0x8000000000000000:e<=-0x8000000000000000&&(e=-0x8000000000000000);break;case"X":case"B":case"u":case"o":case"x":case"b":e<0&&(e=Math.abs(e)-1),n.short?e>=65535&&(e=65535):n.long?e>=4294967295&&(e=4294967295):e>=0x10000000000000000&&(e=0x10000000000000000)}switch(t){case"c":o=String.fromCharCode(parseInt(e));break;case"s":o=e.toString();break;case"d":case"u":o=new Number(parseInt(e)).toString();break;case"o":o=new Number(parseInt(e)).toString(8);break;case"x":o=new Number(parseInt(e)).toString(16);break;case"B":case"b":o=new Number(parseInt(e)).toString(2);break;case"e":var s=n.precision?n.precision:6;o=new Number(e).toExponential(s).toString();break;case"f":s=n.precision?n.precision:6;o=new Number(e).toFixed(s).toString();break;case"g":s=n.precision?n.precision:6;o=new Number(e).toPrecision(s).toString();break;case"X":o=new Number(parseInt(e)).toString(16).toUpperCase();break;case"E":s=n.precision?n.precision:6;o=new Number(e).toExponential(s).toString().toUpperCase();break;case"G":s=n.precision?n.precision:6;o=new Number(e).toPrecision(s).toString().toUpperCase()}if(n["+"]&&parseFloat(e)>0&&-1!=["d","e","f","g","E","G"].indexOf(t)&&(r="+"),n[" "]&&parseFloat(e)>0&&-1!=["d","e","f","g","E","G"].indexOf(t)&&(r=" "),n["#"]&&0!=parseInt(e))switch(t){case"o":r="0";break;case"x":case"X":r="0x";break;case"b":r="0b";break;case"B":r="0B"}if(n[0]&&!n["-"]&&(a="0"),n.width&&n.width>o.length+r.length)for(var u=n.width-o.length-r.length,c=0;c<u;++c)i+=a;return n["-"]&&!n[0]?o+=i:o=i+o,r+o}null==e&&(e=[]);for(var o="",r=0,i=0,a={long:!1,short:!1,long_long:!1},s=!1,u=!1,c=!1,l=!1,f=!1,d=!1,p=".",h=0;h<t.length;++h){var g=t.charAt(h);if(s){switch(g){case"i":g="d";break;case"D":a.long=!0,g="d";break;case"U":a.long=!0,g="u";break;case"O":a.long=!0,g="o";break;case"F":g="f"}switch(g){case"c":case"s":case"d":case"u":case"o":case"x":case"e":case"f":case"g":case"X":case"E":case"G":case"b":case"B":var y=e[i];if(f){var v=y;if(y instanceof Array)v=y;else if("string"==typeof y||y instanceof String)v=y.split("").map((function(t){return t.charCodeAt()}));else if(("number"==typeof y||y instanceof Number)&&a.bitwidth){v=[];do{v.unshift(y&~(-1<<a.bitwidth))}while(y>>>=a.bitwidth)}else v=y.toString().split("").map((function(t){return t.charCodeAt()}));o+=v.map((function(t){return n(g,t,a)})).join(p)}else o+=n(g,y,a);l||++r,i=r,a={},u=!1,s=!1,c=!1,l=!1,f=!1,d=!1,p=".";break;case"v":f=!0;break;case" ":case"0":case"-":case"+":case"#":a[g]=!0;break;case"*":u=!0;break;case".":c=!0;break;case"@":d=!0;break;case"l":a.long?(a.long_long=!0,a.long=!1):(a.long=!0,a.long_long=!1),a.short=!1;break;case"q":case"L":a.long_long=!0,a.long=!1,a.short=!1;break;case"h":a.short=!0,a.long=!1,a.long_long=!1}if(/\d/.test(g)){var m=parseInt(t.substr(h));if(h+=m.toString().length-1,"$"==t.charAt(h+1)){if(m<0||m>e.length)throw"out of bound";u?(c?(a.precision=e[m-1],c=!1):"v"==t.charAt(h+2)?p=e[m-1]:a.width=e[m-1],u=!1):(l=!0,i=m-1),++h}else c?(a.precision=m,c=!1):d?(a.bitwidth=m,d=!1):a.width=m}else u&&!/\d/.test(t.charAt(h+1))&&(c?(a.precision=e[i],c=!1):"v"==t.charAt(h+1)?p=e[i]:a.width=e[i],++r,l||i++,u=!1)}else{if("%"==g){if("%"==t.charAt(h+1)){o+="%",++h;continue}s=!0;continue}o+=g}}return o};e.default={printd:function(t,e,n){if(!e||!e instanceof Date||isNaN(e.getTime()))return"";if(t){if("string"==typeof t)return i.default.FXFormatDate(t,e);if("number"==typeof t)switch(t){case 0:var o="D:";return o+=e.getFullYear(),o+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o+=e.getDate()<10?"0"+e.getDate():e.getDate(),o+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),o+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),o+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();case 1:o="";return o+=e.getFullYear()+".",o+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o+=".",o+=e.getDate()<10?"0"+e.getDate():e.getDate(),o+=" ",o+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),o+=":",o+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),o+=":",o+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();case 2:o="";return o+=e.getFullYear()+"/",o+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o+="/",o+=e.getDate()<10?"0"+e.getDate():e.getDate(),o+=" ",o+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),o+=":",o+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),o+=":",o+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();default:return""}return""}return""},printf:function(t,e){if(!t||!e)return"";e instanceof Array||(e=[e]);var n=arguments.length;if(n<1)return"";var o=t,r=(t=t.replace("%x","%X")).indexOf("%,"),i=!1,s=",";if(-1!=r){var u=parseInt(t.substr(r+2,1));if(u>4)return"";switch(u){case 0:i=TRUE,s=",",".";break;case 1:".";break;case 2:i=TRUE,s=".",",";break;case 3:","}var c="0",l=t.substr(r+3,1);"0"===l?c="0":"+"===l&&(c="+");var f=0,d=t.indexOf(".",r+4);f=d>r+3?parseInt(t.substr(r+4,d-r-4)):parseInt(t.substr(r+4,1));var p=t.length;if(d>-1&&r+d<p){var h=t.substr(r+1,d-1);t=t.replace(h,"")}else if("."===l&&-1===d){d=r+3;h=t.substr(r+1,d-1);t=t.replace(h,"")}else{var g=p-2;if(!(r+1+g<p&&g>=0))return e;h=t.substr(r+1,g);t=t.replace(h,"")}}var y=0,v=0,m=t;m="S"+m;for(var b=new Array,w=!1;-1!=y;){var P="",A=(P=-1===(v=m.indexOf("%",y+1))?m.substr(y):m.substr(y,v-y)).indexOf("%");if(-1!==A){var _=P.substr(A+1);"c"!==_&&"C"!==_&&"d"!==_&&"i"!==_&&"o"!==_&&"u"!==_&&"x"!==_&&"X"!==_&&"e"!==_&&"E"!==_&&"f"!==_&&"g"!==_&&"G"!==_||(w=!0)}b.push(P),y=v}for(var C="",D="",S=0;S<b.length;S++)if(D=C,D+=b[S],0!==S){if(S>=n)break;C=a(D,e)}else C=D;""===C&&(o.replace("%,","%"),C=o);var R=(C=C.substr(1)).indexOf(".");if(R<0)R=C.length;else{h=(C=C.slice(0,R)+"."+C.slice(R)).substr(R+1,1);C=C.replace(h,"")}if(i&&w)for(var E=R-3;E>0;E-=3)C=C.slice(0,E)+s+C.slice(E);var O=C.length;if(f>O)for(E=0;E<f-O;E++)C=c+C;return C},printx:function(t,e){if(!t||!e)return"";for(var n=e.length,o=t.length,r="",i=0,a=0;a<o;a++){var s=t[a];switch(s){case"?":r+=e[i],i++;break;case"X":for(;i<n;){if(e[i]>="0"&&e[i]<="9"||e[i]>="a"&&e[i]<="z"||e[i]>="A"&&e[i]<="Z"){r+=e[i],i++;break}i++}break;case"A":for(;i<n;){if(e[i]>="a"&&e[i]<="z"||e[i]>="A"&&e[i]<="Z"){r+=e[i],i++;break}i++}break;case"9":for(;i<n;){if(e[i]>="0"&&e[i]<="9"){r+=e[i],i++;break}i++}break;case"*":r+=e.substring(i),i=n-1;break;case"\\":break;case">":e=e.toLocaleUpperCase();break;case"<":e=e.toLocaleLowerCase();break;case"=":break;default:r+=s}}return r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={Times:"Times-Roman",TimesB:"Times-Bold",TimesI:"Times-Italic",TimesBI:"Times-BoldItalic",Helv:"Helvetica",HelvB:"Helvetica-Bold",HelvI:"Helvetica-Oblique",HelvBI:"Helvetica-BoldOblique",Cour:"Courier",CourB:"Courier-Bold",CourI:"Courier-Oblique",CourBI:"Courier-BoldOblique",Symbol:"Symbol",ZapfD:"ZapfDingbats"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={clear:function(){window.console.clear()},show:function(){return!0},hide:function(){return!0},println:function(t){window.console.log(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(282)),r=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.stateHandlers={},this.currentStateHandler=o.default,this.register(o.default),this.config=e.config.stateHandlerConfig||{}}return t.prototype.getStateHandlerConfig=function(t){return this.config[t]},t.prototype.setStateHandlerConfig=function(t,e){this.config[t]=e},t.prototype.pushStateHandlerConfig=function(t,e){var n=this.config[t];this.config[t]=Object.assign(e,n)},t.prototype.register=function(t){this.stateHandlers[t.getStateName()]=t},t.prototype.get=function(t){return this.stateHandlers[t]||o.default},t.prototype.switchTo=function(t){var e=this.currentStateHandler,n=this.get(t);if(e!==n){this.currentStateHandler=n,this.pdfViewer.eventEmitter.emit(r.default.switchStateHandler,n,e);var o=this.pdfViewer.pdfViewerRender;if(o){var i=o.pdfDocRender;if(i){i.setStateHandler(n);var a=i.pagesRender;if(a){var s=a.pageRenders;if(s){for(var u=0,c=s.length;u<c;u++)s[u].setStateHandler(n);t&&this.pdfViewer.setActiveElement(null)}}}}}},t.prototype.getCurrentStates=function(){return this.currentStateHandler},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(1)),r=u(n(26)),i=u(n(2)),a=u(n(123)),s=n(40);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.cursorStyle="fv__cursor-grab",o}return c(e,t),e.getStateName=function(){return s.STATE_HANDLER_HAND},e.getDefaultContextMenuConfig=function(){return{selector:".fv__hand-state-contextmenu-container",items:{zoomin:{name:"zoomin",nameI18nKey:"viewer_:contextmenu.hand.zoomin",callback:function(t,e,n){this.data("hand-state").zoomIn()},visible:function(){return this.data("hand-state").allowZoomIn()}},zoomout:{name:"zoomout",nameI18nKey:"viewer_:contextmenu.hand.zoomout",callback:function(t,e,n){this.data("hand-state").zoomOut()},visible:function(){return this.data("hand-state").allowZoomOut()}}}}},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t;t.$ui.addClass("fv__annot-container-zindex-up fv__allow-modify-form-control");var a=n.$handler;a.addClass("fv__hand-state-handler"),a.addClass(this.cursorStyle);var s=a[0],u=t.pdfViewer.eventEmitter,c=this.hammer=new r.default.Manager(s,{recognizers:[[r.default.Pan,{direction:r.default.DIRECTION_ALL}]]});c.add(new r.default.Tap({event:"doubletap",taps:2})),c.add(new r.default.Tap({event:"singletap"})),c.get("doubletap").recognizeWith("singletap"),c.get("singletap").requireFailure("doubletap"),c.on("singletap",(function(e){var n=t.annotsRender;n?(n.unActiveAnnot(),u.emit(i.default.tapPage,e)):u.emit(i.default.tapPage,e)})),c.on("doubletap",(function(e){var n=t.annotsRender;n?(n.unActiveAnnot(),u.emit(i.default.doubleTapPage,e,t)):u.emit(i.default.doubleTapPage,e,t)})),c.on("press",(function(e){var n=t.annotsRender;n?(n.unActiveAnnot(),u.emit(i.default.pressPage,e)):u.emit(i.default.pressPage,e)})),a.on("mousedown",this.mousedown=function(t){a.removeClass(e.cursorStyle),e.cursorStyle="fv__cursor-grabbing",a.addClass(e.cursorStyle)}),a.on("mouseup",this.mouseup=function(n){if(a.removeClass(e.cursorStyle),e.cursorStyle="fv__cursor-grab",a.addClass(e.cursorStyle),3===n.which){var o=t.annotsRender;if(o){o.unActiveAnnot();var r=n,c=s.getBoundingClientRect();t.getAnnotIdAtDevicePoint(r.clientX-c.left,r.clientY-c.top).then((function(t){if(t){var e=o.getAnnotRender(t);e?u.emit(i.default.rightClickAnnotation,e,n):u.emit(i.default.rightClickPage,n)}else u.emit(i.default.rightClickPage,n)}))}else u.emit(i.default.rightClickPage,n)}});var l=(0,o.default)('<div class="fv__hand-state-contextmenu-container fv__contextmenu-container"></div>');a.append(l),l.data("hand-state",this)},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$ui.removeClass("fv__annot-container-zindex-up fv__allow-modify-form-control"),this.pageRender.$handler.off("mousedown",this.mousedown).off("mouseup",this.mouseup).removeClass("fv__hand-state-handler").removeClass(this.cursorStyle).find(".fv__hand-state-contextmenu-container").remove(),this.pageRender.annotsRender&&this.pageRender.annotsRender.unActiveAnnot(),this.pageRender.$handler.removeClass("fv__cursor-grabbing","fv__cursor-grab"),this._destroyTouchScrollEvent&&this._destroyTouchScrollEvent()},e.prototype.out=function(){this.destroyPageHandler(),this.destroyDocHandler()},e.prototype.allowZoomIn=function(){var t=this.pageRender,e=t.pdfViewer;return t.getScale()<e.config.maxScale},e.prototype.zoomIn=function(){var t=this.pageRender,e=t.getScale();e=Math.ceil(4*e+1)/4,t.pdfViewer.zoomTo(e).catch((function(){}))},e.prototype.allowZoomOut=function(){var t=this.pageRender,e=t.pdfViewer;return t.getScale()>e.config.minScale},e.prototype.zoomOut=function(){var t=this.pageRender,e=t.getScale();e=Math.floor(4*e-1)/4,t.pdfViewer.zoomTo(e).catch((function(){}))},e.prototype.clockwiseRoataion=function(){this.pageRender.getPDFPage().then((function(t){var e=(t.getRotation()+1)%4;t.setRotation(e)}))},e.prototype.contrarotate=function(){this.pageRender.getPDFPage().then((function(t){var e=(t.getRotation()+3)%4;t.setRotation(e)}))},e}(a.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(284)),r=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.inkSignList=[],this.currentInkSign=null}return t.prototype.getList=function(){return this.inkSignList},t.prototype.push=function(t){var e=this.inkSignList.length;return this.inkSignList.push(t),this.pdfViewer.eventEmitter.emit(r.default.inkSignAdded,this.inkSignList),e},t.prototype.delete=function(t){this.inkSignList.splice(t,1),this.pdfViewer.eventEmitter.emit(r.default.inkSignDeleted,this.inkSignList)},t.prototype.get=function(t){return this.inkSignList[t]},t.prototype.addInkSign=function(){return new o.default},t.prototype.setCurrentInkSign=function(t){this.currentInkSign=this.inkSignList[t]},t.prototype.getCurrentInkSign=function(){return this.currentInkSign},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.password=null,this.dataURL=null,this.encipherment=null,this.isEncryption=!1}return t.prototype.getPassword=function(){return this.password},t.prototype.setPassword=function(t){var e=this.encipherment;this.password=e?e(t):t,this.isEncryption=!!e},t.prototype.setEncryptionAlgorithm=function(t){this.encipherment=t},t.prototype.verify=function(t){var e=void 0;this.isEncryption?e=this.encipherment(t)===this.password:e=t===this.password;return e},t.prototype.getDataURL=function(){return this.dataURL},t.prototype.setDataURL=function(t){this.dataURL=t},t.prototype.export=function(){return{password:this.password,dataURL:this.dataURL,encipherment:this.encipherment,isEncryption:this.isEncryption}},t.prototype.import=function(t){this.password=t.password,this.dataURL=t.dataURL,this.encipherment=t.encipherment,this.isEncryption=t.isEncryption},t.prototype.base64ToArrayBuffer=function(t){for(var e=window.atob(t),n=e.length,o=new Uint8Array(n);n--;)o[n]=e.charCodeAt(n);return o},t.prototype.arrayBufferToBase64=function(t){for(var e="",n=new Uint8Array(t),o=n.byteLength,r=0;r<o;r++)e+=String.fromCharCode(n[r]);return window.btoa(e)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=(l(n(124)),l(n(72))),i=l(n(287)),a=(l(n(126)),l(n(54))),s=n(11),u=l(n(288)),c=l(n(12));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.prepare(),n.eventBinderMap=[],n.eventBinders=[],n.activeBinders=[],n.defaultBinderName=null,n}return f(e,t),e.prototype.setDefaultBinderName=function(t){this.defaultBinderName=t},e.prototype.activeDefaultBinder=function(){return!!this.defaultBinderName&&(this.activeBinder(this.defaultBinderName),!0)},e.prototype.getDefaultKeyboardEventBinder=function(){return this.getBinder(this.defaultBinderName)},e.prototype.getBinder=function(t){return this.eventBinderMap[t]},e.prototype.registerKeybinding=function(t,e,n){this.eventBinderMap[t].registerKeybinding(e,n)},e.prototype.activeBinder=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this.activeBinders.slice(0),r=this.eventBinderMap[t];if(o.indexOf(r)>-1||!r)return c.default;r.isActive=!0,n?(o.forEach((function(t){t.isActive=!1})),this.activeBinders=[r]):this.activeBinders.push(r);var i=!1;return function(){if(!i)if(i=!0,r.isActive=!1,n)o.forEach((function(t){t.isActive=!0})),e.activeBinders=o.slice(0);else{var t=e.activeBinders.indexOf(r);t>-1&&e.activeBinders.splice(t,1)}}},e.prototype.getActiveBinders=function(){return this.activeBinders.slice(0)},e.prototype.findCommandsInActiveBinders=function(t){var e=new r.default(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode);return this.activeBinders.map((function(t){var n=t.getCommandOfKeybinding(e);if(n)return{command:n,binder:t}})).filter((function(t){return!!t}))},e.prototype.findCommands=function(t){var e=new r.default(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode);return this.eventBinders.map((function(t){var n=t.getCommandOfKeybinding(e);if(n)return{command:n,binder:t}})).filter((function(t){return!!t}))},e.prototype.addEventBinder=function(t,e){if(e){var n=this.eventBinderMap[e];if(!n)throw new Error("cannot found the event binder you attach to: "+e+"!");n.attach(t)}else this.eventBinders.push(t);this.eventBinderMap[t.name]=t,t.setKeyboard(this)},e.prototype.prepare=function(){var t=this,e=void 0,n=function(n){for(var i=new r.default(n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,n.keyCode),a=(0,s.eventPath)(n),c=function(o){var r=a[o];if(t.activeBinders.some((function(t){var o=t.acceptElement(r);return o&&(e=new u.default(n),t.handleKeydownEvent(i,e)),o})))return{v:void 0}},l=0;l<a.length;l++){var f=c(l);if("object"===(void 0===f?"undefined":o(f)))return f.v}},a=function(n){if(!e||!e.isStopped){for(var o=new r.default(n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,n.keyCode),a=new i.default(n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,o.keyCode,n),u=(0,s.eventPath)(n),c=function(e){var r=u[e];return t.activeBinders.some((function(t){return!!t.acceptElement(r)&&t.handleEvent(o,a)}))?"break":a.propagationStopped?(n.stopPropagation(),"break"):void 0},l=0;l<u.length;l++){if("break"===c(l))break}a.preventedDefault&&n.preventDefault()}};window.addEventListener("keydown",n),window.addEventListener("keyup",a),this.addDestroyHook((function(){return window.removeEventListener("keydown",n)})),this.addDestroyHook((function(){return window.removeEventListener("keyup",a)}))},e}(a.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCodeStrMap=void 0;var o=n(125);e.KeyCodeStrMap=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._keyCodeToStr=[],this._strToKeyCode={}}return t.prototype.define=function(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t},t.prototype.keyCodeToStr=function(t){return this._keyCodeToStr[t]},t.prototype.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||o.KeyCodes.Unknown},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(73),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e,n,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctrlKey=e,this.shiftKey=n,this.altKey=o,this.metaKey=r,this.keyCode=a,this.key=i.default.toString(a),this.native=s,this.propagationStopped=!1,this.preventedDefault=!1}return t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.preventDefault=function(){this.preventedDefault=!0},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nativeEvent=e,this.isStopped=!1}return t.prototype.stop=function(){this.isStopped=!0},t.prototype.stopPropagation=function(){this.nativeEvent.stopPropagation()},t.prototype.preventDefault=function(){this.nativeEvent.preventDefault()},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return[{binder:new i.default(r.FOCUS_ELEMENT_BINDER,0),deps:[r.GLOBAL_BINDER]},{binder:new o.default(document.body,r.ACTIVATION_ANNOTATION_BINDER,0),depToDefault:!0},{binder:new o.default(document.body,r.ANNOTATION_PROPERTIES_BINDER,0),deps:[r.GLOBAL_BINDER]},{binder:new o.default(document.body,r.DOCUMENT_PROPERTIES_BINDER,0),deps:[r.GLOBAL_BINDER]},{binder:new o.default(document.body,r.GLOBAL_BINDER,0),deps:[]},{binder:new o.default(document.body,r.VIEWER_BINDER,0),deps:[r.GLOBAL_BINDER]},{binder:new o.default(document.body,r.ANNOTATION_CREATING_BINDER,0),deps:[r.GLOBAL_BINDER]},{binder:new i.default(r.EDIT_TEXT_OBJECT_BINDER,0),DEPS:[r.GLOBAL_BINDER]}]};var o=a(n(74)),r=n(31),i=a(n(290));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(74);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e);var r=a(this,t.call(this,null,n,o));return r.isActive=!1,r}return s(e,t),e.prototype.acceptElement=function(t){return document.activeElement===t},e.prototype.handleEvent=function(e,n){n.stopPropagation(),t.prototype.handleEvent.call(this,e,n)},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=u},function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0});var r=n(31);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=(i(o={},r.KEY_MAP_SELECT_ALL_ANNOTATIONS,{shortcut:"Ctrl+A",bindTo:r.VIEWER_BINDER}),i(o,r.KEY_MAP_POLYLINE_DELETE_LAST_POINT,{shortcut:"Backspace",bindTo:r.VIEWER_BINDER}),i(o,r.KEY_MAP_DOCUMENT_UNDO,{shortcut:"Ctrl+Z",bindTo:r.VIEWER_BINDER}),i(o,r.KEY_MAP_DOCUMENT_REDO,{shortcut:"Ctrl+Y",bindTo:r.VIEWER_BINDER}),i(o,r.KEY_MAP_ESC_CREATING_DRAWING,{shortcut:"Escape",bindTo:r.ANNOTATION_CREATING_BINDER}),i(o,r.KEY_MAP_UNACTIVE_ANNOTATION,{shortcut:"Escape",bindTo:r.ACTIVATION_ANNOTATION_BINDER}),i(o,r.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,{shortcut:"Escape",bindTo:r.EDIT_TEXT_OBJECT_BINDER}),i(o,r.KEY_MAP_DELETE_ANNOTATION,{shortcut:"Delete",bindTo:r.ACTIVATION_ANNOTATION_BINDER}),i(o,r.KEY_MAP_FIELD_TAB_NEXT,{shortcut:"Tab",bindTo:r.VIEWER_BINDER}),o);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function t(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=!0;"boolean"==typeof e&&(s=e,e=r[0],r=r.slice(1));(null===e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e)&&(e={});return r.reduce((function(e,n){if(null==n)return e;for(var o in n){var r=e[o],i=n[o];if(e!==i){var u=void 0;if(s&&i&&(a(i)||(u=Array.isArray(i)))){var c=void 0;u?(u=!1,c=r&&Array.isArray(r)?r:[]):c=r&&a(r)?r:{},e[o]=t(s,c,i)}else void 0!==i&&(e[o]=i)}}return e}),e)};var r={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};function i(t,e){return null!=t&&{}.hasOwnProperty.call(t,e)}function a(t){if(!t||"object"!==function(t){if(null===t)return"null";switch(void 0===t?"undefined":o(t)){case"object":case"function":return r[Object.prototype.toString(t)]||"object"}return void 0===t?"undefined":o(t)}(t)||t.nodeType||null!=t&&t==t.window)return!1;if(t.constructor&&!i(t,"constructor")&&!i(t.constructor.prototype,"isPrototypeOf"))return!1;var e=void 0;for(e in t);return void 0===e||i(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(294),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.matchRules=[],this.getPageCustomData=function(){return[]},this.getCustomDataId=function(){}}return t.prototype.registerMatchRule=function(t){return this.matchRules.push(t),t},t.prototype.unRegisterMatchRule=function(t){var e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},t.prototype.get=function(t){for(var e=this.matchRules,n=i.default,o=e.length;o--;){var r=e[o];if("function"==typeof r){var a=r(t,n);if(a)return a}}return n},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(24);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return a.name="customRender",a.data=n,a.eUi=o,a.eHandler=r,a.customsRender=i,a}return i(e,t),e.prototype.init=function(){},e.prototype.redraw=function(){},e.prototype.active=function(){},e.prototype.unActive=function(){},e.prototype.destroy=function(){},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(296)),r=s(n(297)),i=n(31),a=s(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.undoStack=new o.default,this.redoStack=new o.default,this.beforeFn=null,this.afterFn=null,this.pdfViewer.eventEmitter.on(a.default.willCloseDocument,(function(){n.clear()})),this.addEventListener()}return t.prototype.addEventListener=function(){this.pdfViewer.getKeyboardEventBinder(i.VIEWER_BINDER)},t.prototype.removeEventListener=function(){},t.prototype.before=function(t){this.beforeFn=r.default.createRecord(t,"before")},t.prototype.after=function(t){this.afterFn=r.default.createRecord(t,"after"),this.remember(r.default.getUniqueId(t))},t.prototype.remember=function(t){this.beforeFn&&this.afterFn&&this.undoStack.push({before:this.beforeFn,after:this.afterFn,uniqueId:t})},t.prototype.removeById=function(t){this.undoStack.filter((function(e){return t!==e.uniqueId})),this.redoStack.filter((function(e){return t!==e.uniqueId}))},t.prototype.undo=function(){var t=this.undoStack.pop();t&&(this.redoStack.push(t),r.default.undo(t))},t.prototype.redo=function(){var t=this.redoStack.pop();t&&(this.undoStack.push(t),r.default.redo(t))},t.prototype.clear=function(){this.undoStack.clear(),this.redoStack.clear()},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stackArray=[]}return t.prototype.push=function(t){this.stackArray.push(t)},t.prototype.pop=function(){return this.stackArray.pop()},t.prototype.size=function(){return this.stackArray.length},t.prototype.clear=function(){this.stackArray=[]},t.prototype.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(298),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.undo=function(t){t.before()},t.redo=function(t){t.after()},t.createRecord=function(t,e){var n=t.method;return i.default[n](t,e)},t.getUniqueId=function(t){return t.host&&t.host.annot?t.host.annot.getId():null},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(8)),r=a(n(36)),i=n(0);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u={setContent:function(t){var e=t.method;return function(){t.host[e](t.content)}},setBorderColor:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot[o](t.color).then((function(){n.updateRender()}))}},setOpacity:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot[o](t.opacity).then((function(){n.updateRender()}))}},updateQuadPointsByCharIndex:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot[o](t.start,t.end).then((function(){n.isReplace?n.caretAnnot.moveRectByCharIndex(t.end).then((function(){n.getGroupRenders().map((function(t){t.active()}))})):n.active()}))}},setStyleFillColor:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o](t.fillColor)}},setFillColor:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o](t.fillColor)}},setBorderWidth:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o](t.borderWidth)}},setBorderStyle:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o](t.borderStyle.style,t.borderStyle.param)}},setCalloutLineEndingStyle:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot[o](+t.style).then((function(){n.activeRect(),n.redraw()}))}},setEndingStyle:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot[o](t.isBeginning,+t.style).then((function(){n.activeRect(),n.redraw()}))}},enableCaption:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o](t.enableCaption)}},setRotation:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o]((t.rotation+360)%360)}},setHighlightingMode:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){e.getAnnotRender(i,r).component.annot[o](t.mode)}},setRect:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot[o](t.rect).then((function(){n.active()}))}},eraseInk:function(t){t.host.pdfViewer;var e=t.host.annot;e.getUniqueID(),e.getPDFPage().getIndex()},updateLinePoints:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=(t.method,n.getUniqueID()),r=n.getPDFPage().getIndex(),i=[];return function(){var n=e.getAnnotRender(r,o).component;i.push(n.annot.setStartPoint(t.startPoint)),i.push(n.annot.setEndPoint(t.endPoint)),Promise.all(i).then((function(){n.active()}))}},setLeaderLineLength:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex(),a=t.leaderLinePoints,s=t.startPoint,u=t.endPoint,c=a.start,l=(a.end,Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2))),f=!0;return(u.x-s.x)*(c.y-u.y)-(c.x-u.x)*(u.y-s.y)>0&&(f=!1),f&&(l=-l),function(){var t=e.getAnnotRender(i,r).component;t.annot[o](l).then((function(){t.active()}))}},updateVertexes:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=t.method,r=n.getUniqueID(),i=n.getPDFPage().getIndex(),a=t.vertexes,s=t.index;return function(){var t=e.getAnnotRender(i,r).component;t.annot[o](s,a[s]).then((function(){t.active()}))}},removeAnnot:function(t,e){var n=t.host.pdfViewer,o=t.host.annot,r=o.getUniqueID(),i=o.getPDFPage(),a=i.getIndex(),s=void 0,u=void 0,l=o.getReplies&&o.getReplies()||[],f=[];return l.map((function(t){f.push({id:t.getId(),content:t.getContent(),createTime:new Date(t.getCreateDateTime()).getTime(),modifiedTime:new Date(t.getModifiedDateTime()).getTime()})})),o.isGrouped&&o.isGrouped()?(s=[],o.groupElements.map((function(t,e){s.push(new c(t).getJson()),t.isGroupHeader()&&(u=e)}))):s=new c(o).getJson(),"before"===e?"redact"===o.getType()?function(){i.markRedactAnnot(s.rects,s.name)}:o.isGrouped&&o.isGrouped()?function(){i.addAnnotGroup(s,u).then((function(){var t=n.getAnnotRender(a,r).component;f.length>0?d(t.annot).then((function(){t.getGroupRenders().map((function(t){t.active()}))})):t.active()}))}:function(){i.addAnnot(s).then((function(){var t=n.getAnnotRender(a,r).component;f.length>0?d(t.annot).then((function(){t.active()})):t.active()}))}:function(){var t=n.getAnnotRender(a,r).component;i.removeAnnot(t.annot)};function d(t){var e=[];return f.map((function(n){e.push(t.addReply(n.content).then((function(t){t.setUniqueID(n.id).then((function(){t.setCreateDateTime(n.createTime).then((function(){t.setModifiedDateTime(n.modifiedTime)}))}))})))})),Promise.all(e)}},addAnnot:function(t,e){var n=t.host.pdfViewer,o=t.host.annot,r=o.getUniqueID(),i=o.getPDFPage(),a=i.getIndex(),s=void 0,u=void 0;return o.isGrouped&&o.isGrouped()?(s=[],o.groupElements.map((function(t,e){s.push(new c(t).getJson()),t.isGroupHeader()&&(u=e)}))):s=new c(o).getJson(),"before"===e?function(){i.removeAnnot(o)}:o.isGrouped&&o.isGrouped()?function(){i.addAnnotGroup(s,u).then((function(){n.getAnnotRender(a,r).component.getGroupRenders().map((function(t){t.active()}))}))}:function(){i.addAnnot(s).then((function(){n.getAnnotRender(a,r).component.active()}))}},markRedactAnnot:function(t,e){var n=t.host.pdfViewer,o=t.host.annot,r=o.getUniqueID(),i=o.getPDFPage(),a=i.getIndex();return"before"===e?function(){i.removeAnnot(o)}:function(){var t=new c(o).getJson();i.markRedactAnnot(t.rects,t.name).then((function(){n.getAnnotRender(a,r).component.active()}))}},makeRedactByPages:function(t,e){var n=t.host;return"before"===e?function(){n.map((function(t){t.getPDFPage().removeAnnot(t)}))}:function(){n.map((function(t){t.getPDFPage().markRedactAnnot([t.info.rect],t.id)}))}},placeRedact:function(t,e){var n=t.host;return"before"===e?function(){n.map((function(t){t.getPDFPage().removeAnnot(t)}))}:function(){n.map((function(t){t.getPDFPage().markRedactAnnot([t.info.rect],t.id)}))}},eraser:function(t,e){var n=t.inkArray,o=t.host;return function(){n.map((function(t){o.getAnnotRender(t.annot.getId()).component.annot.setInkList(t.inkList)}))}},updateCalloutPoints:function(t){var e=t.host.pdfViewer,n=t.host.annot,o=(t.method,n.getUniqueID()),r=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(r,o).component;n.annot._setRect(t.rect,!1).then((function(){n.annot.setInnerRectNoAction(t.innerRect).then((function(){n.annot.setCalloutLinePoints(t.calloutLinePoints).then((function(){n.annot.update().then((function(){n.redraw(),n.active()}))}))}))}))}},addReply:function(t,e){var n=t.host,o=t.replyAnnot,r=(t.component,t.pdfViewer),i=n.getPDFPage(),a=i.getIndex(),s=n.getId(),u=o.getId(),c=o.getCreateDateTime(),l=o.getModifiedDateTime();return"before"===e?function(){i.removeAnnot(o)}:function(){r.getAnnotRender(a,s).component.annot.addReply(o.getContent()).then((function(t){t.setUniqueID(u).then((function(){t.setCreateDateTime(new Date(c).getTime()).then((function(){t.setModifiedDateTime(new Date(l).getTime())}))}))}))}},deleteReply:function(t,e){var n=t.host,o=t.replyAnnot,r=t.pdfViewer,i=n.getPDFPage(),a=i.getIndex(),s=o.getId(),u=n.getId(),c=o.getCreateDateTime(),l=o.getModifiedDateTime();return"before"===e?function(){r.getAnnotRender(a,u).component.annot.addReply(o.getContent()).then((function(t){t.setUniqueID(s).then((function(){t.setCreateDateTime(new Date(c).getTime()).then((function(){t.setModifiedDateTime(new Date(l).getTime())}))}))}))}:function(){i.removeAnnotById(s)}},addAction:function(t,e){var n=t.host.pdfViewer,o=t.host.annot,r=o.getUniqueID(),i=o.getPDFPage().getIndex(),a=o.getAction();return"before"===e?function(){o.removeAction()}:function(){!function(t,e){t.setAction(e.type).then((function(){var n=new l(e).toJson();return t.setActionData(n).then((function(){return function t(e,n){for(var o=n.subActionCount,r=[],i=function(o){r.push(e.insertSubAction(o,n.subAction[o].type).then((function(){var r=new l(n.subAction[o]).toJson(),i=e.getSubAction(o);return i.setActionData(r).then((function(){return t(i,n.subAction[o])}))})))},a=0;a<o;a++)i(a);return Promise.all(r)}(t.getAction(),e)}))}))}(n.getAnnotRender(i,r).component.annot,a.info)}}};e.default=u;var c=function(){function t(e){s(this,t);var n=(0,i.colorConvertor)(e.getBorderColor(),"#");switch(this.json={objNumber:e.info.objNumber,name:e.getUniqueID(),rect:e.getRect(),color:n,style:e.getBorderStyle(),contents:e.getContent(),date:new Date(e.getModifiedDateTime()).getTime(),type:e.getType(),flags:e.getFlags()},e instanceof o.default&&this.markup(e),e instanceof r.default&&this.textMarkup(e),e.getType()){case"ink":this.ink(e);break;case"fileattachment":this.fileattachment(e);break;case"polygon":this.polygon(e);break;case"polyline":this.polyline(e);break;case"stamp":this.stamp(e);break;case"freetext":this.freetext(e);break;case"screen":this.screen(e);break;case"line":this.line(e);break;case"redact":this.redact(e);break;case"highlight":this.highlight(e);break;case"link":this.link(e);break;case"square":this.square(e);break;case"circle":this.circle(e)}}return t.prototype.markup=function(t){this.json=Object.assign({intent:t.getIntent(),opacity:t.getOpacity(),subject:t.getSubject(),title:t.getTitle(),creationTimestamp:new Date(t.getCreateDateTime()).getTime()},this.json)},t.prototype.textMarkup=function(t){this.json=Object.assign({startCharIndex:t.getStartCharIndex(),endCharIndex:t.getEndCharIndex(),coords:t.getQuadPoints()},this.json)},t.prototype.ink=function(t){this.json=Object.assign({inkList:t.getInkList(),borderWidth:t.getBorderWidth()},this.json)},t.prototype.fileattachment=function(t){this.json=Object.assign({fObjNum:t.info.fObjNum},this.json)},t.prototype.polygon=function(t){this.json=Object.assign(this.json,{vertexes:t.getVertexes(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,fillColor:t.info.fillColor,style:void 0,borderWidth:t.getBorderWidth()})},t.prototype.polyline=function(t){this.json=Object.assign(this.json,{vertexes:t.getVertexes(),fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,startStyle:t.getStartStyle(),endStyle:t.getEndingStyle()})},t.prototype.stamp=function(t){this.json=Object.assign({icon:t.info.icon,rotate:(t.getRotation()+360)%360,apObjeNum:t.info.apObjeNum},this.json)},t.prototype.freetext=function(t){this.json=Object.assign(this.json,{calloutLinePoints:t.getCalloutLinePoints(),innerRect:t.getInnerRect(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,"interior-color":t.getFillColor(),borderWidth:t.getBorderWidth(),calloutLineEndingStyle:t.getCalloutLineEndingStyle()})},t.prototype.line=function(t){var e=t.getMeasureRatio(),n=t.getMeasureUnit(),o=null;e&&n&&(o={unit:n,ratio:e});var r=t.getStartPoint(),i=t.getEndPoint();this.json=Object.assign(this.json,{startStyle:t.getStartStyle(),endStyle:t.getEndingStyle(),enableCaption:t.hasCaption(),startPoint:{x:r.x,y:r.y},endPoint:{x:i.x,y:i.y},measure:o,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},t.prototype.screen=function(t){this.json=Object.assign({apObjNum:t.info.apObjNum,opacity:t.getOpacity(),rotate:{0:0,90:1,180:2,270:3}[t.getRotation()],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,borderWidth:t.getBorderWidth()},this.json)},t.prototype.redact=function(t){var e=t.info.quadPoints,n=[];e.length>0?e.map((function(t){n.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):n.push(t.info.rect),this.json=Object.assign({rects:n},this.json)},t.prototype.highlight=function(t){t.info.isArea&&(this.json=Object.assign(this.json,{coords:[t.getRect()],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},t.prototype.link=function(t){this.json=Object.assign(this.json,{aObjNum:t.info.aObjNum,borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,borderWidth:t.getBorderWidth()})},t.prototype.circle=function(t){this.json=Object.assign(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},t.prototype.square=function(t){this.json=Object.assign(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},t.prototype.getJson=function(){return this.json},t}();var l=function(){function t(e){s(this,t),this.action=e,this.json={},this[e.type]()}return t.prototype.TypeGoto=function(){var t=this.action.destination;this.json=Object.assign(t,{type:t.zoomMode})},t.prototype.TypeURI=function(){var t=this.action.uri;this.json=Object.assign({},{uri:t})},t.prototype.TypeJavaScript=function(){var t=this.action.javascript;this.json=Object.assign({},{script:t})},t.prototype.TypeNamed=function(){var t=this.action.name;this.json=Object.assign({},{name:t})},t.prototype.TypeHide=function(){var t=this.action,e=t.fieldNames,n=t.hideState;this.json=Object.assign({},{fieldNames:e,hideState:n})},t.prototype.TypeSubmitForm=function(){var t=this.action,e=t.flags,n=t.url,o=t.fieldNames;this.json=Object.assign({},{flags:e,url:n,fieldNames:o})},t.prototype.TypeResetForm=function(){var t=this.action,e=t.flags,n=t.fieldNames;this.json=Object.assign({},{flags:e,fieldNames:n})},t.prototype.TypeGoToR=function(){var t=this.action,e=t.destinationName,n=t.destination;this.json=Object.assign({},{destinationName:e,destination:n})},t.prototype.toJson=function(){return this.json},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.left=e,this.bottom=n,this.right=o,this.top=r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(301)),r=a(n(302));n(303);var i=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.a4Width=794,this.a4Height=1123,this.printDom=(0,i.default)("<div id='print-dom'></div>"),this.total=0}return t.prototype.setTotal=function(t){this.total=t},t.prototype.getScale=function(t,e){return Math.min(this.a4Width/t,this.a4Height/e)},t.prototype.createPagePrintHtml=function(t){this.printDom.append("<div style='width:100%;height:100%;page-break-after:always;' data-index="+t+"><img style='max-width:100%;max-height:100%;'/></div>")},t.prototype.insertImageByIndex=function(t,e){this.printDom.find("[data-index="+t+"] img").prop({src:e})},t.prototype.print=function(){var t=new o.default(this.printDom[0]);t.getHead=function(){return"<style>*{margin: 0;padding: 0;}</style>"},t.print(),this.out()},t.prototype.out=function(){this.printDom.empty()},t.prototype.showProcess=function(){var t=this.pdfViewer.i18n.t("viewer_:dialog.printProcess");this.$process=(0,i.default)((0,r.default)({title:t})),this.$process.find(".fv__ui-print-process-total").html(this.total),(0,i.default)(document.body).append(this.$process)},t.prototype.updateProcess=function(t){this.$process.find(".fv__ui-print-process-current").html(t),this.$process.find(".fv__ui-print-process-percent").css({width:t/this.total*100+"%"})},t.prototype.hideProcess=function(){this.$process.remove()},t}();e.default=s},function(t,e,n){t.exports=function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var e=function(){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.counter=0,this.modes={iframe:"iframe",popup:"popup"},this.standards={strict:"strict",loose:"loose",html5:"html5"};var o={mode:this.modes.iframe,standard:this.standards.html5,popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!0,extraCss:"",extraHead:"",retainAttr:["id","class","style"]};this.settings=Object.assign({},o,n),this.idPrefix="printArea_",this.ele=1===t.nodeType?t:document.querySelector(t)}var n,o,r;return n=e,(o=[{key:"print",value:function(){var t=this;this.counter++;for(var e=document.querySelectorAll("[id^="+this.idPrefix+"]");e.length;)e[0].parentNode.removeChild(e[0]),e=document.querySelectorAll("[id^="+this.idPrefix+"]");this.settings.id=this.idPrefix+this.counter;var n=this.getPrintWindow();this.write(n.doc,this.ele),setTimeout((function(){t.windowPrint(n)}),1e3)}},{key:"windowPrint",value:function(t){var e=t.win;e.focus(),e.print(),this.settings.mode===this.modes.popup&&this.settings.popClose&&setTimeout((function(){e.close()}),1e3)}},{key:"write",value:function(t,e){t.open(),t.write(this.docType()+"<html>"+this.getHead()+this.getBody(e)+"</html>"),t.close()}},{key:"docType",value:function(){return this.settings.mode===this.modes.iframe?"":this.settings.standard===this.standards.html5?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+(this.settings.standard===this.standards.loose?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+(this.settings.standard===this.standards.loose?"loose":"strict")+'.dtd">'}},{key:"getHead",value:function(){var t="";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,(function(e){t+=e}));var e=document.querySelectorAll("link");return e=Array.from(e).filter((function(t){var e=t.getAttribute("rel");return e&&"stylesheet"===e.toLowerCase()})).filter((function(t){var e=t.getAttribute("media");return!e||"print"===e.toLowerCase()||"all"===e.toLowerCase()})).map((function(t){var e=t.getAttribute("href");return'<link type="text/css" rel="stylesheet" href="'.concat(e,'" >')})),this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,(function(e){t+='<link type="text/css" rel="stylesheet" href="'+e+'">'})),"<head><title>"+this.settings.popTitle+"</title>"+t+e.join()+"</head>"}},{key:"getBody",value:function(t){var e="",n=this.settings.retainAttr,o=this.getFormData(t),r="";return n.forEach((function(t){var e=o.getAttribute(t);e&&(r+=(r.length>0?" ":"")+t+"='"+e+"'")})),"<body>"+(e+="<div "+r+">"+o.innerHTML+"</div>")+"</body>"}},{key:"getFormData",value:function(t){var e=t.cloneNode(!0),n=e.querySelectorAll("input,select,textarea");return Array.from(t.querySelectorAll("input,select,textarea")).forEach((function(t,e){var o=t.getAttribute("type");if(!o){var r=t.nodeName;o="SELECT"===r?"select":"TEXTAREA"===r?"textarea":""}var i=n[e];if("radio"===o||"checkbox"===o)i.removeAttribute("checked"),t.checked&&i.setAttribute("checked",!0);else if("text"===o||""===o)i.setAttribute("value",t.textContent);else if("select"===o){var a=t.querySelectorAll("option"),s=i.querySelectorAll("option");Array.from(a).forEach((function(t,e){s[e].removeAttribute("selected"),t.selected&&s[e].setAttribute("selected",!0)}))}else"textarea"===o&&(i.textContent=t.value)})),e}},{key:"getPrintWindow",value:function(){switch(this.settings.mode){case this.modes.iframe:var t=this.Iframe();return{win:t.contentWindow||t,doc:t.doc};case this.modes.popup:var e=this.Popup();return{win:e,doc:e.doc}}}},{key:"Iframe",value:function(){var t,e=this.settings.id;try{t=document.createElement("iframe"),document.body.appendChild(t),t.setAttribute("style","border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;"),t.setAttribute("id",e),t.setAttribute("src","#"+(new Date).getTime()),t.doc=null,t.doc=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:t.document}catch(t){throw t+". iframes may not be supported in this browser."}if(null==t.doc)throw"Cannot find document.";return t}},{key:"Popup",value:function(){var t="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";t+=",width="+this.settings.popWd+",height="+this.settings.popHt,t+=",resizable=yes,screenX="+this.settings.popX+",screenY="+this.settings.popY+",personalbar=no,scrollbars=yes";var e=window.open("","_blank",t);return e.doc=e.document,e}}])&&t(n.prototype,o),r&&t(n,r),e}();return window.PrintArea=e,e}()},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__ui-print-process">\n    <div class="fv__ui-print-process-title">',e+=(0,o.$escape)(t.title),e+='</div>\n    <div class="fv__ui-print-process-digital-progress"><span class="fv__ui-print-process-current">0</span>/<span class="fv__ui-print-process-total">0</span></div>\n    <div class="fv__ui-print-process-bar">\n        <div class="fv__ui-print-process-percent"></div>\n    </div>\n</div>'}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(39),i=(o=r)&&o.__esModule?o:{default:o};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.show=function(){(0,i.default)()},t.prototype.hide=function(){(0,i.default)()},t.prototype.destroy=function(){(0,i.default)()},t}();e.default=a},function(t,e,n){var o=n(5);t.exports=function(t){"use strict";t=t||{};var e="",n=o.$each,r=t.actions,i=(t.$value,t.$index,o.$escape);return e+='<div class="fv__selection-tool-tip-container">\n    \x3c!--<div class="fv__selection-tool-tip-items-container">--\x3e\n        <div class="fv__selection-tool-tip-items">\n            ',n(r,(function(t,n){e+='\n            <div class="fv__selection-tool-tip-item ',e+=i(t.iconClass),e+='" action="',e+=i(t.name),e+='"></div>\n            '})),e+="\n        </div>\n    \x3c!--</div>--\x3e\n</div>"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var o,r=n(12),i=(o=r)&&o.__esModule?o:{default:o};e.Store=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__data={},this.subscribers={},this.reducers=[]}return t.prototype.getCurrentValue=function(t){var e=this,n=this.__data[t];return this.reducers.reduce((function(n,o){return o.call(e,n,t)}),n)},t.prototype.dispatch=function(t,e){var n=this;this.__data[t]=e;var o=this.subscribers[t]||[],r=this.getCurrentValue(t);o.forEach((function(e){e.call(n,r,t)}))},t.prototype.subscribe=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.default,o=this.subscribers[t]||(this.subscribers[t]=[]);o.push(n),t in this.__data&&Promise.resolve().then((function(o){n.call(e,e.getCurrentValue(t),t)}));var r=!1,a=void 0;return function(){if(r)return a;r=!0;var t=o.indexOf(n);return a=t>-1&&o.splice(t,1).length>0}},t.prototype.reducer=function(t){var e=this;return"function"!=typeof t?i.default:(this.reducers.push(t),function(){var n=e.reducers.indexOf(t);return n>-1&&e.reducers.splice(n,1).length>0})},t}()},function(t,e,n){"use strict";window.console&&console.info("af8c981 @publish/7_2_0")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={cipherNone:0,cipherRC4:1,cipherAES:2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={success:0,file:1,format:2,password:3,handle:4,certificate:5,unknown:6,invalidLicense:7,param:8,unsupported:9,outOfMemory:10,securityHandler:11,notParsed:12,notFound:13,invalidType:14,conflict:15,unknownState:16,dataNotReady:17,invalidData:18,xFALoadError:19,notLoaded:20,invalidState:21,notCDRM:22,canNotConnectToServer:23,invalidUserToken:24,noRights:25,rightsExpired:26,deviceLimitation:27,canNotRemoveSecurityFromServer:28,canNotGetACL:29,canNotSetACL:30,isAlreadyCPDF:31,isAlreadyCDRM:32,canNotUploadDocInfo:33,canNotUploadCDRMInfo:34,invalidWrapper:35,canNotGetClientID:36,canNotGetUserToken:37,invalidACL:38,invalidClientID:39}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Additional_Permission={download:1},e.Font_Style={normal:0,italic:1,bold:2},e.Border_Style={solid:0,dashed:1,underline:2,beveled:3,inset:4,cloudy:5},e.FileAttachment_Icon={graph:"Graph",pushPin:"PushPin",paperclip:"Paperclip",tag:"Tag"},e.Note_Icon={Check:"Check",Circle:"Circle",Comment:"Comment",Cross:"Cross",Help:"Help",Insert:"Insert",Key:"Key",NewParagraph:"NewParagraph",Note:"Note",Paragraph:"Paragraph",RightArrow:"RightArrow",RightPointer:"RightPointer",Star:"Star",UpArrow:"UpArrow",UpLeftArrow:"UpLeftArrow"},e.Ending_Style={None:0,Square:1,Circle:2,Diamond:3,OpenArrow:4,ClosedArrow:5,Butt:6,ReverseOpenArrow:7,ReverseClosedArrow:8,Slash:9},e.Alignment={left:0,center:1,right:2},e.Point_Type={moveTo:1,lineTo:2,lineToCloseFigure:3,bezierTo:4,bezierToCloseFigure:5},e.Action_Type={goto:"TypeGoto",launch:"TypeLaunch",uri:"TypeURI",named:"TypeNamed",submitForm:"TypeSubmitForm",resetForm:"TypeResetForm",javaScript:"TypeJavaScript",importData:"TypeImportData"},e.Highlight_Mode={none:0,invert:1,outline:2,push:3,toggle:4},e.Relationship={firstChild:0,lastChild:1,previousSibling:2,nextSibling:3,firstSibling:4,lastSibling:5},e.File_Type={fdf:0,xfdf:1,xml:2},e.Flatten_Option={all:0,field:1,annot:2},e.Position={topLeft:"TopLeft",topCenter:"TopCenter",topRight:"TopRight",centerLeft:"CenterLeft",center:"Center",centerRight:"CenterRight",bottomLeft:"BottomLeft",bottomCenter:"BottomCenter",bottomRight:"BottomRight"},e.Watermark_Flag={asContent:0,asAnnot:1,onTop:2,unprintable:4,display:8},e.Standard_Font={courier:0,courierBold:1,courierBoldOblique:2,courierOblique:3,helvetica:4,helveticaBold:5,helveticaBoldOblique:6,helveticaOblique:7,timesRoman:8,timesBold:9,timesBoldItalic:10,timesItalic:11,symbol:12,zapfDingbats:13},e.Rotation={rotation0:0,rotation1:1,rotation2:2,rotation3:3},e.Rotation_Degree={rotation0:0,rotation90:90,rotation180:180,rotation270:270},e.Search_Flag={caseSensitive:1,wholeWord:2,consecutively:4},e.Saving_Flag={normal:0,incremental:1,noOriginal:2,XRefStream:8,linearized:4096,removeRedundantObjects:16},e.Range_Filter={all:0,even:1,odd:2},e.Rendering_Content={page:"page",annot:"annot"},e.Rendering_Usage={print:"print",view:"view"},e.date_Format={MSlashD:0,MSlashDSlashYY:1,MSlashDSlashYYYY:2,MMSlashDDSlashYY:3,MMSlashDDSlashYYYY:4,DSlashMSlashYY:5,DSlashMSlashYYYY:6,DDSlashMMSlashYY:7,DDSlashMMSlashYYYY:8,MMSlashYY:9,MMSlashYYYY:10,MDotDDotYY:11,MDotDDotYYYY:12,MMDotDDDotYY:13,MMDotDDDotYYYY:14,MMDotYY:15,DDotMDotYYYY:16,DDDotMMDotYY:17,DDDotMMDotYYYY:18,YYHyphenMMHyphenDD:19,YYYYHyphenMMHyphenDD:20},e.page_Number_Format={default:0,numberOfCount:1,numberSlashCount:2,pageNumber:3,pageNumberOfCount:4},e.Font_Descriptor_Flags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144}},function(t,e){t.exports=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(313)),r=i(n(360));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return i.api=new r.default(n),i}return a(e,t),e.prototype.registerSecurityCallback=function(t,e){return this.api.registerSecurityCallback(t,e)},e.prototype.setFontMap=function(t){return this.api.setFontMap(t)},e.prototype.setWatermarkFontMap=function(t){return this.api.setWatermarkFontMap(t)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n(135)),r=c(n(136)),i=c(n(334)),a=c(n(139)),s=c(n(355)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(140));c(n(359));function c(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=new o.default(e),this.annotManager=new i.default,this.actionFactory=a.default,this.graphicsObjectManager=new s.default(this),this.eventEmitter=n,this.userName=null,this.defaultAnnotConfig=function(){}}return t.prototype.init=function(){return this.api.init().catch((function(t){return Promise.reject(t.error)}))},t.prototype.setIcons=function(t){return this.api.setIcons(t)},t.prototype.addIcon=function(t){return this.api.addIcon(t)},t.prototype.removeIcon=function(t,e,n){return this.api.removeIcon(t,e,n)},t.prototype.getPDFDocByFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.fileName=n.fileName||t.name||"",this.api.getPDFDocIdByFile(t).then((function(t){return new r.default(t,e,n)}))},t.prototype.createNewDoc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled.pdf",e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{height:842,width:595};return this.api.createNewDoc(t,n,o).then((function(n){return new r.default(n,e,{fileName:t})}))},t.prototype.getPDFDocByChunk=function(t,e,n){var o=this;return this.api.getPDFDocIdByChunk(t,e).then((function(t){return new r.default(t,o,n)}))},t.prototype.getPDFDocByHttpRangeRequest=function(t,e){var n=this;return this.api.getPDFDocIdByHttpRangeRequest(t).then((function(t){return new r.default(t,n,e)}))},t.prototype.getPDFDocByArrayBuffer=function(t,e){var n=this;return this.api.getPDFDocIdByArrayBuffer(t).then((function(t){return new r.default(t,n,e)}))},t.prototype.getPDFDocById=function(t,e){return Promise.resolve(new r.default(t,this,e))},t.prototype.setUserName=function(t){var e=this;return this.api.setUserName(t).then((function(n){e.userName=t}))},t.prototype.getUserName=function(){var t=this;return this.userName?Promise.resolve(this.userName):this.api.getUserName().then((function(e){return t.userName=e,e}))},t.prototype.setDynamicInfoFormula=function(t,e){return this.api.setDynamicInfoFormula(t,e)},t.prototype.getUtils=function(){return u},t.prototype.getDefaultAnnotConfig=function(){return this.defaultAnnotConfig},t.prototype.setDefaultAnnotConfig=function(t){this.defaultAnnotConfig=t},t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(6),i=f(n(77)),a=f(n(3)),s=f(n(137)),u=(f(n(138)),f(n(8))),c=f(n(23)),l=f(n(10));function f(t){return t&&t.__esModule?t:{default:t}}function d(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.info=e,this.doc=n,this.engine=n.engine,this.api=n.api,this._pxWdith=(0,r.pt2px)(this.getWidth()),this._pxHeight=(0,r.pt2px)(this.getHeight()),this.annots=[],this.annotIdMap={},this.info.AA[0]&&(this.openAction=this.engine.actionFactory.createAction(this.info.AA[0],n,this.api,this.engine.eventEmitter,this)),this.info.AA[1]&&(this.closeAction=this.engine.actionFactory.createAction(this.info.AA[1],n,this.api,this.engine.eventEmitter,this))}return t.prototype.getAction=function(t){return"open"==t?this.openAction:this.closeAction},t.prototype.getId=function(){return this.info.id},t.prototype.getInfo=function(){return this.info},t.prototype.getPDFDoc=function(){return this.doc},t.prototype.getIndex=function(){return this.info.index},t.prototype.getWidth=function(){return this.info.width},t.prototype.getHeight=function(){return this.info.height},t.prototype.updateInfo=function(){var t=this;return this.api.updatePageInfo(this.getPDFDoc().getId(),this.getId()).then((function(e){t.info=e,t.doc.updatePageSize(e.index,t.getWidth(),t.getHeight()),t._pxWdith=(0,r.pt2px)(t.getWidth()),t._pxHeight=(0,r.pt2px)(t.getHeight()),t.engine.eventEmitter.emit(a.default.pageInfoChange,t)}))},t.prototype.getRotation=function(){return this.info.rotation},t.prototype.setRotation=function(t){var e=this;if(!this.doc.checkPermission(l.default.assemble))throw new Error("Permission error");var n=this.getRotation();return t===n?Promise.resolve():this.api.setPageRotation(this.getPDFDoc().getId(),this.getId(),t).then((function(t){return Promise.all([t,e.updateInfo()])})).then((function(t){var r=o(t,1)[0];e.engine.eventEmitter.emit(a.default.pageRotationChange,e,r,n)}),(function(){return Promise.reject()}))},t.prototype.getRotationAngle=function(){var t=this.getRotation();if(4===t)throw"unknown rotation angle";return 90*t},t.prototype.getPxWidth=function(){return this._pxWdith},t.prototype.getPxHeight=function(){return this._pxHeight},t.prototype.getPDFMatrix=function(){return new i.default(this.info.matrix)},t.prototype.getDeviceMatrix=function(){var t=this.getPDFMatrix();t.translate(0,-this.getHeight());var e=(0,r.pt2px)(1);return t.scale(e,-e),t},t.prototype.getDeviceMatrix2=function(){var t=this.getPDFMatrix(),e=this.getRotation(),n=(0,r.pt2px)(1);switch(e%4){case 0:t.translate(0,-this.getHeight()),t.scale(n,-n);break;case 1:t.scale(-n,n),t.rotate(Math.PI/2);break;case 2:t.translate(-this.getWidth(),0),t.scale(-n,n);break;case 3:t.translate(this.getWidth(),this.getHeight()),t.rotate(Math.PI/2),t.scale(n,-n)}return t},t.prototype.getDevicePoint=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getDeviceMatrix();return n.scale(e,e),n.transformPoint(t[0],t[1])},t.prototype.getDeviceRect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],this.getDeviceMatrix());n.scale(e,e);var o=n.transformRect(t.left,t.top,t.right,t.bottom);return{left:o[0],top:o[1],right:o[2],bottom:o[3]}},t.prototype.reverseDevicePoint=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getDeviceMatrix();return n.scale(e,e),n.setReverse(),n.transformPoint(t[0],t[1])},t.prototype.reverseDeviceOffset=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getDeviceMatrix();return n.e=n.f=0,n.scale(e,e),n.setReverse(),n.transformPoint(t[0],t[1])},t.prototype.reverseDeviceRect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getDeviceMatrix();n.scale(e,e),n.setReverse();var o=n.transformRect(t.left,t.top,t.right,t.bottom);return{left:o[0],top:o[3],right:o[2],bottom:o[1]}},t.prototype.render=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["page"],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"view";if(!this.doc.checkPermission(l.default.print||l.default.printHigh))throw new Error("Permission error");if(t*=4/3,-1==o.indexOf("page")&&o.push("page"),"view"!=r&&"print"!=r)throw new Error("Param error: usage should be one of 'view', 'print'. Got '"+r+"' instead.");return this.getPageBitmap(t,e,n,o,r)},t.prototype.getPageBitmap=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["page"],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"view";return this.api.getPageBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,o,r)},t.prototype.getPageAndHighlightBitmap=function(t,e,n,o){return this.api.getPageAndHighlightBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,o)},t.prototype.getAnnotBitmap=function(t,e,n,o){return this.api.getAnnotBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,o)},t.prototype.getAnnotBitmapByRange=function(t,e,n,o){return this.api.getAnnotBitmapByRange(this.getPDFDoc().getId(),this.getId(),t,e,n,o)},t.prototype.getAnnotCount=function(){return this.info.annotCount},t.prototype.getAnnots=function(){var t=this,e=Object.keys(this.annotIdMap);return e.length?Promise.resolve(e.map((function(e){return t.annotIdMap[e]}))):this.annotsPromise=this.annotsPromise||this.api.getAnnots(this.getPDFDoc().getId(),this.getId()).then((function(e){return e.map((function(e){return t.engine.annotManager.get(e,t)}))})).then((function(e){t.annotIdMap=e.reduce((function(t,e,n){return t[e.getId()]=e,t}),t.annotIdMap);var n=e.map((function(e){return e.reviseSummary((function(e){return t.annotIdMap[e]}))}));return Promise.all(n).then((function(){return t.annots=e,t.annotsPromise=null,t.annots}))}))},t.prototype.getMarkupAnnots=function(){var t=!0===arguments[0];return this.getAnnots().then((function(t){return e(t)}));function e(e){e=e.filter((function(t){return t.isMarkup()&&!t.isDeleted()&&!("popup"===t.getType())&&!function(t){return"widget"===t}(t.getType())&&t.getReplies&&(!t.isStateAnnot||!t.isStateAnnot())}));var n=[],o=[];e.forEach((function(t){var e=t.getReplies();n.push.apply(n,d(e)),n.forEach((function t(e){if(!e&&e.getReplies){var o=e.getReplies();n.push.apply(n,d(o)),o.forEach(t)}})),o.push.apply(o,d(t.getReviewStates())),o.push.apply(o,d(t.getMarkedStates()))}));var r=e.filter((function(t){return-1===n.indexOf(t)&&-1===o.indexOf(t)}));return t?r.reduce((function(t,e){var n=e.getGroupHeader&&e.getGroupHeader()||e;return-1===t.indexOf(n)&&t.push(n),t}),[]):(r.forEach((function(t){"Replace"===t.getIntent()&&t.groupElements.forEach((function(e){if(e!==t){var n=r.indexOf(e);n>-1&&r.splice(n,1)}}))})),r)}},t.prototype.filterAnnot=function(t,e){for(var n=!t,o=0;o<this.annots.length;o++){var r=this.annots[o];if(n&&r.getType()==e)return r;r.info.objectNumber==t&&(n=!0)}return null},t.prototype.getAnnotTree=function(){var t=this,e=!0===arguments[0];return this.getMarkupAnnots(e).then((function(e){return t.getAnnots().then((function(t){var n=t.filter((function(t){return!t.isMarkup()&&!t.isDeleted()&&"popup"!==t.info.type}));return e.concat(n).sort((function(e,n){return t.indexOf(e)-t.indexOf(n)}))}))}))},t.prototype.getAnnotIdAtDevicePoint=function(t,e,n){return this.api.getAnnotIdAtDevicePoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e,n)},t.prototype.getCharInfoAtPoint=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.doc.checkPermission(l.default.extract||l.default.extractAccess))throw new Error("Permission error");return this.api.getCharInfoAtPoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e)},t.prototype.removeAnnot=function(t){return this.removeAnnotById(t.getId())},t.prototype.removeAnnotById=function(t){var e=this;if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");return this.getAnnots().then((function(n){return e.api.removeAnnot(e.getPDFDoc().getId(),e.getId(),t)})).then((function(t){return e.clearRelatives(t),e.clearAnnotIds(t)})).then((function(t){return e.engine.eventEmitter.emit(a.default.annotationRemoved,t,e),t}))},t.prototype.changeAnnotId=function(t,e){t in this.annotIdMap&&(this.annotIdMap[e]=this.annotIdMap[t],delete this.annotIdMap[t])},t.prototype.removeAllAnnot=function(){var t=this;if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");var e=void 0;return this.getAnnots().then((function(n){return e=Object.keys(t.annotIdMap),t.api.removePageAllAnnot(t.getPDFDoc().getId(),t.getId())})).then((function(){return t.clearRelatives(e),t.clearAnnotIds(e)})).then((function(e){return t.engine.eventEmitter.emit(a.default.annotationRemoved,e,t),e}))},t.prototype.getThumb=function(){var t=this.getPDFDoc().getId(),e=this.getId();return this.api.getThumb(t,e)},t.prototype.clearRelatives=function(t){if(Array.isArray(t)&&t){var e=t.slice(0);this.getAnnots().then((function(t){t.some((function(t){return t instanceof u.default&&0==(e=t.removeRepliesByIdLocaly(e)).length}))}))}},t.prototype.clearAnnotIds=function(t){for(var e=[],n=this.annotIdMap,o=this.info,r=t.length;r--;){var i=t[r];e[r]=n[i],e[r]&&(e[r].info.isDeleted=!0),delete n[i],o.annotCount--}return e},t.prototype.addReplyAnnot=function(t){if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");return this.addAddonAnnot(t)},t.prototype.addAddonAnnot=function(t){var e=this,n=t.getId();return this.info.annotCount++,this.annotIdMap[n]=t,t.reviseSummary((function(t){return e.annotIdMap[t]}))},t.prototype.removeAddonAnnotById=function(t){return!!this.annotIdMap[t]&&(this.info.annotCount-=1,delete this.annotIdMap[t])},t.prototype.addAnnot=function(t){var e=this;if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");var n=t.iconInfo;if(n&&!h(n.name))throw new Error("Only Latin alpha is available.");var o=this.getPDFDoc().getId(),r=this.getId(),i=this.engine.getDefaultAnnotConfig()(t.type,t.intent);return t=Object.assign({},i,t),this.api.addAnnot(o,r,t).then((function(t){return e._doAfterAddAnnots(t)}),(function(t){var e=(0,c.default)();return e.reject(t),e.promise}))},t.prototype.markRedactAnnot=function(t,e){var n=this;if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");var o=this.getPDFDoc().getId(),r=this.getId();return this.api.markRedactAnnot(o,r,t,e).then((function(t){return n._doAfterAddAnnots(t)}))},t.prototype.addAnnotGroup=function(t,e){var n=this;if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");var o=this.getPDFDoc().getId(),r=this.getId();return this.api.addAnnotGroup(o,r,t,e).then((function(t){return n._doAfterAddAnnots(t)}))},t.prototype._doAfterAddAnnots=function(t){var e=this,n=t.map((function(t){return t&&e.engine.annotManager.get(t,e)}));n.reduce((function(t,e){return t[e.getId()]=e,t}),this.annotIdMap);var o=n.map((function(t){return t.reviseSummary((function(t){return e.annotIdMap[t]}))}));return Promise.all(o).then((function(){return e.engine.eventEmitter.emit(a.default.annotationAdd,n,e),n}))},t.prototype.getUnloadedAnnots=function(){var t=this,e=this.getPDFDoc().getId(),n=this.getId();return this.api.getPageAnnotIDList(e,n).then((function(o){var r=o.filter((function(e){return!t.annotIdMap[e]}));return t.api.getAnnots(e,n,r).then((function(e){return e.map((function(e){return e?t.engine.annotManager.get(e,t):null}))})).then((function(e){var n=e.reduce((function(t,e){return t[e.getId()]=e,t}),{});return t.annotIdMap=o.reduce((function(e,o){return e[o]=t.annotIdMap[o]||n[o],e}),{}),Promise.all(Object.keys(t.annotIdMap).map((function(e){return t.annotIdMap[e].update()}))).then((function(t){return e}))})).then((function(e){var n=t.annots.map((function(e){return e.reviseSummary((function(e){return t.annotIdMap[e]}))}));return n=n.concat(e.map((function(e){return e?e.reviseSummary((function(e){return t.annotIdMap[e]})):Promise.resolve()}))),Promise.all(n)}))}))},t.prototype.getTextRectsAtRect=function(t){return this.api.getTextRectsAtRect(this.getPDFDoc().getId(),this.getId(),t)},t.prototype.getTextContinuousRectsAtRect=function(t){return this.api.getTextContinuousRectsAtRect(this.getPDFDoc().getId(),this.getId(),t)},t.prototype.getTextContinuousRectsAtPoints=function(t,e,n,o,r){return this.api.getTextContinuousRectsAtPoints(this.getPDFDoc().getId(),this.getId(),t,e,n,o,r)},t.prototype.getTextContinuousCharsAtRect=function(t){return this.api.getTextContinuousCharsAtRect(this.getPDFDoc().getId(),this.getId(),t)},t.prototype.getTextSearch=function(t,e){var n=this;return this.api.getTextSearch(this.getPDFDoc().getId(),this.getId(),t,e).then((function(t){return new s.default(t,n)}))},t.prototype.destroy=function(){return this.api.destroyPage(this.getPDFDoc().getId(),this.getId())},t.prototype.getAnnotsByIdArray=function(t){var e=this;return this.getAnnots().then((function(){for(var n=e.annotIdMap,o=[],r=0,i=t.length;r<i;r++){var a;(a=n[t[r]])&&o.push(a)}return o}))},t.prototype.flatten=function(t){var e=this,n=this.doc;if(!(n.checkPermission(l.default.annotForm)&&n.checkPermission(l.default.modify)&&n.checkPermission(l.default.assemble)))throw new Error("Permission error");return this.api.flatten(this.getPDFDoc().getId(),this.getId(),t).then((function(t){e.annotIdMap={};var o=void 0;return(o=e.doc.getPDFForm())&&o.reduceControl(e.getIndex()),e.engine.eventEmitter.emit(a.default.flattened,e.getIndex()),e.engine.eventEmitter.emit(a.default.docModified,n),t}))},t.prototype.addImage=function(t,e){var n=this;if(!this.doc.checkPermission(8))throw new Error("Permission error");var o={x:e.left,y:e.bottom},r=e.right-e.left,i=e.top-e.bottom;return this.api.addPageImage(this.getPDFDoc().getId(),this.getId(),t,o,r,i).then((function(t){return t&&n.engine.eventEmitter.emit(a.default.imageAdded,n),t}))},t.prototype.addWatermark=function(t){var e=this;if(!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");return this.api.addWatermark(this.getPDFDoc().getId(),this.getId(),t).then((function(t){if(t)if(t.typeInEngine&&"AnnotType_e_Watermark"===t.typeInEngine){var n=[].concat(e.engine.annotManager.get(t,e));e.engine.eventEmitter.emit(a.default.annotationAdd,n,e),e.engine.eventEmitter.emit(a.default.watermarkAdded,e)}else e.engine.eventEmitter.emit(a.default.watermarkAdded,e);return t}))},t.prototype.getGraphicsObjectAtPoint=function(t,e,n){var o=this;return this.api.getGraphicsObjectAtPoint(this.getPDFDoc().getId(),this.getId(),t,e,n).then((function(t){return o.engine.graphicsObjectManager.get(t,o)}))},t.prototype.setGraphicsObjectMatrix=function(t){var e=this;if(!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");return this.api.setGraphicsObjectMatrix(this.getPDFDoc().getId(),t).then((function(t){e.engine.eventEmitter.emit(a.default.graphicsUpdated,e)}))},t.prototype.addGraphicsObject=function(t){var e=this;if(!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");return this.api.addGraphicsObject(this.getPDFDoc().getId(),this.getId(),t).then((function(t){return e.engine.eventEmitter.emit(a.default.graphicsUpdated,e),e.engine.graphicsObjectManager.get(t,e)}))},t.prototype.pasteAnnot=function(t,e){var n=this;if(!this.doc.checkPermission(l.default.annotForm))throw new Error("Permission error");var o=this.getPDFDoc().getId(),r=this.getId();return this.api.paste(o,r,t.getPage().getId(),"annot",t.getId(),e).then((function(t){return n._doAfterAddAnnots(t)}),(function(t){var e=(0,c.default)();return e.reject(t),e.promise}))},t.prototype.pasteGraphicObject=function(t,e,n){var o=this;if(!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");var r=this.getPDFDoc().getId(),i=this.getId();return this.api.paste(r,i,this.doc.pageCache[e].getId(),"graphicObject",t,n).then((function(t){return o.engine.eventEmitter.emit(a.default.graphicsUpdated,o),o.engine.graphicsObjectManager.get(t,o)}),(function(t){var e=(0,c.default)();return e.reject(t),e.promise}))},t}(),h=function(t){for(var e=0;e<t.length;e++){if(t.charCodeAt(e)>256)return!1}return!0};e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.match=e}return t.prototype.getEndCharIndex=function(){return this.match.endCharIndex},t.prototype.getPageIndex=function(){return this.match.pageIndex},t.prototype.getRects=function(){return this.match.rectArray},t.prototype.getSentence=function(){return this.match.sentence},t.prototype.getSentenceStartIndex=function(){return this.match.sentenceStartIndex},t.prototype.getStartCharIndex=function(){return this.match.startCharIndex},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(18));r(n(17)),r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getURI=function(){return this.info.uri},e.prototype.checkOutData=function(t){return t&&t.uri},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(18)),r=i(n(43));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o,i,a,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,i,a,s,u));return c.fileSpec=c.info.fileSpec&&new r.default(c.info.fileSpec)||null,c}return a(e,t),e.prototype.getFileSpec=function(){return this.fileSpec},e.prototype.checkOutData=function(t){return t&&t.buffer},e.prototype.updateAction=function(e){return this.fileSpec=e.fileSpec&&new r.default(e.fileSpec)||null,t.prototype.updateAction.call(this,e)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(18));r(n(17)),r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getName=function(){return this.info.name},e.prototype.checkOutData=function(t){return t&&t.name},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(18));r(n(17)),r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getScript=function(){return this.info.javascript},e.prototype.checkOutData=function(t){return t&&t.script},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(18));r(n(17)),r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getFlags=function(){return this.info.flags},e.prototype.getURL=function(){return this.info.url},e.prototype.getFieldNames=function(){return this.info.fieldNames},e.prototype.checkOutData=function(t){return t&&t.fieldNames&&t.url},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(18));r(n(17));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getFlags=function(){return this.info.flags},e.prototype.getURL=function(){return this.info.url},e.prototype.getFieldNames=function(){return this.info.fieldNames},e.prototype.checkOutData=function(t){return t&&t.fieldNames},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(18)),r=(i(n(17)),i(n(43)));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o,i,a,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,i,a,s,u));return c.fileSpec=c.info.fileSpec&&new r.default(c.info.fileSpec)||null,c}return a(e,t),e.prototype.getFDFFileSpec=function(){return this.fileSpec},e.prototype.checkOutData=function(t){return t&&t.buffer},e.prototype.updateAction=function(e){return this.fileSpec=e.fileSpec&&new r.default(e.fileSpec)||null,t.prototype.updateAction.call(this,e)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(18);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getDestination=function(){return this.info.destination},e.prototype.checkOutData=function(t){return function(t){var e=void 0;return e=!!t.type,{ZoomXYZ:function(){e=t.pageIndex!=null&&t.left!=null&&t.top!=null&&t.zoomFactor!=null},ZoomFitPage:function(){e=!!(t.pageIndex!=null)},ZoomFitHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitVert:function(){e=t.pageIndex!=null&&t.left},ZoomFitRect:function(){e=t.pageIndex!=null&&t.left&&t.top!=null&&t.bottom!=null&&t.right!=null},ZoomFitBBox:function(){e=!!(t.pageIndex!=null)},ZoomFitBHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitBVert:function(){e=t.pageIndex!=null&&t.left!=null}}[t.type](),e}(t)},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(18);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o,r,i,a,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,i,a,s))}return i(e,t),e.prototype.getFieldNames=function(){return this.info.fieldNames},e.prototype.getHideState=function(){return this.info.hideState},e.prototype.checkOutData=function(t){return t&&t.fieldNames&&t.hideState},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(18)),r=i(n(43));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o,i,a,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,i,a,s,u));return c.fileSpec=c.info.fileSpec&&new r.default(c.info.fileSpec)||null,c}return a(e,t),e.prototype.getDestinationName=function(){return this.info.destinationName},e.prototype.getDestination=function(){return this.info.destination},e.prototype.getFileSpec=function(){return this.fileSpec},e.prototype.getNewWindowFlag=function(){return this.info.newWindowFlag},e.prototype.getFileSpecStream=function(){var t=[];return this.api.getActionFileStream(this.doc.getId(),this.info.objNumber,(function(e){var n=e.arrayBuffer;t.push(n)})).then((function(){return t}))},e.prototype.checkOutData=function(t){return function(t){var e=void 0;return e=!!t.type,{ZoomXYZ:function(){e=t.pageIndex!=null&&t.left!=null&&t.top!=null&&t.zoomFactor!=null},ZoomFitPage:function(){e=!!(t.pageIndex!=null)},ZoomFitHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitVert:function(){e=t.pageIndex!=null&&t.left},ZoomFitRect:function(){e=t.pageIndex!=null&&t.left&&t.top!=null&&t.bottom!=null&&t.right!=null},ZoomFitBBox:function(){e=!!(t.pageIndex!=null)},ZoomFitBHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitBVert:function(){e=t.pageIndex!=null&&t.left!=null}}[t.type](),e&&t.buffer&&t.newWindowFlag}(t)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(18)),r=i(n(43));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o,i,a,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,i,a,s,u));return c.rootFile=c.info.rootFile&&new r.default(c.info.rootFile)||null,c}return a(e,t),e.prototype.getDestinationName=function(){return this.info.destinationName},e.prototype.getDestination=function(){return this.info.destination},e.prototype.getRootFile=function(){return this.rootFile},e.prototype.getNewWindowFlag=function(){return this.info.newWindowFlag},e.prototype.checkOutData=function(t){return function(t){var e=void 0;return e=!!t.type,{ZoomXYZ:function(){e=t.pageIndex!=null&&t.left!=null&&t.top!=null&&t.zoomFactor!=null},ZoomFitPage:function(){e=!!(t.pageIndex!=null)},ZoomFitHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitVert:function(){e=t.pageIndex!=null&&t.left},ZoomFitRect:function(){e=t.pageIndex!=null&&t.left&&t.top!=null&&t.bottom!=null&&t.right!=null},ZoomFitBBox:function(){e=!!(t.pageIndex!=null)},ZoomFitBHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitBVert:function(){e=t.pageIndex!=null&&t.left!=null}}[t.type](),e&&t.buffer&&t.newWindowFlag}(t)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=f(n(328)),a=f(n(3)),s=f(n(1)),u=n(20),c=f(n(30)),l=f(n(10));function f(t){return t&&t.__esModule?t:{default:t}}var d=void 0,p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doc=e,this.engine=n,this.api=n.api,this.fields=[],this.fieldsNameMap={},this.fieldWidgets={},this.actionDepth=0,this.calculationEnabled=!0,d=Promise.resolve()}return t.prototype.checkModifyPerm=function(){if(!this.doc.checkPermission(l.default.annotForm|l.default.fillForm))throw new Error("Permission error")},t.prototype.setState=function(t){this.state=t},t.prototype.mapFormControl=function(t,e){this.fieldWidgets[t]=this.fieldWidgets[t]||[],this.fieldWidgets[t].filter((function(t){return t.getId()==e.getId()})).length||this.fieldWidgets[t].push(e)},t.prototype.reduceControl=function(t){var e=this.fieldWidgets,n=function(e){return e.getPage().getIndex()!=t};for(var o in e){var r=e[o];e[o]=r.filter(n)}},t.prototype.isEmpty=function(){return!this.fields.length},t.prototype.setActionHandler=function(t){this.actionHandler=t},t.prototype.setFormJson=function(t){if(this.isLoaded=!0,t){this.formInfo=t;for(var e=0,n=t.fields.length;e<n;e++){var o=t.fields[e];if(!this.fieldsNameMap[o&&o.name||e]){var i=new r.default(this.doc,this,o);this.fields.push(i),this.fieldsNameMap[o&&o.name||e]=i}}}else this.formInfo={fields:[]}},t.prototype.getAlignment=function(){return this.formInfo.alignment},t.prototype.getFieldCount=function(){return this.fields.length},t.prototype.getField=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.fieldsNameMap[t];if(!e||n)return n;var o=[];for(var r in this.fieldsNameMap)r.startsWith(t)&&o.push(this.fieldsNameMap[r]);return o},t.prototype.getFieldByIndex=function(t){return this.fields[t]},t.prototype.setFieldValue=function(t,e){if(!this.doc.checkPermission(l.default.fillForm+l.default.annotForm))throw new Error("Permission error");if("string"==typeof t&&(t=this.fieldsNameMap[t]),t.setValue(e),this.actionDepth++,this.actionDepth<2){var n=this.formInfo.calculationOrder;for(var o in n){var r=this.getField(n[o]),i=r.getAction(c.default.FieldRecalculateValue);i&&this.actionHandler&&this.actionHandler(i,t,r,c.default.FieldRecalculateValue)}}this.actionDepth--},t.prototype.calculate=function(t){if(!this.doc.checkPermission(l.default.fillForm+l.default.annotForm))throw new Error("Permission error");if(this.calculationEnabled){if("string"==typeof t&&(t=this.fieldsNameMap[t]),this.actionDepth++,this.actionDepth<2){var e=this.formInfo.calculationOrder;for(var n in e){var o=this.getField(e[n]),r=o.getAction(c.default.FieldRecalculateValue);r&&this.actionHandler&&this.actionHandler(r,t,o,c.default.FieldRecalculateValue)}}this.actionDepth--}},t.prototype.resetForm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];if(!this.doc.checkPermission(l.default.fillForm+l.default.annotForm))throw new Error("Permission error");this.enumFields(t,n,(function(t,n,o){var r=e.getField(n),i=r.getDefaultValue();r.setValue(i)}),!0),o&&this.calculate(o)},t.prototype.submitForm=function(t,e,n){var o=u.FormActionFlags.getType(n),r={};switch(o){case"HTML":this.enumFields(e,n,(function(t,e,n){r[e]=n}));break;case"FDF":r={formData:this.exportFDF(e,n)};break;case"XFDF":r={formData:this.exportXFDF(e,n)};break;case"PDF":return console.error("unspported submition type")}var i=u.FormActionFlags.isGetMethod(n);s.default.ajax({url:t,type:i?"GET":"POST",data:r,async:!1,success:function(t){console.log("submit form success."),console.log(t)},error:function(t){console.log("submit form failed."),console.log(t)}})},t.prototype.enumFields=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=u.FormActionFlags.isExclude(e);if(r){var i=Object.keys(this.fieldsNameMap);if(0==(t=i.filter((function(e){return-1==t.indexOf(e)}))).length)return}0==t.length&&(t=Object.keys(this.fieldsNameMap));for(var a=o?1:u.FormActionFlags.isIncludeNoValueFields(e),s=0;s<t.length;s++){var c=t[s],l=this.getField(c);if(l){var f=l.getType(),d=l.getValue(),p=0;o||(p=(p=u.FieldFlag.isNoExport(l.getFlags()))||!d&&!a),f==u.FieldType.Sign||f==u.FieldType.PushButton||p||n(f,l.getName(),d||"")}}},t.prototype.exportFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[37,70,68,70,45,49,46,50,10,49,32,48,32,111,98,106,10,60,60,47,70,68,70,60,60,47,70,40];h(n,this.doc.info.fileName),h(n,")/Fields[",!0),this.enumFields(t,e,(function(t,e,o){switch(h(n,"<</T(",!0),h(n,e),h(n,")/V",!0),t){case u.FieldType.CheckBox:case u.FieldType.RadioButton:h(n,"/",!0),h(n,o);break;default:h(n,"(",!0),h(n,o),h(n,")")}h(n,">>",!0)}));var o="]/ID[<"+this.doc.info.fileID[0]+"><"+this.doc.info.fileID[1]+">]/UF("+this.doc.info.fileName+")>>/Type/Catalog>>\nendobj\ntrailer\n<</Root 1 0 R>>\n%%EOF";return h(n,o,!0),new Uint8Array(n)},t.prototype.exportXFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n='<?xml version="1.0" encoding="UTF-8"?>\n<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">\n<f href="'+this.doc.info.fileName+'"/><fields>\n',o='</fields>\n<ids original="'+this.doc.info.fileID[0]+'" modified="'+this.doc.info.fileID[1]+'"/>\n</xfdf>',r="";return this.enumFields(t,e,(function(t,e,n){r+='<field name="'+e+'"><value>'+n+"</value></field>"})),n+r+o},t.prototype.importFDF=function(t){if(!this.doc.checkPermission(l.default.fillForm+l.default.annotForm))throw new Error("Permission error");var e=t.match(/<<\/T\([\s\S]*?\)(\/V[\s\S]*?)?>>/g);for(var n in e){var o=e[n].match(/<<\/T\(([\s\S]*?)\)(?:\/V\/?([\s\S]*?))?>>/);if(void 0!==o[2]){var r=this.getField(o[1]);if(!r)return;var i=o[2];i!==r.getValue()&&(i=r.getType()===u.FieldType.CheckBox||r.getType()===u.FieldType.RadioButton?g(i):g(i.match(/\(([\s\S]*)\)/)[1]),r.setValue(i))}}},t.prototype.importXFDF=function(t){if(!this.doc.checkPermission(l.default.fillForm+l.default.annotForm))throw new Error("Permission error");var e=t.match(/<field\s*name=["|'][\s\S]*?["|']\s*?>\s*?(<value\s*?(\/>|>[\s\S]*?<\/value\s*?>))?\s*?<\/field\s*?>/g);for(var n in e){var o=e[n].match(/<field name=["|']([\s\S]*?)["|']\s*?>\s*?<value\s*?(?:\/>|>([\s\S]*?)<\/value\s*?>)/);if(o&&void 0!==o[2]){var r=this.getField(o[1]);if(!r)return;var i=o[2];i!==r.getValue()&&r.setValue(i)}}},t.prototype.exportXML=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n='<?xml version="1.0" encoding="UTF-8"?><fields xmlns:xfdf="http://ns.adobe.com/xfdf-transition/">',o="</fields>",r="",i={},a=0;return this.enumFields(t,e,(function(t,e,n){var o=e,u="",c=e.match(/[^0-9][a-zA-Z0-9:\-_\.]*/);c&&c[0].length!==e.length&&(o="fxTag"+e.replace(/[^a-zA-Z0-9]/g,""),u=' xfdf:original="'+e+'"'),isNaN(parseInt(o))||(o="fxTag"+e,u||(u=' xfdf:original="'+e+'"')),n=(0,s.default)("<div/>").text(n).html();for(var l=o;l in i;)l=o+a,a+=1;i[l]=!0,r+="<"+o+u+">"+n+"</"+o+">\r"})),n+r+o},t.prototype.importXML=function(t){if(!this.doc.checkPermission(l.default.fillForm+l.default.annotForm))throw new Error("Permission error");this.isEmpty()||("string"==typeof t&&(t=s.default.parseXML(t)),(0,s.default)(t).children().children().each((function(){var t=getNodeString((0,s.default)(this),"xfdf:original");t&&""!==t&&0!==t.length||(t=this.tagName);var e=(0,s.default)(this).text(),n=this.getField(t);n&&n.setValue(e)})))},t.prototype.upadateValue=function(t){for(var e in t){var n=this.getField(e);if(!n)return;var o=t[e];o!==n.getValue()&&n.setValue(o)}},t.prototype.updateFields=function(t,e,n){switch(e){case"controlFlag":var o=!0,r=!1,i=void 0;try{for(var a,s=Object.keys(this.fieldsNameMap)[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;u.startsWith(t)&&this.fieldsNameMap[u].setWidgetDisplay(n)}}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}}},t.prototype.addControlSync=function(t){return this.addControl(t.pageIndex,t.fieldName,t.fieldType,t.rect),this.fieldsNameMap[t.fieldName]},t.prototype.addControl=function(t,e,n,s){var u=this;if(!this.doc.checkPermission(l.default.annotForm)||!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");if(!this.isLoaded)throw new Error("please call PDFDoc.loadForm() firstly.");if(t<0||t>this.doc.getPageCount()-1||!e||!n||n<1||n>6)return Promise.resolve(!1);var c=this.fieldsNameMap[e];if(!c){var f=v(e,n);this.formInfo.fields.push(f),(c=new r.default(this.doc,this,f)).setRect(s),this.fields.push(c),this.fieldsNameMap[f&&f.name||i]=c}return d=d.then((function(o){return u.doc.api.addControl(u.doc.id,t,e,n,s)})).then((function(e){return e.form?u.setFormJson(e.form):c.updateControls(e.controls),u.doc.getPageByIndex(t)})).then((function(t){return Promise.all([t,t.getUnloadedAnnots()])})).then((function(t){var e=o(t,2),n=e[0],r=e[1];return u.engine.eventEmitter.emit(a.default.annotationAdd,r,n),Promise.resolve(!0)}))},t.prototype.removeEngineField=function(t){delete this.fieldWidgets[t],delete this.fieldsNameMap[t],this.fields.splice();var e=0;this.fields.forEach((function(n,o){if(n.getName()==t)return e=o,!1})),this.fields.splice(e,1),this.formInfo.fields.splice(e,1)},t.prototype.removeField=function(t){var e=this;if(!this.doc.checkPermission(l.default.annotForm)||!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");if(!this.fieldsNameMap[t]||7==this.fieldsNameMap[t].getType())return Promise.resolve(!1);var n=this.fieldWidgets[t];for(var o in n)!function(t){d=d.then((function(n){var o=t.getPDFPage();o.clearAnnotIds([t.getId()]),e.engine.eventEmitter.emit(a.default.annotationRemoved,[t],o)}))}(n[o]);return this.removeEngineField(t),d.then((function(n){return e.doc.api.removeField(e.doc.id,t)}))},t.prototype.removeControl=function(t,e){var n=this;if(!this.doc.checkPermission(l.default.annotForm)||!this.doc.checkPermission(l.default.modify))throw new Error("Permission error");var o=this.fieldWidgets[t],r=function(t){var r=o[t];if(r.getObjNum()==e)return d=d.then((function(t){var e=r.getPDFPage();e.clearAnnotIds([r.getId()]),n.engine.eventEmitter.emit(a.default.annotationRemoved,[r],e)})),o.splice(t,1),"break"};for(var i in o){if("break"===r(i))break}return 0==this.fieldsNameMap[t].removeControlInfo(e)&&this.removeEngineField(t),this.doc.api.removeControl(this.doc.id,t,e)},t.prototype.fixPageFields=function(t){return this.doc.api.fixPageFields(this.doc.id,fieldName,t)},t.prototype.setFieldsValue=function(t,e){return this.engine.eventEmitter.emit(a.default.formValueChanged),this.doc.api.setFieldsValue(this.doc.id,t,e)},t.prototype.addTask=function(t){return"jsInited"==this.state?Promise.resolve(t&&t()):t?d=d.then(t).catch((function(t){return console.error(t)})):d},t}();function h(t,e,n){var o=void 0;for(o=0;o<e.length&&!(e.charCodeAt(o)>255);o++);if(o!==e.length)for(t.push(254),t.push(255),o=0;o<e.length;o++)t.push(e.charCodeAt(o)>>8),t.push(255&e.charCodeAt(o));else for(o=0;o<e.length;o++)t.push(e.charCodeAt(o))}function g(t){if(254==t.charCodeAt(0)&&255==t.charCodeAt(1)){for(var e="",n=2;n<t.length;n+=2)e+=String.fromCharCode((t.charCodeAt(n)<<8)+t.charCodeAt(n+1));return e}return t}var y={alignment:0,alternateName:"",controls:[{index:0,isChecked:!1,isDefaultChecked:!1,isEmpty:!1,objectNumber:-1}],DA:{flags:3,fontName:"FoxitSansOTF",textColor:4278190080,textSize:0},defaultValue:"",flag:0,mappingName:"",maxLength:0,name:"",options:[],topVisibleIndex:0,type:1,value:"",isEmpty:!1,AA:{}},v=function(t,e){var n=JSON.parse(JSON.stringify(y));return n.defaultValue=n.value=2==e||3==e?"Off":"",n.name=t,n.type=e,n};e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),r=n(0),i=u(n(329)),a=u(n(3)),s=u(n(10));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doc=e,this.form=n,this.info=o,this.updateControls(this.info.controls)}return t.prototype.getIndex=function(){return this.info.index},t.prototype.updateWidgetsUI=function(t,e,n,o,r){var i=this,s=t.fieldWidgets[e]||[],u=this.info.controls.length;-1!==["value","comb","multiline","maxLength","hidden","password","readonly","required","clearItems","deleteItems","setItems","icon","insertItemAt"].indexOf(n)&&(u=0,this.doc.engine.eventEmitter.emit(a.default.formValueChanged));for(var c=function(e){var r=!1,a=i.info.controls[e].objectNumber;s.map((function(t){t.getObjNum()==a&&(r=!0)})),!r&&t.addTask((function(t){return i.controls[a].updateProperty(n,o)}))},l=0;l<u;l++)c(l);for(var f=[],d=function(t){!function(e,n){var o=s[t],i=void 0;r?(i=r(o).then((function(t){o.updateUI({type:e,value:n})})),f.push(i)):o.updateUI({type:e,value:n})}(n,o)},p=0;p<s.length;p++)d(p);return Promise.all(f).then((function(t){return!0}))},t.prototype.getPDFForm=function(){return this.form},t.prototype.getName=function(){return this.info.name},t.prototype.getAlternateName=function(){return this.info.alternateName},t.prototype.setAlternateName=function(t){this.form.checkModifyPerm(),this.info.alternateName=t,this.update("alternateName",t)},t.prototype.getType=function(){return this.info.type},t.prototype.getFlags=function(){return this.info.flag},t.prototype.setComb=function(t){this.form.checkModifyPerm(),this.info.flag=t?this.info.flag|o.FieldFlag.TextComb:this.info.flag&~o.FieldFlag.TextComb,this.updateWidgetsUI(this.form,this.info.name,"comb",t),this.update("flag",this.info.flag)},t.prototype.setMultiline=function(t){this.form.checkModifyPerm(),this.info.flag=t?this.info.flag|o.FieldFlag.TextMultiline:this.info.flag&~o.FieldFlag.TextMultiline,this.updateWidgetsUI(this.form,this.info.name,"multiline",t),this.update("flag",this.info.flag)},t.prototype.update=function(t,e){var n=this;return this.form.addTask((function(o){return n.doc.api.updateField(n.doc.id,n.info.name,t,e)}))},t.prototype.getValue=function(){return String(this.info.value).length>0?this.info.value:this.info.defaultValue.length>0?this.info.defaultValue:""},t.prototype.getValueIndex=function(){for(var t=this.info.options,e=0;e<t.length;e++)if(t[e].value==this.info.value)return e;return-1},t.prototype.getDefaultValue=function(){return this.info.defaultValue},t.prototype.setDefaultValue=function(t){return this.form.checkModifyPerm(),this.update("defaultValue",t),this.info.defaultValue=t},t.prototype.getAlignment=function(){return this.info.alignment},t.prototype.setAlignment=function(t){var e=this;if(this.form.checkModifyPerm(),1!==this.getType()){var n=void 0;switch(+t){case 0:n="left";break;case 1:n="center";break;case 2:n="right";break;default:throw new Error("Unkown alignment: "+t)}return this.updateWidgetsUI(this.form,this.info.name,"align",n,(function(e){return e.updateMKProperty("alignment",+t)})).then((function(n){return e.update("align",t),e.info.alignment=t}))}},t.prototype.setAlignmentWithString=function(t,e){return this.form.checkModifyPerm(),this.updateWidgetsUI(this.form,this.info.name,"align",e||t),this.update("align",t),this.info.alignment=t},t.prototype.getBorderStyle=function(){var t=this.form.fieldWidgets[this.getName()];if(!t||!t.length)return"solid";switch(t[0].getBorderStyle()){case 0:return"solid";case 1:return"dashed";case 2:return"underline";case 3:return"beveled";case 4:return"inset"}},t.prototype.getRotation=function(){var t=this.form.fieldWidgets[this.getName()];return t&&t.length?-90*t[0].getRotation():"0"},t.prototype.setBorderStyle=function(t){if(this.form.checkModifyPerm(),7===this.getType())return Promise.resolve(!1);var e=void 0,n=void 0;switch(t){case"solid":n=0;break;case"dashed":n=1,e=[3,3];break;case"underline":n=2;break;case"beveled":n=3,t="outset";break;case"inset":n=4;break;default:return}return this.setBorderStyleWithParam(n,t,e)},t.prototype.setBorderStyleWithParam=function(t,e,n){return this.updateWidgetsUI(this.form,this.info.name,"borderStyle",e,(function(e){return e.setBorderStyle(t,n)}))},t.prototype.setBorderColor=function(t){var e=this;return this.form.checkModifyPerm(),7===this.getType()?Promise.resolve(!1):(t=(0,r.colorConvertor)(t,"int"),this.form.addTask((function(n){return e.updateWidgetsUI(e.form,e.info.name,"borderColor",t,(function(e){return e.setMKProperty("borderColor",t)}))})))},t.prototype.getBorderColor=function(){var t=this.form.fieldWidgets[this.getName()];return t&&t.length?t[0].getMKProperty("borderColor"):0},t.prototype.setFillColor=function(t){var e=this;return this.form.checkModifyPerm(),7===this.getType()?Promise.resolve(!1):(t=(0,r.colorConvertor)(t,"int"),this.form.addTask((function(n){return e.updateWidgetsUI(e.form,e.info.name,"fillColor",t,(function(e){return e.setMKProperty("fillColor",t)}))})))},t.prototype.getFillColor=function(){var t=this.form.fieldWidgets[this.getName()];return t&&t.length>0?t[0].getMKProperty("fillColor"):0},t.prototype.getOptions=function(){return this.info.options},t.prototype.getMaxLength=function(){return this.info.maxLength},t.prototype.setMaxLength=function(t){var e=this;return this.form.checkModifyPerm(),6!==this.getType()?0:(this.info.maxLength=t,this.form.addTask((function(n){return e.updateWidgetsUI(e.form,e.info.name,"maxLength",t)})),this.update("maxLength",t),t)},t.prototype.setValueWithoutAction=function(t){this.info.value=t,this.updateWidgetsUI(this.form,this.info.name,"value",t)},t.prototype.syncValue=function(t){this.info.value=t,this.doc.api.setFieldValue(this.doc.id,this.info.name,t)},t.prototype.setValue=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.doc.checkPermission(s.default.fillForm|s.default.annotForm))throw new Error("Permission error");var r=this.getType();if(7===r||1===r)return"";var i=r==o.FieldType.RadioButton||r==o.FieldType.CheckBox,a=r==o.FieldType.ListBox,u=r==o.FieldType.ComboBox;if(i){var c=!1;this.info.controls.forEach((function(t){t.exportValue==e&&(c=!0)})),c||(e="Off")}var l=this.getOptions();if(a){for(var f=!1,d=0;d<l.length;d++){var p=l[d];if(p.value==e){f=!0;break}}f||(e="")}if(a||u)for(var h=0;h<l.length;h++){var g=l[h];if(g.value==e){this.valueIndex=h;break}}return e=""+e,this.info.value==e||(this.info.value=e,this.doc.api.setFieldValue(this.doc.id,this.info.name,e).then((function(o){t.updateWidgetsUI(t.form,t.info.name,"value",e,(function(t){return i?Promise.resolve(t.setAS(e,n)):Promise.resolve()}))}))),e},t.prototype.setValueByIndex=function(t){this.form.checkModifyPerm();var e=this.info.options[t].value;return this.setValue(e),this.valueIndex=t,t},t.prototype.setHidden=function(t){this.form.checkModifyPerm(),this.updateWidgetsUI(this.form,this.info.name,"hidden",t,(function(e){var n=e.info.flag;return t?(n&=-2,n&=-33,n|=6):(n&=-2,n&=-3,n&=-33,n|=4),e.setFlagValue(n)}))},t.prototype.setPassword=function(t){this.form.checkModifyPerm(),this.info.flag=t?this.info.flag|o.FieldFlag.TextPassword:this.info.flag&~o.FieldFlag.TextPassword,this.updateWidgetsUI(this.form,this.info.name,"password",t),this.update("flag",this.info.flag)},t.prototype.setReadonly=function(t){this.form.checkModifyPerm(),this.info.flag=t?this.info.flag|o.FieldFlag.ReadOnly:this.info.flag&~o.FieldFlag.ReadOnly,this.updateWidgetsUI(this.form,this.info.name,"readonly",t),this.update("flag",this.info.flag)},t.prototype.setRequired=function(t){this.form.checkModifyPerm(),this.info.flag=t?this.info.flag|o.FieldFlag.Required:this.info.flag&~o.FieldFlag.Required,this.updateWidgetsUI(this.form,this.info.name,"required",t),this.update("flag",this.info.flag)},t.prototype.setMKProperty=function(t,e){this.updateWidgetsUI(this.form,this.info.name,t,e,(function(n){return n.setMKProperty(t,e)}))},t.prototype.clearItems=function(){this.form.checkModifyPerm(),this.info.options.length=0,this.info.value="",this.updateWidgetsUI(this.form,this.info.name,"clearItems"),this.update("clearItems")},t.prototype.deleteItems=function(t){this.form.checkModifyPerm(),t<0||t>=this.info.options.length||(this.info.options[t].value==this.info.value&&(this.info.value=""),this.info.options.splice(t,1),this.updateWidgetsUI(this.form,this.info.name,"deleteItems",t),this.update("deleteItems",t))},t.prototype.insertItemAt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.form.checkModifyPerm();var o=this.info.options;-1==n&&(n=o.length),e||(e=t);var r=n==o.length?n-1:n;o[r]&&o[r].value==e?this.info.value=e:(this.info.options=[].concat(o.slice(0,n),{lable:t,value:e,defaultSelected:!1,selected:!1},o.slice(n,o.length)),this.info.value=e,this.updateWidgetsUI(this.form,this.info.name,"insertItemAt",n),this.update("insertItemAt",{index:n,lable:t,value:e,defaultSelected:!1,selected:!1}))},t.prototype.showDisplayValue=function(t){this.updateWidgetsUI(this.form,this.info.name,"displayValue",t)},t.prototype.getAction=function(t){if(!this.engineActions)for(var e in this.engineActions={},this.info.AA)this.engineActions[e]=this.doc.engine.actionFactory.createAction(this.info.AA[e],this);return this.engineActions[t]},t.prototype.getDAFontSize=function(){return this.info.DA.textSize},t.prototype.getDAFontColor=function(){return this.info.DA.textColor},t.prototype.isDAFontEmbedded=function(){return this.info.DA.isEmbedded},t.prototype.getDAFontBuffer=function(){return this.doc.api.getFontBufferByName(this.doc.id,this.info.DA.fontName)},t.prototype.setDAFontColor=function(t){this.form.checkModifyPerm();var e=(0,r.colorConvertor)(t,"int");return this.info.DA.textColor=e,this.updateWidgetsUI(this.form,this.info.name,"textColor",(0,r.colorConvertor)(t,"HTML"),(function(t){return t.updateMKProperty("fontColor")})),this.update("textColor",e),e},t.prototype.getControl=function(t){return this.controls[t]},t.prototype.getWidget=function(t){var e=this,n=this.form.fieldWidgets[this.getName()][t];return n.getObjNum()==this.info.controls[t].objectNumber||this.form.fieldWidgets[this.getName()].map((function(o){n.getObjNum()==e.info.controls[t].objectNumber&&(n=o)})),n},t.prototype.getControlObjectNumber=function(t){return this.info.controls[t].objectNumber},t.prototype.removeControlInfo=function(t){this.form.checkModifyPerm();for(var e=0;e<this.info.controls.length;e++){if(this.info.controls[e].objectNumber==t){this.info.controls.splice(e,1);break}}return this.info.controls.length},t.prototype.getControlCount=function(){return this.info.controls.length},t.prototype.focus=function(){var t=this.form.fieldWidgets[this.info.name];t&&t[0]&&t[0].updateUI({type:"focus"})},t.prototype.getExportValues=function(){for(var t=this.form.fieldWidgets[this.info.name],e=[],n=0;n<t.length;n++)e.push(t[n].getOnAS());return e},t.prototype.setWidgetDisplay=function(t,e){this.updateWidgetsUI(this.form,this.info.name,"display",t,(function(n){return n.setDisplay(t,e)}))},t.prototype.setIconObj=function(t,e){this.form.checkModifyPerm(),this.updateWidgetsUI(this.form,this.info.name,"icon",null,(function(n){return n.setIconObj(t,e)}))},t.prototype.setOptions=function(t){this.form.checkModifyPerm(),4!==this.getType()&&5!==this.getType()||(this.info.options=t,this.info.value=t[0].value,this.updateWidgetsUI(this.form,this.info.name,"setItems"),this.update("setItems",this.info.options))},t.prototype.setItems=function(t){var e=this;this.form.checkModifyPerm(),this.form.addTask((function(n){t=t.map((function(t){return"string"==typeof t?{value:t,lable:t,selected:!1,defaultSelected:!1}:{value:t[1],lable:t[0],selected:!1,defaultSelected:!1}})),e.setOptions(t)}))},t.prototype.setDisplayValue=function(t){return this.displayValue=t,this.update("displayValue",t)},t.prototype.getDisplayValue=function(){return this.displayValue},t.prototype.setRect=function(t){this.rect=t,this.updateWidgetsUI(this.form,this.info.name,"rect",t,(function(e){return e.setRect(t)}))},t.prototype.updateControls=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.controls={};for(var e=0;e<t.length;e++){var n=new i.default(this.doc,t[e]);this.controls[t[e].objectNumber]=n}this.info.controls=t},t.prototype.setAction=function(t,e){var n=this;this.form.checkModifyPerm();var o={objNumber:-1,type:"TypeJavaScript",subAction:[],subActionCount:0,javascript:e};this.form.addTask((function(t){(n.form.fieldWidgets[n.info.name]||[]).forEach((function(t){t.setAction(o)}))}))},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doc=e,this.info=n,this.changes={}}return t.prototype.updateProperty=function(t,e){return this.changes[t]=e,-1==this.info.objectNumber?Promise.resolve():this.doc.api.updateFormControl(this.doc.id,this.info.objectNumber,t,e)},t.prototype.getProperty=function(t){return this.changes[t]},t.prototype.isEmpty=function(){return this.changes==={}},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r(n(137));var o=r(n(45));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.id=(0,o.default)("doc_text_search"),this.pattern=n,this.flags=r,this.doc=e,this.api=e.api,this.startPageIndex=0,this.currentPageIndex=0,this.endPageIndex=e.getPageCount()-1}return t.prototype.getId=function(){return this.id},t.prototype.findNext=function(){var t=this;return this.getCurrentPageTextSearch().then((function(t){return t.findNext()})).then((function(e){return e||(t.currentPageIndex<t.endPageIndex?(t.currentPageIndex++,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.findNext()):(t.currentPageIndex=t.startPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,null))}))},t.prototype.findNexts=function(){var t=this;return this.getCurrentPageTextSearch().then((function(e){return new Promise((function(n,o){t.iterationPageFindNext(e,[],(function(e){if(e.length){var r=t.currentPageIndex<t.endPageIndex;return t.currentPageIndex<t.endPageIndex?(t.currentPageIndex++,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null):(t.currentPageIndex=t.startPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null),n({hasMore:r,list:e})}return t.currentPageIndex<t.endPageIndex?(t.currentPageIndex++,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.findNexts().then((function(t){n(t)}),(function(){o()}))):(t.currentPageIndex=t.startPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,n({hasMore:!1,list:e}))}))}))})).then((function(t){return t}))},t.prototype.iterationPageFindNext=function(t,e,n){var o=this;t.findNext().then((function(r){if(!r)return n(e);e.push(r),o.iterationPageFindNext(t,e,n)}))},t.prototype.findPrev=function(){var t=this;return this.getCurrentPageTextSearch().then((function(t){return t.findPrev()})).then((function(e){return e||(t.currentPageIndex>t.startPageIndex?(t.currentPageIndex--,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.findPrev()):(t.currentPageIndex=t.endPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,null))}))},t.prototype.getCurrentPageTextSearch=function(){var t=this;return this.currentPageTextSearch?Promise.resolve(this.currentPageTextSearch):this.currentPageTextSearchPromise?this.currentPageTextSearchPromise:this.currentPageTextSearchPromise=this.doc.getPageByIndex(this.currentPageIndex).then((function(e){return e.getTextSearch(t.pattern,t.flags)})).then((function(e){return t.currentPageTextSearch=e,t.currentPageTextSearchPromise=null,e}))},t.prototype.setStartPageIndex=function(t){this.startPageIndex=t},t.prototype.setCurrentPageIndex=function(t){t<this.startPageIndex&&(t=this.startPageIndex),t>this.endPageIndex&&(t=this.endPageIndex),this.currentPageIndex!==t&&this.destroy(),this.currentPageIndex=t},t.prototype.setEndPageIndex=function(t){this.endPageIndex=t},t.prototype.destroy=function(){var t=this;this.currentPageTextSearch&&this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.currentPageTextSearchPromise&&this.currentPageTextSearchPromise.then((function(e){e.destroy(),t.currentPageTextSearch=null})),this.currentPageTextSearchPromise=null},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={None:"none",RC4:"rc4",AES128:"aes128",AES256:"aes256"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};e.default=function(t){"string"==typeof t&&(t=i.default.parseXML(t));var e="";return(0,i.default)(t).children().children().each((function(){var t,n,o,r=(t=(0,i.default)(this),n="xfdf:original",o="",t&&void 0!==t.attr(n)&&(o=function(t){var e=t;return e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')).replace(/\r/g,"")).replace(/\n/g," ")}(t.attr(n))),o);r&&""!==r&&0!==r.length||(r=this.tagName);var a=(0,i.default)(this).html();e+='<field name="'+r+'"><value>'+a+"</value></field>"})),new Blob(['<?xml version="1.0" encoding="UTF-8"?>\n<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">\n<f href="a.pdf"/><fields>\n'+e+'</fields>\n<ids original="abcdef" modified="0123456"/>\n</xfdf>'],{type:"application/vnd.xfdf"})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(3)),r=a(n(10)),i=n(0);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var i in s(this,t),this.engine=e,this.api=e.api,this.docId=n.id,this.doc=n,this.parent=r,o)if("children"==i){this.children=[];for(var a=0;a<o[i].length;a++)this.children.push(new t(e,n,o[i][a],this))}else this[i]=o[i]}return t.prototype.insertBookmark=function(e,n,i,a){var s=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!this.doc.checkPermission(r.default.assemble))throw new Error("Permission error");var c=this;return this.api.insertBookmark(this.docId,this.id,e,n,i,a,u).then((function(e){if(e){var n=new t(c.engine,c.doc,e,c);return c.children.push(n),s.engine.eventEmitter.emit(o.default.bookmarkAdded,n),n}return null}))},t.prototype.setProperty=function(t){var e=this;if(!this.doc.checkPermission(r.default.assemble))throw new Error("Permission error");void 0!==t.color&&(t.color=(0,i.colorConvertor)(t.color,"int"));var n=this;return this.api.setBookmarkProperty(this.docId,this.id,t).then((function(t){if(t){for(var r in t)"children"!==r&&(n[r]=t[r]);n.engine.eventEmitter.emit(o.default.bookmarkUpdated,n)}return e}))},t.prototype.remove=function(){if(!this.doc.checkPermission(r.default.assemble))throw new Error("Permission error");var t=this;return this.api.removeBookmark(this.docId,this.id).then((function(e){if(e&&(t.engine.eventEmitter.emit(o.default.bookmarkRemoved,t.id),t.parent))for(var n=t.parent,r=0;r<n.children.length;r++)if(t.id==n.children[r].id){n.children.splice(r,1);break}return e}))},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=S(n(17)),r=(S(n(8)),S(n(36)),S(n(335))),i=S(n(336)),a=S(n(337)),s=S(n(338)),u=S(n(339)),c=S(n(340)),l=S(n(341)),f=S(n(342)),d=S(n(343)),p=S(n(344)),h=S(n(345)),g=S(n(346)),y=S(n(347)),v=S(n(348)),m=S(n(349)),b=S(n(350)),w=S(n(138)),P=S(n(351)),A=S(n(352)),_=S(n(353)),C=S(n(354)),D=S(n(62));function S(t){return t&&t.__esModule?t:{default:t}}var R=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.get=function(t,e){switch(t.type){case D.default.highlight:return new r.default(t,e);case D.default.squiggly:return new s.default(t,e);case D.default.strikeOut:return new i.default(t,e);case D.default.underline:return new a.default(t,e);case D.default.line:return new u.default(t,e);case D.default.polyLine:return new c.default(t,e);case D.default.polygon:return new l.default(t,e);case D.default.fileAttachment:return new p.default(t,e);case D.default.text:return new f.default(t,e);case D.default.circle:return new d.default(t,e);case D.default.caret:return new h.default(t,e);case D.default.freeText:return new y.default(t,e);case D.default.ink:return new b.default(t,e);case D.default.sound:return new A.default(t,e);case D.default.square:return new g.default(t,e);case D.default.stamp:return new v.default(t,e);case D.default.link:return new m.default(t,e);case D.default.widget:return new w.default(t,e);case D.default.screen:return new P.default(t,e);case D.default.popup:return new _.default(t,e);case D.default.redact:return new C.default(t,e);default:return new o.default(t,e)}},t}();e.default=R},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(36);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return i(e,t),e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(36);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return i(e,t),e.prototype.isReplace=function(){return"Replace"===this.info.typeAlias},e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(36);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return i(e,t),e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(36);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return i(e,t),e}(((o=r)&&o.__esModule?o:{default:o}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n(8)),r=n(4),i=n(0),a=u(n(3)),s=n(35);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return c(e,t),e.prototype.getEndPoint=function(){return this.info.endPoint},e.prototype.setEndPoint=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setLineEndPoint(o.getId(),n.getId(),this.getId(),t.x,t.y).then((function(t){return e.update()})).then((function(){e.info.endPoint=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)}))},e.prototype.getStartPoint=function(){return this.info.startPoint},e.prototype.setStartPoint=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setLineStartPoint(o.getId(),n.getId(),this.getId(),t.x,t.y).then((function(t){return e.update()})).then((function(){e.info.startPoint=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)}))},e.prototype.getEndingStyle=function(){return this.info.endingStyle},e.prototype.getStartStyle=function(){return this.info.startStyle},e.prototype.setEndingStyle=function(t,e){var n=this;this.checkModidyPerm();var o=this.getPDFPage(),r=o.getPDFDoc();return this.api.setAnnotEndingStyle(r.getId(),o.getId(),this.getId(),t,e).then((function(){t?n.info.startStyle=e:n.info.endingStyle=e,n.eventEmitter.emit(a.default.annotationUpdated,[n],o),n.eventEmitter.emit(a.default.annotationAppearanceUpdated,[n],o)}))},e.prototype.hasCaption=function(){return this.info.hasCaption},e.prototype.enableCaption=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.enableLineCaption(o.getId(),n.getId(),this.getId(),t).then((function(){e.info.hasCaption=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)}))},e.prototype.setContent=function(e){var n=this;return t.prototype.setContent.call(this,e).then((function(t){return t&&n.eventEmitter.emit(a.default.annotationAppearanceUpdated,[n],n.getPDFPage()),t}))},e.prototype.getStyleFillColor=function(){return this.info.styleFillColor},e.prototype.setStyleFillColor=function(t){var e=this;this.checkModidyPerm(),0!==t&&(t=(0,i.colorConvertor)(t,"int"));var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotFillColor(o.getId(),n.getId(),this.getId(),t).then((function(o){return o&&(e.info.styleFillColor=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)),o}))},e.prototype.getLeaderLineLength=function(){return this.info.leaderLineLength||0},e.prototype.getLeaderLineExtend=function(){return this.info.leaderLineExtensionLength||0},e.prototype.getLeaderLineOffset=function(){return this.info.leaderLineOffset},e.prototype.getCaptionPos=function(){return this.info.capPos},e.prototype.getCaptionOffset=function(){},e.prototype.calculateLeaderLine=function(){var t=this.getStartPoint(),e=this.getEndPoint(),n=e.y-t.y,o=e.x-t.x,r=this.k=-1/(n/o),i=Math.atan(r),a=this.getLeaderLineLength(),s=Math.cos(i)*a,u=Math.sin(i)*a;this.leaderSartPoit={x:t.x+s,y:t.y+u};var c=this.getRect();c.left<this.leaderSartPoit.x&&this.leaderSartPoit.x<c.right&&c.bottom<this.leaderSartPoit.y&&this.leaderSartPoit.y<c.top?this.leaderEndPoint={x:e.x+s,y:e.y+u}:(this.leaderSartPoit={x:t.x-s,y:t.y-u},this.leaderEndPoint={x:e.x-s,y:e.y-u}),this.Sb=this.leaderSartPoit.y-this.k*this.leaderSartPoit.x,this.Eb=this.leaderEndPoint.y-this.k*this.leaderEndPoint.x},e.prototype.getLeaderLinePoints=function(){return this.leaderSartPoit||this.calculateLeaderLine(),{start:this.leaderSartPoit,end:this.leaderEndPoint}},e.prototype._update=function(){var e=this;return t.prototype._update.call(this).then((function(t){return e.calculateLeaderLine(),e}))},e.prototype.update=function(){var t=this;return this._update().then((function(){var e=t.getPDFPage();return t.eventEmitter.emit(a.default.annotationUpdated,[t],e),t}))},e.prototype.setLeaderLineLength=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotLeaderLineLength(o.getId(),n.getId(),this.getId(),t).then((function(){return e.update()})).then((function(){e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)}))},e.prototype.getMeasureInfo=function(){return""},e.prototype.getCaptionOffset=function(){return this.info.captionOffset},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.startPoint,o=this.info.endPoint,a=this.info.leaderLineLength,s=this.info.leaderLineExtensionLength,u=this.hasCaption()?"yes":"no";if(this.info.styleFillColor){var c=(0,i.convertFromNumberToHex)(16777215&this.info.styleFillColor);e["interior-color"]=c}return Object.assign({},e,{start:n.x+","+n.y,end:o.x+","+o.y,head:r.LineEndingName[this.info.startStyle],tail:r.LineEndingName[this.info.endingStyle],leaderLength:a,leaderExtend:s,caption:u})},e.prototype.getMeasureRatio=function(){return this.info.measureRatio},e.prototype.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,o=void 0===n?1:n,r=e.userSpaceUnit,i=void 0===r?s.INCH.name:r,u=e.realValue,c=void 0===u?1:u,l=e.realUnit,f=void 0===l?s.INCH.name:l;this.checkModidyPerm();var d=this.getPDFPage(),p=d.getPDFDoc();return this.api.setMeasureRatio(p.getId(),d.getId(),this.getId(),{userSpaceValue:o,userSpaceUnit:i,realValue:c,realUnit:f}).then((function(){return t.update()})).then((function(){var e=t.getPDFPage();t.eventEmitter.emit(a.default.annotationAppearanceUpdated,[t],e)}))},e.prototype.getMeasureUnit=function(){return this.info.measureUnit},e.prototype.setMeasureUnit=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setMeasureUnit(o.getId(),n.getId(),this.getId(),t).then((function(){return e.update()})).then((function(){e.info.measureUnit=t;var n=e.getPDFPage();e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)}))},e}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(4),i=s(n(8)),a=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),e.prototype.getVertexes=function(){return this.info.vertexes},e.prototype.getStyleFillColor=function(){return this.info.fillColor},e.prototype.setStyleFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},e.prototype.updateVertexes=function(t,e){var n=this,o=e.x,r=e.y;this.checkModidyPerm();var i=this.getPDFPage(),s=i.getPDFDoc();return this.api.updateAnnotVertexes(s.getId(),i.getId(),this.getId(),t,o,r).then((function(){return n.info[t]={x:o,y:r},n.update()})).then((function(){n.eventEmitter.emit(a.default.annotationAppearanceUpdated,[n],n.getPDFPage())}))},e.prototype.setVertexes=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotVertexes(o.getId(),n.getId(),this.getId(),t).then((function(){return e.info.vertexes=t,e.update()})).then((function(){e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],e.getPDFPage())}))},e.prototype.getMeasureInfo=function(){return""},e.prototype.getEndingStyle=function(){return this.info.endingStyle},e.prototype.setEndingStyle=function(t,e){var n=this;this.checkModidyPerm();var o=this.getPDFPage(),r=o.getPDFDoc();return this.api.setAnnotEndingStyle(r.getId(),o.getId(),this.getId(),t,e).then((function(){t?n.info.startStyle=e:n.info.endingStyle=e,n.eventEmitter.emit(a.default.annotationUpdated,[n],o),n.eventEmitter.emit(a.default.annotationAppearanceUpdated,[n],n.getPDFPage())})).then((function(t){return n._update()}))},e.prototype.getStartStyle=function(){return this.info.startStyle},e.prototype.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.info.vertexes,i="",a=0;a<n.length;a++)i+=n[a].x+","+n[a].y+";";if(i=i.substr(0,i.length-1),this.info.fillColor){var s=(0,o.convertFromNumberToHex)(16777215&this.info.fillColor);e["interior-color"]=s}return Object.assign({},e,{head:r.LineEndingName[this.info.startStyle],tail:r.LineEndingName[this.info.endingStyle],vertices:i})},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(8)),r=n(0),i=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return s(e,t),e.prototype.getVertexes=function(){return this.info.vertexes},e.prototype.updateVertexes=function(t,e){var n=this;this.checkModidyPerm();var o=this.getPDFPage(),r=o.getPDFDoc();return this.api.updateAnnotVertexes(r.getId(),o.getId(),this.getId(),t,e.x,e.y).then((function(){return n.update()})).then((function(){n.eventEmitter.emit(i.default.annotationAppearanceUpdated,[n],n.getPDFPage())}))},e.prototype.setVertexes=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotVertexes(o.getId(),n.getId(),this.getId(),t).then((function(){return e.info.vertexes=t,e.update()})).then((function(){e.eventEmitter.emit(i.default.annotationAppearanceUpdated,[e],e.getPDFPage())}))},e.prototype.getMeasureInfo=function(){return""},e.prototype.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.info.vertexes,o="",i=0;i<n.length;i++)o+=n[i].x+","+n[i].y+";";if(o=o.substr(0,o.length-1),this.info.fillColor){var a=(0,r.convertFromNumberToHex)(16777215&this.info.fillColor);e["interior-color"]=a}return Object.assign({},e,{vertices:o})},e.prototype.getFillColor=function(){return this.info.fillColor},e.prototype.setFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.getFlags=function(){return 24|t.prototype.getFlags.call(this)},e.prototype.getIconName=function(){return this.info.iconName},e.prototype.setIconName=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotIconName(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(){return e.eventEmitter.emit(r.default.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},e.prototype.getState=function(){return this.info.state},e.prototype.setState=function(t){var e=this;if(this.checkModidyPerm(),!this.isStateAnnot())return Promise.reject(!1);if(this.getState()===t)return Promise.resolve(!0);var n=this.info.state,o=this.getPDFPage(),i=o.getPDFDoc();return this.api.setStateName(i.getId(),o.getId(),this.getId(),t).then((function(o){return e.info.state=t,e.eventEmitter.emit(r.default.stateAnnotNameUpdated,e,e.getPDFPage(),n,t),o}))},e.prototype.isStateAnnot=function(){return this.info.isStateAnnot},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n={icon:this.info.iconName};if(this.info.isStateAnnot){n.statemodel=1==this.info.stateModel?"Marked":"Review",n.inreplyto=this.info.IRT;var o=this.info.state;n.state=o.charAt(0).toUpperCase()+o.slice(1)}return Object.assign({},e,n)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(8),i=(o=r)&&o.__esModule?o:{default:o},a=n(0);function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return s(e,t),e.prototype.getInnerRect=function(){return this.info.innerRect},e.prototype.getFillColor=function(){return this.info.fillColor},e.prototype.setFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.rect,o=this.info.innerRect,r=[o.left-n.left,o.bottom-n.bottom,n.right-o.right,n.top-o.top].toString();if(this.info.fillColor){var i=(0,a.colorConvertor)(16777215&this.info.fillColor,"#");e["interior-color"]=i}return Object.assign({},e,{fringe:r})},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(8)),r=a(n(3)),i=a(n(43));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return r.fileSpec=n.fileSpec&&new i.default(n.fileSpec)||null,r}return s(e,t),e.prototype.getIconName=function(){return this.info.iconName||"PushPin"},e.prototype.setIconName=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotIconName(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(){return e.eventEmitter.emit(r.default.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},e.prototype.exportToJSON=function(){return t.prototype.exportToJSON.call(this)},e.prototype.getFileSpec=function(){return this.fileSpec},e.prototype.getFileattachmentStream=function(){var t=this.getPDFPage(),e=t.getPDFDoc(),n=[];return this.api.getFileattachmentStream(e.getId(),t.getId(),this.getId(),(function(t){var e=t.arrayBuffer;n.push(e)})).then((function(){return n}))},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.getInnerRect=function(){return this.info.innerRect},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.rect,o=this.info.innerRect,r=[o.left-n.left,o.bottom-n.bottom,n.right-o.right,n.top-o.top].toString();return delete e.style,delete e.width,delete e.dashPhase,delete e.intensity,Object.assign({},e,{fringe:r})},e.prototype.moveRectByCharIndex=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.moveCaretRectByCharIndex(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(){return e.eventEmitter.emit(r.default.annotationMovedPosition,[e],e.getPDFPage(),e),t})):t}))},e.prototype.setBorderColor=function(e){var n=this;this.isGrouped()&&this.getGroupElements().map((function(t){t!=n&&t.setBorderColor(e)}));return t.prototype.setBorderColor.call(this,e)},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(8),i=(o=r)&&o.__esModule?o:{default:o},a=n(0);function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return s(e,t),e.prototype.getFillColor=function(){return this.info.fillColor},e.prototype.setFillColor=function(e){return t.prototype.setFillColor.call(this,e)},e.prototype.getInnerRect=function(){return this.info.innerRect},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.rect,o=this.info.innerRect,r=[o.left-n.left,o.bottom-n.bottom,n.right-o.right,n.top-o.top].toString();if(this.info.fillColor){var i=(0,a.colorConvertor)(16777215&this.info.fillColor,"#");e["interior-color"]=i}return Object.assign({},e,{fringe:r})},e}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(8)),r=n(4),i=n(0),a=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return-1===n.borderColor&&"FreeTextTypewriter"!==n.intent&&(n.borderColor=16711680),r}return u(e,t),e.prototype.setAlignment=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAlignment(o.getId(),n.getId(),this.getId(),t).then((function(){return e.info.justification=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],e.getPDFPage()),t}))},e.prototype.getAlignment=function(){return this.info.justification},e.prototype.getInnerRect=function(){return this.info.innerRect},e.prototype.setInnerRectNoAction=function(t){this.info.innerRect=t;var e=this.getPDFPage(),n=e.getPDFDoc();return this.api.setAnnotInnerRect(n.getId(),e.getId(),this.getId(),t)},e.prototype.getIntent=function(){var e=t.prototype.getIntent.call(this);return e||(e="FreeTextTextbox"),e},e.prototype.setInnerRect=function(t){var e=this;this.checkModidyPerm(),this.info.innerRect=t;var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotInnerRect(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update().then((function(){return e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},e.prototype.getDefaultAppearance=function(){var t=Object.assign({},this.info.defaultAppearance);return delete t.flags,t},e.prototype.getFillColor=function(){return"FreeTextTypewriter"==this.info.intent?0:this.info.fillColor},e.prototype.setFillColor=function(t){var e=this;this.checkModidyPerm(),t=0===t?0:(0,i.colorConvertor)(t,"int");var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotFillColor(o.getId(),n.getId(),this.getId(),t).then((function(o){return o&&(e.info.fillColor=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)),o}))},e.prototype.getCalloutLinePoints=function(){return this.info.calloutLinePoints},e.prototype.setCalloutLinePoints=function(t){var e=this;return this._setCalloutLinePoints(t).then((function(t){return e._update()})).then((function(t){var n=e.getPDFPage();e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],n)}))},e.prototype._setCalloutLinePoints=function(t){var e=this;this.checkModidyPerm(),this.info.calloutLinePoints=t;var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setCalloutLinePoints(o.getId(),n.getId(),this.getId(),t).then((function(t){return e._update()}))},e.prototype.getCalloutLineEndingStyle=function(){return this.info.calloutLineEndingStyle},e.prototype.setCalloutLineEndingStyle=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setCalloutLineEndingStyle(o.getId(),n.getId(),this.getId(),t).then((function(){e.info.calloutLineEndingStyle=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],e.getPDFPage())}))},e.prototype.setDefaultAppearance=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc(),r=(t=Object.assign({},this.info.defaultAppearance,t)).textColor,i=t.textSize;if("number"!=typeof r||"number"!=typeof i)throw new Error("param error. Only number is available.");if(r=(4278190080|r)>>>0,i<6||i>40)throw new Error("Text size is overflow. Available range is 6 to 40.");return t={textColor:r,textSize:i},this.api.setDefaultAp(o.getId(),n.getId(),this.getId(),t).then((function(){return e._update()})).then((function(){e.info.defaultAppearance=t,e.eventEmitter.emit(a.default.annotationUpdated,[e],n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],e.getPDFPage())}))},e.prototype.getFontColor=function(){return 0==this.info.defaultAppearance.textColor?"black":(0,i.colorConvertor)(16777215&this.info.defaultAppearance.textColor,"#",0)},e.prototype.setFontColor=function(t){var e=this,n=this.getPDFPage(),o=n.getPDFDoc();return t=(0,i.colorConvertor)(t,"int",1),this.info.defaultAppearance.textColor=t,this.api.setDefaultAp(o.getId(),n.getId(),this.getId(),this.info.defaultAppearance).then((function(){e.eventEmitter.emit(a.default.annotationAppearanceUpdated,[e],e.getPDFPage())}))},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);e.justification=this.info.justification;var n="";this.info.fontName&&(n+="/"+this.info.fontName+" "),this.info.defaultAppearance.textSize&&(n+=this.info.defaultAppearance.textSize+" Tf ");var o=(0,i.convertFromNumberToRGBA)(this.getBorderColor());switch(n+=(o.r/255).toFixed(2)+" "+(o.g/255).toFixed(2)+" "+(o.b/255).toFixed(2)+" rg",e.defaultappearance=n,e.fontColor=(0,i.colorConvertor)(16777215&this.info.defaultAppearance.textColor,"#",0),this.info.fillColor&&(o=(0,i.convertFromNumberToHex)(16777215&this.info.fillColor),e["interior-color"]=o),this.info.intent){case"FreeTextCallout":var a=this.info.rect,s=this.info.innerRect,u=[s.left-a.left,s.bottom-a.bottom,a.right-s.right,a.top-s.top].toString(),c=this.info.calloutLinePoints,l=c[0].x+","+c[0].y;l+=","+c[1].x+","+c[1].y,l+=","+c[2].x+","+c[2].y;var f=r.LineEndingName[this.info.calloutLineEndingStyle];return Object.assign({},e,{fringe:u,callout:l,head:f})}return e},e.prototype.getContent=function(){var e="";if(this.info.RC.length>0){var n=(new DOMParser).parseFromString(this.info.RC,"text/xml"),o=void 0;n.children&&n.children[0]?o=n.children.item(0):n.childNodes&&n.childNodes.length>0&&(o=n.childNodes.item(0)),e=o?o.innerText||o.textContent:e}else e=t.prototype.getContent.call(this);return e},e.prototype.setContent=function(e){var n=this;return this.info.RC="",t.prototype.setContent.call(this,e).then((function(t){return n.eventEmitter.emit(a.default.annotationAppearanceUpdated,t,n.getPDFPage()),t}))},e.prototype.getWoff=function(){var t=this.getPDFPage();return t.api.getAnnotWoff(t.getPDFDoc().getId(),t.getId(),this.getId())},e.prototype.getRotation=function(){return this.info.rotation},e.prototype.setRotation=function(t){var e=this,n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotRotation(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(n){var o=0;for(n.length;o--;)n[o].info.rotation=t;return e.info.rotation=t,n})).then((function(t){var o=[],r=!0,i=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value;o.push(l.update())}}catch(t){i=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw s}}return Promise.all(o).then((function(o){return e.eventEmitter.emit(a.default.annotationUpdated,t,n),e.eventEmitter.emit(a.default.annotationAppearanceUpdated,t,n),t}))}))},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.getInnerRect=function(){return this.getRect()},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);return e.icon=this.info.iconName,e},e.prototype.getIconName=function(){return this.info.iconName||""},e.prototype.setBitmap=function(t,e){var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotAPBitmap(o.getId(),n.getId(),this.getId(),t,e)},e.prototype.getRotation=function(){return this.info.rotation},e.prototype.setRotation=function(t){var e=this,n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotRotation(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(n){var o=0;for(n.length;o--;)n[o].info.rotation=t;return e.info.rotation=t,n})).then((function(t){var o=[],i=!0,a=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;o.push(l.update())}}catch(t){a=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}return Promise.all(o).then((function(o){return e.eventEmitter.emit(r.default.annotationUpdated,t,n),e.eventEmitter.emit(r.default.annotationAppearanceUpdated,t,n),t}))}))},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(17)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return n.action&&(r.action=r.engine.actionFactory.createAction(n.action,o.doc,r.api,r.eventEmitter,r)),r}return a(e,t),e.prototype.getFlags=function(){return-2&t.prototype.getFlags.call(this)},e.prototype.getAction=function(){return this.action},e.prototype.getActionPromise=function(){return Promise.resolve(this.action)},e.prototype.getHighlightingMode=function(){return this.info.highlightingMode},e.prototype.setHighlightingMode=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setHighlightingMode(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(t){for(var e=[],n=0,o=t.length;n<o;n++)e.push(t[n]._update());return Promise.all(e)})).then((function(t){return e.eventEmitter.emit(r.default.annotationUpdated,t,n),e.eventEmitter.emit(r.default.annotationMovedPosition,t,n,e),t}))},e.prototype.setAction=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAction(o.getId(),n.getId(),this.getId(),t).then((function(t){return e.action?t.type!==e.action.getType()?e.action=e.engine.actionFactory.createAction(t,e.page.doc,e.api,e.eventEmitter,e):e.action.updateAction(t):e.action=e.engine.actionFactory.createAction(t,e.page.doc,e.api,e.eventEmitter,e),e.update()})).then((function(){return e.eventEmitter.emit(r.default.annotationUpdated,[e],n),e.eventEmitter.emit(r.default.actionAdd,e),!0}))},e.prototype.setActionData=function(t){var e=this;return this.action&&this.action.setActionData(t).then((function(){return e.update()})).then((function(){return e.eventEmitter.emit(r.default.annotationUpdated,[e],e.getPDFPage()),!0}))},e.prototype.removeAction=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();return this.api.removeAnnotAction(n.getId(),e.getId(),this.getId()).then((function(){return t.action=null,t.update()})).then((function(){return t.eventEmitter.emit(r.default.annotationUpdated,[t],t.getPDFPage()),t.eventEmitter.emit(r.default.actionRemove,t),!0}))},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return a(e,t),e.prototype.getInkList=function(){return this.info.inkList},e.prototype.setInkList=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setInkList(o.getId(),n.getId(),this.getId(),t).then((function(){return e.update().then((function(){e.eventEmitter.emit(r.default.annotationAppearanceUpdated,[e],e.getPDFPage())}))})).then((function(){return e.eventEmitter.emit(r.default.annotationUpdated,[e],n),!0}))},e.prototype.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.info.inkList,o="[",r=0;r<n.length;r++)0!=r&&1==n[r].type&&(o=o.substr(0,o.length-1),o+="],["),o+=n[r].x+","+n[r].y+";";return o=o.substr(0,o.length-1)+"]",Object.assign({},e,{inklist:o})},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(17)),r=i(n(3));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return n.action&&(r.action=r.engine.actionFactory.createAction(n.action,o.doc,r.api,r.eventEmitter,r)),r}return a(e,t),e.prototype.getFlags=function(){return-2&t.prototype.getFlags.call(this)},e.prototype.getAction=function(){return this.action},e.prototype.getActionPromise=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();return this.api.getAction(n.getId(),e.getId(),this.getId()).then((function(e){return t.action=t.engine.actionFactory.createAction(e,n,t.api,t.eventEmitter,t),t.action}))},e.prototype.getOpacity=function(){return this.info.opacity},e.prototype.getRotation=function(){return this.info.rotation},e.prototype.setOpacity=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return t=+t,this.api.setAnnotOpacity(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(n){var o=0;for(n.length;o--;)n[o].info.opacity=t;return e._update().then((function(){return n}))})).then((function(t){return e.eventEmitter.emit(r.default.annotationUpdated,t,n),e.eventEmitter.emit(r.default.annotationAppearanceUpdated,t,n),t}))},e.prototype.setRotation=function(t){var e=this,n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotRotation(o.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByIdArray(t)})).then((function(n){var o=0;for(n.length;o--;)n[o].info.rotation=t;return e.info.rotation=t,n})).then((function(t){return e.eventEmitter.emit(r.default.annotationUpdated,t,n),e.eventEmitter.emit(r.default.annotationAppearanceUpdated,t,n),t}))},e.prototype.setAction=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAction(o.getId(),n.getId(),this.getId(),t).then((function(t){return e.action?t.type!==e.action.getType()?e.action=e.engine.actionFactory.createAction(t,e.page.doc,e.api,e.eventEmitter,e):e.action.updateAction(t):e.action=e.engine.actionFactory.createAction(t,e.page.doc,e.api,e.eventEmitter,e),e.update()})).then((function(){return e.eventEmitter.emit(r.default.annotationUpdated,[e],n),e.eventEmitter.emit(r.default.actionAdd,e),!0}))},e.prototype.setActionData=function(t){var e=this;return this.action&&this.action.setActionData(t).then((function(){return e.update()})).then((function(){return e.eventEmitter.emit(r.default.annotationUpdated,[e],e.getPDFPage()),!0}))},e.prototype.setRect=function(t){var e=this;this.info.rect=t;var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setAnnotRect(o.getId(),n.getId(),this.getId(),t).then((function(t){return t?(e.eventEmitter.emit(r.default.annotationAppearanceUpdated,[e],e.getPDFPage()),!0):t}))},e.prototype.moveTo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,o=e.top,i=Object.assign({},this.info.rect),a=i.right,s=i.bottom,u=n-i.left,c=o-i.top;this.info.rect={left:n,top:o,right:a+u,bottom:s+c};var l=this.getPDFPage(),f=l.getPDFDoc(),d=f.getId(),p=l.getId(),h=this.getId();return this.api.moveAnnotTo(d,p,h,{left:n,top:o}).then((function(t){return l.getAnnotsByIdArray(t)})).then((function(e){t.eventEmitter.emit(r.default.annotationUpdated,e,l),t.eventEmitter.emit(r.default.annotationMovedPosition,e,l,t)}))},e.prototype.removeAction=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();return this.api.removeAnnotAction(n.getId(),e.getId(),this.getId()).then((function(){return t.action=null,t.update()})).then((function(){return t.eventEmitter.emit(r.default.annotationUpdated,[t],t.getPDFPage()),t.eventEmitter.emit(r.default.actionRemove,t),!0}))},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(8));n(4),r(n(3)),n(35);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var a=function(t){function e(n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o));return n.action&&(r.action=r.engine.actionFactory.createAction(n.action,o.doc,r.api,r.eventEmitter,r)),r}return i(e,t),e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);return e.rate=this.info.soundObj&&this.info.soundObj.sampleRate,e},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(17)),r=n(4),i=s(n(75)),a=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),e.prototype.getFlags=function(){return-2&t.prototype.getFlags.call(this)},e.prototype.getOpenStatus=function(){return this.info.openStatus},e.prototype.setOpenStatus=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setPopupOpenStatus(o.getId(),n.getId(),this.getId(),t).then((function(){e.info.openStatus=t;var o=[e];return e.eventEmitter.emit(a.default.annotationAppearanceUpdated,o,n),o}))},e.prototype.exportToJSON=function(){var t=this.info.flag,e="";for(var n in r.AnnotFlagsName)t&1<<parseInt(n)&&(e+=r.AnnotFlagsName[n]+",");(0,i.default)(new Date(this.info.modifiedTimestamp),"D:yyyyMMddhhmmssTZ","'");var o=this.info.id,a=this.page.getIndex(),s=this.info.openStatus?"yes":"no",u=this.info.rect;return{flags:e,name:o,page:a,open:s,rect:u.left+","+u.bottom+","+u.right+","+u.top,type:"popup"}},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(8)),r=s(n(3)),i=n(0),a=s(n(10));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var c=function(t){function e(n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o))}return u(e,t),e.prototype.isArea=function(){return this.info.isArea},e.prototype.getRects=function(){var t=[];return this.info.quadPoints&&this.info.quadPoints.length>0?this.info.quadPoints.forEach((function(e){t.push({left:e[0].x,top:e[0].y,right:e[3].x,bottom:e[3].y})})):t.push(this.info.rect),t},e.prototype.apply=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();if(!n.checkPermission(a.default.annotForm)||!n.checkPermission(a.default.modify))throw new Error("Permission error");return this.api.redactApply(n.getId(),e.getId(),this.getId()).then((function(n){var o=e.clearAnnotIds(n);t.engine.eventEmitter.emit(r.default.annotationRemoved,o,e);var i=[{pageIndex:e.getIndex(),removedAnnots:n}];return t.eventEmitter.emit(r.default.applyRedaction,i),i}))},e.prototype.getApplyFillColor=function(){return this.info.applyFillColor},e.prototype.setRedactApplyFillColor=function(t){var e=this;this.checkModidyPerm(),t=(0,i.colorConvertor)(t,"int",1);var n=this.getPDFPage(),o=n.getPDFDoc();return this.api.setRedactApplyFillColor(o.getId(),n.getId(),this.getId(),t).then((function(n){return n&&(e.eventEmitter.emit(r.default.annotationUpdated,[e]),e.info.applyFillColor=t),n}))},e.prototype.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);return e["interior-color"]=(0,i.convertFromNumberToHex)(16777215&this.getApplyFillColor()),e},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n(42)),r=s(n(356)),i=s(n(357)),a=s(n(358));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e}return t.prototype.get=function(t,e){var n=this.engine;switch(t.type){case 1:return new r.default(t,e,n);case 2:return new i.default(t,e,n);case 3:return new a.default(t,e,n);case void 0:return null;default:return new o.default(t,e,n)}},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(42)),r=a(n(3)),i=a(n(10));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u={0:{id:"0",name:"StandardID_e_StdIDCourier",isBold:!1,isItalic:!1},1:{id:"1",name:"StandardID_e_StdIDCourierB",isBold:!0,isItalic:!1},2:{id:"2",name:"StandardID_e_StdIDCourierBI",isBold:!0,isItalic:!0},3:{id:"3",name:"StandardID_e_StdIDCourierI",isBold:!1,isItalic:!0},4:{id:"4",name:"StandardID_e_StdIDHelvetica",isBold:!1,isItalic:!1},5:{id:"5",name:"StandardID_e_StdIDHelveticaB",isBold:!0,isItalic:!1},6:{id:"6",name:"StandardID_e_StdIDHelveticaBI",isBold:!0,isItalic:!0},7:{id:"7",name:"StandardID_e_StdIDHelveticaI",isBold:!1,isItalic:!0},8:{id:"8",name:"StandardID_e_StdIDTimes",isBold:!1,isItalic:!1},9:{id:"9",name:"StandardID_e_StdIDTimesB",isBold:!0,isItalic:!1},10:{id:"10",name:"StandardID_e_StdIDTimesBI",isBold:!0,isItalic:!0},11:{id:"11",name:"StandardID_e_StdIDTimesI",isBold:!1,isItalic:!0},12:{id:"12",name:"StandardID_e_StdIDSymbol",isBold:!1,isItalic:!1},13:{id:"13",name:"StandardID_e_StdIDZapfDingbats",isBold:!1,isItalic:!1}},c=function(t){function e(n,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r))}return s(e,t),e.prototype.put=function(t){},e.prototype.isBold=function(){var t=this.info.textState.font;if(t.isStandard){if(u[t.standardId])return u[t.standardId].isBold;console.warn("No configuration found for standard font: ",t)}return t.isBold},e.prototype.isItalic=function(){var t=this.info.textState.font;if(t.isStandard){if(u[t.standardId])return u[t.standardId].isItalic;console.warn("No configuration found for standard font: ",t)}return t.isItalic||t.styles>>7&1},e.prototype.getText=function(){return this.info.textState.text},e.prototype.getFontInfo=function(){return this.info.textState.font},e.prototype.setText=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");if(this.getText()===t)return Promise.resolve();var n=this.getPDFPage();return n.api.setTextObjectChar(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.setItalic=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");if(this.isItalic()===t)return Promise.resolve();var n=this.getPDFPage();return n.api.setTextObjectItalic(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.setBold=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");if(this.isBold()===t)return Promise.resolve();var n=this.getPDFPage();return n.api.setTextObjectBold(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.getFontSize=function(){return this.info.textState.size},e.prototype.setFontSize=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");if(this.getFontSize()===t)return Promise.resolve();var n=this.getPDFPage();return n.api.setTextObjectFontSize(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.setStandardFont=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.info.textState.font;if(!n||n.isStandard&&t===n.stardardId)return Promise.resolve();var o=this.getPDFPage();return o.api.setTextObjectStandardFont(o.getPDFDoc().getId(),o.getId(),this.getId(),t).then((function(t){e.info=t,e.engine.eventEmitter.emit(r.default.graphicsUpdated,o)}))},e.prototype.setFontByName=function(t,e,n){var o=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");if(!this.info.textState.font)return Promise.resolve();var a=this.getPDFPage();return a.api.setTextObjectFontByName(a.getPDFDoc().getId(),a.getId(),this.getId(),t,e,n).then((function(t){o.info=t,o.engine.eventEmitter.emit(r.default.graphicsUpdated,a)}))},e.prototype.getWoff=function(){var t=this.getPDFPage();return t.api.getTextObjectWoff(t.getPDFDoc().getId(),t.getId(),this.getId())},e}(o.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(42)),r=i(n(10));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var s=function(t){function e(n,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r))}return a(e,t),e.prototype.getFillMode=function(){return this.info.fillMode},e.prototype.setBorderColor=function(e){if(!this.doc.checkPermission(r.default.modify))throw new Error("Permission error");return this.info.needStroke=0!==e,t.prototype.setBorderColor.call(this,e)},e.prototype.getPathPoints=function(){return this.info.path},e.prototype.needStroke=function(){return this.info.needStroke},e}(o.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(42)),r=a(n(3)),i=a(n(10));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var u=function(t){function e(n,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r))}return s(e,t),e.prototype.setRotation=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return n.api.setImageObjectRotation(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){return e.info=t,e.engine.eventEmitter.emit(r.default.graphicsUpdated,n),t}))},e}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:52428800;if(e instanceof ArrayBuffer&&e.byteLength>52428800)return new Blob([e]);if(e.buffer instanceof ArrayBuffer)return t(e.buffer,n);return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(135)),r=a(n(361)),i=n(362);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}function c(t){var e=[];return t instanceof ArrayBuffer&&(e=[t]),e}var l="FoxitPDFSDKForWeb_JREngineCache_",f=l+"wasmBinary",d=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=s(this,t.call(this,n)),a=void 0;if(a=n.readyWorker){o.readyWorker=a,p(o.workerPromise=new r.default(a.worker));var u=function(){n.licenseSN=n.licenseKey=n.l=""};return a.initJREnginePromise.then(u,u),s(o)}var c=n.workerPath;"/"!==c[c.length-1]&&(c+="/");var l=o.workerUrl=c+"WebPDFJRWorker.js?h="+i.h,f=new Worker(l);return f.terminate(),f=new Worker(l),p(o.workerPromise=new r.default(f)),o}return u(e,t),e.prototype.init=function(){var t=void 0;if(t=this.readyWorker)return new Promise((function(e,n){return t.initJREnginePromise.then(e,n)}));var e={},n=void 0;(n=localStorage.getItem(f))&&(e.wasmBinary=n),(n=localStorage.getItem("FoxitPDFSDKForWeb_JREngineCache_asmMem"))&&(e.asmMem=n),(n=localStorage.getItem("FoxitPDFSDKForWeb_JREngineCache_asmJs"))&&(e.asmJs=n);var o=this.option,r=this.workerPromise;return o.cache=e,o.compatibilityURL=r.calls((function(t){return URL.createObjectURL(t)})),o.d=location.href,r.emit("initJREngine",o).then((function(t){return o.licenseSN=o.licenseKey=o.l="",t}))},e.prototype.getPDFDocIdByFile=function(t){var e=c(t);return this.workerPromise.emit("getPDFDocByFile",{file:t},e)},e.prototype.createNewDoc=function(t,e,n){return this.workerPromise.emit("createNewDoc",{title:t,author:e,pageSize:n})},e.prototype.getPDFDocIdByChunk=function(t,e){var n=this.workerPromise.calls(e);return this.workerPromise.emit("getPDFDocAsync",{size:t,getChunk:n})},e.prototype.getPDFDocIdByHttpRangeRequest=function(t){return this.workerPromise.emit("getPDFDocIdByHttpRangeRequest",{size:t.size,range:t.range})},e.prototype.getPDFDocIdByArrayBuffer=function(t){return this.workerPromise.emit("getPDFDocByArrayBuffer",{buffer:t},[t])},e.prototype.setIcons=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.workerPromise.emit("setIcons",{icons:t})},e.prototype.addIcon=function(t){return this.workerPromise.emit("addIcon",{icon:t})},e.prototype.removeIcon=function(t,e,n){return this.workerPromise.emit("removeIcon",{type:t,catalog:e,name:n})},e.prototype.updateFormControl=function(t,e,n,o){return this.workerPromise.emit("updateFormControl",{docId:t,objectNumber:e,key:n,value:o})},e.prototype.parsePDFDocByPassword=function(t,e,n){var o=[];try{n.fdf.file instanceof ArrayBuffer&&(o=[n.fdf.file])}catch(t){}return this.workerPromise.emit("parsePDFDocByPassword",{id:t,password:e,initData:n},o)},e.prototype.getPDFDocInfoById=function(t){return this.workerPromise.emit("getPDFDocInfoById",t)},e.prototype.getMetadata=function(t){return this.workerPromise.emit("getMetadata",t)},e.prototype.setMetadataValue=function(t,e,n){return this.workerPromise.emit("setMetadataValue",{id:t,key:e,value:n})},e.prototype.loadForm=function(t){return this.workerPromise.emit("loadForm",{docId:t})},e.prototype.isLinearized=function(t){return this.workerPromise.emit("isLinearized",{docId:t})},e.prototype.updateField=function(t,e,n,o){return this.workerPromise.emit("updateField",{docId:t,title:e,key:n,value:o})},e.prototype.updateMKProperty=function(t,e,n,o,r){return this.workerPromise.emit("updateMKProperty",{docId:t,pageId:e,annotId:n,key:o,value:r})},e.prototype.setWidgetAS=function(t,e,n,o){return this.workerPromise.emit("setWidgetAS",{docId:t,pageId:e,annotId:n,AS:o})},e.prototype.setFieldValue=function(t,e,n){return this.workerPromise.emit("setFieldValue",{docId:t,title:e,value:n})},e.prototype.formFillerEvent=function(t,e,n,o){return this.workerPromise.emit("formFillerEvent",{docId:t,type:e,pageIndex:n,point:o})},e.prototype.getFieldsValue=function(t){return this.workerPromise.emit("getFieldsValue",{docId:t})},e.prototype.addControl=function(t,e,n,o,r){return this.workerPromise.emit("addControl",{docId:t,pageIndex:e,fieldName:n,fieldType:o,rect:r})},e.prototype.validateFieldName=function(t,e,n){return this.workerPromise.emit("validateFieldName",{docId:t,fieldName:e,fieldType:n})},e.prototype.renameField=function(t,e,n){return this.workerPromise.emit("renameField",{docId:t,fieldName:e,newName:n})},e.prototype.removeField=function(t,e){return this.workerPromise.emit("removeField",{docId:t,fieldName:e})},e.prototype.removeControl=function(t,e,n){return this.workerPromise.emit("removeControl",{docId:t,fieldName:e,controlObjectNumber:n})},e.prototype.fixPageFields=function(t,e){return this.workerPromise.emit("fixPageFields",{docId:t,pageIndex:e})},e.prototype.getPageInfoByIndex=function(t,e){return this.workerPromise.emit("getPageInfoByIndex",{id:t,index:e})},e.prototype.setRenderFlag=function(t,e){return this.workerPromise.emit("setRenderFlag",{docId:t,flags:e})},e.prototype.getPageBitmap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:["page"],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"view";return this.workerPromise.emit("getPageBitmap",{docId:t,pageId:e,scale:n,rotate:o,rect:r,flags:i,usage:a})},e.prototype.getPageAndHighlightBitmap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments[4],i=arguments[5];return this.workerPromise.emit("getPageAndHighlightBitmap",{docId:t,pageId:e,scale:n,rotate:o,rect:r,exclude:i})},e.prototype.getAnnotBitmapByRange=function(t,e,n,o,r,i){return this.workerPromise.emit("getAnnotBitmapByRange",{docId:t,pageId:e,range:n,scale:o,rotate:r,rect:i})},e.prototype.getAnnot=function(t,e,n){return this.workerPromise.emit("getAnnot",{docId:t,pageId:e,annotId:n})},e.prototype.getPageAnnotIDList=function(t,e){return this.workerPromise.emit("getPageAnnotIDList",{docId:t,pageId:e})},e.prototype.getAnnots=function(t,e,n){return this.workerPromise.emit("getAnnots",{docId:t,pageId:e,idList:n})},e.prototype.getAnnotBitmap=function(t,e,n,o,r,i){return this.workerPromise.emit("getAnnotBitmap",{docId:t,pageId:e,annotId:n,scale:o,rotate:r,rect:i})},e.prototype.getAnnotIdAtPoint=function(t,e,n,o){var r=n.x,i=n.y;return this.workerPromise.emit("getAnnotIdAtPoint",{docId:t,pageId:e,points:{x:r,y:i},tolerance:o})},e.prototype.getAnnotIdAtDevicePoint=function(t,e,n,o,r){var i=n.x,a=n.y;return this.workerPromise.emit("getAnnotIdAtDevicePoint",{docId:t,pageId:e,points:{x:i,y:a},tolerance:o,matrix:r})},e.prototype.getCharInfoAtPoint=function(t,e,n,o){var r=n.x,i=n.y;return this.workerPromise.emit("getCharInfoAtPoint",{docId:t,pageId:e,points:{x:r,y:i},tolerance:o})},e.prototype.getThumb=function(t,e){return this.workerPromise.emit("getThumb",{docId:t,pageId:e})},e.prototype.movePageTo=function(t,e,n){return this.workerPromise.emit("movePageTo",{docId:t,pageId:e,destIndex:n})},e.prototype.insertPage=function(t,e,n,o){return this.workerPromise.emit("insertPage",{docId:t,pageIndex:e,width:n,height:o})},e.prototype.removePage=function(t,e){return this.workerPromise.emit("removePage",{docId:t,pageIndex:e})},e.prototype.updateAnnotQuadPointsByCharIndex=function(t,e,n,o,r){return this.workerPromise.emit("updateAnnotQuadPointsByCharIndex",{docId:t,pageId:e,annotId:n,startCharIndex:o,endCharIndex:r})},e.prototype.setAnnotContent=function(t,e,n,o){return this.workerPromise.emit("setAnnotContent",{docId:t,pageId:e,annotId:n,content:o})},e.prototype.setAnnotBorderColor=function(t,e,n,o){return this.workerPromise.emit("setAnnotBorderColor",{docId:t,pageId:e,annotId:n,color:o})},e.prototype.setAnnotBorderStyle=function(t,e,n,o,r){return this.workerPromise.emit("setAnnotBorderStyle",{docId:t,pageId:e,annotId:n,style:o,styleParam:r})},e.prototype.setAnnotBorderWidth=function(t,e,n,o){return this.workerPromise.emit("setAnnotBorderWidth",{docId:t,pageId:e,annotId:n,width:o})},e.prototype.setAnnotFillColor=function(t,e,n,o){return this.workerPromise.emit("setAnnotFillColor",{docId:t,pageId:e,annotId:n,color:o})},e.prototype.setAnnotBorderInfo=function(t,e,n,o){return this.workerPromise.emit("setAnnotBorderInfo",{docId:t,pageId:e,annotId:n,borderInfo:o})},e.prototype.setRedactApplyFillColor=function(t,e,n,o){return this.workerPromise.emit("setRedactApplyFillColor",{docId:t,pageId:e,annotId:n,color:o})},e.prototype.setAnnotOpacity=function(t,e,n,o){return this.workerPromise.emit("setAnnotOpacity",{docId:t,pageId:e,annotId:n,opacity:o})},e.prototype.setAnnotRotation=function(t,e,n,o){return this.workerPromise.emit("setAnnotRotation",{docId:t,pageId:e,annotId:n,rotation:o})},e.prototype.removeAnnot=function(t,e,n){return this.workerPromise.emit("removeAnnot",{docId:t,pageId:e,annotId:n})},e.prototype.annotAddReply=function(t,e,n,o){return this.workerPromise.emit("annotAddReply",{docId:t,pageId:e,annotId:n,content:o})},e.prototype.setAnnotRect=function(t,e,n,o){return this.workerPromise.emit("setAnnotRect",{docId:t,pageId:e,annotId:n,rect:o})},e.prototype.getAnnotInnerRect=function(t,e,n){return this.workerPromise.emit("getAnnotInnerRect",{docId:t,pageId:e,annotId:n})},e.prototype.moveAnnotTo=function(t,e,n,o){return this.workerPromise.emit("moveAnnotTo",{docId:t,pageId:e,annotId:n,position:o})},e.prototype.getPDFDocStream=function(t,e,n){var o=this.workerPromise.calls(e);return this.workerPromise.emit("getPDFDocStream",{docId:t,writeStream:o,flag:n})},e.prototype.setAnnotIconName=function(t,e,n,o){return this.workerPromise.emit("setAnnotIconName",{docId:t,pageId:e,annotId:n,iconName:o})},e.prototype.getFileattachmentStream=function(t,e,n,o){var r=this.workerPromise.calls(o);return this.workerPromise.emit("getFileattachmentStream",{docId:t,pageId:e,annotId:n,writeStream:r})},e.prototype.setAnnotEndingStyle=function(t,e,n,o,r){return this.workerPromise.emit("setAnnotEndingStyle",{docId:t,pageId:e,annotId:n,isBeginning:o,style:r})},e.prototype.enableLineCaption=function(t,e,n,o){return this.workerPromise.emit("enableLineCaption",{docId:t,pageId:e,annotId:n,enable:o})},e.prototype.setLineStartPoint=function(t,e,n,o,r){return this.workerPromise.emit("setLineStartPoint",{docId:t,pageId:e,annotId:n,x:o,y:r})},e.prototype.setLineEndPoint=function(t,e,n,o,r){return this.workerPromise.emit("setLineEndPoint",{docId:t,pageId:e,annotId:n,x:o,y:r})},e.prototype.setAnnotLeaderLineLength=function(t,e,n,o){return this.workerPromise.emit("setAnnotLeaderLineLength",{docId:t,pageId:e,annotId:n,length:o})},e.prototype.updateAnnotVertexes=function(t,e,n,o,r,i){return this.workerPromise.emit("updateAnnotVertexes",{docId:t,pageId:e,annotId:n,pointIndex:o,x:r,y:i})},e.prototype.setAnnotVertexes=function(t,e,n,o){return this.workerPromise.emit("setAnnotVertexes",{docId:t,pageId:e,annotId:n,vertexes:o})},e.prototype.setHighlightingMode=function(t,e,n,o){return this.workerPromise.emit("setHighlightingMode",{docId:t,pageId:e,annotId:n,highlightingMode:o})},e.prototype.setAnnotAPBitmap=function(t,e,n,o,r){return this.workerPromise.emit("setAnnotAPBitmap",{docId:t,pageId:e,annotId:n,url:o,size:r})},e.prototype.setAnnotInnerRect=function(t,e,n,o){var r=o.left,i=o.right,a=o.top,s=o.bottom;return this.workerPromise.emit("setAnnotInnerRect",{docId:t,pageId:e,annotId:n,rect:{left:r,right:i,top:a,bottom:s}})},e.prototype.setCalloutLineEndingStyle=function(t,e,n,o){return this.workerPromise.emit("setCalloutLineEndingStyle",{docId:t,pageId:e,annotId:n,endingStyle:o})},e.prototype.setAction=function(t,e,n,o){return this.workerPromise.emit("setAction",{docId:t,pageId:e,annotId:n,type:o})},e.prototype.removeAnnotAction=function(t,e,n){return this.workerPromise.emit("removeAnnotAction",{docId:t,pageId:e,annotId:n})},e.prototype.getAction=function(t,e,n){return this.workerPromise.emit("getAction",{docId:t,pageId:e,annotId:n})},e.prototype.setActionDataByIndex=function(t,e,n,o,r){return this.workerPromise.emit("setActionDataByIndex",{docId:t,pageId:e,annotId:n,data:o,actionIndex:r})},e.prototype.setCalloutLinePoints=function(t,e,n,o){return this.workerPromise.emit("setCalloutLinePoints",{docId:t,pageId:e,annotId:n,calloutLinePoints:o})},e.prototype.setSubject=function(t,e,n,o){return this.workerPromise.emit("setSubject",{docId:t,pageId:e,annotId:n,subject:o})},e.prototype.setTitle=function(t,e,n,o){return this.workerPromise.emit("setTitle",{docId:t,pageId:e,annotId:n,title:o})},e.prototype.setCreateDateTime=function(t,e,n,o){return this.workerPromise.emit("setCreateDateTime",{docId:t,pageId:e,annotId:n,date:o})},e.prototype.setModifiedDateTime=function(t,e,n,o){return this.workerPromise.emit("setModifiedDateTime",{docId:t,pageId:e,annotId:n,date:o})},e.prototype.setUniqueId=function(t,e,n,o){return this.workerPromise.emit("setUniqueId",{docId:t,pageId:e,annotId:n,newId:o})},e.prototype.setDefaultAp=function(t,e,n,o){return this.workerPromise.emit("setDefaultAp",{docId:t,pageId:e,annotId:n,defaultAppearance:o})},e.prototype.setAlignment=function(t,e,n,o){return this.workerPromise.emit("setAlignment",{docId:t,pageId:e,annotId:n,value:o})},e.prototype.setAnnotFlag=function(t,e,n,o){return this.workerPromise.emit("setAnnotFlag",{docId:t,pageId:e,annotId:n,flag:o})},e.prototype.importFromFDF=function(t,e,n){var o=c(e);return this.workerPromise.emit("importFromFDF",{docId:t,fdf:e,dataType:n},o)},e.prototype.importFromFDFFile=function(t,e,n,o){return this.workerPromise.emit("importFromFDFFile",{docId:t,file:e,size:n,type:o})},e.prototype.exportToFDF=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return this.workerPromise.emit("exportToFDF",{docId:t,fileType:e,dataType:n})},e.prototype.addAnnot=function(t,e,n){return this.workerPromise.emit("addAnnot",{docId:t,pageId:e,annot:n})},e.prototype.markRedactAnnot=function(t,e,n,o){return this.workerPromise.emit("markRedactAnnot",{docId:t,pageId:e,rects:n,annot:o})},e.prototype.redactApply=function(t,e,n){return this.workerPromise.emit("redactApply",{docId:t,pageId:e,annotId:n})},e.prototype.applyRedaction=function(t){return this.workerPromise.emit("applyRedaction",{docId:t})},e.prototype.addAnnotGroup=function(t,e,n,o){return this.workerPromise.emit("addAnnotGroup",{docId:t,pageId:e,annots:n,headerIndex:o})},e.prototype.getBookmarks=function(t){return this.workerPromise.emit("getBookmarks",{docId:t})},e.prototype.createRootBookmark=function(t){return this.workerPromise.emit("createRootBookmark",{docId:t})},e.prototype.insertBookmark=function(t,e,n,o,r,i,a){return this.workerPromise.emit("insertBookmark",{docId:t,pbkId:e,title:n,pageIndex:o,top:r,left:i,relationship:a})},e.prototype.setBookmarkProperty=function(t,e,n){return this.workerPromise.emit("setBookmarkProperty",{docId:t,bkId:e,properties:n})},e.prototype.removeBookmark=function(t,e){return this.workerPromise.emit("removeBookmark",{docId:t,bkId:e})},e.prototype.getLayerNodes=function(t){return this.workerPromise.emit("getLayerNodes",{docId:t})},e.prototype.setLayerNodeVisiable=function(t,e,n){return this.workerPromise.emit("setLayerNodeVisiable",{docId:t,layerId:e,visiable:n})},e.prototype.getTextRectsAtRect=function(t,e,n){return this.workerPromise.emit("getTextRectsAtRect",{docId:t,pageId:e,rect:n})},e.prototype.getTextContinuousRectsAtRect=function(t,e,n){return this.workerPromise.emit("getTextContinuousRectsAtRect",{docId:t,pageId:e,rect:n})},e.prototype.getTextContinuousRectsAtPoints=function(t,e,n,o,r,i,a){return this.workerPromise.emit("getTextContinuousRectsAtPoints",{docId:t,pageId:e,point1:n,point2:o,tolerance:r,start:i,end:a})},e.prototype.getTextContinuousCharsAtRect=function(t,e,n){return this.workerPromise.emit("getTextContinuousCharsAtRect",{docId:t,pageId:e,rect:n})},e.prototype.getTextSearch=function(t,e,n,o){return this.workerPromise.emit("getTextSearch",{docId:t,pageId:e,pattern:n,flags:o})},e.prototype.textSearchFindNext=function(t){return this.workerPromise.emit("textSearchFindNext",{id:t})},e.prototype.textSearchFindPrev=function(t){return this.workerPromise.emit("textSearchFindPrev",{id:t})},e.prototype.textSearchDestroy=function(t){return this.workerPromise.emit("textSearchDestroy",{id:t})},e.prototype.registerSecurityCallback=function(t,e){return this.workerPromise.emit("registerSecurityCallback",{type:t,options:e})},e.prototype.destroyDoc=function(t){return this.workerPromise.emit("destroyDoc",{id:t})},e.prototype.destroyPage=function(t,e){return this.workerPromise.emit("destroyPage",{docId:t,pageId:e})},e.prototype.setDocOpenAction=function(t,e){return this.workerPromise.emit("setDocOpenAction",{docId:t,type:e})},e.prototype.setDocActionData=function(t,e,n){return this.workerPromise.emit("setDocActionData",{docId:t,data:e,index:n})},e.prototype.moveCaretRectByCharIndex=function(t,e,n,o){return this.workerPromise.emit("moveCaretRectByCharIndex",{docId:t,pageId:e,annotId:n,charIndex:o})},e.prototype.setAnnotIntent=function(t,e,n,o){return this.workerPromise.emit("setAnnotIntent",{docId:t,pageId:e,annotId:n,intent:o})},e.prototype.setInkList=function(t,e,n,o){return this.workerPromise.emit("setInkList",{docId:t,pageId:e,annotId:n,inkList:o})},e.prototype.setUserName=function(t){return this.workerPromise.emit("setUserName",{name:t})},e.prototype.getUserName=function(){return this.workerPromise.emit("getUserName")},e.prototype.addAnnotReviewState=function(t,e,n,o){return this.workerPromise.emit("addAnnotReviewState",{docId:t,pageId:e,annotId:n,stateName:o})},e.prototype.addAnnotMarkedState=function(t,e,n,o){return this.workerPromise.emit("addAnnotMarkedState",{docId:t,pageId:e,annotId:n,stateName:o})},e.prototype.removeAllStateAnnots=function(t,e,n){return this.workerPromise.emit("removeAllStateAnnots",{docId:t,pageId:e,annotId:n})},e.prototype.setStateName=function(t,e,n,o){return this.workerPromise.emit("setStateName",{docId:t,pageId:e,stateAnnotId:n,stateName:o})},e.prototype.setNoteOpenStatus=function(t,e,n,o){return this.workerPromise.emit("setNoteOpenStatus",{docId:t,pageId:e,annotId:n,isOpen:o})},e.prototype.flatten=function(t,e,n){return this.workerPromise.emit("flatten",{docId:t,pageId:e,option:n})},e.prototype.setDynamicInfoFormula=function(t,e){return this.workerPromise.emit("setDynamicInfoFormula",{seperator:t,timeFormat:e})},e.prototype.getGraphicObjectsInfo=function(t,e){return this.workerPromise.emit("getGraphicObjectsInfo",{docId:t,pageId:e})},e.prototype.updatePageInfo=function(t,e){return this.workerPromise.emit("updatePageInfo",{docId:t,pageId:e})},e.prototype.setPageRotation=function(t,e,n){return this.workerPromise.emit("setPageRotation",{docId:t,pageId:e,rotation:n})},e.prototype.addPageImage=function(t,e,n,o,r,i){return this.workerPromise.emit("addPageImage",{docId:t,pageId:e,imageBuffer:n,point:o,width:r,height:i})},e.prototype.addWatermark=function(t,e,n){return this.workerPromise.emit("addWatermark",{docId:t,pageId:e,data:n})},e.prototype.setPasswordAndPermission=function(t,e,n,o,r,i){return this.workerPromise.emit("setPasswordAndPermission",{docId:t,userPassword:e,ownerPassword:n,permission:o,cipher:r,isEncryptMetaData:i})},e.prototype.removeSecurity=function(t){return this.workerPromise.emit("removeSecurity",{docId:t})},e.prototype.checkPassword=function(t,e){return this.workerPromise.emit("checkPassword",{docId:t,password:e})},e.prototype.getPermission=function(t){return this.workerPromise.emit("getPermission",{docId:t})},e.prototype.getStdCipherOptions=function(t){return this.workerPromise.emit("getStdCipherOptions",{docId:t})},e.prototype.getUserPassword=function(t,e){return this.workerPromise.emit("getUserPassword",{docId:t,password:e})},e.prototype.getGraphicsObjectAtPoint=function(t,e,n,o,r){return this.workerPromise.emit("getGraphicsObjectAtPoint",{docId:t,pageId:e,point:n,tolerance:o,type:r})},e.prototype.setGraphicsObjectMatrix=function(t,e,n,o){return this.workerPromise.emit("setGraphicsObjectMatrix",{docId:t,pageId:e,id:n,rect:o})},e.prototype.getGraphicsObjectBitmap=function(t,e,n,o){return this.workerPromise.emit("getGraphicsObjectBitmap",{docId:t,pageId:e,id:n,scale:o})},e.prototype.setGraphicsObjectBorderStyle=function(t,e,n,o,r){return this.workerPromise.emit("setGraphicsObjectBorderStyle",{docId:t,pageId:e,id:n,value:o,dashes:r})},e.prototype.setGraphicsObjectBorderWidth=function(t,e,n,o){return this.workerPromise.emit("setGraphicsObjectBorderWidth",{docId:t,pageId:e,id:n,width:o})},e.prototype.setGraphicsObjectBorderColor=function(t,e,n,o){return this.workerPromise.emit("setGraphicsObjectBorderColor",{docId:t,pageId:e,id:n,color:o})},e.prototype.setGraphicsObjectFillColor=function(t,e,n,o){return this.workerPromise.emit("setGraphicsObjectFillColor",{docId:t,pageId:e,id:n,color:o})},e.prototype.setGraphicsObjectOpacity=function(t,e,n,o){return this.workerPromise.emit("setGraphicsObjectOpacity",{docId:t,pageId:e,id:n,opacity:o})},e.prototype.addGraphicsObject=function(t,e,n){return this.workerPromise.emit("addGraphicsObject",{docId:t,pageId:e,info:n})},e.prototype.setImageObjectOpacity=function(t,e,n,o){return this.workerPromise.emit("setImageObjectOpacity",{docId:t,pageId:e,id:n,opacity:o})},e.prototype.setImageObjectRotation=function(t,e,n,o){return this.workerPromise.emit("setImageObjectRotation",{docId:t,pageId:e,id:n,rotation:o})},e.prototype.insertSubAction=function(t,e,n,o){return this.workerPromise.emit("insertSubAction",{docId:t,objNum:e,index:n,type:o})},e.prototype.setSubAction=function(t,e,n,o){return this.workerPromise.emit("setSubAction",{docId:t,objNum:e,index:n,type:o})},e.prototype.removeAllSubActions=function(t,e){return this.workerPromise.emit("removeAllSubActions",{docId:t,objNum:e})},e.prototype.removeSubAction=function(t,e,n){return this.workerPromise.emit("removeSubAction",{docId:t,objNum:e,index:n})},e.prototype.setActionData=function(t,e,n){return this.workerPromise.emit("setActionData",{docId:t,objNum:e,data:n})},e.prototype.removeGraphicsObject=function(t,e,n){return this.workerPromise.emit("removeGraphicsObject",{docId:t,pageId:e,id:n})},e.prototype.setPopupOpenStatus=function(t,e,n,o){return this.workerPromise.emit("setPopupOpenStatus",{docId:t,pageId:e,annotId:n,status:o})},e.prototype.removePageAllAnnot=function(t,e){return this.workerPromise.emit("removePageAllAnnot",{docId:t,pageId:e})},e.prototype.setTextObjectChar=function(t,e,n,o){return this.workerPromise.emit("setTextObjectChar",{docId:t,pageId:e,id:n,char:o})},e.prototype.setTextObjectItalic=function(t,e,n,o){return this.workerPromise.emit("setTextObjectItalic",{docId:t,pageId:e,id:n,italic:o})},e.prototype.setTextObjectBold=function(t,e,n,o){return this.workerPromise.emit("setTextObjectBold",{docId:t,pageId:e,id:n,bold:o})},e.prototype.setTextObjectFontSize=function(t,e,n,o){return this.workerPromise.emit("setTextObjectFontSize",{docId:t,pageId:e,id:n,size:o})},e.prototype.setTextObjectStandardFont=function(t,e,n,o){return this.workerPromise.emit("setTextObjectStandardFont",{docId:t,pageId:e,id:n,standardId:o})},e.prototype.setTextObjectFontByName=function(t,e,n,o,r,i){return this.workerPromise.emit("setTextObjectFontByName",{docId:t,pageId:e,id:n,name:o,styles:r,charset:i})},e.prototype.getTextObjectWoff=function(t,e,n){return this.workerPromise.emit("getTextObjectWoff",{docId:t,pageId:e,id:n})},e.prototype.getAnnotWoff=function(t,e,n){return this.workerPromise.emit("getAnnotWoff",{docId:t,pageId:e,id:n})},e.prototype.drmEncrypt=function(t,e){return this.workerPromise.emit("drmEncrypt",{docId:t,options:e})},e.prototype.getActionFileStream=function(t,e,n){var o=this.workerPromise.calls(n);return this.workerPromise.emit("getActionFileStream",{docId:t,objNum:e,writeStream:o})},e.prototype.getTemplates=function(t){return this.workerPromise.emit("getTemplates",{docId:t})},e.prototype.hideTemplate=function(t,e,n){return this.workerPromise.emit("hideTemplate",{docId:t,templateObj:e,isHidden:n})},e.prototype.spawnPage=function(t,e,n,o,r){return this.workerPromise.emit("spawnPage",{docId:t,templateObj:e,nPage:n,bRename:o,bOverlay:r})},e.prototype.setFieldsValue=function(t,e,n){return this.workerPromise.emit("setFieldsValue",{docId:t,fieldsValue:e,resetAP:n})},e.prototype.removeTemplate=function(t,e){return this.workerPromise.emit("removeTemplate",{docId:t,name:e})},e.prototype.getFontBufferByName=function(t,e){return this.workerPromise.emit("getFontBufferByName",{docId:t,fontName:e})},e.prototype.getPageSizes=function(t,e,n){return this.workerPromise.emit("getPageSizes",{docId:t,index:e,count:n})},e.prototype.setMeasureRatio=function(t,e,n,o){return this.workerPromise.emit("setMeasureRatio",{docId:t,pageId:e,annotId:n,ratioInfo:o})},e.prototype.setMeasureUnit=function(t,e,n,o){return this.workerPromise.emit("setMeasureUnit",{docId:t,pageId:e,annotId:n,unit:o})},e.prototype.startImportPages=function(t,e,n,o,r,i,a,s){return this.workerPromise.emit("startImportPages",{docId:t,destIndex:e,file:n,password:o,flags:r,layerName:i,startIndex:a,endIndex:s})},e.prototype.insertPagesToOther=function(t,e,n,o,r,i,a,s,u,c,l){var f=this.workerPromise.calls(a);return this.workerPromise.emit("insertPagesToOther",{docId:t,destIndex:e,file:n,password:o,otherFile:r,otherPassword:i,writeStream:f,flags:s,layerName:u,startIndex:c,endIndex:l})},e.prototype.extractPages=function(t,e,n,o,r){var i=this.workerPromise.calls(n);return this.workerPromise.emit("extractPages",{docId:t,pageRange:e,writeStream:i,file:o,password:r})},e.prototype.getHeaderFooter=function(t){return this.workerPromise.emit("getHeaderFooter",t)},e.prototype.addHeaderFooter=function(t,e){return this.workerPromise.emit("addHeaderFooter",{headerFooter:e,docId:t})},e.prototype.updateHeaderFooter=function(t,e){return this.workerPromise.emit("updateHeaderFooter",{headerFooter:e,docId:t})},e.prototype.removeHeaderFooter=function(t){return this.workerPromise.emit("removeHeaderFooter",t)},e.prototype.paste=function(t,e,n,o,r,i){return this.workerPromise.emit("paste",{docId:t,pageId:e,srcPageId:n,type:o,objectId:r,position:i})},e.prototype.setFontMap=function(t){return this.workerPromise.emit("setFontMap",t)},e.prototype.setWatermarkFontMap=function(t){return this.workerPromise.emit("setWatermarkFontMap",t)},e.prototype.getAnnotsRawData=function(t,e){return this.workerPromise.emit("getAnnotsRawData",{docId:t,rawAnnots:e})},e.prototype.attachFile=function(t,e){return this.workerPromise.emit("attachFile",{docId:t,blob:e})},e}(o.default);function p(t){t.on("wasmBinary",(function(t){localStorage.setItem(f,t)})),t.on("asmMem",(function(t){localStorage.setItem("FoxitPDFSDKForWeb_JREngineCache_asmMem",t)})),t.on("asmJs",(function(t){localStorage.setItem("FoxitPDFSDKForWeb_JREngineCache_asmJs",t)}))}e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(45),i=(o=r)&&o.__esModule?o:{default:o},a=n(11);var s=function(){},u={},c={};var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worker=e;var n=this.listeners={};e.onmessage=function(t){var o=t.data;if(-1===o.type)return console.log(o.params);var r=o.destroyId;if(r)delete c[r];else{var i=o.params;if(o.uiListener){var l=n[o.uiListener];if(l)for(var f=0,d=l.length;f<d;f++)l[f](i)}else{var p=o.callId;if(p)Promise.resolve((c[p]||s)(i)).then((function(t){var n=t instanceof ArrayBuffer?[t]:[];(0,a.isIE10)()&&(n=null),e.postMessage({backId:o.backId,params:t},n)}));else{var h=o.id,g=u[h],y=+o.type;try{g[["resolve","reject"][y]](i)}catch(t){}delete u[h]}}}},e.onerror=function(t){console.error("WorkerError",t)}}return t.prototype.emit=function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,a.isIE10)()&&(o=null),new Promise((function(a,s){var c=(0,i.default)("worker");u[c]={resolve:a,reject:s},n.worker.postMessage({name:t,params:e,id:c,more:r},o)}))},t.prototype.calls=function(t){var e=(0,i.default)("worker_call");return c[e]=t,e},t.prototype.on=function(t,e){(this.listeners[t]=this.listeners[t]||[]).push(e)},t}();e.default=l},function(t,e,n){"use strict";n.r(e),n.d(e,"h",(function(){return o}));var o="c8d66aa80b7cabf8be5f1fdf02c4134a"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.createClass=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.hasOwnProperty(t,"constructor"),s=a?t.constructor:void 0,u=function(t){function e(){o(this,e);var n=r(this,t.apply(this,arguments));return a?r(n,s.apply(n,arguments)):n}return i(e,t),e}(e);a&&delete t.constructor;return Object.assign(u.prototype,t),t.constructor=s,Object.assign(u,n),u}}])}));