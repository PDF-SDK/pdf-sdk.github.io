!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],t):"object"==typeof exports?exports.PasswordProtectAddon=t(require("UIExtension")):e.PasswordProtectAddon=t(e.UIExtension)}(self,(function(e){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,t,r){"use strict";e.exports=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0)),n=d(r(3));r(8);var s=d(r(9)),a=d(r(10)),i=d(r(11)),c=d(r(12)),p=d(r(13));function d(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var v=(0,c.default)(),w=(0,p.default)(),h=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return f(t,e),t.getName=function(){return"password-protect"},t.getLoader=function(){return i.default},t.init=function(e){var t=o.modular.module("password-protect",[]),r=t.getRegistry();this.module=t,r.registerComponent(n.default),t.registerFragment("password-protect-button",{template:v,config:[{target:"password-protect-btn",tooltip:{title:"password-protect:buttons.title"},callback:s.default}]}),t.registerFragment("remove-protect-button",{template:w,config:[{target:"remove-protect-btn",tooltip:{title:"password-protect:buttons.removeTitle"},callback:a.default}]})},t.prototype.fragments=function(){return[]},t}(o.UIXAddon);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));r(4);var n,s=r(5),a=(n=s)&&n.__esModule?n:{default:n};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var c=void 0,p=function(e){function t(r,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r,o,n));return s.userPasswordChanged=!1,s.destroyDataHooks=[],c=n.i18next,s}return i(t,e),t.getName=function(){return"password-protect-popup"},t.prototype.bindEvent=function(e,t,r){var o=this,n=this.element.querySelectorAll(e);0!=n.length&&n.forEach((function(e){e.addEventListener(t,r),o.destroyDataHooks.push((function(){e.removeEventListener(t,r)}))}))},t.prototype.render=function(){e.prototype.render.call(this),this.element.classList.add("fv__password-protect-popup")},t.prototype.setSubmitCallback=function(e){this.submitCallback=e},t.prototype.getFormDataAndCheckDataValid=function(){var e=document.querySelectorAll("input[name='algorithm']"),t=void 0,r={userPassword:!1,ownerPassword:!1,permission:!1,algorithm:!1,encryptMetadata:!1};e.forEach((function(e){e.checked&&(t=e.value)}));var o=void 0;if(this.element.querySelector(".fv__user-password-checkbox").checked){o=this.element.querySelector(".fv__user-password1").value;var n=this.element.querySelector(".fv__user-password2").value;if(o!==n){if(this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),""!==o&&""!==n){var s=c.t("password-protect:error.open-pwd-not-match");this.showError(s)}return!1}}else o=this.userPasswordChanged?"":"aes256"==t?-1:this.originData.userPassword;var a=void 0,i=void 0,p=void 0,d=void 0,l=void 0;if(this.element.querySelector(".fv__owner-password-checkbox").checked){a=this.element.querySelector(".fv__owner-password1").value;var u=this.element.querySelector(".fv__owner-password2").value;if(a!==u){if(this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),""!==a&&""!==u){var f=c.t("password-protect:error.permission-pwd-not-match");this.showError(f)}return!1}i=this.element.querySelector(".fv__permission-print").value,p=this.element.querySelector(".fv__permission-accessibility").checked,d=this.element.querySelector(".fv__permission-copy").checked,l=this.element.querySelector(".fv__permission-change").value}else a=this.originData.ownerPassword,i=this.originData.print,p=this.originData.accessibility,d=this.originData.copy,l=this.originData.change;if(!(o&&-1!==o||a))return this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),!1;if(o===a){var v=c.t("password-protect:error.open-owner-pwd-cannot-same");return this.showError(v),this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),!1}var w=!this.element.querySelector(".fv__encrypt-not-metadata").checked,h=65532;return i<2&&(h^=2048,i<1&&(h^=4)),p||(h^=512),d||(h^=16),4===(l=+l)?h^=1024:3===l?(h^=8,h^=1024):2===l?(h^=8,h^=32,h^=1024):1===l?(h^=8,h^=32,h^=256):0===l&&(h^=8,h^=32,h^=256,h^=1024),h+=4294901760,this.hideError(),this.element.querySelector(".fv__password-btn").removeAttribute("disabled"),this.userPasswordChanged&&(r.userPassword=!0),a!==this.originData.ownerPassword&&(r.ownerPassword=!0),[o,a,h,t,w,r]},t.prototype.updateData=function(e){var t=this;this.userPasswordChanged=!1,this.originData=e,this.destroyDataHooks.forEach((function(e){return e()})),this.element.querySelector(".fv__ui-layer-panel").innerHTML=(0,a.default)(e),this.localize(),this.bindEvent(".fv__show-password","click",(function(e){var t=e.srcElement;t.classList.contains("fv__hide-password")?(t.classList.remove("fv__hide-password"),t.previousElementSibling.type="password"):(t.classList.add("fv__hide-password"),t.previousElementSibling.type="text")})),this.bindEvent(".fv__password","keyup",(function(e){e.srcElement.value=e.srcElement.value.replace(/[^\x00-\x80]/g,""),t.getFormDataAndCheckDataValid()})),this.bindEvent(".fv__password-btn","click",(function(e){t.submit()})),this.bindEvent(".fv__password-cancel","click",(function(e){t.hide()})),this.bindEvent(".fv__user-password-checkbox","change",(function(e){t.element.querySelectorAll(".fv__user-password-container input").forEach((function(r){r!==e.target&&(r.disabled=!e.target.checked,t.userPasswordChanged=!0)})),t.getFormDataAndCheckDataValid()})),this.bindEvent(".fv__owner-password-checkbox","change",(function(e){var r=t.element.querySelectorAll(".fv__owner-password-container input,.fv__owner-password-container select,.fv__user-password-input input");t.element.querySelector(".fv__user-password-checkbox").checked=!!e.target.checked,r.forEach((function(t){t!==e.target&&(t.disabled=!e.target.checked)})),t.getFormDataAndCheckDataValid()}));var r=!0;this.bindEvent(".fv__algorithm-radio","change",(function(e){if(r&&e.target.checked&&"aes128"===e.target.value&&""===t.originData.userPassword&&""!==t.originData.ownerPassword&&"aes256"===t.originData.cipherType){var o=t.element.querySelector(".fv__user-password1").value,n=t.element.querySelector(".fv__user-password2").value;if(""===o&&""===n){t.element.querySelector(".fv__user-password-checkbox").checked=!0,t.element.querySelector(".fv__user-password1").removeAttribute("disabled"),t.element.querySelector(".fv__user-password2").removeAttribute("disabled");var s=c.t("password-protect:error.security-reset-pwd");t.showError(s,!0),r=!1}}}))},t.prototype.submit=function(){var e=this.getFormDataAndCheckDataValid();return this.submitCallback.apply(this,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))},t.prototype.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.element.querySelector(".fv__password-protect-error .fv__password-protect-error-header").innerHTML=c.t("password-protect:dialog.warn"),this.element.querySelector(".fv__password-protect-error").classList.add("fv__warn")):(this.element.querySelector(".fv__password-protect-error .fv__password-protect-error-header").innerHTML=c.t("password-protect:dialog.error"),this.element.querySelector(".fv__password-protect-error").classList.remove("fv__warn")),this.element.querySelector(".fv__password-protect-error").classList.remove("fv__hide"),this.element.querySelector(".fv__password-protect-error .fv__password-protect-error-msg").innerHTML=e},t.prototype.hideError=function(){this.element.querySelector(".fv__password-protect-error").classList.add("fv__hide")},t.prototype.destroy=function(){this.destroyHooks.forEach((function(e){return e()})),this.destroyDataHooks.forEach((function(e){return e()}))},t}(o.widgets.LayerComponent);t.default=p},function(e,t,r){},function(e,t,r){var o=r(1);e.exports=function(e){"use strict";e=e||{};var t="",r=o.$escape;return t+='<div class="fv__ui-password-protect-popup-body">\n    <div class="fv__password-protect-error fv__hide">\n        <div class="fv__password-protect-error-header"></div>\n        <div class="fv__password-protect-error-msg"></div>\n    </div>\n        <div class="fv__password-caption" data-i18n="password-protect:dialog.doc-open-caption"></div>\n    <div class="fv__user-password-container fv__password-container">\n        <label>\n            <input type="checkbox" class="fv__user-password-checkbox" ',(e.userPassword||e.ownerPassword)&&(t+="checked"),t+=' />\n            <span data-i18n="password-protect:dialog.password-check-hint"></span>\n        </label>\n        <div class="fv__user-password-input">\n            <div class="fv__password-input">\n                <span data-i18n="password-protect:dialog.password-label"></span>\n                <input type="password" class="fv__password fv__user-password1" value="',t+=r(e.userPassword),t+='" ',e.userPassword||e.ownerPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-user1"></div>\n            </div>\n            <div class="fv__password-input">\n                <span data-i18n="password-protect:dialog.password-confirm-label"></span>\n                <input type="password" class="fv__password fv__user-password2" value="',t+=r(e.userPassword),t+='" ',e.userPassword||e.ownerPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-user2"></div>\n            </div>\n            <div style="clear:both"></div>\n        </div>\n    </div>\n        <div class="fv__password-caption" data-i18n="password-protect:dialog.document-restriction-caption"></div>\n    <div class="fv__owner-password-container fv__password-container">\n        <label>\n            <input type="checkbox" class="fv__owner-password-checkbox" ',e.ownerPassword&&(t+="checked"),t+=' />\n            <span data-i18n="password-protect:dialog.add-document-restriction"></span>\n        </label>\n        <div class="fv__owner-password-input">\n            <div class="fv__password-input">\n                <span data-i18n="password-protect:dialog.password-label"></span>\n                <input type="password" class="fv__password fv__owner-password1" value="',t+=r(e.ownerPassword),t+='" ',e.ownerPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-owner1"></div>\n            </div>\n            <div class="fv__password-input">\n                <span data-i18n="password-protect:dialog.password-confirm-label"></span> \n                <input type="password" class="fv__password fv__owner-password2" value="',t+=r(e.ownerPassword),t+='" ',e.ownerPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-owner2"></div>\n            </div>\n            <div style="clear:both"></div>\n        </div>\n        <div class="fv__password-caption" data-i18n="password-protect:dialog.permission-specific-caption"></div>\n        <div class="fv__password-permissions">\n            <div>\n                <span class="fv__permission-label" data-i18n="password-protect:dialog.printing-label"></span>\n                <select class="fv__permission-print" ',e.ownerPassword||(t+="disabled"),t+='>\n                    <option value="0" ',0==e.print&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.printing-none"></option>\n                    <option value="1" ',1==e.print&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.printing-low"></option>\n                    <option value="2" ',2==e.print&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.printing-high"></option>\n                </select>\n            </div>\n            <div>\n                <span class="fv__permission-label" data-i18n="password-protect:dialog.perm-access-label"></span>\n                <input type="checkbox" class="fv__permission-accessibility" ',e.ownerPassword||(t+="disabled"),t+=" ",e.accessibility&&(t+=" checked"),t+=' />\n            </div>\n            <div>\n                <span class="fv__permission-label" data-i18n="password-protect:dialog.perm-copy-label"></span>\n                <input type="checkbox" class="fv__permission-copy" ',e.ownerPassword||(t+="disabled"),t+=" ",e.copy&&(t+=" checked"),t+=' />\n            </div>\n            <div>\n                <span class="fv__permission-label" data-i18n="password-protect:dialog.perm-change-label"></span>\n                <select class="fv__permission-change" ',e.ownerPassword||(t+="disabled"),t+='>\n                    <option value="0" ',0==e.change&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.perm-changes-none"></option>\n                    <option value="1" ',1==e.change&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.perm-changes-1"></option>\n                    <option value="2" ',2==e.change&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.perm-changes-2"></option>\n                    <option value="3" ',3==e.change&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.perm-changes-3"></option>\n                    <option value="4" ',4==e.change&&(t+=" selected"),t+=' data-i18n="password-protect:dialog.perm-changes-4"></option>\n                </select>\n            </div>\n        </div>\n    </div>\n        <div class="fv__password-caption"data-i18n="password-protect:dialog.encrypt-caption"></div>\n    <div class="fv__encrypt-setting-container fv__password-container">\n        <div>\n            <span data-i18n="password-protect:dialog.enc-alg-label"></span>\n            <label><input name="algorithm" class="fv__algorithm-radio" type="radio" value="aes128" ',"aes128"==e.cipherType&&(t+="checked"),t+=' />128-bit AES</label>\n            <label><input name="algorithm" class="fv__algorithm-radio" type="radio" value="aes256" ',"aes256"==e.cipherType&&(t+="checked"),t+=' />256-bit AES</label>\n        </div>\n        <div>\n                <input type="checkbox" class="fv__encrypt-not-metadata" ',e.isEncryptMetadata||(t+="checked"),t+=' />\n                <span data-i18n="password-protect:dialog.enc-no-metadata"></span>\n        </div>\n    </div>\n</div>\n<div class="fv__button-container">\n    <button type="button" class="fv__password-cancel fv__ui-dialog-cancel-button" data-i18n="password-protect:dialog.cancel"></button>\n    <button type="button" class="fv__password-btn fv__ui-dialog-ok-button" ',e.ownerPassword||e.userPassword||(t+="disabled"),t+=' data-i18n="password-protect:dialog.ok"></button>\n</div>'}},function(e,t,r){"use strict";(function(t){
/*! art-template@runtime | https://github.com/aui/art-template */
var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},o=Object.create(r),n=/["&'<>]/;o.$escape=function(e){return function(e){var t=""+e,r=n.exec(t);if(!r)return e;var o="",s=void 0,a=void 0,i=void 0;for(s=r.index,a=0;s<t.length;s++){switch(t.charCodeAt(s)){case 34:i="&#34;";break;case 38:i="&#38;";break;case 39:i="&#39;";break;case 60:i="&#60;";break;case 62:i="&#62;";break;default:continue}a!==s&&(o+=t.substring(a,s)),a=s+1,o+=i}return a!==s?o+t.substring(a,s):o}(function e(t){"string"!=typeof t&&(t=null==t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},o.$each=function(e,t){if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)t(e[r],r);else for(var n in e)t(e[n],n)},e.exports=o}).call(this,r(7))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var s=o.PDFViewCtrl.Events,a=function(e){function t(r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r))}return n(t,e),t.prototype.handle=function(){var e=this,t=function(t){return e.getPDFUI().promptPassword("","password-protect:buttons.inputOwnerPassword","password-protect:buttons.title","body",t?"error":void 0,t)};if(this.needPassword){t().then((function r(o){if(!o)return t("password-protect:error.admin-pwd-cannot-blank").then(r,(function(){}));e.currentDoc.checkPassword(o).then((function(n){if(3!==n)return t("password-protect:warning.incorrect-owner-pwd").then(r,(function(){}));e.data.ownerPassword=o,e.needPassword=!1,e.currentDoc.setPasswordType(n),e.handle()}))}),(function(){}))}else this.popup.updateData(this.data),this.popup.show()},t.prototype.setDefaultData=function(){this.data={userPassword:"",ownerPassword:"",isEncryptMetadata:!0,cipherType:"aes256",print:2,accessibility:!0,copy:!0,change:4}},t.prototype.mounted=function(){var e=this;this.popup=this.getComponentByName("password-protect-popup");var t,r=this.getPDFUI();r.i18n.on("languageChanged",t=function(){e.popup.localize()}),this.addDestroyHook((function(){r.i18n.off("languageChanged",t)}),r.addViewerEventListener(s.openFileSuccess,(function(t){e.currentDoc=t,e.needPassword=!1,e.setDefaultData(),e.popup.setSubmitCallback((function(r,o,n,s,a,i){t.setPasswordAndPermission(r,o,n,s,a,i).then((function(t){t?(-1!==r&&(e.data.userPassword=r),e.data.ownerPassword=o,e.data.cipherType=s,e.data.isEncryptMetadata=a,e.data.permission=n,e.data=e.convertPermission(e.data),e.getComponentByName("remove-protect-btn").controller.activeBtn(),e.currentDoc.setPasswordType(3),e.popup.hide()):e.popup.showError()})).catch((function(t){e.popup.showError(t)}))})),t.getPasswordType().then((function(r){return 2==r&&(e.needPassword=!0),2==r?t.getStdCipherOptions():{}})).then((function(t){void 0===t.permission?e.setDefaultData():(e.data=e.convertPermission(t),e.data.userPassword="",e.data.ownerPassword="")}))})))},t.prototype.convertPermission=function(e){var t=e.permission;return e.print=2048&t?2:4&t?1:0,e.accessibility=!!(512&t),e.copy=!!(16&t),e.change=8&t&&32&t&&256&t?4:32&t&&256&t?3:256&t?2:1024&t?1:0,e},t}(o.Controller);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var s=o.PDFViewCtrl.Events,a=function(e){function t(r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r))}return n(t,e),t.prototype.handle=function(){var t=this;if(e.prototype.handle.call(this),this.active){var r=function(e){return t.getPDFUI().promptPassword("","password-protect:buttons.inputOwnerPassword","password-protect:buttons.title","body",e?"error":void 0,e)};if(this.needPassword){r().then((function e(o){if(!o)return r("password-protect:error.admin-pwd-cannot-blank").then(e,(function(){}));t.currentDoc.checkPassword(o).then((function(n){if(3!==n)return r("password-protect:warning.incorrect-owner-pwd").then(e,(function(){}));t.data.ownerPassword=o,t.needPassword=!1,t.currentDoc.setPasswordType(n),t.handle()}))}),(function(){}))}else this.getPDFUI().confirm("password-protect:dialog.remove.confirmation").then((function(){t.currentDoc.removeSecurity().then((function(e){e&&t.removeSecurityEvent()})).catch((function(e){console.log(e)}))}),(function(){}))}},t.prototype.mounted=function(){var e=this;this.getPDFUI().addViewerEventListener(s.openFileSuccess,(function(t){e.currentDoc=t,t.getPasswordType().then((function(t){2==t?(e.activeBtn(),e.needPassword=!0):3==t?(e.activeBtn(),e.needPassword=!1):e.inActiveBtn()}))}))},t.prototype.activeBtn=function(){this.component.element.classList.remove("fv__password-disabled-cursor"),this.active=!0},t.prototype.inActiveBtn=function(){this.component.element.classList.add("fv__password-disabled-cursor"),this.active=!1},t.prototype.removeSecurityEvent=function(){this.inActiveBtn();var e=this.getComponentByName("password-protect-btn");e.controller.setDefaultData(),e.controller.needPassword=!1},t}(o.Controller);t.default=a},function(e,t){e.exports=null},function(e,t,r){r(1);e.exports=function(e){"use strict";e=e||{};return'<div name="password-protect">\r\n    <xbutton name="password-protect-btn" icon-class="fv__icon-password-protect" @tooltip></xbutton>\r\n    <password-protect:password-protect-popup name="password-protect-popup" append-to="body" class="center" modal backdrop>\r\n        <layer-header title="password-protect:buttons.title" @draggable="{type:\'parent\'}"></layer-header>\r\n        <layer-view>\r\n        </layer-view>\r\n    </password-protect:password-protect-popup>\r\n</div>','<div name="password-protect">\r\n    <xbutton name="password-protect-btn" icon-class="fv__icon-password-protect" @tooltip></xbutton>\r\n    <password-protect:password-protect-popup name="password-protect-popup" append-to="body" class="center" modal backdrop>\r\n        <layer-header title="password-protect:buttons.title" @draggable="{type:\'parent\'}"></layer-header>\r\n        <layer-view>\r\n        </layer-view>\r\n    </password-protect:password-protect-popup>\r\n</div>'}},function(e,t,r){r(1);e.exports=function(e){"use strict";e=e||{};return'<div name="password-protect">\n    <xbutton name="remove-protect-btn" icon-class="fv__icon-remove-protect" @tooltip></xbutton>\n</div>','<div name="password-protect">\n    <xbutton name="remove-protect-btn" icon-class="fv__icon-remove-protect" @tooltip></xbutton>\n</div>'}}]).default}));