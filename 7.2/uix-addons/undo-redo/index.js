!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("UIExtension"),require("PDFViewCtrl")):"function"==typeof define&&define.amd?define(["UIExtension","PDFViewCtrl"],e):"object"==typeof exports?exports.UIExtension_UndoRedoAddon=e(require("UIExtension"),require("PDFViewCtrl")):t.UIExtension_UndoRedoAddon=e(t.UIExtension,t.PDFViewCtrl)}(self,(function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(1),a=n(2),i=(o=a)&&o.__esModule?o:{default:o};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],a=Object.getOwnPropertyDescriptor(e,r);a&&a.configurable&&void 0===t[r]&&Object.defineProperty(t,r,a)}}(t,e))}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(10)).Deps.jQuery,l=function(){function t(e,n){u(this,t),this.pdfViewer=e,this.controller=n}return t.prototype.init=function(){var t=this.controller;this.pdfViewer.registerMatchRule((function(e,n){return function(e){function n(){return u(this,n),s(this,e.apply(this,arguments))}return c(n,e),n.prototype.setColor=function(n){var o=this,a=this.annot.getBorderColor();return e.prototype.setColor.call(this,n).then((function(e){var n=o.annot.getBorderColor();return t.create("annot",r.ANNOTATION.SETCOLOR,{annot:o.annot,oldColor:a,newColor:n}),e}))},n.prototype.setOpacity=function(n){var o=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a&&i&&t.create("annot",r.ANNOTATION.SETOPACITY,{annot:this.annot,oldOpacity:i.oldValue,newOpacity:i.commitValue});var s=this.annot.getOpacity();return e.prototype.setOpacity.call(this,n).then((function(e){var n=o.annot.getOpacity();return a&&!i&&t.create("annot",r.ANNOTATION.SETOPACITY,{annot:o.annot,oldOpacity:s,newOpacity:n}),e}))},n.prototype.setFillColor=function(n){var o=this,a=this.annot.getStyleFillColor||this.annot.getFillColor,i=a.call(this.annot);return e.prototype.setFillColor.call(this,n).then((function(e){var n=a.call(o.annot);return t.create("annot",r.ANNOTATION.SETFILLCOLOR,{annot:o.annot,oldFillColor:i,newFillColor:n}),e}))},n.prototype.setBorderWidth=function(n){var o=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a&&i&&t.create("annot",r.ANNOTATION.SETBORDERWIDTH,{annot:this.annot,oldBorderWidth:i.oldValue,newBorderWidth:i.commitValue});var s=this.annot.getBorderWidth();return e.prototype.setBorderWidth.call(this,n).then((function(e){var n=o.annot.getBorderWidth();return a&&!i&&t.create("annot",r.ANNOTATION.SETBORDERWIDTH,{annot:o.annot,oldBorderWidth:s,newBorderWidth:n}),e}))},n.prototype.setBorderStyle=function(n,o){var a=this,i=this.annot.getBorderStyleWithParam();return e.prototype.setBorderStyle.call(this,n,o).then((function(e){var n=a.annot.getBorderStyleWithParam();return t.create("annot",r.ANNOTATION.SETBORDERSTYLE,{annot:a.annot,oldBorderStyle:i,newBorderStyle:n}),e}))},n.prototype.setEndingStyle=function(n,o){var a=this,i=void 0,s=(i=n?this.annot.getStartStyle||this.annot.getCalloutLineEndingStyle:this.annot.getEndingStyle).call(this.annot);return e.prototype.setEndingStyle.call(this,n,o).then((function(e){var o=i.call(a.annot);return t.create("annot",r.ANNOTATION.SETENDINGSTYLE,{annot:a.annot,isStart:n,oldStyle:s,newStyle:o}),e}))},n.prototype.enableCaption=function(n){var o=this,a=this.annot.hasCaption();return e.prototype.enableCaption.call(this,n).then((function(e){var n=o.annot.hasCaption();return t.create("annot",r.ANNOTATION.ENABLECAPTION,{annot:o.annot,oldEnableCaption:a,newEnableCaption:n}),e}))},n.prototype.setRotation=function(n){var o=this,a=this.annot.getRotation(),i=this.annot.getRect();return e.prototype.setRotation.call(this,n).then((function(e){var n=o.annot.getRotation(),s=o.annot.getRect();return t.create("annot",r.ANNOTATION.SETROTATION,{annot:o.annot,oldRotation:a,newRotation:n,oldRect:i,newRect:s}),e}))},n.prototype.setHighlightingMode=function(n){var o=this,a=this.annot.getHighlightingMode();return e.prototype.setHighlightingMode.call(this,n).then((function(e){var n=o.annot.getHighlightingMode();return t.create("annot",r.ANNOTATION.SETHIGHLIGHTINGMODE,{annot:o.annot,oldHlMode:a,newHlMode:n}),e}))},n.prototype.removeAnnot=function(){var n=this,o=this.annot.getReplies&&this.annot.getReplies().slice(0);return e.prototype.removeAnnot.call(this).then((function(e){return"sound"===n.annot.info.type||t.create("annot",r.ANNOTATION.REMOVEANNOT,{annot:n.annot,replies:o}),e}))},n.prototype.textBoundaryStart=function(){t.before("annot",r.ANNOTATION.UPDATEQUADPOINTSBYCHARINDEX,{annot:this.annot,oldStart:this.annot.getStartCharIndex(),oldEnd:this.annot.getEndCharIndex()})},n.prototype.textBoundaryEnd=function(){t.after("annot",r.ANNOTATION.UPDATEQUADPOINTSBYCHARINDEX,{annot:this.annot,newStart:this.annot.getStartCharIndex(),newEnd:this.annot.getEndCharIndex()})},n.prototype.onStartUpdateShape=function(n){return"resize"===n&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent()?t.before("annot",r.ANNOTATION.UPDATECALLOUTPOINTS,{annot:this.annot,oldRect:this.annot.getRect(),oldCalloutLinePoints:this.annot.getCalloutLinePoints(),oldInnerRect:this.annot.getInnerRect()}):t.before("annot",r.ANNOTATION.SETRECT,{annot:this.annot,oldRect:this.annot.getRect()}),e.prototype.onStartUpdateShape.apply(this,arguments)},n.prototype.onShapeUpdateEnd=function(n){var o=e.prototype.onShapeUpdateEnd.apply(this,arguments);return"resize"===n&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent()?t.after("annot",r.ANNOTATION.UPDATECALLOUTPOINTS,{annot:this.annot,newRect:this.annot.getRect(),newCalloutLinePoints:this.annot.getCalloutLinePoints(),newInnerRect:this.annot.getInnerRect()}):t.after("annot",r.ANNOTATION.SETRECT,{annot:this.annot,newRect:this.annot.getRect()}),o},n.prototype.boundaryChangeStart=function(e){if("line"===this.annot.getType())switch(d(e.target).data("index")){case 0:case 1:t.before("annot",r.ANNOTATION.UPDATELINEPOINTS,{annot:this.annot,oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()});break;case 2:case 3:t.before("annot",r.ANNOTATION.SETLEADERLINELENGTH,{annot:this.annot,oldLeaderLinePoints:this.annot.getLeaderLinePoints(),oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()})}else t.before("annot",r.ANNOTATION.UPDATEVERTEXES,{annot:this.annot,oldVertexes:this.annot.getVertexes(),oldIndex:d(e.target).data("index")})},n.prototype.boundaryChangeEnd=function(e){var n=d(e.target).data("index")||d(e.target).parent().data("index");if("line"===this.annot.getType())switch(n){case 0:case 1:t.after("annot",r.ANNOTATION.UPDATELINEPOINTS,{annot:this.annot,newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()});break;case 2:case 3:t.after("annot",r.ANNOTATION.SETLEADERLINELENGTH,{annot:this.annot,newLeaderLinePoints:this.annot.getLeaderLinePoints(),newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()})}else t.after("annot",r.ANNOTATION.UPDATEVERTEXES,{annot:this.annot,newVertexes:this.annot.getVertexes(),newIndex:n})},n.prototype.setContent=function(n){var o=this,a=this.annot.getContent();return e.prototype.setContent.call(this,n).then((function(e){var n=o.annot.getContent();if(n!==a)if("freetext"===o.annot.getType()){var i=o.annot.getInnerRect(),s=o.annot.getRect(),c=o.annot.getCalloutLinePoints();t.create("annot",r.ANNOTATION.SETCONTENT,{annot:o.annot,oldContent:a,newContent:n,oldInnerRect:o.oldInnerRect,newInnerRect:i,oldRect:o.oldRect,newRect:s,oldCalloutLinePoints:o.oldCalloutLinePoints,newCalloutLinePoints:c})}else t.create("annot",r.ANNOTATION.SETCONTENT,{annot:o.annot,oldContent:a,newContent:n});return e}))},n.prototype.placeRedact=function(n){return e.prototype.placeRedact.call(this,n).then((function(e){var n=[];return e.map((function(t){var e=t[0];n.push(e)})),t.create("annot",r.ANNOTATION.PLACEREDACT,{redacts:n}),e}))},n.prototype.setDefaultAppearance=function(n,o){var a=this,i=this.annot.getDefaultAppearance();return e.prototype.setDefaultAppearance.call(this,n,o).then((function(e){var n=a.annot.getDefaultAppearance();t.create("annot",r.ANNOTATION.DEFAULTAP,{annot:a.annot,oldDA:i,newDA:n})}))},n}(n)})),this.bindEvent()},t.prototype.bindEvent=function(){var t=this.controller,e=this.pdfViewer;e.eventEmitter.on(i.default.addReplySuccess,(function(e,n){"sound"!==e.info.type&&t.create("annot",r.ANNOTATION.ADDREPLY,{annot:e,replyAnnot:n})})),e.eventEmitter.on(i.default.deleteReplySuccess,(function(e,n){t.create("annot",r.ANNOTATION.DELETEREPLY,{annot:e,replyAnnot:n})})),e.eventEmitter.on(i.default.addActionSuccess,(function(e){t.create("annot",r.ANNOTATION.ADDACTION,{annot:e})})),e.eventEmitter.on(i.default.eraserSuccess,(function(e,n){t.create("annot",r.ANNOTATION.ERASER,{beforeInks:e,afterInks:n})})),e.eventEmitter.on(i.default.addAnnotSuccess,(function(e){t.create("annot",r.ANNOTATION.ADDANNOT,{annot:e})})),e.eventEmitter.on(i.default.applyRedaction,(function(e){t.clear()})),e.eventEmitter.on(i.default.addContentSuccess,(function(e,n,o){t.create("annot",r.ANNOTATION.SETCONTENT,{annot:e,oldContent:n,newContent:o})})),e.eventEmitter.on(i.default.cancelAddAnnot,(function(){t.popUndoStack()})),e.eventEmitter.on("markRedactAnnotSuccess",(function(e){t.create("annot",r.ANNOTATION.MARKREDACTANNOT,{annot:e})})),e.eventEmitter.on("makeRedactByPagesSuccess",(function(e){t.create("annot",r.ANNOTATION.MAKEREDACTBYPAGES,{redacts:e})})),e.eventEmitter.on(i.default.markRedactionSuccess,(function(e){t.create("annot",r.ANNOTATION.MARKCHECKEDRESULTREDACTION,{redacts:e})})),e.eventEmitter.on(i.default.addReviewStateSuccess,(function(e,n){"sound"!==e.info.type&&t.create("annot",r.ANNOTATION.ADDREVIEWSTATE,{annot:e,stateName:n})}))},t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ANNOTATION={SETCOLOR:"ANNOTATIONSETCOLOR",SETOPACITY:"ANNOTATIONSETOPACITY",SETFILLCOLOR:"ANNOTATIONSETFILLCOLOR",SETBORDERWIDTH:"ANNOTATIONSETBORDERWIDTH",SETBORDERSTYLE:"ANNOTATIONSETBORDERSTYLE",SETENDINGSTYLE:"ANNOTATIONSETENDINGSTYLE",ENABLECAPTION:"ANNOTATIONENABLECAPTION",SETROTATION:"ANNOTATIONSETROTATION",SETHIGHLIGHTINGMODE:"ANNOTATIONSETHIGHLIGHTINGMODE",REMOVEANNOT:"REMOVEANNOT",ADDANNOT:"ADDANNOT",SETRECT:"ANNOTATIONSETRECT",UPDATEQUADPOINTSBYCHARINDEX:"UPDATEQUADPOINTSBYCHARINDEX",UPDATECALLOUTPOINTS:"ANNOTATIONUPDATECALLOUTPOINTS",UPDATELINEPOINTS:"ANNOTATIONUPDATELINEPOINTS",SETLEADERLINELENGTH:"ANNOTATIONSETLEADERLINELENGTH",UPDATEVERTEXES:"ANNOTATIONUPDATEVERTEXES",SETCONTENT:"ANNOTATIONSETCONTENT",PLACEREDACT:"ANNOTATIONPLACEREDACT",ADDREPLY:"ANNOTATIONADDREPLY",DELETEREPLY:"ANNOTATIONDELETEREPLY",ADDACTION:"ANNOTATIONADDACTION",ERASER:"ANNOTATIONERASER",MARKREDACTANNOT:"ANNOTATIONMARKREDACTANNOT",MAKEREDACTBYPAGES:"ANNOTATIONMAKEREDACTBYPAGES",MARKCHECKEDRESULTREDACTION:"MARKCHECKEDRESULTREDACTION",ADDREVIEWSTATE:"ADDREVIEWSTATE",DEFAULTAP:"DEFAULTAP"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(8),a=(o=r)&&o.__esModule?o:{default:o};function i(){}i.prototype=a.default,e.default=Object.assign(new i,{addTextMarkupSuccess:"add-text-markup-success",fullscreenchange:"fullscreenchange",appendCommentListGroup:"apppend-commentlist-group",destroyCommentListGroup:"destroy-commentlist-group",appendCommentListComment:"append-commentlist-comment",appendCommentListReply:"append-commentlist-reply",destroyCommentListComment:"destroy-commentlist-comment",destroyCommentListReply:"destroy-commentlist-reply",showThumbnailContextMenu:"show-thumbnail-contextmenu",applicationDestroyed:"uiextension-destroyed",addReplySuccess:"add-reply-success",deleteReplySuccess:"delete-reply-success",addActionSuccess:"add-action-success",addContentSuccess:"add-content-success",markRedactionSuccess:"mark-redaction-success",addReviewStateSuccess:"add-review-state-success",addonLoaded:"pdfui-init-process-addon-loaded",initializationCompleted:"pdfui-intialization-completed",commentGroupAnnotationsUpdated:"pdfui-comment-group-annotations-updated",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page"})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(4)),a=n(5),i=n(22),s=(o=i)&&o.__esModule?o:{default:o};function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],a=Object.getOwnPropertyDescriptor(e,r);a&&a.configurable&&void 0===t[r]&&Object.defineProperty(t,r,a)}}(t,e))}var l=function(t){function e(){return c(this,e),u(this,t.apply(this,arguments))}return d(e,t),e.getName=function(){return"undo-redo"},e.getLoader=function(){return s.default},e.prototype.init=function(e){t.prototype.init.call(this,e),e.getPDFViewer().then((function(t){new a.UndoRedoAddon(t).init()}))},e}(r.UIXAddon);e.default=l},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UndoRedoAddon=void 0;var o,r=n(6),a=(o=r)&&o.__esModule?o:{default:o};e.UndoRedoAddon=a.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n(7)),r=c(n(12)),a=c(n(0)),i=n(21),s=c(n(2));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.prototype.init=function(){var t=this.undoRedoManager=new o.default(this.pdfViewer),e=this.controller=new r.default(this.pdfViewer,t);new a.default(this.pdfViewer,e).init();var n=this.pdfViewer.getKeyboardEventBinder(i.VIEWER_BINDER);n.before(i.KEY_MAP_DOCUMENT_UNDO,(function(t){var e=t.nativeEvent.target;"true"!==e.contentEditable&&"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName&&t.preventDefault()})),n.before(i.KEY_MAP_DOCUMENT_REDO,(function(t){var e=t.nativeEvent.target;"true"!==e.contentEditable&&"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName&&t.preventDefault()})),this.removeUndo=n.on(i.KEY_MAP_DOCUMENT_UNDO,(function(t){var n=t.native.target;"true"!==n.contentEditable&&"TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName&&e.undo()})),this.removeRedo=n.on(i.KEY_MAP_DOCUMENT_REDO,(function(t){var n=t.native.target;"true"!==n.contentEditable&&"TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName&&e.redo()})),this.pdfViewer.eventEmitter.on(s.default.willCloseDocument,(function(){e.clear()}))},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r(n(0));var o=r(n(11));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.controller=n,this.undoStack=new o.default,this.redoStack=new o.default}return t.prototype.storage=function(t){this.undoStack.push(t)},t.prototype.undo=function(){var t=this.undoStack.pop();if(t)return this.redoStack.push(t),t},t.prototype.redo=function(){var t=this.redoStack.pop();if(t)return this.undoStack.push(t),t},t.prototype.removeById=function(t){this.undoStack.filter((function(e){return t!==e.uniqueId})),this.redoStack.filter((function(e){return t!==e.uniqueId}))},t.prototype.clear=function(){this.undoStack.clear(),this.redoStack.clear()},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(9),a=(o=r)&&o.__esModule?o:{default:o};e.default=Object.assign({jrLicenseSuccess:"jr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",renderPageSuccess:"render-page-success",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActionAnnotation:"update-action-annotation",removeActionAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationFailed:"remove-action-annotation-failed",switchStateHandler:"switch-state-handler",redactAnnotRendered:"redact-annot-rendered",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",updateCreatingDistanceAnnot:"distance-creation-update",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",applicationOfInkSign:"application-of-ink-sign",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",disableScroll:"disable-scroll",enableScroll:"enable-scroll",selectText:"select-text",changeEnableJS:"change-enable-js"},a.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationAdd:"annotation-add",annotationImported:"annotation-imported",actionUpdated:"action-updated",actionAdd:"action-add",actionRemove:"action-remove",layerVisibleChange:"layer-visible-change",bookmarkAdded:"bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageRotationChange:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",importPages:"import-pages",applyRedaction:"apply-redaction",removeReviewState:"remove-review-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded"}},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stackArray=[]}return t.prototype.push=function(t){this.stackArray.push(t)},t.prototype.pop=function(){return this.stackArray.pop()},t.prototype.size=function(){return this.stackArray.length},t.prototype.clear=function(){this.stackArray=[]},t.prototype.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(13),a=(o=r)&&o.__esModule?o:{default:o};var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.undoRedoManager=n,this.interpreter={annot:new a.default(e),undo:function(t){t.undo()},redo:function(t){t.redo()}}}return t.prototype.before=function(t,e,n){this.beforeData={type:t,fnName:e,data:n}},t.prototype.after=function(t,e,n){var o=this.beforeData;o.type===t||o.fnName===e?this.create(t,e,Object.assign(o.data,n)):this.beforeData=null},t.prototype.create=function(t,e,n){this.undoRedoManager.storage(this.interpreter[t][e](n)),this.undoRedoManager.getRedoStack().clear()},t.prototype.clear=function(){this.undoRedoManager.clear()},t.prototype.undo=function(){var t=this.undoRedoManager.undo();t&&this.interpreter.undo(t)},t.prototype.redo=function(){var t=this.undoRedoManager.redo();t&&this.interpreter.redo(t)},t.prototype.popUndoStack=function(){this.undoRedoManager.getUndoStack().pop()},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=s(n(14)),a=s(n(16)),i=(n(17),n(19));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.prototype[o.ANNOTATION.SETCOLOR]=function(t){var e=t.annot,n=t.oldColor,o=t.newColor,r=this.pdfViewer;function a(t){return function(){var n=u(r,e);-1===t&&(t=0),n.annot.setBorderColor(t).then((function(){n.updateRender()}))}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.SETOPACITY]=function(t){var e=t.annot,n=t.oldOpacity,o=t.newOpacity,r=this.pdfViewer;function a(t){return function(){var n=u(r,e);n.annot.setOpacity(t).then((function(){n.updateRender()}))}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.SETFILLCOLOR]=function(t){var e=t.annot,n=t.oldFillColor,o=t.newFillColor,r=this.pdfViewer;function a(t){return function(){var n=u(r,e);(n.annot.setStyleFillColor||n.annot.setFillColor).call(n.annot,t)}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.SETBORDERWIDTH]=function(t){var e=t.annot,n=t.oldBorderWidth,o=t.newBorderWidth,r=this.pdfViewer;function a(t){return function(){u(r,e).annot.setBorderWidth(t)}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.SETBORDERSTYLE]=function(t){var e=t.annot,n=t.oldBorderStyle,o=t.newBorderStyle,r=this.pdfViewer;function a(t){return function(){u(r,e).annot.setBorderStyle(t.style,t.param)}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.SETENDINGSTYLE]=function(t){var e=t.annot,n=t.isStart,o=t.oldStyle,r=t.newStyle,a=this.pdfViewer;function i(t){return function(){var o=u(a,e);o.annot.setCalloutLineEndingStyle?o.annot.setCalloutLineEndingStyle(+t).then((function(){o.redraw(),o.activeRect()})):o.annot.setEndingStyle(n,+t).then((function(){o.redraw(),o.activeRect()}))}}return{undo:i(o),redo:i(r)}},t.prototype[o.ANNOTATION.ENABLECAPTION]=function(t){var e=t.annot,n=t.oldEnableCaption,o=t.newEnableCaption,r=this.pdfViewer;function a(t){return function(){u(r,e).annot.enableCaption(t)}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.SETROTATION]=function(t){var e=t.annot,n=t.oldRotation,o=t.newRotation,r=t.oldRect,a=t.newRect,i=this.pdfViewer;function s(t,n){return function(){var o=u(i,e);"screen"===e.getType()?o.annot.setRect(n).then((function(e){e&&o.annot.setRotation((t+360)%360).then((function(){o.activeRect()}))})):o.annot.setRotation((t+360)%360).then((function(){o.activeRect()}))}}return{undo:s(n,r),redo:s(o,a)}},t.prototype[o.ANNOTATION.SETHIGHLIGHTINGMODE]=function(t){var e=t.annot,n=t.oldHlMode,o=t.newHlMode,r=this.pdfViewer;function a(t){return function(){u(r,e).annot.setHighlightingMode(t)}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.REMOVEANNOT]=function(t){var e=t.annot,n=t.replies,o=this.pdfViewer;return{undo:d(e,o,!1,n),redo:l(e,o)}},t.prototype[o.ANNOTATION.ADDANNOT]=function(t){var e=t.annot,n=this.pdfViewer;return{undo:l(e,n),redo:d(e,n,!1,e.replies)}},t.prototype[o.ANNOTATION.UPDATEQUADPOINTSBYCHARINDEX]=function(t){var e=t.annot,n=t.oldStart,o=t.oldEnd,r=t.newStart,a=t.newEnd,i=this.pdfViewer;function s(t,n){return function(){var o=u(i,e);o.annot.updateQuadPointsByCharIndex(t,n).then((function(){o.redraw(),o.isReplace?o.caretAnnot.moveRectByCharIndex(n).then((function(){o.getGroupRenders().map((function(t){t.active()}))})):o.active()}))}}return{undo:s(n,o),redo:s(r,a)}},t.prototype[o.ANNOTATION.SETRECT]=function(t){var e=t.annot,n=t.oldRect,o=t.newRect,r=this.pdfViewer;function a(t){return function(){var n=u(r,e);n.annot.setRect(t).then((function(){n.redraw(),n.active()}))}}return{undo:a(n),redo:a(o)}},t.prototype[o.ANNOTATION.UPDATECALLOUTPOINTS]=function(t){var e=t.annot,n=t.oldRect,o=t.oldCalloutLinePoints,r=t.oldInnerRect,a=t.newRect,i=t.newCalloutLinePoints,s=t.newInnerRect,c=this.pdfViewer;function d(t,n,o){return function(){var r=u(c,e);r.annot._setRect(t,!1).then((function(){r.annot.setInnerRectNoAction(o).then((function(){r.annot.setCalloutLinePoints(n).then((function(){r.annot.update().then((function(){r.redraw(),r.active()}))}))}))}))}}return{undo:d(n,o,r),redo:d(a,i,s)}},t.prototype[o.ANNOTATION.UPDATELINEPOINTS]=function(t){var e=t.annot,n=t.oldStartPoint,o=t.oldEndPoint,r=t.newStartPoint,a=t.newEndPoint,i=this.pdfViewer;function s(t,n){return function(){var o=[],r=u(i,e);o.push(r.annot.setStartPoint(t)),o.push(r.annot.setEndPoint(n)),Promise.all(o).then((function(){r.active()}))}}return{undo:s(n,o),redo:s(r,a)}},t.prototype[o.ANNOTATION.SETLEADERLINELENGTH]=function(t){var e=t.annot,n=t.oldLeaderLinePoints,o=t.oldStartPoint,r=t.oldEndPoint,a=t.newLeaderLinePoints,i=t.newStartPoint,s=t.newEndPoint,c=this.pdfViewer;function d(t,n,o){var r=t.start,a=(t.end,Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))),i=!0;return(o.x-n.x)*(r.y-o.y)-(r.x-o.x)*(o.y-n.y)>0&&(i=!1),i&&(a=-a),function(){var t=u(c,e);t.annot.setLeaderLineLength(a).then((function(){t.active()}))}}return{undo:d(n,o,r),redo:d(a,i,s)}},t.prototype[o.ANNOTATION.UPDATEVERTEXES]=function(t){var e=t.annot,n=t.oldVertexes,o=t.oldIndex,r=t.newVertexes,a=t.newIndex,i=this.pdfViewer;function s(t,n){return function(){var o=u(i,e);o.annot.updateVertexes(t,n[t]).then((function(){o.active()}))}}return{undo:s(o,n),redo:s(a,r)}},t.prototype[o.ANNOTATION.SETCONTENT]=function(t){var e=t.annot,n=t.oldContent,o=t.newContent,r=t.oldInnerRect,a=t.newInnerRect,i=t.oldRect,s=t.newRect,c=t.oldCalloutLinePoints,d=t.newCalloutLinePoints,l=this.pdfViewer;function p(t,n,o,r){return function(){var a=u(l,e);a.annot.setContent(t).then((function(){o&&a.annot.setRect(o).then((function(){n&&a.annot.setInnerRect(n).then((function(){r&&a.annot.setCalloutLinePoints(r).then((function(){a.redraw(),a.active()}))}))}))}))}}return{undo:p(n,r,i,c),redo:p(o,a,s,d)}},t.prototype[o.ANNOTATION.PLACEREDACT]=function(t){var e=t.redacts;return{undo:function(){e.map((function(t){t.getPDFPage().removeAnnot(t)}))},redo:function(){e.map((function(t){var e=new r.default(t).getJson();t.getPDFPage().markRedactAnnot([t.info.rect],e)}))}}},t.prototype[o.ANNOTATION.ADDREPLY]=function(t){var e=t.annot,n=t.replyAnnot,o=this.pdfViewer;return{undo:f(e,n,o),redo:p(e,n,o)}},t.prototype[o.ANNOTATION.DELETEREPLY]=function(t){var e=t.annot,n=t.replyAnnot,o=this.pdfViewer;return{undo:p(e,n,o),redo:f(e,n,o)}},t.prototype[o.ANNOTATION.ADDACTION]=function(t){var e=t.annot,n=this.pdfViewer,o=e.getAction();return{undo:function(){e.removeAction()},redo:function(){!function(t,e){t.setAction(e.type).then((function(){var n=new a.default(e).toJson();return t.setActionData(n).then((function(){return function t(e,n){for(var o=n.subActionCount,r=[],a=function(o){r.push(e.insertSubAction(o,n.subAction[o].type).then((function(){var r=new RecoveryAction(n.subAction[o]).toJson(),a=e.getSubAction(o);return a.setActionData(r).then((function(){return t(a,n.subAction[o])}))})))},i=0;i<o;i++)a(i);return Promise.all(r)}(t.getAction(),e)}))}))}(u(n,e).annot,o.info)}}},t.prototype[o.ANNOTATION.ERASER]=function(t){var e=t.beforeInks,n=t.afterInks,o=this.pdfViewer;return{undo:function(){e.map((function(t){var e=t.annot,n=t.inkList;t.isRemove?d(e,o,!0)().then((function(){u(o,e).annot.setInkList(n)})):u(o,e).annot.setInkList(n)}))},redo:function(){n.map((function(t){var e=t.annot;t.inkList;t.isRemove?l(e,o)():u(o,t.annot).annot.setInkList(t.inkList)}))}}},t.prototype[o.ANNOTATION.MARKREDACTANNOT]=function(t){var e=t.annot,n=this.pdfViewer,o=new r.default(e).getJson();return{undo:l(e,n),redo:function(){e.getPDFPage().markRedactAnnot(o.rects,o).then((function(){u(n,e).active()}))}}},t.prototype[o.ANNOTATION.MAKEREDACTBYPAGES]=function(t){var e=t.redacts,n=(this.pdfViewer,[]);return e.map((function(t){n.push(new r.default(t).getJson())})),{undo:function(){e.map((function(t){t.getPDFPage().removeAnnot(t)}))},redo:function(){e.map((function(t,e){var o=n[e];t.getPDFPage().markRedactAnnot([o.rect],o)}))}}},t.prototype[o.ANNOTATION.MARKCHECKEDRESULTREDACTION]=function(t){var e=t.redacts,n=[];return e.map((function(t){n.push(new r.default(t).getJson())})),{undo:function(){e.map((function(t){t.getPDFPage().removeAnnot(t)}))},redo:function(){e.map((function(t,e){var o=n[e];t.getPDFPage().markRedactAnnot([o.rect],o)}))}}},t.prototype[o.ANNOTATION.ADDREVIEWSTATE]=function(t){var e=t.annot,n=t.stateName,o=(this.pdfViewer,e.getPDFPage()),r=e.getUniqueID();return{undo:function(){o.getAnnotsByIdArray([r]).then((function(t){t[0].removeReviewState()}))},redo:function(){o.getAnnotsByIdArray([r]).then((function(t){t[0].addReviewState(n)}))}}},t.prototype[o.ANNOTATION.DEFAULTAP]=function(t){var e=t.annot,n=t.oldDA,o=t.newDA;return{undo:function(t){return e.setDefaultAppearance(n)},redo:function(t){return e.setDefaultAppearance(o)}}},t}();function u(t,e){var n=e.getUniqueID(),o=e.getPDFPage().getIndex();return t.getAnnotRender(o,n).component}function d(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=[],s=t.getPDFPage();function c(t){var e=[];return a.map((function(n){e.push(t.addReply(n.content).then((function(t){t.setUniqueID(n.id).then((function(){t.setCreateDateTime(n.createTime).then((function(){t.setModifiedDateTime(n.modifiedTime).then((function(){n.reviewStateNames.length>0&&p(t,n.reviewStateNames)}))}))}))})))})),Promise.all(e)}o.map((function(t){var e=t.getReviewStates&&t.getReviewStates()||[],n=[];e.map((function(t){n.push(t.info.state)})),a.push({id:t.getId(),content:t.getContent(),createTime:new Date(t.getCreateDateTime()).getTime(),modifiedTime:new Date(t.getModifiedDateTime()).getTime(),reviewStateNames:n})}));var d=t.getReviewStates&&t.getReviewStates()||[],l=[];function p(t,e){var n=new i.SerialPromise,o=[];return e.map((function(e){o.push((function(){return t.addReviewState(e)}))})),n.serial(o)}d.map((function(t){l.push(t.info.state)}));var f=void 0,h=void 0;return t.isGrouped&&t.isGrouped()?(f=[],t.groupElements.map((function(t,e){f.push(new r.default(t).getJson()),t.isGroupHeader()&&(h=e)}))):f=new r.default(t).getJson(),"redact"===t.getType()?function(){return s.markRedactAnnot(f.rects,f)}:t.isGrouped&&t.isGrouped()?function(){return s.addAnnotGroup(f,h).then((function(){var n=u(e,t);return l.length>0?p(n.annot,l).then((function(){return n})):n})).then((function(t){a.length>0?c(t.annot).then((function(){t.getGroupRenders().map((function(t){!n&&t.active()}))})):t.getGroupRenders().map((function(t){!n&&t.active()}))}))}:function(){return s.addAnnot(f).then((function(){var n=u(e,t);return l.length>0?p(n.annot,l).then((function(){return n})):n})).then((function(t){a.length>0?c(t.annot).then((function(){!n&&t.active()})):!n&&t.active()}))}}function l(t,e){return function(){var n=u(e,t);n.annot.getPDFPage().removeAnnot(n.annot)}}function p(t,e,n){return function(){u(n,t).annot.addReply(e.getContent()).then((function(t){t.setUniqueID(e.getId()).then((function(){t.setCreateDateTime(new Date(e.getCreateDateTime()).getTime()).then((function(){t.setModifiedDateTime(new Date(e.getModifiedDateTime()).getTime())}))}))}))}}function f(t,e,n){return function(){t.getPDFPage().removeAnnot(e)}}e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(15);var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,o.colorConvertor)(e.getBorderColor(),"int");this.json={objNumber:e.info.objNumber,name:e.getUniqueID(),flags:e.info.flag,rect:e.getRect(),color:n,style:e.getBorderStyle(),contents:e.getContent(),date:new Date(e.getModifiedDateTime()).getTime(),type:e.getType()},e.isMarkup()&&this.markup(e);var r=e.getType();switch("strikeout"!==r&&"highlight"!==r&&"squiggly"!==r&&"underline"!==r||this.textMarkup(e),r){case"ink":this.ink(e);break;case"fileattachment":this.fileattachment(e);break;case"polygon":this.polygon(e);break;case"polyline":this.polyline(e);break;case"stamp":this.stamp(e);break;case"freetext":this.freetext(e);break;case"screen":this.screen(e);break;case"line":this.line(e);break;case"redact":this.redact(e);break;case"highlight":this.highlight(e);break;case"link":this.link(e);break;case"square":this.square(e);break;case"circle":this.circle(e)}}return t.prototype.markup=function(t){this.json=Object.assign({intent:t.getIntent(),opacity:t.getOpacity(),subject:t.getSubject(),title:t.getTitle(),creationTimestamp:new Date(t.getCreateDateTime()).getTime()},this.json)},t.prototype.textMarkup=function(t){var e=[];t.getQuadPoints().map((function(t){e.push({top:t[0].y,left:t[0].x,bottom:t[3].y,right:t[3].x})})),this.json=Object.assign(this.json,{coords:e})},t.prototype.ink=function(t){this.json=Object.assign({inkList:t.getInkList(),borderWidth:t.getBorderWidth()},this.json)},t.prototype.fileattachment=function(t){this.json=Object.assign({fObjNum:t.info.fObjNum},this.json)},t.prototype.polygon=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign(this.json,{vertexes:t.getVertexes(),borderStyle:e.style,borderStyleParam:e.param,fillColor:t.info.fillColor,style:void 0,borderWidth:t.getBorderWidth()})},t.prototype.polyline=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign(this.json,{vertexes:t.getVertexes(),fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:e.style,borderStyleParam:e.param,style:void 0,startStyle:t.getStartStyle(),endStyle:t.getEndingStyle()})},t.prototype.stamp=function(t){this.json=Object.assign({icon:t.info.icon,rotate:(t.getRotation()+360)%360,apObjeNum:t.info.apObjeNum},this.json)},t.prototype.freetext=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign(this.json,{calloutLinePoints:t.getCalloutLinePoints(),innerRect:t.getInnerRect(),borderStyle:e.style,borderStyleParam:e.param,style:void 0,"interior-color":t.getFillColor(),borderWidth:t.getBorderWidth(),calloutLineEndingStyle:t.getCalloutLineEndingStyle(),defaultAppearance:t.getDefaultAppearance()})},t.prototype.line=function(t){var e=t.getBorderStyleWithParam(),n=t.getMeasureRatio(),o=t.getMeasureUnit(),r=null;n&&o&&(r={unit:o,ratio:n});var a=t.getStartPoint(),i=t.getEndPoint();this.json=Object.assign(this.json,{styleFillColor:t.info.styleFillColor,startStyle:t.getStartStyle(),endStyle:t.getEndingStyle(),enableCaption:t.hasCaption(),startPoint:{x:a.x,y:a.y},endPoint:{x:i.x,y:i.y},measure:r,borderWidth:t.getBorderWidth(),borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.screen=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign({apObjNum:t.info.apObjNum,opacity:t.getOpacity(),rotate:{0:0,90:1,180:2,270:3}[t.getRotation()],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,borderWidth:t.getBorderWidth(),intensity:e.param},this.json)},t.prototype.redact=function(t){var e=t.info.quadPoints,n=[];e.length>0?e.map((function(t){n.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):n.push(t.info.rect),this.json=Object.assign(this.json,{rects:n,applyFillColor:t.info.applyFillColor})},t.prototype.highlight=function(t){t.info.isArea&&(this.json=Object.assign(this.json,{coords:[t.getRect()],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},t.prototype.link=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign(this.json,{aObjNum:t.info.aObjNum,borderStyle:e.style,borderStyleParam:e.param,style:void 0,borderWidth:t.getBorderWidth()})},t.prototype.circle=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.square=function(t){var e=t.getBorderStyleWithParam();this.json=Object.assign(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.getJson=function(){return this.json},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.convertFromNumberToHex=function(t){if("number"!=typeof t)throw new TypeError("Unexpected color value:"+t);if(t<0)return-1;var e=t.toString(16),n=6;t>16777215&&(n=8);for(;e.length<n;)e="0"+e;return"#"+e},e.convertFromNumberToRGBA=function(t){var e=void 0;t<16777216?e=255:(e=t/r&255,t&=16777215);return{r:t>>16&255,g:t>>8&255,b:255&t,a:e}},e.colorConvertor=function(t){var e,n,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i="",s=void 0;"number"==typeof t&&(t=["int",t]);switch(t[0]){case"int":e=(16711680&t[1])>>16,n=(65280&t[1])>>8,o=255&t[1];break;case"T":e=0,n=0,o=0,a=0;break;case"G":e=n=o=255*t[1];break;case"RGB":e=255*t[1],n=255*t[2],o=255*t[3];break;case"CMYK":e=(1-t[4])*(1-t[1])*255,n=(1-t[4])*(1-t[2])*255,o=(1-t[4])*(1-t[3])*255;break;case"r":s=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/),e=+s[1],n=+s[2],o=+s[3];break;case"#":var c=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;s=t.match(c),e=parseInt(s[1],16),n=parseInt(s[2],16),o=parseInt(s[3],16);break;default:throw new Error("Unsupported color format")}switch(r){case"HTML":i=e===n&&n===o&&-1===o?"transparent":"rgba("+parseInt(e)+","+parseInt(n)+","+parseInt(o)+","+a+")";break;case"RGB":i=["RGB",e/255,n/255,o/255];break;case"#":i+=e<16?"#0"+e.toString(16):"#"+e.toString(16),i+=n<16?"0"+n.toString(16):n.toString(16),i+=o<16?"0"+o.toString(16):o.toString(16);break;case"int":i=0,i|=(a*=255)<<24,i|=e<<16,i|=n<<8,i|=o,i>>>=0}return i},e.standardColorAsARGBNumber=function(t){if(t<=16777215)return 4278190080+t;if(t>16777215)return t;if("string"==typeof t){if((t=t.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(t,16);if(t.match(/^[0-9A-F]{6}$/i))return 4278190080+parseInt(t,16);if(t.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){var e=t.split(/\D+/).map((function(t){return parseInt(t)})),n=o(e,4),r=n[1],a=n[2],i=n[3];return 4278190080+(r<<16)+(a<<8)+i}if(t.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){var s=t.split(/\D+/).map((function(t){return parseInt(t)})),c=o(s,5),u=c[1],d=c[2],l=c[3],p=c[4];return Math.floor(4278190080*p)+(u<<16)+(d<<8)+l}}throw new Error('incorrect color format: "'+t+'"')},e.convertFromNumberToJSColor=function(t){return["RGB",((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255]};var r=Math.pow(2,24)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=e,this.json={},this[e.type]()}return t.prototype.TypeGoto=function(){var t=this.action.destination;this.json=Object.assign(t,{type:t.zoomMode})},t.prototype.TypeURI=function(){var t=this.action.uri;this.json=Object.assign({},{uri:t})},t.prototype.TypeJavaScript=function(){var t=this.action.javascript;this.json=Object.assign({},{script:t})},t.prototype.TypeNamed=function(){var t=this.action.name;this.json=Object.assign({},{name:t})},t.prototype.TypeHide=function(){var t=this.action,e=t.fieldNames,n=t.hideState;this.json=Object.assign({},{fieldNames:e,hideState:n})},t.prototype.TypeSubmitForm=function(){var t=this.action,e=t.flags,n=t.url,o=t.fieldNames;this.json=Object.assign({},{flags:e,url:n,fieldNames:o})},t.prototype.TypeResetForm=function(){var t=this.action,e=t.flags,n=t.fieldNames;this.json=Object.assign({},{flags:e,fieldNames:n})},t.prototype.TypeGoToR=function(){var t=this.action,e=t.destinationName,n=t.destination;this.json=Object.assign({},{destinationName:e,destination:n})},t.prototype.toJson=function(){return this.json},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(18);Object.defineProperty(e,"MARKUP_ANNOTATION_STATE",{enumerable:!0,get:function(){return(t=o,t&&t.__esModule?t:{default:t}).default;var t}});e.BORDER_STYLE={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5},e.POINT_TYPE={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},e.Intents={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"};var r=e.LineEndingName={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"};e.LineEndingStyle=Object.keys(r).reduce((function(t,e){return t[r[e]]=Number(e),t}),{}),e.LINE_CAPTION_POSITION={POS_INLINE:0,POS_TOP:1},e.AnnotFlagsName={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},e.PDFDocPermission={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},e.MeasureType={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},e.STORE_NAMES={SELECTION_INFO:"viewer--store-selection-info"},e.CREATING_MEASUREMENT_CONTEXTMENU="creating-measurement-contextmenu",e.HIGHLIGHTING_MODE={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",NONE:"none"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialPromise=e.DebounceAsyncTaskExecutor=e.DebouncePromiseQueue=void 0;var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=n(20),i=(o=a)&&o.__esModule?o:{default:o};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){},u=function(){function t(){s(this,t),this.queue=[],this.promise=Promise.resolve()}return t.prototype.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.queue.push([t,e]),this.exec()},t.prototype.exec=function(){var t=this;if(!this.execIng){var e=this.queue.pop();if(e){this.execIng=!0;for(var n=0,o=this.queue.length;n<o;n++)this.queue[n][1]();return this.queue=[],Promise.resolve(e[0]()).catch((function(){e[1]()})).finally((function(){t.execIng=!1,setTimeout((function(){t.exec()}),30)}))}}},t.prototype.end=function(){this.queue=[]},t}(),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;s(this,t),this.interval=e,this.status=t.STATUS_IDLE,this.defer=(0,i.default)(),this.lastTaskPromise=null,this.cancelLast=c}return r(t,null,[{key:"STATUS_IDLE",get:function(){return"idle"}},{key:"STATUS_RUNNING",get:function(){return"running"}},{key:"STATUS_READY",get:function(){return"ready"}}]),t.prototype.exec=function(e,n,o){var r=this;switch(this.status){case t.STATUS_IDLE:case t.STATUS_READY:this.cancelLast();var a=setTimeout((function(a){r.status=t.STATUS_RUNNING;var s=r.defer,c=s.resolve,u=s.reject,d=function(){r.status=t.STATUS_IDLE,r.defer=(0,i.default)()};try{var l=e.apply(o,n||[]);l instanceof Promise?l.finally(d).then(c,u):(c(l),d())}catch(t){u(t)}}),this.interval);this.cancelLast=function(){clearTimeout(a)};break;case t.STATUS_RUNNING:var s=function(){switch(r.status){case t.STATUS_IDLE:r.status=t.STATUS_READY}return r.exec(e,n,o)};return this.lastTaskPromise=this.defer.promise.then(s,s)}return this.lastTaskPromise=this.defer.promise},t.prototype.waitForLastTask=function(t){return this.lastTaskPromise||Promise.resolve(t)},t}(),l=function(){function t(){s(this,t),this.queue=[],this.continueExec=!0,this.deferred=(0,i.default)()}return t.prototype.serial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.queue=t,this.exec(),this.deferred.promise},t.prototype.push=function(){this.queue.push.apply(this.queue,arguments)},t.prototype.unshift=function(){this.queue.unshift.apply(this.queue,arguments)},t.prototype.concat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.queue.concat(t)},t.prototype.exec=function(){var t=this;if(!this.execIng){this.execIng=!0;var e=(this.queue.shift()||c)();return Promise.resolve(e).finally((function(){return t.execIng=!1,t.queue.length?t.continueExec?void setTimeout((function(){t.exec()}),30):(t.queue=[],t.deferred.resolve(e)):t.deferred.resolve(e)})),this.deferred.promise}},t.prototype.end=function(){return this.continueExec=!1,this.deferred.promise},t}();e.DebouncePromiseQueue=u,e.DebounceAsyncTaskExecutor=d,e.SerialPromise=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KEY_MAP_SELECT_ALL_ANNOTATIONS="selectAllAnnotations",e.KEY_MAP_POLYLINE_DELETE_LAST_POINT="createPolyline_DeleteLastPoint",e.KEY_MAP_DOCUMENT_UNDO="undo",e.KEY_MAP_DOCUMENT_REDO="redo",e.KEY_MAP_ZOOM_IN="pageZoomIn",e.KEY_MAP_ZOOM_OUT="pageZoomOut",e.KEY_MAP_DELETE_ANNOTATION="delete-annotation",e.KEY_MAP_ESC_CREATING_DRAWING="cancel-creating-drawing-annot",e.KEY_MAP_UNACTIVE_ANNOTATION="unactive-annotation",e.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT="unfocus-from-editting-text-object",e.KEY_MAP_FIELD_TAB_NEXT="FIELD_TAB_ACTION",e.GLOBAL_BINDER="global-keyboard-event-binder",e.VIEWER_BINDER="pdf-viewer-keyboard-event-binder",e.ANNOTATION_PROPERTIES_BINDER="annotation-properties-keyboard-event-binder",e.ACTIVATION_ANNOTATION_BINDER="activation-annotation-keyboard-event-binder",e.DOCUMENT_PROPERTIES_BINDER="document-properties-keyboard-event-binder",e.FOCUS_ELEMENT_BINDER="focus-element-keyboard-event-binder",e.EDIT_TEXT_OBJECT_BINDER="focus-text-object-event-binder",e.ANNOTATION_CREATING_BINDER="create-annotation-keyboard-event-binder"},function(t,e){t.exports=null}]).default}));